import{t as W,a as G,d as gr,c as Sr}from"../chunks/BW_uuqYd.js";import{h as Te,j as mi,ao as pi,ap as Zo,s as Yo,b as vi,q as gi,a as Ys,c as Gt,U as Qo,B as b,A as el,k as tl,r as wn,m as Ss,o as Os,af as rl,p as yi,ai as _i,i as sl,G as al,aq as Sn,ar as Ps,T as On,as as Qs,at as Pn,au as nl,a6 as il,av as ol,d as ll,aw as ea,ax as cl,ad as dl,Q as ul,O as fl,ay as bi,w as Vs,az as hl,aA as ml,aB as pl,aC as vl,aD as gl,aE as yl,v as ta,aF as $i,ab as _l,u as bl,t as Ei,a0 as ke,al as q,a3 as A,a4 as I,a2 as Ie,F as O,a1 as oe,f as Ee,a5 as M,an as Ft,e as Zt,n as $l,D as ss,aG as rt,am as Or}from"../chunks/BR6Ppc7r.js";import{a as El,l as as,s as fe,d as Ge,r as St,e as Ns}from"../chunks/DGKUpH78.js";import{p as _e,i as te,b as At}from"../chunks/B4Kb8VzQ.js";import{o as Yt,c as wl}from"../chunks/CiywXm7k.js";import{w as Sl,g as Xt}from"../chunks/C_RPgc-Z.js";import{s as Ol}from"../chunks/ggw39AiR.js";function wi(e,t,r){Te&&mi();var s=e,a=Qo,o,l=pi()?Zo:Yo;vi(()=>{l(a,a=t())&&(o&&gi(o),o=Ys(()=>r(s)))}),Te&&(s=Gt)}function Nr(e,t){return t}function Pl(e,t,r,s){for(var a=[],o=t.length,l=0;l<o;l++)nl(t[l].e,a,!0);var f=o>0&&a.length===0&&r!==null;if(f){var d=r.parentNode;il(d),d.append(r),s.clear(),wt(e,t[0].prev,t[o-1].next)}ol(a,()=>{for(var c=0;c<o;c++){var p=t[c];f||(s.delete(p.k),wt(e,p.prev,p.next)),ll(p.e,!f)}})}function Qt(e,t,r,s,a,o=null){var l=e,f={flags:t,items:new Map,first:null},d=(t&bi)!==0;if(d){var c=e;l=Te?Ss(ul(c)):c.appendChild(fl())}Te&&mi();var p=null,v=!1,E=el(()=>{var $=r();return sl($)?$:$==null?[]:_i($)});vi(()=>{var $=b(E),g=$.length;if(v&&g===0)return;v=g===0;let _=!1;if(Te){var n=l.data===tl;n!==(g===0)&&(l=wn(),Ss(l),Os(!1),_=!0)}if(Te){for(var i=null,u,h=0;h<g;h++){if(Gt.nodeType===8&&Gt.data===rl){l=Gt,_=!0,Os(!1);break}var y=$[h],S=s(y,h);u=Si(Gt,f,i,null,y,S,h,a,t,r),f.items.set(S,u),i=u}g>0&&Ss(wn())}Te||Nl($,f,l,a,t,s,r),o!==null&&(g===0?p?yi(p):p=Ys(()=>o(l)):p!==null&&gi(p,()=>{p=null})),_&&Os(!0),b(E)}),Te&&(l=Gt)}function Nl(e,t,r,s,a,o,l){var H,Z,le,ie;var f=(a&hl)!==0,d=(a&(ea|Qs))!==0,c=e.length,p=t.items,v=t.first,E=v,$,g=null,_,n=[],i=[],u,h,y,S;if(f)for(S=0;S<c;S+=1)u=e[S],h=o(u,S),y=p.get(h),y!==void 0&&((H=y.a)==null||H.measure(),(_??(_=new Set)).add(y));for(S=0;S<c;S+=1){if(u=e[S],h=o(u,S),y=p.get(h),y===void 0){var k=E?E.e.nodes_start:r;g=Si(k,t,g,g===null?t.first:g.next,u,h,S,s,a,l),p.set(h,g),n=[],i=[],E=g.next;continue}if(d&&kl(y,u,S,a),y.e.f&Ps&&(yi(y.e),f&&((Z=y.a)==null||Z.unfix(),(_??(_=new Set)).delete(y))),y!==E){if($!==void 0&&$.has(y)){if(n.length<i.length){var R=i[0],j;g=R.prev;var D=n[0],B=n[n.length-1];for(j=0;j<n.length;j+=1)Nn(n[j],R,r);for(j=0;j<i.length;j+=1)$.delete(i[j]);wt(t,D.prev,B.next),wt(t,g,D),wt(t,B,R),E=R,g=B,S-=1,n=[],i=[]}else $.delete(y),Nn(y,E,r),wt(t,y.prev,y.next),wt(t,y,g===null?t.first:g.next),wt(t,g,y),g=y;continue}for(n=[],i=[];E!==null&&E.k!==h;)E.e.f&Ps||($??($=new Set)).add(E),i.push(E),E=E.next;if(E===null)continue;y=E}n.push(y),g=y,E=y.next}if(E!==null||$!==void 0){for(var V=$===void 0?[]:_i($);E!==null;)E.e.f&Ps||V.push(E),E=E.next;var F=V.length;if(F>0){var X=a&bi&&c===0?r:null;if(f){for(S=0;S<F;S+=1)(le=V[S].a)==null||le.measure();for(S=0;S<F;S+=1)(ie=V[S].a)==null||ie.fix()}Pl(t,V,X,p)}}f&&Vs(()=>{var Se;if(_!==void 0)for(y of _)(Se=y.a)==null||Se.apply()}),On.first=t.first&&t.first.e,On.last=g&&g.e}function kl(e,t,r,s){s&ea&&Pn(e.v,t),s&Qs?Pn(e.i,r):e.i=r}function Si(e,t,r,s,a,o,l,f,d,c){var p=(d&ea)!==0,v=(d&cl)===0,E=p?v?al(a):Sn(a):a,$=d&Qs?Sn(l):l,g={i:$,v:E,k:o,a:null,e:null,prev:r,next:s};try{return g.e=Ys(()=>f(e,E,$,c),Te),g.e.prev=r&&r.e,g.e.next=s&&s.e,r===null?t.first=g:(r.next=g,r.e.next=g.e),s!==null&&(s.prev=g,s.e.prev=g.e),g}finally{}}function Nn(e,t,r){for(var s=e.next?e.next.e.nodes_start:r,a=t?t.e.nodes_start:r,o=e.e.nodes_start;o!==s;){var l=dl(o);a.before(o),o=l}}function wt(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Oi(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Oi(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Il(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Oi(e))&&(s&&(s+=" "),s+=t);return s}function kn(e){return typeof e=="object"?Il(e):e??""}const In=[...` 	
\r\fÂ \v\uFEFF`];function Al(e,t,r){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),r){for(var a in r)if(r[a])s=s?s+" "+a:a;else if(s.length)for(var o=a.length,l=0;(l=s.indexOf(a,l))>=0;){var f=l+o;(l===0||In.includes(s[l-1]))&&(f===s.length||In.includes(s[f]))?s=(l===0?"":s.substring(0,l))+s.substring(f+1):l=f}}return s===""?null:s}function ye(e,t,r,s,a,o){var l=e.__className;if(Te||l!==r||l===void 0){var f=Al(r,s,o);(!Te||f!==e.getAttribute("class"))&&(f==null?e.removeAttribute("class"):e.className=f),e.__className=r}else if(o&&a!==o)for(var d in o){var c=!!o[d];(a==null||c!==!!a[d])&&e.classList.toggle(d,c)}return o}const Tl=Symbol("is custom element"),Cl=Symbol("is html");function Ue(e){if(Te){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var s=e.value;ve(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var a=e.checked;ve(e,"checked",null),e.checked=a}}};e.__on_r=r,ml(r),El()}}function Rl(e,t){var r=ra(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function jl(e,t){var r=ra(e);r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function ve(e,t,r,s){var a=ra(e);Te&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=r)&&(t==="loading"&&(e[pl]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Dl(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function ra(e){return e.__attributes??(e.__attributes={[Tl]:e.nodeName.includes("-"),[Cl]:e.namespaceURI===vl})}var An=new Map;function Dl(e){var t=An.get(e.nodeName);if(t)return t;An.set(e.nodeName,t=[]);for(var r,s=e,a=Element.prototype;a!==s;){r=yl(s);for(var o in r)r[o].set&&t.push(o);s=gl(s)}return t}function st(e,t,r=t){var s=pi();as(e,"input",a=>{var o=a?e.defaultValue:e.value;if(o=Is(e)?As(o):o,r(o),s&&o!==(o=t())){var l=e.selectionStart,f=e.selectionEnd;e.value=o??"",f!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(f,e.value.length))}}),(Te&&e.defaultValue!==e.value||bl(t)==null&&e.value)&&r(Is(e)?As(e.value):e.value),ta(()=>{var a=t();Is(e)&&a===As(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}const ks=new Set;function Ot(e,t,r,s,a=s){var o=r.getAttribute("type")==="checkbox",l=e;let f=!1;if(t!==null)for(var d of t)l=l[d]??(l[d]=[]);l.push(r),as(r,"change",()=>{var c=r.__value;o&&(c=Tn(l,c,r.checked)),a(c)},()=>a(o?[]:null)),ta(()=>{var c=s();if(Te&&r.defaultChecked!==r.checked){f=!0;return}o?(c=c||[],r.checked=c.includes(r.__value)):r.checked=$i(r.__value,c)}),_l(()=>{var c=l.indexOf(r);c!==-1&&l.splice(c,1)}),ks.has(l)||(ks.add(l),Vs(()=>{l.sort((c,p)=>c.compareDocumentPosition(p)===4?-1:1),ks.delete(l)})),Vs(()=>{if(f){var c;if(o)c=Tn(l,c,r.checked);else{var p=l.find(v=>v.checked);c=p==null?void 0:p.__value}a(c)}})}function Tn(e,t,r){for(var s=new Set,a=0;a<e.length;a+=1)e[a].checked&&s.add(e[a].__value);return r||s.delete(t),Array.from(s)}function Is(e){var t=e.type;return t==="number"||t==="range"}function As(e){return e===""?null:+e}function Ll(e,t,r=t){as(e,"change",()=>{r(e.files)}),Te&&e.files&&r(e.files),ta(()=>{e.files=t()})}function Pi(e,t,r){if(e.multiple)return Vl(e,t);for(var s of e.options){var a=yr(s);if($i(a,t)){s.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Ml(e,t){Ei(()=>{var r=new MutationObserver(()=>{var s=e.__value;Pi(e,s)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function Ni(e,t,r=t){var s=!0;as(e,"change",a=>{var o=a?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(o),yr);else{var f=e.querySelector(o)??e.querySelector("option:not([disabled])");l=f&&yr(f)}r(l)}),Ei(()=>{var a=t();if(Pi(e,a,s),s&&a===void 0){var o=e.querySelector(":checked");o!==null&&(a=yr(o),r(a))}e.__value=a,s=!1}),Ml(e)}function Vl(e,t){for(var r of e.options)r.selected=~t.indexOf(yr(r))}function yr(e){return"__value"in e?e.__value:e.value}function Pt(e){if(e!==void 0)return JSON.parse(JSON.stringify(e))}function Xr(e){return e===void 0?null:e}function Wr(e){return typeof e=="object"&&e!==null&&e!==void 0}function ns(e){const t=ki(e);return Ii(t)}function ki(e){return Object.keys(e).forEach(t=>{Array.isArray(e[t])&&(e[t]=e[t].filter(r=>r!==null&&r!=="")),e[t]&&typeof e[t]=="object"?ki(e[t]):(e[t]===null||e[t]==="")&&delete e[t]}),e}function Ii(e){return Object.keys(e).forEach(t=>{e[t]&&typeof e[t]=="object"&&(Ii(e[t]),Object.keys(e[t]).length===0&&delete e[t])}),e}function sa(e){return e instanceof jo?JSON.stringify(e.errors.length===1?e.errors[0]:e.errors,null,2):(console.error(e),e.message)}function Fl(e){return"minimum"in e&&e.minimum!==void 0?Number(e.minimum):"exclusiveMinimum"in e&&e.exclusiveMinimum!==void 0?Number(e.exclusiveMinimum)+1:null}function xl(e){return"maximum"in e&&e.maximum!==void 0?Number(e.maximum):"exclusiveMaximum"in e&&e.exclusiveMaximum!==void 0?Number(e.exclusiveMaximum)-1:null}function Ai(e){return"minItems"in e&&typeof e.minItems=="number"&&"maxItems"in e&&typeof e.maxItems=="number"&&e.minItems===e.maxItems}function Ti(e,t){const r=e.properties||{};if(e.additionalProperties)for(const s of Object.keys(t))Object.keys(r).includes(s)||(r[s]=e.additionalProperties);return r}function zl(e,t){const r=e.properties||{};return!Object.keys(r).includes(t)}function Zr(e){return e?["input_paths","output_path","metadata","component"]:["zarr_url","zarr_urls","init_args","zarr_dir"]}function ql(e,t,r=void 0){const s=r==null||Object.keys(r).length===0;return Ze(e,t,!0,r,s)}function Ul(e,t,r,s){const a=e.required||[],o={};r==null&&(r={});const l=Ti(e,r);for(const[f,d]of Object.entries(l)){const c=a.includes(f);o[f]=Ze(d,t,c,Xr(r[f]),s)}return o}function Ze(e,t,r,s,a){if(!e)return null;if(a&&"default"in e)return Ze(e,t,r,e.default,!1);if(e.type===null)return null;switch(e.type){case"object":return Ul(e,t,s,a);case"array":{const o=e;return Ai(o)?Gl(o,t,r,s,a):Hl(o,t,r,s,a)}default:return Xr(s)}}function Hl(e,t,r,s,a){Array.isArray(s)||(s=[]);const o=e.items;let l=[];for(let f=0;f<s.length;f++)l.push(Ze(o,t,r,s[f],a));if(r&&typeof e.minItems=="number"&&l.length<e.minItems)for(let f=l.length;f<e.minItems;f++)l.push(Ze(o,t,r,null,a));return l}function Gl(e,t,r,s,a){if(Array.isArray(s)||(s=[]),!r&&s.length===0)return s;let o=[];for(let f=0;f<s.length;f++)o.push(Ze(Cn(e,t,f),t,r,s[f],a));const l=e.minItems;for(let f=o.length;f<l;f++)o.push(Ze(Cn(e,t,f),t,!1,null,a));return o.length>l&&(console.warn("Tuple initial value has more items than allowed (%d)",l,s),o.splice(l,o.length)),o}function Cn(e,t,r){const s=t==="pydantic_v1"?e.items:e.prefixItems;return Array.isArray(s)?r<s.length?s[r]:(console.warn("Unable to retrieve tuple child on index %d",r),null):s}class is{constructor(t){this.manager=t.manager,this.id=t.id,this.key=t.key,this.type=t.type,this.title=t.title,this.required=t.required,this.description=t.description,this.removable=t.removable,this.property=t.property}notifyChange(){this.manager.notifyChange()}}class kr extends is{constructor(t){super(t),this.value=Sl(t.value)}}class Jl extends kr{constructor(t){super(t)}}class Kl extends kr{constructor(t){super(t)}}class Bl extends kr{constructor(t){super(t),this.options=t.options}}class Rn extends kr{constructor(t){super(t),this.min=t.min,this.max=t.max,this.badInput=!1}}class Xl extends is{constructor(t){super(t),this.additionalProperties=t.additionalProperties,this.children=t.children,this.collapsed=!t.required}addChild(t){if(!this.additionalProperties)return;if(t==="")throw new Error("Schema property has no name");if(this.children.map(a=>a.key).includes(t))throw new Error("Schema property already has a property with the same name");const s=this.manager.createFormElement({key:t,property:this.additionalProperties,required:!1,removable:!0,value:Ze(this.additionalProperties,this.manager.schemaVersion,!1,this.additionalProperties.default,!1)});s.title=t,s.removable=!0,this.children=[...this.children,s],this.notifyChange()}removeChild(t){if(!this.additionalProperties){console.warn("Attempted to call remove child on element without additional properties");return}const r=this.children.filter(a=>a.key===t);if(r.length===0){console.warn("Attempted to remove not existing key %s",t);return}const[s]=r;if(!s.removable){console.warn("Attempted to remove not removable child");return}this.children=this.children.filter(a=>a.key!==t),this.notifyChange()}resetChild(t){const r=this.children[t],s=r.property.default;if(s===void 0)return;const a=this.manager.createFormElement({key:r.key,property:r.property,required:r.required,removable:r.removable,value:s});a.collapsed=r.collapsed,this.children[t]=a,this.notifyChange()}}class Wl extends is{constructor(t){super(t),this.children=t.children,this.items=t.items,this.minItems=t.minItems,this.maxItems=t.maxItems,this.collapsed=!t.required}addChild(){if(typeof this.maxItems=="number"&&this.children.length===this.maxItems)return;const t=this.manager.createFormElement({key:null,property:this.items,required:!1,removable:!0,value:Ze(this.items,this.manager.schemaVersion,!1,void 0,!0)});this.children=[...this.children,t],this.notifyChange()}removeChild(t){this.children.splice(t,1),this.notifyChange()}moveChildUp(t){if(t>0){let r=[];for(let s=0;s<this.children.length;s++)s===t-1?r[s]=this.children[s+1]:s===t?r[s]=this.children[s-1]:r[s]=this.children[s];this.children=r,this.notifyChange()}}moveChildDown(t){if(t<this.children.length-1){let r=[];for(let s=0;s<this.children.length;s++)s===t?r[s]=this.children[s+1]:s===t+1?r[s]=this.children[s-1]:r[s]=this.children[s];this.children=r,this.notifyChange()}}}class Zl extends is{constructor(t){super(t),this.children=t.children,this.items=t.items,this.size=t.size,this.collapsed=!t.required}addTuple(){let t;if(Array.isArray(this.items))t=this.items.map((r,s)=>Ze(r,this.manager.schemaVersion,!1,Array.isArray(this.property.default)?this.property.default[s]:void 0,!1));else{const r=this.items;t=Array(this.size).map(s=>Ze(r,this.manager.schemaVersion,!1,Array.isArray(this.property.default)?this.property.default[s]:void 0,!1))}this.children=this.manager.createTupleChildren({items:this.items,size:this.size,value:t}),this.notifyChange()}removeTuple(){this.children=[],this.notifyChange()}}function Ci(e,t=[]){let r=Ri(e,t);return r=Ur(r,r),r=Fs(r),r}function Ri(e,t=[]){const r=Pt(e);for(const s of Object.keys(r.properties||{}))t.includes(s)&&delete r.properties[s];return r.required&&(r.required=r.required.filter(s=>!t.includes(s))),r}function Ur(e,t){if(Array.isArray(t)){const r=[];for(const s of t)r.push(Ur(e,s));return r}else if(Wr(t)){const r={};for(const[s,a]of Object.entries(t))if(s==="$ref"&&typeof a=="string"){const o=Yl(e,a);for(const[l,f]of Object.entries(o))r[l]=Ur(e,f)}else r[s]=Ur(e,a);return r}else return t}function Yl(e,t){if(!t.startsWith("#/"))throw new Error(`Unsupported $ref field format: ${t}`);const r=t.substring(2).split("/");let s=e;for(const a of r){if(!(a in s))throw new Error(`Unable to resolve reference ${t}. Key ${a} not found.`);s=s[a]}return s}function Fs(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(Fs(r));return t}else if(Wr(e)){const t={};for(const[r,s]of Object.entries(e))if(r==="allOf"&&Array.isArray(s))for(const a of s)for(const[o,l]of Object.entries(a))Ql(t,o,l);else t[r]=Fs(s);return t}else return e}function Ql(e,t,r){t in e?Array.isArray(e[t])&&Array.isArray(r)?e[t]=[...e[t],...r]:Wr(e)&&Wr(r)&&(e[t]={...e[t],...r}):e[t]=r}var ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xs={exports:{}},na={},He={},Wt={},Ir={},re={},Pr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(u){if(super(),!e.IDENTIFIER.test(u))throw new Error("CodeGen: name must be a valid identifier");this.str=u}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class s extends t{constructor(u){super(),this._items=typeof u=="string"?[u]:u}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const u=this._items[0];return u===""||u==='""'}get str(){var u;return(u=this._str)!==null&&u!==void 0?u:this._str=this._items.reduce((h,y)=>`${h}${y}`,"")}get names(){var u;return(u=this._names)!==null&&u!==void 0?u:this._names=this._items.reduce((h,y)=>(y instanceof r&&(h[y.str]=(h[y.str]||0)+1),h),{})}}e._Code=s,e.nil=new s("");function a(i,...u){const h=[i[0]];let y=0;for(;y<u.length;)f(h,u[y]),h.push(i[++y]);return new s(h)}e._=a;const o=new s("+");function l(i,...u){const h=[$(i[0])];let y=0;for(;y<u.length;)h.push(o),f(h,u[y]),h.push(o,$(i[++y]));return d(h),new s(h)}e.str=l;function f(i,u){u instanceof s?i.push(...u._items):u instanceof r?i.push(u):i.push(v(u))}e.addCodeArg=f;function d(i){let u=1;for(;u<i.length-1;){if(i[u]===o){const h=c(i[u-1],i[u+1]);if(h!==void 0){i.splice(u-1,3,h);continue}i[u++]="+"}u++}}function c(i,u){if(u==='""')return i;if(i==='""')return u;if(typeof i=="string")return u instanceof r||i[i.length-1]!=='"'?void 0:typeof u!="string"?`${i.slice(0,-1)}${u}"`:u[0]==='"'?i.slice(0,-1)+u.slice(1):void 0;if(typeof u=="string"&&u[0]==='"'&&!(i instanceof r))return`"${i}${u.slice(1)}`}function p(i,u){return u.emptyStr()?i:i.emptyStr()?u:l`${i}${u}`}e.strConcat=p;function v(i){return typeof i=="number"||typeof i=="boolean"||i===null?i:$(Array.isArray(i)?i.join(","):i)}function E(i){return new s($(i))}e.stringify=E;function $(i){return JSON.stringify(i).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=$;function g(i){return typeof i=="string"&&e.IDENTIFIER.test(i)?new s(`.${i}`):a`[${i}]`}e.getProperty=g;function _(i){if(typeof i=="string"&&e.IDENTIFIER.test(i))return new s(`${i}`);throw new Error(`CodeGen: invalid export name: ${i}, use explicit $id name mapping`)}e.getEsmExportName=_;function n(i){return new s(i.toString())}e.regexpCode=n})(Pr);var zs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Pr;class r extends Error{constructor(c){super(`CodeGen: "code" for ${c} not defined`),this.value=c.value}}var s;(function(d){d[d.Started=0]="Started",d[d.Completed=1]="Completed"})(s||(e.UsedValueState=s={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class a{constructor({prefixes:c,parent:p}={}){this._names={},this._prefixes=c,this._parent=p}toName(c){return c instanceof t.Name?c:this.name(c)}name(c){return new t.Name(this._newName(c))}_newName(c){const p=this._names[c]||this._nameGroup(c);return`${c}${p.index++}`}_nameGroup(c){var p,v;if(!((v=(p=this._parent)===null||p===void 0?void 0:p._prefixes)===null||v===void 0)&&v.has(c)||this._prefixes&&!this._prefixes.has(c))throw new Error(`CodeGen: prefix "${c}" is not allowed in this scope`);return this._names[c]={prefix:c,index:0}}}e.Scope=a;class o extends t.Name{constructor(c,p){super(p),this.prefix=c}setValue(c,{property:p,itemIndex:v}){this.value=c,this.scopePath=(0,t._)`.${new t.Name(p)}[${v}]`}}e.ValueScopeName=o;const l=(0,t._)`\n`;class f extends a{constructor(c){super(c),this._values={},this._scope=c.scope,this.opts={...c,_n:c.lines?l:t.nil}}get(){return this._scope}name(c){return new o(c,this._newName(c))}value(c,p){var v;if(p.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const E=this.toName(c),{prefix:$}=E,g=(v=p.key)!==null&&v!==void 0?v:p.ref;let _=this._values[$];if(_){const u=_.get(g);if(u)return u}else _=this._values[$]=new Map;_.set(g,E);const n=this._scope[$]||(this._scope[$]=[]),i=n.length;return n[i]=p.ref,E.setValue(p,{property:$,itemIndex:i}),E}getValue(c,p){const v=this._values[c];if(v)return v.get(p)}scopeRefs(c,p=this._values){return this._reduceValues(p,v=>{if(v.scopePath===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return(0,t._)`${c}${v.scopePath}`})}scopeCode(c=this._values,p,v){return this._reduceValues(c,E=>{if(E.value===void 0)throw new Error(`CodeGen: name "${E}" has no value`);return E.value.code},p,v)}_reduceValues(c,p,v={},E){let $=t.nil;for(const g in c){const _=c[g];if(!_)continue;const n=v[g]=v[g]||new Map;_.forEach(i=>{if(n.has(i))return;n.set(i,s.Started);let u=p(i);if(u){const h=this.opts.es5?e.varKinds.var:e.varKinds.const;$=(0,t._)`${$}${h} ${i} = ${u};${this.opts._n}`}else if(u=E==null?void 0:E(i))$=(0,t._)`${$}${u}${this.opts._n}`;else throw new r(i);n.set(i,s.Completed)})}return $}}e.ValueScope=f})(zs);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Pr,r=zs;var s=Pr;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return s.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return s.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return s.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return s.Name}});var a=zs;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(m,w){return this}}class l extends o{constructor(m,w,C){super(),this.varKind=m,this.name=w,this.rhs=C}render({es5:m,_n:w}){const C=m?r.varKinds.var:this.varKind,x=this.rhs===void 0?"":` = ${this.rhs}`;return`${C} ${this.name}${x};`+w}optimizeNames(m,w){if(m[this.name.str])return this.rhs&&(this.rhs=H(this.rhs,m,w)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class f extends o{constructor(m,w,C){super(),this.lhs=m,this.rhs=w,this.sideEffects=C}render({_n:m}){return`${this.lhs} = ${this.rhs};`+m}optimizeNames(m,w){if(!(this.lhs instanceof t.Name&&!m[this.lhs.str]&&!this.sideEffects))return this.rhs=H(this.rhs,m,w),this}get names(){const m=this.lhs instanceof t.Name?{}:{...this.lhs.names};return X(m,this.rhs)}}class d extends f{constructor(m,w,C,x){super(m,C,x),this.op=w}render({_n:m}){return`${this.lhs} ${this.op}= ${this.rhs};`+m}}class c extends o{constructor(m){super(),this.label=m,this.names={}}render({_n:m}){return`${this.label}:`+m}}class p extends o{constructor(m){super(),this.label=m,this.names={}}render({_n:m}){return`break${this.label?` ${this.label}`:""};`+m}}class v extends o{constructor(m){super(),this.error=m}render({_n:m}){return`throw ${this.error};`+m}get names(){return this.error.names}}class E extends o{constructor(m){super(),this.code=m}render({_n:m}){return`${this.code};`+m}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(m,w){return this.code=H(this.code,m,w),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class $ extends o{constructor(m=[]){super(),this.nodes=m}render(m){return this.nodes.reduce((w,C)=>w+C.render(m),"")}optimizeNodes(){const{nodes:m}=this;let w=m.length;for(;w--;){const C=m[w].optimizeNodes();Array.isArray(C)?m.splice(w,1,...C):C?m[w]=C:m.splice(w,1)}return m.length>0?this:void 0}optimizeNames(m,w){const{nodes:C}=this;let x=C.length;for(;x--;){const U=C[x];U.optimizeNames(m,w)||(Z(m,U.names),C.splice(x,1))}return C.length>0?this:void 0}get names(){return this.nodes.reduce((m,w)=>F(m,w.names),{})}}class g extends ${render(m){return"{"+m._n+super.render(m)+"}"+m._n}}class _ extends ${}class n extends g{}n.kind="else";class i extends g{constructor(m,w){super(w),this.condition=m}render(m){let w=`if(${this.condition})`+super.render(m);return this.else&&(w+="else "+this.else.render(m)),w}optimizeNodes(){super.optimizeNodes();const m=this.condition;if(m===!0)return this.nodes;let w=this.else;if(w){const C=w.optimizeNodes();w=this.else=Array.isArray(C)?new n(C):C}if(w)return m===!1?w instanceof i?w:w.nodes:this.nodes.length?this:new i(le(m),w instanceof i?[w]:w.nodes);if(!(m===!1||!this.nodes.length))return this}optimizeNames(m,w){var C;if(this.else=(C=this.else)===null||C===void 0?void 0:C.optimizeNames(m,w),!!(super.optimizeNames(m,w)||this.else))return this.condition=H(this.condition,m,w),this}get names(){const m=super.names;return X(m,this.condition),this.else&&F(m,this.else.names),m}}i.kind="if";class u extends g{}u.kind="for";class h extends u{constructor(m){super(),this.iteration=m}render(m){return`for(${this.iteration})`+super.render(m)}optimizeNames(m,w){if(super.optimizeNames(m,w))return this.iteration=H(this.iteration,m,w),this}get names(){return F(super.names,this.iteration.names)}}class y extends u{constructor(m,w,C,x){super(),this.varKind=m,this.name=w,this.from=C,this.to=x}render(m){const w=m.es5?r.varKinds.var:this.varKind,{name:C,from:x,to:U}=this;return`for(${w} ${C}=${x}; ${C}<${U}; ${C}++)`+super.render(m)}get names(){const m=X(super.names,this.from);return X(m,this.to)}}class S extends u{constructor(m,w,C,x){super(),this.loop=m,this.varKind=w,this.name=C,this.iterable=x}render(m){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(m)}optimizeNames(m,w){if(super.optimizeNames(m,w))return this.iterable=H(this.iterable,m,w),this}get names(){return F(super.names,this.iterable.names)}}class k extends g{constructor(m,w,C){super(),this.name=m,this.args=w,this.async=C}render(m){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(m)}}k.kind="func";class R extends ${render(m){return"return "+super.render(m)}}R.kind="return";class j extends g{render(m){let w="try"+super.render(m);return this.catch&&(w+=this.catch.render(m)),this.finally&&(w+=this.finally.render(m)),w}optimizeNodes(){var m,w;return super.optimizeNodes(),(m=this.catch)===null||m===void 0||m.optimizeNodes(),(w=this.finally)===null||w===void 0||w.optimizeNodes(),this}optimizeNames(m,w){var C,x;return super.optimizeNames(m,w),(C=this.catch)===null||C===void 0||C.optimizeNames(m,w),(x=this.finally)===null||x===void 0||x.optimizeNames(m,w),this}get names(){const m=super.names;return this.catch&&F(m,this.catch.names),this.finally&&F(m,this.finally.names),m}}class D extends g{constructor(m){super(),this.error=m}render(m){return`catch(${this.error})`+super.render(m)}}D.kind="catch";class B extends g{render(m){return"finally"+super.render(m)}}B.kind="finally";class V{constructor(m,w={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...w,_n:w.lines?`
`:""},this._extScope=m,this._scope=new r.Scope({parent:m}),this._nodes=[new _]}toString(){return this._root.render(this.opts)}name(m){return this._scope.name(m)}scopeName(m){return this._extScope.name(m)}scopeValue(m,w){const C=this._extScope.value(m,w);return(this._values[C.prefix]||(this._values[C.prefix]=new Set)).add(C),C}getScopeValue(m,w){return this._extScope.getValue(m,w)}scopeRefs(m){return this._extScope.scopeRefs(m,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(m,w,C,x){const U=this._scope.toName(w);return C!==void 0&&x&&(this._constants[U.str]=C),this._leafNode(new l(m,U,C)),U}const(m,w,C){return this._def(r.varKinds.const,m,w,C)}let(m,w,C){return this._def(r.varKinds.let,m,w,C)}var(m,w,C){return this._def(r.varKinds.var,m,w,C)}assign(m,w,C){return this._leafNode(new f(m,w,C))}add(m,w){return this._leafNode(new d(m,e.operators.ADD,w))}code(m){return typeof m=="function"?m():m!==t.nil&&this._leafNode(new E(m)),this}object(...m){const w=["{"];for(const[C,x]of m)w.length>1&&w.push(","),w.push(C),(C!==x||this.opts.es5)&&(w.push(":"),(0,t.addCodeArg)(w,x));return w.push("}"),new t._Code(w)}if(m,w,C){if(this._blockNode(new i(m)),w&&C)this.code(w).else().code(C).endIf();else if(w)this.code(w).endIf();else if(C)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(m){return this._elseNode(new i(m))}else(){return this._elseNode(new n)}endIf(){return this._endBlockNode(i,n)}_for(m,w){return this._blockNode(m),w&&this.code(w).endFor(),this}for(m,w){return this._for(new h(m),w)}forRange(m,w,C,x,U=this.opts.es5?r.varKinds.var:r.varKinds.let){const Y=this._scope.toName(m);return this._for(new y(U,Y,w,C),()=>x(Y))}forOf(m,w,C,x=r.varKinds.const){const U=this._scope.toName(m);if(this.opts.es5){const Y=w instanceof t.Name?w:this.var("_arr",w);return this.forRange("_i",0,(0,t._)`${Y}.length`,Q=>{this.var(U,(0,t._)`${Y}[${Q}]`),C(U)})}return this._for(new S("of",x,U,w),()=>C(U))}forIn(m,w,C,x=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(m,(0,t._)`Object.keys(${w})`,C);const U=this._scope.toName(m);return this._for(new S("in",x,U,w),()=>C(U))}endFor(){return this._endBlockNode(u)}label(m){return this._leafNode(new c(m))}break(m){return this._leafNode(new p(m))}return(m){const w=new R;if(this._blockNode(w),this.code(m),w.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(R)}try(m,w,C){if(!w&&!C)throw new Error('CodeGen: "try" without "catch" and "finally"');const x=new j;if(this._blockNode(x),this.code(m),w){const U=this.name("e");this._currNode=x.catch=new D(U),w(U)}return C&&(this._currNode=x.finally=new B,this.code(C)),this._endBlockNode(D,B)}throw(m){return this._leafNode(new v(m))}block(m,w){return this._blockStarts.push(this._nodes.length),m&&this.code(m).endBlock(w),this}endBlock(m){const w=this._blockStarts.pop();if(w===void 0)throw new Error("CodeGen: not in self-balancing block");const C=this._nodes.length-w;if(C<0||m!==void 0&&C!==m)throw new Error(`CodeGen: wrong number of nodes: ${C} vs ${m} expected`);return this._nodes.length=w,this}func(m,w=t.nil,C,x){return this._blockNode(new k(m,w,C)),x&&this.code(x).endFunc(),this}endFunc(){return this._endBlockNode(k)}optimize(m=1){for(;m-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(m){return this._currNode.nodes.push(m),this}_blockNode(m){this._currNode.nodes.push(m),this._nodes.push(m)}_endBlockNode(m,w){const C=this._currNode;if(C instanceof m||w&&C instanceof w)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${w?`${m.kind}/${w.kind}`:m.kind}"`)}_elseNode(m){const w=this._currNode;if(!(w instanceof i))throw new Error('CodeGen: "else" without "if"');return this._currNode=w.else=m,this}get _root(){return this._nodes[0]}get _currNode(){const m=this._nodes;return m[m.length-1]}set _currNode(m){const w=this._nodes;w[w.length-1]=m}}e.CodeGen=V;function F(P,m){for(const w in m)P[w]=(P[w]||0)+(m[w]||0);return P}function X(P,m){return m instanceof t._CodeOrName?F(P,m.names):P}function H(P,m,w){if(P instanceof t.Name)return C(P);if(!x(P))return P;return new t._Code(P._items.reduce((U,Y)=>(Y instanceof t.Name&&(Y=C(Y)),Y instanceof t._Code?U.push(...Y._items):U.push(Y),U),[]));function C(U){const Y=w[U.str];return Y===void 0||m[U.str]!==1?U:(delete m[U.str],Y)}function x(U){return U instanceof t._Code&&U._items.some(Y=>Y instanceof t.Name&&m[Y.str]===1&&w[Y.str]!==void 0)}}function Z(P,m){for(const w in m)P[w]=(P[w]||0)-(m[w]||0)}function le(P){return typeof P=="boolean"||typeof P=="number"||P===null?!P:(0,t._)`!${T(P)}`}e.not=le;const ie=N(e.operators.AND);function Se(...P){return P.reduce(ie)}e.and=Se;const Oe=N(e.operators.OR);function L(...P){return P.reduce(Oe)}e.or=L;function N(P){return(m,w)=>m===t.nil?w:w===t.nil?m:(0,t._)`${T(m)} ${P} ${T(w)}`}function T(P){return P instanceof t.Name?P:(0,t._)`(${P})`}})(re);var z={};Object.defineProperty(z,"__esModule",{value:!0});z.checkStrictMode=z.getErrorPath=z.Type=z.useFunc=z.setEvaluated=z.evaluatedPropsToName=z.mergeEvaluated=z.eachItem=z.unescapeJsonPointer=z.escapeJsonPointer=z.escapeFragment=z.unescapeFragment=z.schemaRefOrVal=z.schemaHasRulesButRef=z.schemaHasRules=z.checkUnknownRules=z.alwaysValidSchema=z.toHash=void 0;const ue=re,tc=Pr;function rc(e){const t={};for(const r of e)t[r]=!0;return t}z.toHash=rc;function sc(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(ji(e,t),!Di(t,e.self.RULES.all))}z.alwaysValidSchema=sc;function ji(e,t=e.schema){const{opts:r,self:s}=e;if(!r.strictSchema||typeof t=="boolean")return;const a=s.RULES.keywords;for(const o in t)a[o]||Vi(e,`unknown keyword: "${o}"`)}z.checkUnknownRules=ji;function Di(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}z.schemaHasRules=Di;function ac(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}z.schemaHasRulesButRef=ac;function nc({topSchemaRef:e,schemaPath:t},r,s,a){if(!a){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,ue._)`${r}`}return(0,ue._)`${e}${t}${(0,ue.getProperty)(s)}`}z.schemaRefOrVal=nc;function ic(e){return Li(decodeURIComponent(e))}z.unescapeFragment=ic;function oc(e){return encodeURIComponent(ia(e))}z.escapeFragment=oc;function ia(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}z.escapeJsonPointer=ia;function Li(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}z.unescapeJsonPointer=Li;function lc(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}z.eachItem=lc;function jn({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(a,o,l,f)=>{const d=l===void 0?o:l instanceof ue.Name?(o instanceof ue.Name?e(a,o,l):t(a,o,l),l):o instanceof ue.Name?(t(a,l,o),o):r(o,l);return f===ue.Name&&!(d instanceof ue.Name)?s(a,d):d}}z.mergeEvaluated={props:jn({mergeNames:(e,t,r)=>e.if((0,ue._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,ue._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,ue._)`${r} || {}`).code((0,ue._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,ue._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,ue._)`${r} || {}`),oa(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Mi}),items:jn({mergeNames:(e,t,r)=>e.if((0,ue._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,ue._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,ue._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,ue._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Mi(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,ue._)`{}`);return t!==void 0&&oa(e,r,t),r}z.evaluatedPropsToName=Mi;function oa(e,t,r){Object.keys(r).forEach(s=>e.assign((0,ue._)`${t}${(0,ue.getProperty)(s)}`,!0))}z.setEvaluated=oa;const Dn={};function cc(e,t){return e.scopeValue("func",{ref:t,code:Dn[t.code]||(Dn[t.code]=new tc._Code(t.code))})}z.useFunc=cc;var qs;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(qs||(z.Type=qs={}));function dc(e,t,r){if(e instanceof ue.Name){const s=t===qs.Num;return r?s?(0,ue._)`"[" + ${e} + "]"`:(0,ue._)`"['" + ${e} + "']"`:s?(0,ue._)`"/" + ${e}`:(0,ue._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,ue.getProperty)(e).toString():"/"+ia(e)}z.getErrorPath=dc;function Vi(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}z.checkStrictMode=Vi;var Me={};Object.defineProperty(Me,"__esModule",{value:!0});const Ae=re,uc={data:new Ae.Name("data"),valCxt:new Ae.Name("valCxt"),instancePath:new Ae.Name("instancePath"),parentData:new Ae.Name("parentData"),parentDataProperty:new Ae.Name("parentDataProperty"),rootData:new Ae.Name("rootData"),dynamicAnchors:new Ae.Name("dynamicAnchors"),vErrors:new Ae.Name("vErrors"),errors:new Ae.Name("errors"),this:new Ae.Name("this"),self:new Ae.Name("self"),scope:new Ae.Name("scope"),json:new Ae.Name("json"),jsonPos:new Ae.Name("jsonPos"),jsonLen:new Ae.Name("jsonLen"),jsonPart:new Ae.Name("jsonPart")};Me.default=uc;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=re,r=z,s=Me;e.keywordError={message:({keyword:n})=>(0,t.str)`must pass "${n}" keyword validation`},e.keyword$DataError={message:({keyword:n,schemaType:i})=>i?(0,t.str)`"${n}" keyword must be ${i} ($data)`:(0,t.str)`"${n}" keyword is invalid ($data)`};function a(n,i=e.keywordError,u,h){const{it:y}=n,{gen:S,compositeRule:k,allErrors:R}=y,j=v(n,i,u);h??(k||R)?d(S,j):c(y,(0,t._)`[${j}]`)}e.reportError=a;function o(n,i=e.keywordError,u){const{it:h}=n,{gen:y,compositeRule:S,allErrors:k}=h,R=v(n,i,u);d(y,R),S||k||c(h,s.default.vErrors)}e.reportExtraError=o;function l(n,i){n.assign(s.default.errors,i),n.if((0,t._)`${s.default.vErrors} !== null`,()=>n.if(i,()=>n.assign((0,t._)`${s.default.vErrors}.length`,i),()=>n.assign(s.default.vErrors,null)))}e.resetErrorsCount=l;function f({gen:n,keyword:i,schemaValue:u,data:h,errsCount:y,it:S}){if(y===void 0)throw new Error("ajv implementation error");const k=n.name("err");n.forRange("i",y,s.default.errors,R=>{n.const(k,(0,t._)`${s.default.vErrors}[${R}]`),n.if((0,t._)`${k}.instancePath === undefined`,()=>n.assign((0,t._)`${k}.instancePath`,(0,t.strConcat)(s.default.instancePath,S.errorPath))),n.assign((0,t._)`${k}.schemaPath`,(0,t.str)`${S.errSchemaPath}/${i}`),S.opts.verbose&&(n.assign((0,t._)`${k}.schema`,u),n.assign((0,t._)`${k}.data`,h))})}e.extendErrors=f;function d(n,i){const u=n.const("err",i);n.if((0,t._)`${s.default.vErrors} === null`,()=>n.assign(s.default.vErrors,(0,t._)`[${u}]`),(0,t._)`${s.default.vErrors}.push(${u})`),n.code((0,t._)`${s.default.errors}++`)}function c(n,i){const{gen:u,validateName:h,schemaEnv:y}=n;y.$async?u.throw((0,t._)`new ${n.ValidationError}(${i})`):(u.assign((0,t._)`${h}.errors`,i),u.return(!1))}const p={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function v(n,i,u){const{createErrors:h}=n.it;return h===!1?(0,t._)`{}`:E(n,i,u)}function E(n,i,u={}){const{gen:h,it:y}=n,S=[$(y,u),g(n,u)];return _(n,i,S),h.object(...S)}function $({errorPath:n},{instancePath:i}){const u=i?(0,t.str)`${n}${(0,r.getErrorPath)(i,r.Type.Str)}`:n;return[s.default.instancePath,(0,t.strConcat)(s.default.instancePath,u)]}function g({keyword:n,it:{errSchemaPath:i}},{schemaPath:u,parentSchema:h}){let y=h?i:(0,t.str)`${i}/${n}`;return u&&(y=(0,t.str)`${y}${(0,r.getErrorPath)(u,r.Type.Str)}`),[p.schemaPath,y]}function _(n,{params:i,message:u},h){const{keyword:y,data:S,schemaValue:k,it:R}=n,{opts:j,propertyName:D,topSchemaRef:B,schemaPath:V}=R;h.push([p.keyword,y],[p.params,typeof i=="function"?i(n):i||(0,t._)`{}`]),j.messages&&h.push([p.message,typeof u=="function"?u(n):u]),j.verbose&&h.push([p.schema,k],[p.parentSchema,(0,t._)`${B}${V}`],[s.default.data,S]),D&&h.push([p.propertyName,D])}})(Ir);Object.defineProperty(Wt,"__esModule",{value:!0});Wt.boolOrEmptySchema=Wt.topBoolOrEmptySchema=void 0;const fc=Ir,hc=re,mc=Me,pc={message:"boolean schema is false"};function vc(e){const{gen:t,schema:r,validateName:s}=e;r===!1?Fi(e,!1):typeof r=="object"&&r.$async===!0?t.return(mc.default.data):(t.assign((0,hc._)`${s}.errors`,null),t.return(!0))}Wt.topBoolOrEmptySchema=vc;function gc(e,t){const{gen:r,schema:s}=e;s===!1?(r.var(t,!1),Fi(e)):r.var(t,!0)}Wt.boolOrEmptySchema=gc;function Fi(e,t){const{gen:r,data:s}=e,a={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,fc.reportError)(a,pc,void 0,t)}var $e={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.getRules=xt.isJSONType=void 0;const yc=["string","number","integer","boolean","null","object","array"],_c=new Set(yc);function bc(e){return typeof e=="string"&&_c.has(e)}xt.isJSONType=bc;function $c(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}xt.getRules=$c;var ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.shouldUseRule=ut.shouldUseGroup=ut.schemaHasRulesForType=void 0;function Ec({schema:e,self:t},r){const s=t.RULES.types[r];return s&&s!==!0&&xi(e,s)}ut.schemaHasRulesForType=Ec;function xi(e,t){return t.rules.some(r=>zi(e,r))}ut.shouldUseGroup=xi;function zi(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(s=>e[s]!==void 0))}ut.shouldUseRule=zi;Object.defineProperty($e,"__esModule",{value:!0});$e.reportTypeError=$e.checkDataTypes=$e.checkDataType=$e.coerceAndCheckDataType=$e.getJSONTypes=$e.getSchemaTypes=$e.DataType=void 0;const wc=xt,Sc=ut,Oc=Ir,se=re,qi=z;var Kt;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Kt||($e.DataType=Kt={}));function Pc(e){const t=Ui(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}$e.getSchemaTypes=Pc;function Ui(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(wc.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}$e.getJSONTypes=Ui;function Nc(e,t){const{gen:r,data:s,opts:a}=e,o=kc(t,a.coerceTypes),l=t.length>0&&!(o.length===0&&t.length===1&&(0,Sc.schemaHasRulesForType)(e,t[0]));if(l){const f=la(t,s,a.strictNumbers,Kt.Wrong);r.if(f,()=>{o.length?Ic(e,t,o):ca(e)})}return l}$e.coerceAndCheckDataType=Nc;const Hi=new Set(["string","number","integer","boolean","null"]);function kc(e,t){return t?e.filter(r=>Hi.has(r)||t==="array"&&r==="array"):[]}function Ic(e,t,r){const{gen:s,data:a,opts:o}=e,l=s.let("dataType",(0,se._)`typeof ${a}`),f=s.let("coerced",(0,se._)`undefined`);o.coerceTypes==="array"&&s.if((0,se._)`${l} == 'object' && Array.isArray(${a}) && ${a}.length == 1`,()=>s.assign(a,(0,se._)`${a}[0]`).assign(l,(0,se._)`typeof ${a}`).if(la(t,a,o.strictNumbers),()=>s.assign(f,a))),s.if((0,se._)`${f} !== undefined`);for(const c of r)(Hi.has(c)||c==="array"&&o.coerceTypes==="array")&&d(c);s.else(),ca(e),s.endIf(),s.if((0,se._)`${f} !== undefined`,()=>{s.assign(a,f),Ac(e,f)});function d(c){switch(c){case"string":s.elseIf((0,se._)`${l} == "number" || ${l} == "boolean"`).assign(f,(0,se._)`"" + ${a}`).elseIf((0,se._)`${a} === null`).assign(f,(0,se._)`""`);return;case"number":s.elseIf((0,se._)`${l} == "boolean" || ${a} === null
              || (${l} == "string" && ${a} && ${a} == +${a})`).assign(f,(0,se._)`+${a}`);return;case"integer":s.elseIf((0,se._)`${l} === "boolean" || ${a} === null
              || (${l} === "string" && ${a} && ${a} == +${a} && !(${a} % 1))`).assign(f,(0,se._)`+${a}`);return;case"boolean":s.elseIf((0,se._)`${a} === "false" || ${a} === 0 || ${a} === null`).assign(f,!1).elseIf((0,se._)`${a} === "true" || ${a} === 1`).assign(f,!0);return;case"null":s.elseIf((0,se._)`${a} === "" || ${a} === 0 || ${a} === false`),s.assign(f,null);return;case"array":s.elseIf((0,se._)`${l} === "string" || ${l} === "number"
              || ${l} === "boolean" || ${a} === null`).assign(f,(0,se._)`[${a}]`)}}}function Ac({gen:e,parentData:t,parentDataProperty:r},s){e.if((0,se._)`${t} !== undefined`,()=>e.assign((0,se._)`${t}[${r}]`,s))}function Us(e,t,r,s=Kt.Correct){const a=s===Kt.Correct?se.operators.EQ:se.operators.NEQ;let o;switch(e){case"null":return(0,se._)`${t} ${a} null`;case"array":o=(0,se._)`Array.isArray(${t})`;break;case"object":o=(0,se._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=l((0,se._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=l();break;default:return(0,se._)`typeof ${t} ${a} ${e}`}return s===Kt.Correct?o:(0,se.not)(o);function l(f=se.nil){return(0,se.and)((0,se._)`typeof ${t} == "number"`,f,r?(0,se._)`isFinite(${t})`:se.nil)}}$e.checkDataType=Us;function la(e,t,r,s){if(e.length===1)return Us(e[0],t,r,s);let a;const o=(0,qi.toHash)(e);if(o.array&&o.object){const l=(0,se._)`typeof ${t} != "object"`;a=o.null?l:(0,se._)`!${t} || ${l}`,delete o.null,delete o.array,delete o.object}else a=se.nil;o.number&&delete o.integer;for(const l in o)a=(0,se.and)(a,Us(l,t,r,s));return a}$e.checkDataTypes=la;const Tc={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,se._)`{type: ${e}}`:(0,se._)`{type: ${t}}`};function ca(e){const t=Cc(e);(0,Oc.reportError)(t,Tc)}$e.reportTypeError=ca;function Cc(e){const{gen:t,data:r,schema:s}=e,a=(0,qi.schemaRefOrVal)(e,s,"type");return{gen:t,keyword:"type",data:r,schema:s.type,schemaCode:a,schemaValue:a,parentSchema:s,params:{},it:e}}var os={};Object.defineProperty(os,"__esModule",{value:!0});os.assignDefaults=void 0;const Ut=re,Rc=z;function jc(e,t){const{properties:r,items:s}=e.schema;if(t==="object"&&r)for(const a in r)Ln(e,a,r[a].default);else t==="array"&&Array.isArray(s)&&s.forEach((a,o)=>Ln(e,o,a.default))}os.assignDefaults=jc;function Ln(e,t,r){const{gen:s,compositeRule:a,data:o,opts:l}=e;if(r===void 0)return;const f=(0,Ut._)`${o}${(0,Ut.getProperty)(t)}`;if(a){(0,Rc.checkStrictMode)(e,`default is ignored for: ${f}`);return}let d=(0,Ut._)`${f} === undefined`;l.useDefaults==="empty"&&(d=(0,Ut._)`${d} || ${f} === null || ${f} === ""`),s.if(d,(0,Ut._)`${f} = ${(0,Ut.stringify)(r)}`)}var at={},ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.validateUnion=ne.validateArray=ne.usePattern=ne.callValidateCode=ne.schemaProperties=ne.allSchemaProperties=ne.noPropertyInData=ne.propertyInData=ne.isOwnProperty=ne.hasPropFunc=ne.reportMissingProp=ne.checkMissingProp=ne.checkReportMissingProp=void 0;const he=re,da=z,bt=Me,Dc=z;function Lc(e,t){const{gen:r,data:s,it:a}=e;r.if(fa(r,s,t,a.opts.ownProperties),()=>{e.setParams({missingProperty:(0,he._)`${t}`},!0),e.error()})}ne.checkReportMissingProp=Lc;function Mc({gen:e,data:t,it:{opts:r}},s,a){return(0,he.or)(...s.map(o=>(0,he.and)(fa(e,t,o,r.ownProperties),(0,he._)`${a} = ${o}`)))}ne.checkMissingProp=Mc;function Vc(e,t){e.setParams({missingProperty:t},!0),e.error()}ne.reportMissingProp=Vc;function Gi(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,he._)`Object.prototype.hasOwnProperty`})}ne.hasPropFunc=Gi;function ua(e,t,r){return(0,he._)`${Gi(e)}.call(${t}, ${r})`}ne.isOwnProperty=ua;function Fc(e,t,r,s){const a=(0,he._)`${t}${(0,he.getProperty)(r)} !== undefined`;return s?(0,he._)`${a} && ${ua(e,t,r)}`:a}ne.propertyInData=Fc;function fa(e,t,r,s){const a=(0,he._)`${t}${(0,he.getProperty)(r)} === undefined`;return s?(0,he.or)(a,(0,he.not)(ua(e,t,r))):a}ne.noPropertyInData=fa;function Ji(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}ne.allSchemaProperties=Ji;function xc(e,t){return Ji(t).filter(r=>!(0,da.alwaysValidSchema)(e,t[r]))}ne.schemaProperties=xc;function zc({schemaCode:e,data:t,it:{gen:r,topSchemaRef:s,schemaPath:a,errorPath:o},it:l},f,d,c){const p=c?(0,he._)`${e}, ${t}, ${s}${a}`:t,v=[[bt.default.instancePath,(0,he.strConcat)(bt.default.instancePath,o)],[bt.default.parentData,l.parentData],[bt.default.parentDataProperty,l.parentDataProperty],[bt.default.rootData,bt.default.rootData]];l.opts.dynamicRef&&v.push([bt.default.dynamicAnchors,bt.default.dynamicAnchors]);const E=(0,he._)`${p}, ${r.object(...v)}`;return d!==he.nil?(0,he._)`${f}.call(${d}, ${E})`:(0,he._)`${f}(${E})`}ne.callValidateCode=zc;const qc=(0,he._)`new RegExp`;function Uc({gen:e,it:{opts:t}},r){const s=t.unicodeRegExp?"u":"",{regExp:a}=t.code,o=a(r,s);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,he._)`${a.code==="new RegExp"?qc:(0,Dc.useFunc)(e,a)}(${r}, ${s})`})}ne.usePattern=Uc;function Hc(e){const{gen:t,data:r,keyword:s,it:a}=e,o=t.name("valid");if(a.allErrors){const f=t.let("valid",!0);return l(()=>t.assign(f,!1)),f}return t.var(o,!0),l(()=>t.break()),o;function l(f){const d=t.const("len",(0,he._)`${r}.length`);t.forRange("i",0,d,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:da.Type.Num},o),t.if((0,he.not)(o),f)})}}ne.validateArray=Hc;function Gc(e){const{gen:t,schema:r,keyword:s,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(d=>(0,da.alwaysValidSchema)(a,d))&&!a.opts.unevaluated)return;const l=t.let("valid",!1),f=t.name("_valid");t.block(()=>r.forEach((d,c)=>{const p=e.subschema({keyword:s,schemaProp:c,compositeRule:!0},f);t.assign(l,(0,he._)`${l} || ${f}`),e.mergeValidEvaluated(p,f)||t.if((0,he.not)(l))})),e.result(l,()=>e.reset(),()=>e.error(!0))}ne.validateUnion=Gc;Object.defineProperty(at,"__esModule",{value:!0});at.validateKeywordUsage=at.validSchemaType=at.funcKeywordCode=at.macroKeywordCode=void 0;const Ce=re,Dt=Me,Jc=ne,Kc=Ir;function Bc(e,t){const{gen:r,keyword:s,schema:a,parentSchema:o,it:l}=e,f=t.macro.call(l.self,a,o,l),d=Ki(r,s,f);l.opts.validateSchema!==!1&&l.self.validateSchema(f,!0);const c=r.name("valid");e.subschema({schema:f,schemaPath:Ce.nil,errSchemaPath:`${l.errSchemaPath}/${s}`,topSchemaRef:d,compositeRule:!0},c),e.pass(c,()=>e.error(!0))}at.macroKeywordCode=Bc;function Xc(e,t){var r;const{gen:s,keyword:a,schema:o,parentSchema:l,$data:f,it:d}=e;Zc(d,t);const c=!f&&t.compile?t.compile.call(d.self,o,l,d):t.validate,p=Ki(s,a,c),v=s.let("valid");e.block$data(v,E),e.ok((r=t.valid)!==null&&r!==void 0?r:v);function E(){if(t.errors===!1)_(),t.modifying&&Mn(e),n(()=>e.error());else{const i=t.async?$():g();t.modifying&&Mn(e),n(()=>Wc(e,i))}}function $(){const i=s.let("ruleErrs",null);return s.try(()=>_((0,Ce._)`await `),u=>s.assign(v,!1).if((0,Ce._)`${u} instanceof ${d.ValidationError}`,()=>s.assign(i,(0,Ce._)`${u}.errors`),()=>s.throw(u))),i}function g(){const i=(0,Ce._)`${p}.errors`;return s.assign(i,null),_(Ce.nil),i}function _(i=t.async?(0,Ce._)`await `:Ce.nil){const u=d.opts.passContext?Dt.default.this:Dt.default.self,h=!("compile"in t&&!f||t.schema===!1);s.assign(v,(0,Ce._)`${i}${(0,Jc.callValidateCode)(e,p,u,h)}`,t.modifying)}function n(i){var u;s.if((0,Ce.not)((u=t.valid)!==null&&u!==void 0?u:v),i)}}at.funcKeywordCode=Xc;function Mn(e){const{gen:t,data:r,it:s}=e;t.if(s.parentData,()=>t.assign(r,(0,Ce._)`${s.parentData}[${s.parentDataProperty}]`))}function Wc(e,t){const{gen:r}=e;r.if((0,Ce._)`Array.isArray(${t})`,()=>{r.assign(Dt.default.vErrors,(0,Ce._)`${Dt.default.vErrors} === null ? ${t} : ${Dt.default.vErrors}.concat(${t})`).assign(Dt.default.errors,(0,Ce._)`${Dt.default.vErrors}.length`),(0,Kc.extendErrors)(e)},()=>e.error())}function Zc({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Ki(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Ce.stringify)(r)})}function Yc(e,t,r=!1){return!t.length||t.some(s=>s==="array"?Array.isArray(e):s==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==s||r&&typeof e>"u")}at.validSchemaType=Yc;function Qc({schema:e,opts:t,self:r,errSchemaPath:s},a,o){if(Array.isArray(a.keyword)?!a.keyword.includes(o):a.keyword!==o)throw new Error("ajv implementation error");const l=a.dependencies;if(l!=null&&l.some(f=>!Object.prototype.hasOwnProperty.call(e,f)))throw new Error(`parent schema must have dependencies of ${o}: ${l.join(",")}`);if(a.validateSchema&&!a.validateSchema(e[o])){const d=`keyword "${o}" value is invalid at path "${s}": `+r.errorsText(a.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(d);else throw new Error(d)}}at.validateKeywordUsage=Qc;var kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.extendSubschemaMode=kt.extendSubschemaData=kt.getSubschema=void 0;const tt=re,Bi=z;function ed(e,{keyword:t,schemaProp:r,schema:s,schemaPath:a,errSchemaPath:o,topSchemaRef:l}){if(t!==void 0&&s!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const f=e.schema[t];return r===void 0?{schema:f,schemaPath:(0,tt._)`${e.schemaPath}${(0,tt.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:f[r],schemaPath:(0,tt._)`${e.schemaPath}${(0,tt.getProperty)(t)}${(0,tt.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Bi.escapeFragment)(r)}`}}if(s!==void 0){if(a===void 0||o===void 0||l===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:s,schemaPath:a,topSchemaRef:l,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}kt.getSubschema=ed;function td(e,t,{dataProp:r,dataPropType:s,data:a,dataTypes:o,propertyName:l}){if(a!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:f}=t;if(r!==void 0){const{errorPath:c,dataPathArr:p,opts:v}=t,E=f.let("data",(0,tt._)`${t.data}${(0,tt.getProperty)(r)}`,!0);d(E),e.errorPath=(0,tt.str)`${c}${(0,Bi.getErrorPath)(r,s,v.jsPropertySyntax)}`,e.parentDataProperty=(0,tt._)`${r}`,e.dataPathArr=[...p,e.parentDataProperty]}if(a!==void 0){const c=a instanceof tt.Name?a:f.let("data",a,!0);d(c),l!==void 0&&(e.propertyName=l)}o&&(e.dataTypes=o);function d(c){e.data=c,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,c]}}kt.extendSubschemaData=td;function rd(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:s,createErrors:a,allErrors:o}){s!==void 0&&(e.compositeRule=s),a!==void 0&&(e.createErrors=a),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}kt.extendSubschemaMode=rd;var Ne={},Xi=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var s,a,o;if(Array.isArray(t)){if(s=t.length,s!=r.length)return!1;for(a=s;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),s=o.length,s!==Object.keys(r).length)return!1;for(a=s;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[a]))return!1;for(a=s;a--!==0;){var l=o[a];if(!e(t[l],r[l]))return!1}return!0}return t!==t&&r!==r},Wi={exports:{}},Nt=Wi.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var s=typeof r=="function"?r:r.pre||function(){},a=r.post||function(){};Hr(t,s,a,e,"",e)};Nt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Nt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Nt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Nt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Hr(e,t,r,s,a,o,l,f,d,c){if(s&&typeof s=="object"&&!Array.isArray(s)){t(s,a,o,l,f,d,c);for(var p in s){var v=s[p];if(Array.isArray(v)){if(p in Nt.arrayKeywords)for(var E=0;E<v.length;E++)Hr(e,t,r,v[E],a+"/"+p+"/"+E,o,a,p,s,E)}else if(p in Nt.propsKeywords){if(v&&typeof v=="object")for(var $ in v)Hr(e,t,r,v[$],a+"/"+p+"/"+sd($),o,a,p,s,$)}else(p in Nt.keywords||e.allKeys&&!(p in Nt.skipKeywords))&&Hr(e,t,r,v,a+"/"+p,o,a,p,s)}r(s,a,o,l,f,d,c)}}function sd(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var ad=Wi.exports;Object.defineProperty(Ne,"__esModule",{value:!0});Ne.getSchemaRefs=Ne.resolveUrl=Ne.normalizeId=Ne._getFullPath=Ne.getFullPath=Ne.inlineRef=void 0;const nd=z,id=Xi,od=ad,ld=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function cd(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Hs(e):t?Zi(e)<=t:!1}Ne.inlineRef=cd;const dd=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Hs(e){for(const t in e){if(dd.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(Hs)||typeof r=="object"&&Hs(r))return!0}return!1}function Zi(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!ld.has(r)&&(typeof e[r]=="object"&&(0,nd.eachItem)(e[r],s=>t+=Zi(s)),t===1/0))return 1/0}return t}function Yi(e,t="",r){r!==!1&&(t=Bt(t));const s=e.parse(t);return Qi(e,s)}Ne.getFullPath=Yi;function Qi(e,t){return e.serialize(t).split("#")[0]+"#"}Ne._getFullPath=Qi;const ud=/#\/?$/;function Bt(e){return e?e.replace(ud,""):""}Ne.normalizeId=Bt;function fd(e,t,r){return r=Bt(r),e.resolve(t,r)}Ne.resolveUrl=fd;const hd=/^[a-z_][-a-z0-9._]*$/i;function md(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:s}=this.opts,a=Bt(e[r]||t),o={"":a},l=Yi(s,a,!1),f={},d=new Set;return od(e,{allKeys:!0},(v,E,$,g)=>{if(g===void 0)return;const _=l+E;let n=o[g];typeof v[r]=="string"&&(n=i.call(this,v[r])),u.call(this,v.$anchor),u.call(this,v.$dynamicAnchor),o[E]=n;function i(h){const y=this.opts.uriResolver.resolve;if(h=Bt(n?y(n,h):h),d.has(h))throw p(h);d.add(h);let S=this.refs[h];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?c(v,S.schema,h):h!==Bt(_)&&(h[0]==="#"?(c(v,f[h],h),f[h]=v):this.refs[h]=_),h}function u(h){if(typeof h=="string"){if(!hd.test(h))throw new Error(`invalid anchor "${h}"`);i.call(this,`#${h}`)}}}),f;function c(v,E,$){if(E!==void 0&&!id(v,E))throw p($)}function p(v){return new Error(`reference "${v}" resolves to more than one schema`)}}Ne.getSchemaRefs=md;Object.defineProperty(He,"__esModule",{value:!0});He.getData=He.KeywordCxt=He.validateFunctionCode=void 0;const eo=Wt,Vn=$e,ha=ut,Yr=$e,pd=os,_r=at,Ts=kt,K=re,ee=Me,vd=Ne,ft=z,hr=Ir;function gd(e){if(so(e)&&(ao(e),ro(e))){bd(e);return}to(e,()=>(0,eo.topBoolOrEmptySchema)(e))}He.validateFunctionCode=gd;function to({gen:e,validateName:t,schema:r,schemaEnv:s,opts:a},o){a.code.es5?e.func(t,(0,K._)`${ee.default.data}, ${ee.default.valCxt}`,s.$async,()=>{e.code((0,K._)`"use strict"; ${Fn(r,a)}`),_d(e,a),e.code(o)}):e.func(t,(0,K._)`${ee.default.data}, ${yd(a)}`,s.$async,()=>e.code(Fn(r,a)).code(o))}function yd(e){return(0,K._)`{${ee.default.instancePath}="", ${ee.default.parentData}, ${ee.default.parentDataProperty}, ${ee.default.rootData}=${ee.default.data}${e.dynamicRef?(0,K._)`, ${ee.default.dynamicAnchors}={}`:K.nil}}={}`}function _d(e,t){e.if(ee.default.valCxt,()=>{e.var(ee.default.instancePath,(0,K._)`${ee.default.valCxt}.${ee.default.instancePath}`),e.var(ee.default.parentData,(0,K._)`${ee.default.valCxt}.${ee.default.parentData}`),e.var(ee.default.parentDataProperty,(0,K._)`${ee.default.valCxt}.${ee.default.parentDataProperty}`),e.var(ee.default.rootData,(0,K._)`${ee.default.valCxt}.${ee.default.rootData}`),t.dynamicRef&&e.var(ee.default.dynamicAnchors,(0,K._)`${ee.default.valCxt}.${ee.default.dynamicAnchors}`)},()=>{e.var(ee.default.instancePath,(0,K._)`""`),e.var(ee.default.parentData,(0,K._)`undefined`),e.var(ee.default.parentDataProperty,(0,K._)`undefined`),e.var(ee.default.rootData,ee.default.data),t.dynamicRef&&e.var(ee.default.dynamicAnchors,(0,K._)`{}`)})}function bd(e){const{schema:t,opts:r,gen:s}=e;to(e,()=>{r.$comment&&t.$comment&&io(e),Od(e),s.let(ee.default.vErrors,null),s.let(ee.default.errors,0),r.unevaluated&&$d(e),no(e),kd(e)})}function $d(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,K._)`${r}.evaluated`),t.if((0,K._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,K._)`${e.evaluated}.props`,(0,K._)`undefined`)),t.if((0,K._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,K._)`${e.evaluated}.items`,(0,K._)`undefined`))}function Fn(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,K._)`/*# sourceURL=${r} */`:K.nil}function Ed(e,t){if(so(e)&&(ao(e),ro(e))){wd(e,t);return}(0,eo.boolOrEmptySchema)(e,t)}function ro({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function so(e){return typeof e.schema!="boolean"}function wd(e,t){const{schema:r,gen:s,opts:a}=e;a.$comment&&r.$comment&&io(e),Pd(e),Nd(e);const o=s.const("_errs",ee.default.errors);no(e,o),s.var(t,(0,K._)`${o} === ${ee.default.errors}`)}function ao(e){(0,ft.checkUnknownRules)(e),Sd(e)}function no(e,t){if(e.opts.jtd)return xn(e,[],!1,t);const r=(0,Vn.getSchemaTypes)(e.schema),s=(0,Vn.coerceAndCheckDataType)(e,r);xn(e,r,!s,t)}function Sd(e){const{schema:t,errSchemaPath:r,opts:s,self:a}=e;t.$ref&&s.ignoreKeywordsWithRef&&(0,ft.schemaHasRulesButRef)(t,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Od(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ft.checkStrictMode)(e,"default is ignored in the schema root")}function Pd(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,vd.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Nd(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function io({gen:e,schemaEnv:t,schema:r,errSchemaPath:s,opts:a}){const o=r.$comment;if(a.$comment===!0)e.code((0,K._)`${ee.default.self}.logger.log(${o})`);else if(typeof a.$comment=="function"){const l=(0,K.str)`${s}/$comment`,f=e.scopeValue("root",{ref:t.root});e.code((0,K._)`${ee.default.self}.opts.$comment(${o}, ${l}, ${f}.schema)`)}}function kd(e){const{gen:t,schemaEnv:r,validateName:s,ValidationError:a,opts:o}=e;r.$async?t.if((0,K._)`${ee.default.errors} === 0`,()=>t.return(ee.default.data),()=>t.throw((0,K._)`new ${a}(${ee.default.vErrors})`)):(t.assign((0,K._)`${s}.errors`,ee.default.vErrors),o.unevaluated&&Id(e),t.return((0,K._)`${ee.default.errors} === 0`))}function Id({gen:e,evaluated:t,props:r,items:s}){r instanceof K.Name&&e.assign((0,K._)`${t}.props`,r),s instanceof K.Name&&e.assign((0,K._)`${t}.items`,s)}function xn(e,t,r,s){const{gen:a,schema:o,data:l,allErrors:f,opts:d,self:c}=e,{RULES:p}=c;if(o.$ref&&(d.ignoreKeywordsWithRef||!(0,ft.schemaHasRulesButRef)(o,p))){a.block(()=>co(e,"$ref",p.all.$ref.definition));return}d.jtd||Ad(e,t),a.block(()=>{for(const E of p.rules)v(E);v(p.post)});function v(E){(0,ha.shouldUseGroup)(o,E)&&(E.type?(a.if((0,Yr.checkDataType)(E.type,l,d.strictNumbers)),zn(e,E),t.length===1&&t[0]===E.type&&r&&(a.else(),(0,Yr.reportTypeError)(e)),a.endIf()):zn(e,E),f||a.if((0,K._)`${ee.default.errors} === ${s||0}`))}}function zn(e,t){const{gen:r,schema:s,opts:{useDefaults:a}}=e;a&&(0,pd.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,ha.shouldUseRule)(s,o)&&co(e,o.keyword,o.definition,t.type)})}function Ad(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Td(e,t),e.opts.allowUnionTypes||Cd(e,t),Rd(e,e.dataTypes))}function Td(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{oo(e.dataTypes,r)||ma(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),Dd(e,t)}}function Cd(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&ma(e,"use allowUnionTypes to allow union type keyword")}function Rd(e,t){const r=e.self.RULES.all;for(const s in r){const a=r[s];if(typeof a=="object"&&(0,ha.shouldUseRule)(e.schema,a)){const{type:o}=a.definition;o.length&&!o.some(l=>jd(t,l))&&ma(e,`missing type "${o.join(",")}" for keyword "${s}"`)}}}function jd(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function oo(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Dd(e,t){const r=[];for(const s of e.dataTypes)oo(t,s)?r.push(s):t.includes("integer")&&s==="number"&&r.push("integer");e.dataTypes=r}function ma(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,ft.checkStrictMode)(e,t,e.opts.strictTypes)}class lo{constructor(t,r,s){if((0,_r.validateKeywordUsage)(t,r,s),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=s,this.data=t.data,this.schema=t.schema[s],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ft.schemaRefOrVal)(t,this.schema,s,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",uo(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,_r.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",ee.default.errors))}result(t,r,s){this.failResult((0,K.not)(t),r,s)}failResult(t,r,s){this.gen.if(t),s?s():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,K.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,K._)`${r} !== undefined && (${(0,K.or)(this.invalid$data(),t)})`)}error(t,r,s){if(r){this.setParams(r),this._error(t,s),this.setParams({});return}this._error(t,s)}_error(t,r){(t?hr.reportExtraError:hr.reportError)(this,this.def.error,r)}$dataError(){(0,hr.reportError)(this,this.def.$dataError||hr.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,hr.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,s=K.nil){this.gen.block(()=>{this.check$data(t,s),r()})}check$data(t=K.nil,r=K.nil){if(!this.$data)return;const{gen:s,schemaCode:a,schemaType:o,def:l}=this;s.if((0,K.or)((0,K._)`${a} === undefined`,r)),t!==K.nil&&s.assign(t,!0),(o.length||l.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),t!==K.nil&&s.assign(t,!1)),s.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:s,def:a,it:o}=this;return(0,K.or)(l(),f());function l(){if(s.length){if(!(r instanceof K.Name))throw new Error("ajv implementation error");const d=Array.isArray(s)?s:[s];return(0,K._)`${(0,Yr.checkDataTypes)(d,r,o.opts.strictNumbers,Yr.DataType.Wrong)}`}return K.nil}function f(){if(a.validateSchema){const d=t.scopeValue("validate$data",{ref:a.validateSchema});return(0,K._)`!${d}(${r})`}return K.nil}}subschema(t,r){const s=(0,Ts.getSubschema)(this.it,t);(0,Ts.extendSubschemaData)(s,this.it,t),(0,Ts.extendSubschemaMode)(s,t);const a={...this.it,...s,items:void 0,props:void 0};return Ed(a,r),a}mergeEvaluated(t,r){const{it:s,gen:a}=this;s.opts.unevaluated&&(s.props!==!0&&t.props!==void 0&&(s.props=ft.mergeEvaluated.props(a,t.props,s.props,r)),s.items!==!0&&t.items!==void 0&&(s.items=ft.mergeEvaluated.items(a,t.items,s.items,r)))}mergeValidEvaluated(t,r){const{it:s,gen:a}=this;if(s.opts.unevaluated&&(s.props!==!0||s.items!==!0))return a.if(r,()=>this.mergeEvaluated(t,K.Name)),!0}}He.KeywordCxt=lo;function co(e,t,r,s){const a=new lo(e,r,t);"code"in r?r.code(a,s):a.$data&&r.validate?(0,_r.funcKeywordCode)(a,r):"macro"in r?(0,_r.macroKeywordCode)(a,r):(r.compile||r.validate)&&(0,_r.funcKeywordCode)(a,r)}const Ld=/^\/(?:[^~]|~0|~1)*$/,Md=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function uo(e,{dataLevel:t,dataNames:r,dataPathArr:s}){let a,o;if(e==="")return ee.default.rootData;if(e[0]==="/"){if(!Ld.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);a=e,o=ee.default.rootData}else{const c=Md.exec(e);if(!c)throw new Error(`Invalid JSON-pointer: ${e}`);const p=+c[1];if(a=c[2],a==="#"){if(p>=t)throw new Error(d("property/index",p));return s[t-p]}if(p>t)throw new Error(d("data",p));if(o=r[t-p],!a)return o}let l=o;const f=a.split("/");for(const c of f)c&&(o=(0,K._)`${o}${(0,K.getProperty)((0,ft.unescapeJsonPointer)(c))}`,l=(0,K._)`${l} && ${o}`);return l;function d(c,p){return`Cannot access ${c} ${p} levels up, current level is ${t}`}}He.getData=uo;var er={};Object.defineProperty(er,"__esModule",{value:!0});class Vd extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}er.default=Vd;var qt={};Object.defineProperty(qt,"__esModule",{value:!0});const Cs=Ne;class Fd extends Error{constructor(t,r,s,a){super(a||`can't resolve reference ${s} from id ${r}`),this.missingRef=(0,Cs.resolveUrl)(t,r,s),this.missingSchema=(0,Cs.normalizeId)((0,Cs.getFullPath)(t,this.missingRef))}}qt.default=Fd;var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.resolveSchema=Re.getCompilingSchema=Re.resolveRef=Re.compileSchema=Re.SchemaEnv=void 0;const Be=re,xd=er,jt=Me,We=Ne,qn=z,zd=He;class ls{constructor(t){var r;this.refs={},this.dynamicAnchors={};let s;typeof t.schema=="object"&&(s=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,We.normalizeId)(s==null?void 0:s[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=s==null?void 0:s.$async,this.refs={}}}Re.SchemaEnv=ls;function pa(e){const t=fo.call(this,e);if(t)return t;const r=(0,We.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:s,lines:a}=this.opts.code,{ownProperties:o}=this.opts,l=new Be.CodeGen(this.scope,{es5:s,lines:a,ownProperties:o});let f;e.$async&&(f=l.scopeValue("Error",{ref:xd.default,code:(0,Be._)`require("ajv/dist/runtime/validation_error").default`}));const d=l.scopeName("validate");e.validateName=d;const c={gen:l,allErrors:this.opts.allErrors,data:jt.default.data,parentData:jt.default.parentData,parentDataProperty:jt.default.parentDataProperty,dataNames:[jt.default.data],dataPathArr:[Be.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:l.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Be.stringify)(e.schema)}:{ref:e.schema}),validateName:d,ValidationError:f,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Be.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Be._)`""`,opts:this.opts,self:this};let p;try{this._compilations.add(e),(0,zd.validateFunctionCode)(c),l.optimize(this.opts.code.optimize);const v=l.toString();p=`${l.scopeRefs(jt.default.scope)}return ${v}`,this.opts.code.process&&(p=this.opts.code.process(p,e));const $=new Function(`${jt.default.self}`,`${jt.default.scope}`,p)(this,this.scope.get());if(this.scope.value(d,{ref:$}),$.errors=null,$.schema=e.schema,$.schemaEnv=e,e.$async&&($.$async=!0),this.opts.code.source===!0&&($.source={validateName:d,validateCode:v,scopeValues:l._values}),this.opts.unevaluated){const{props:g,items:_}=c;$.evaluated={props:g instanceof Be.Name?void 0:g,items:_ instanceof Be.Name?void 0:_,dynamicProps:g instanceof Be.Name,dynamicItems:_ instanceof Be.Name},$.source&&($.source.evaluated=(0,Be.stringify)($.evaluated))}return e.validate=$,e}catch(v){throw delete e.validate,delete e.validateName,p&&this.logger.error("Error compiling schema, function code:",p),v}finally{this._compilations.delete(e)}}Re.compileSchema=pa;function qd(e,t,r){var s;r=(0,We.resolveUrl)(this.opts.uriResolver,t,r);const a=e.refs[r];if(a)return a;let o=Gd.call(this,e,r);if(o===void 0){const l=(s=e.localRefs)===null||s===void 0?void 0:s[r],{schemaId:f}=this.opts;l&&(o=new ls({schema:l,schemaId:f,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=Ud.call(this,o)}Re.resolveRef=qd;function Ud(e){return(0,We.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:pa.call(this,e)}function fo(e){for(const t of this._compilations)if(Hd(t,e))return t}Re.getCompilingSchema=fo;function Hd(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Gd(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||cs.call(this,e,t)}function cs(e,t){const r=this.opts.uriResolver.parse(t),s=(0,We._getFullPath)(this.opts.uriResolver,r);let a=(0,We.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&s===a)return Rs.call(this,r,e);const o=(0,We.normalizeId)(s),l=this.refs[o]||this.schemas[o];if(typeof l=="string"){const f=cs.call(this,e,l);return typeof(f==null?void 0:f.schema)!="object"?void 0:Rs.call(this,r,f)}if(typeof(l==null?void 0:l.schema)=="object"){if(l.validate||pa.call(this,l),o===(0,We.normalizeId)(t)){const{schema:f}=l,{schemaId:d}=this.opts,c=f[d];return c&&(a=(0,We.resolveUrl)(this.opts.uriResolver,a,c)),new ls({schema:f,schemaId:d,root:e,baseId:a})}return Rs.call(this,r,l)}}Re.resolveSchema=cs;const Jd=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Rs(e,{baseId:t,schema:r,root:s}){var a;if(((a=e.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(const f of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const d=r[(0,qn.unescapeFragment)(f)];if(d===void 0)return;r=d;const c=typeof r=="object"&&r[this.opts.schemaId];!Jd.has(f)&&c&&(t=(0,We.resolveUrl)(this.opts.uriResolver,t,c))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,qn.schemaHasRulesButRef)(r,this.RULES)){const f=(0,We.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=cs.call(this,s,f)}const{schemaId:l}=this.opts;if(o=o||new ls({schema:r,schemaId:l,root:s,baseId:t}),o.schema!==o.root.schema)return o}const Kd="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Bd="Meta-schema for $data reference (JSON AnySchema extension proposal)",Xd="object",Wd=["$data"],Zd={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Yd=!1,Qd={$id:Kd,description:Bd,type:Xd,required:Wd,properties:Zd,additionalProperties:Yd};var va={},ds={exports:{}};const eu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var tu={HEX:eu};const{HEX:ru}=tu;function ho(e){if(po(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=t;return r?{host:au(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function Un(e,t=!1){let r="",s=!0;for(const a of e){if(ru[a]===void 0)return;a!=="0"&&s===!0&&(s=!1),s||(r+=a)}return t&&r.length===0&&(r="0"),r}function su(e){let t=0;const r={error:!1,address:"",zone:""},s=[],a=[];let o=!1,l=!1,f=!1;function d(){if(a.length){if(o===!1){const c=Un(a);if(c!==void 0)s.push(c);else return r.error=!0,!1}a.length=0}return!0}for(let c=0;c<e.length;c++){const p=e[c];if(!(p==="["||p==="]"))if(p===":"){if(l===!0&&(f=!0),!d())break;if(t++,s.push(":"),t>7){r.error=!0;break}c-1>=0&&e[c-1]===":"&&(l=!0);continue}else if(p==="%"){if(!d())break;o=!0}else{a.push(p);continue}}return a.length&&(o?r.zone=a.join(""):f?s.push(a.join("")):s.push(Un(a))),r.address=s.join(""),r}function mo(e,t={}){if(po(e,":")<2)return{host:e,isIPV6:!1};const r=su(e);if(r.error)return{host:e,isIPV6:!1};{let s=r.address,a=r.address;return r.zone&&(s+="%"+r.zone,a+="%25"+r.zone),{host:s,escapedHost:a,isIPV6:!0}}}function au(e,t){let r="",s=!0;const a=e.length;for(let o=0;o<a;o++){const l=e[o];l==="0"&&s?(o+1<=a&&e[o+1]===t||o+1===a)&&(r+=l,s=!1):(l===t?s=!0:s=!1,r+=l)}return r}function po(e,t){let r=0;for(let s=0;s<e.length;s++)e[s]===t&&r++;return r}const Hn=/^\.\.?\//u,Gn=/^\/\.(?:\/|$)/u,Jn=/^\/\.\.(?:\/|$)/u,nu=/^\/?(?:.|\n)*?(?=\/|$)/u;function iu(e){const t=[];for(;e.length;)if(e.match(Hn))e=e.replace(Hn,"");else if(e.match(Gn))e=e.replace(Gn,"/");else if(e.match(Jn))e=e.replace(Jn,"/"),t.pop();else if(e==="."||e==="..")e="";else{const r=e.match(nu);if(r){const s=r[0];e=e.slice(s.length),t.push(s)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function ou(e,t){const r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function lu(e,t){const r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push("@")),e.host!==void 0){let s=unescape(e.host);const a=ho(s);if(a.isIPV4)s=a.host;else{const o=mo(a.host,{});o.isIPV6===!0?s=`[${o.escapedHost}]`:s=e.host}r.push(s)}return(typeof e.port=="number"||typeof e.port=="string")&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var cu={recomposeAuthority:lu,normalizeComponentEncoding:ou,removeDotSegments:iu,normalizeIPv4:ho,normalizeIPv6:mo};const du=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,uu=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function vo(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function go(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function yo(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function fu(e){return e.secure=vo(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function hu(e){if((e.port===(vo(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function mu(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(uu);if(r){const s=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const a=`${s}:${t.nid||e.nid}`,o=ga[a];e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function pu(e,t){const r=t.scheme||e.scheme||"urn",s=e.nid.toLowerCase(),a=`${r}:${t.nid||s}`,o=ga[a];o&&(e=o.serialize(e,t));const l=e,f=e.nss;return l.path=`${s||t.nid}:${f}`,t.skipEscape=!0,l}function vu(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!du.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function gu(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const _o={scheme:"http",domainHost:!0,parse:go,serialize:yo},yu={scheme:"https",domainHost:_o.domainHost,parse:go,serialize:yo},Gr={scheme:"ws",domainHost:!0,parse:fu,serialize:hu},_u={scheme:"wss",domainHost:Gr.domainHost,parse:Gr.parse,serialize:Gr.serialize},bu={scheme:"urn",parse:mu,serialize:pu,skipNormalize:!0},$u={scheme:"urn:uuid",parse:vu,serialize:gu,skipNormalize:!0},ga={http:_o,https:yu,ws:Gr,wss:_u,urn:bu,"urn:uuid":$u};var Eu=ga;const{normalizeIPv6:wu,normalizeIPv4:Su,removeDotSegments:pr,recomposeAuthority:Ou,normalizeComponentEncoding:Mr}=cu,ya=Eu;function Pu(e,t){return typeof e=="string"?e=nt(ht(e,t),t):typeof e=="object"&&(e=ht(nt(e,t),t)),e}function Nu(e,t,r){const s=Object.assign({scheme:"null"},r),a=bo(ht(e,s),ht(t,s),s,!0);return nt(a,{...s,skipEscape:!0})}function bo(e,t,r,s){const a={};return s||(e=ht(nt(e,r),r),t=ht(nt(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=pr(t.path||""),a.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=pr(t.path||""),a.query=t.query):(t.path?(t.path.charAt(0)==="/"?a.path=pr(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?a.path="/"+t.path:e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path,a.path=pr(a.path)),a.query=t.query):(a.path=e.path,t.query!==void 0?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function ku(e,t,r){return typeof e=="string"?(e=unescape(e),e=nt(Mr(ht(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=nt(Mr(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=nt(Mr(ht(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=nt(Mr(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function nt(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},s=Object.assign({},t),a=[],o=ya[(s.scheme||r.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(r,s),r.path!==void 0&&(s.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),s.reference!=="suffix"&&r.scheme&&a.push(r.scheme,":");const l=Ou(r,s);if(l!==void 0&&(s.reference!=="suffix"&&a.push("//"),a.push(l),r.path&&r.path.charAt(0)!=="/"&&a.push("/")),r.path!==void 0){let f=r.path;!s.absolutePath&&(!o||!o.absolutePath)&&(f=pr(f)),l===void 0&&(f=f.replace(/^\/\//u,"/%2F")),a.push(f)}return r.query!==void 0&&a.push("?",r.query),r.fragment!==void 0&&a.push("#",r.fragment),a.join("")}const Iu=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function Au(e){let t=0;for(let r=0,s=e.length;r<s;++r)if(t=e.charCodeAt(r),t>126||Iu[t])return!0;return!1}const Tu=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function ht(e,t){const r=Object.assign({},t),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},a=e.indexOf("%")!==-1;let o=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);const l=e.match(Tu);if(l){if(s.scheme=l[1],s.userinfo=l[3],s.host=l[4],s.port=parseInt(l[5],10),s.path=l[6]||"",s.query=l[7],s.fragment=l[8],isNaN(s.port)&&(s.port=l[5]),s.host){const d=Su(s.host);if(d.isIPV4===!1){const c=wu(d.host,{isIPV4:!1});s.host=c.host.toLowerCase(),o=c.isIPV6}else s.host=d.host,o=!0}s.scheme===void 0&&s.userinfo===void 0&&s.host===void 0&&s.port===void 0&&!s.path&&s.query===void 0?s.reference="same-document":s.scheme===void 0?s.reference="relative":s.fragment===void 0?s.reference="absolute":s.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==s.reference&&(s.error=s.error||"URI is not a "+r.reference+" reference.");const f=ya[(r.scheme||s.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!f||!f.unicodeSupport)&&s.host&&(r.domainHost||f&&f.domainHost)&&o===!1&&Au(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(d){s.error=s.error||"Host's domain name can not be converted to ASCII: "+d}(!f||f&&!f.skipNormalize)&&(a&&s.scheme!==void 0&&(s.scheme=unescape(s.scheme)),a&&s.host!==void 0&&(s.host=unescape(s.host)),s.path!==void 0&&s.path.length&&(s.path=escape(unescape(s.path))),s.fragment!==void 0&&s.fragment.length&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),f&&f.parse&&f.parse(s,r)}else s.error=s.error||"URI can not be parsed.";return s}const _a={SCHEMES:ya,normalize:Pu,resolve:Nu,resolveComponents:bo,equal:ku,serialize:nt,parse:ht};ds.exports=_a;ds.exports.default=_a;ds.exports.fastUri=_a;var Cu=ds.exports;Object.defineProperty(va,"__esModule",{value:!0});const $o=Cu;$o.code='require("ajv/dist/runtime/uri").default';va.default=$o;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=He;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=re;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const s=er,a=qt,o=xt,l=Re,f=re,d=Ne,c=$e,p=z,v=Qd,E=va,$=(L,N)=>new RegExp(L,N);$.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],_=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),n={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},i={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},u=200;function h(L){var N,T,P,m,w,C,x,U,Y,Q,de,we,ae,me,be,Ve,De,it,Fe,pt,ot,vt,Ye,gt,xe;const Qe=L.strict,yt=(N=L.code)===null||N===void 0?void 0:N.optimize,Tt=yt===!0||yt===void 0?1:yt||0,Ct=(P=(T=L.code)===null||T===void 0?void 0:T.regExp)!==null&&P!==void 0?P:$,pe=(m=L.uriResolver)!==null&&m!==void 0?m:E.default;return{strictSchema:(C=(w=L.strictSchema)!==null&&w!==void 0?w:Qe)!==null&&C!==void 0?C:!0,strictNumbers:(U=(x=L.strictNumbers)!==null&&x!==void 0?x:Qe)!==null&&U!==void 0?U:!0,strictTypes:(Q=(Y=L.strictTypes)!==null&&Y!==void 0?Y:Qe)!==null&&Q!==void 0?Q:"log",strictTuples:(we=(de=L.strictTuples)!==null&&de!==void 0?de:Qe)!==null&&we!==void 0?we:"log",strictRequired:(me=(ae=L.strictRequired)!==null&&ae!==void 0?ae:Qe)!==null&&me!==void 0?me:!1,code:L.code?{...L.code,optimize:Tt,regExp:Ct}:{optimize:Tt,regExp:Ct},loopRequired:(be=L.loopRequired)!==null&&be!==void 0?be:u,loopEnum:(Ve=L.loopEnum)!==null&&Ve!==void 0?Ve:u,meta:(De=L.meta)!==null&&De!==void 0?De:!0,messages:(it=L.messages)!==null&&it!==void 0?it:!0,inlineRefs:(Fe=L.inlineRefs)!==null&&Fe!==void 0?Fe:!0,schemaId:(pt=L.schemaId)!==null&&pt!==void 0?pt:"$id",addUsedSchema:(ot=L.addUsedSchema)!==null&&ot!==void 0?ot:!0,validateSchema:(vt=L.validateSchema)!==null&&vt!==void 0?vt:!0,validateFormats:(Ye=L.validateFormats)!==null&&Ye!==void 0?Ye:!0,unicodeRegExp:(gt=L.unicodeRegExp)!==null&&gt!==void 0?gt:!0,int32range:(xe=L.int32range)!==null&&xe!==void 0?xe:!0,uriResolver:pe}}class y{constructor(N={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,N=this.opts={...N,...h(N)};const{es5:T,lines:P}=this.opts.code;this.scope=new f.ValueScope({scope:{},prefixes:_,es5:T,lines:P}),this.logger=F(N.logger);const m=N.validateFormats;N.validateFormats=!1,this.RULES=(0,o.getRules)(),S.call(this,n,N,"NOT SUPPORTED"),S.call(this,i,N,"DEPRECATED","warn"),this._metaOpts=B.call(this),N.formats&&j.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),N.keywords&&D.call(this,N.keywords),typeof N.meta=="object"&&this.addMetaSchema(N.meta),R.call(this),N.validateFormats=m}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:N,meta:T,schemaId:P}=this.opts;let m=v;P==="id"&&(m={...v},m.id=m.$id,delete m.$id),T&&N&&this.addMetaSchema(m,m[P],!1)}defaultMeta(){const{meta:N,schemaId:T}=this.opts;return this.opts.defaultMeta=typeof N=="object"?N[T]||N:void 0}validate(N,T){let P;if(typeof N=="string"){if(P=this.getSchema(N),!P)throw new Error(`no schema with key or ref "${N}"`)}else P=this.compile(N);const m=P(T);return"$async"in P||(this.errors=P.errors),m}compile(N,T){const P=this._addSchema(N,T);return P.validate||this._compileSchemaEnv(P)}compileAsync(N,T){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:P}=this.opts;return m.call(this,N,T);async function m(Q,de){await w.call(this,Q.$schema);const we=this._addSchema(Q,de);return we.validate||C.call(this,we)}async function w(Q){Q&&!this.getSchema(Q)&&await m.call(this,{$ref:Q},!0)}async function C(Q){try{return this._compileSchemaEnv(Q)}catch(de){if(!(de instanceof a.default))throw de;return x.call(this,de),await U.call(this,de.missingSchema),C.call(this,Q)}}function x({missingSchema:Q,missingRef:de}){if(this.refs[Q])throw new Error(`AnySchema ${Q} is loaded but ${de} cannot be resolved`)}async function U(Q){const de=await Y.call(this,Q);this.refs[Q]||await w.call(this,de.$schema),this.refs[Q]||this.addSchema(de,Q,T)}async function Y(Q){const de=this._loading[Q];if(de)return de;try{return await(this._loading[Q]=P(Q))}finally{delete this._loading[Q]}}}addSchema(N,T,P,m=this.opts.validateSchema){if(Array.isArray(N)){for(const C of N)this.addSchema(C,void 0,P,m);return this}let w;if(typeof N=="object"){const{schemaId:C}=this.opts;if(w=N[C],w!==void 0&&typeof w!="string")throw new Error(`schema ${C} must be string`)}return T=(0,d.normalizeId)(T||w),this._checkUnique(T),this.schemas[T]=this._addSchema(N,P,T,m,!0),this}addMetaSchema(N,T,P=this.opts.validateSchema){return this.addSchema(N,T,!0,P),this}validateSchema(N,T){if(typeof N=="boolean")return!0;let P;if(P=N.$schema,P!==void 0&&typeof P!="string")throw new Error("$schema must be a string");if(P=P||this.opts.defaultMeta||this.defaultMeta(),!P)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const m=this.validate(P,N);if(!m&&T){const w="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(w);else throw new Error(w)}return m}getSchema(N){let T;for(;typeof(T=k.call(this,N))=="string";)N=T;if(T===void 0){const{schemaId:P}=this.opts,m=new l.SchemaEnv({schema:{},schemaId:P});if(T=l.resolveSchema.call(this,m,N),!T)return;this.refs[N]=T}return T.validate||this._compileSchemaEnv(T)}removeSchema(N){if(N instanceof RegExp)return this._removeAllSchemas(this.schemas,N),this._removeAllSchemas(this.refs,N),this;switch(typeof N){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const T=k.call(this,N);return typeof T=="object"&&this._cache.delete(T.schema),delete this.schemas[N],delete this.refs[N],this}case"object":{const T=N;this._cache.delete(T);let P=N[this.opts.schemaId];return P&&(P=(0,d.normalizeId)(P),delete this.schemas[P],delete this.refs[P]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(N){for(const T of N)this.addKeyword(T);return this}addKeyword(N,T){let P;if(typeof N=="string")P=N,typeof T=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),T.keyword=P);else if(typeof N=="object"&&T===void 0){if(T=N,P=T.keyword,Array.isArray(P)&&!P.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(H.call(this,P,T),!T)return(0,p.eachItem)(P,w=>Z.call(this,w)),this;ie.call(this,T);const m={...T,type:(0,c.getJSONTypes)(T.type),schemaType:(0,c.getJSONTypes)(T.schemaType)};return(0,p.eachItem)(P,m.type.length===0?w=>Z.call(this,w,m):w=>m.type.forEach(C=>Z.call(this,w,m,C))),this}getKeyword(N){const T=this.RULES.all[N];return typeof T=="object"?T.definition:!!T}removeKeyword(N){const{RULES:T}=this;delete T.keywords[N],delete T.all[N];for(const P of T.rules){const m=P.rules.findIndex(w=>w.keyword===N);m>=0&&P.rules.splice(m,1)}return this}addFormat(N,T){return typeof T=="string"&&(T=new RegExp(T)),this.formats[N]=T,this}errorsText(N=this.errors,{separator:T=", ",dataVar:P="data"}={}){return!N||N.length===0?"No errors":N.map(m=>`${P}${m.instancePath} ${m.message}`).reduce((m,w)=>m+T+w)}$dataMetaSchema(N,T){const P=this.RULES.all;N=JSON.parse(JSON.stringify(N));for(const m of T){const w=m.split("/").slice(1);let C=N;for(const x of w)C=C[x];for(const x in P){const U=P[x];if(typeof U!="object")continue;const{$data:Y}=U.definition,Q=C[x];Y&&Q&&(C[x]=Oe(Q))}}return N}_removeAllSchemas(N,T){for(const P in N){const m=N[P];(!T||T.test(P))&&(typeof m=="string"?delete N[P]:m&&!m.meta&&(this._cache.delete(m.schema),delete N[P]))}}_addSchema(N,T,P,m=this.opts.validateSchema,w=this.opts.addUsedSchema){let C;const{schemaId:x}=this.opts;if(typeof N=="object")C=N[x];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof N!="boolean")throw new Error("schema must be object or boolean")}let U=this._cache.get(N);if(U!==void 0)return U;P=(0,d.normalizeId)(C||P);const Y=d.getSchemaRefs.call(this,N,P);return U=new l.SchemaEnv({schema:N,schemaId:x,meta:T,baseId:P,localRefs:Y}),this._cache.set(U.schema,U),w&&!P.startsWith("#")&&(P&&this._checkUnique(P),this.refs[P]=U),m&&this.validateSchema(N,!0),U}_checkUnique(N){if(this.schemas[N]||this.refs[N])throw new Error(`schema with key or id "${N}" already exists`)}_compileSchemaEnv(N){if(N.meta?this._compileMetaSchema(N):l.compileSchema.call(this,N),!N.validate)throw new Error("ajv implementation error");return N.validate}_compileMetaSchema(N){const T=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,N)}finally{this.opts=T}}}y.ValidationError=s.default,y.MissingRefError=a.default,e.default=y;function S(L,N,T,P="error"){for(const m in L){const w=m;w in N&&this.logger[P](`${T}: option ${m}. ${L[w]}`)}}function k(L){return L=(0,d.normalizeId)(L),this.schemas[L]||this.refs[L]}function R(){const L=this.opts.schemas;if(L)if(Array.isArray(L))this.addSchema(L);else for(const N in L)this.addSchema(L[N],N)}function j(){for(const L in this.opts.formats){const N=this.opts.formats[L];N&&this.addFormat(L,N)}}function D(L){if(Array.isArray(L)){this.addVocabulary(L);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const N in L){const T=L[N];T.keyword||(T.keyword=N),this.addKeyword(T)}}function B(){const L={...this.opts};for(const N of g)delete L[N];return L}const V={log(){},warn(){},error(){}};function F(L){if(L===!1)return V;if(L===void 0)return console;if(L.log&&L.warn&&L.error)return L;throw new Error("logger must implement log, warn and error methods")}const X=/^[a-z_$][a-z0-9_$:-]*$/i;function H(L,N){const{RULES:T}=this;if((0,p.eachItem)(L,P=>{if(T.keywords[P])throw new Error(`Keyword ${P} is already defined`);if(!X.test(P))throw new Error(`Keyword ${P} has invalid name`)}),!!N&&N.$data&&!("code"in N||"validate"in N))throw new Error('$data keyword must have "code" or "validate" function')}function Z(L,N,T){var P;const m=N==null?void 0:N.post;if(T&&m)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:w}=this;let C=m?w.post:w.rules.find(({type:U})=>U===T);if(C||(C={type:T,rules:[]},w.rules.push(C)),w.keywords[L]=!0,!N)return;const x={keyword:L,definition:{...N,type:(0,c.getJSONTypes)(N.type),schemaType:(0,c.getJSONTypes)(N.schemaType)}};N.before?le.call(this,C,x,N.before):C.rules.push(x),w.all[L]=x,(P=N.implements)===null||P===void 0||P.forEach(U=>this.addKeyword(U))}function le(L,N,T){const P=L.rules.findIndex(m=>m.keyword===T);P>=0?L.rules.splice(P,0,N):(L.rules.push(N),this.logger.warn(`rule ${T} is not defined`))}function ie(L){let{metaSchema:N}=L;N!==void 0&&(L.$data&&this.opts.$data&&(N=Oe(N)),L.validateSchema=this.compile(N,!0))}const Se={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Oe(L){return{anyOf:[L,Se]}}})(na);var ba={},us={},$a={};Object.defineProperty($a,"__esModule",{value:!0});const Ru={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};$a.default=Ru;var mt={};Object.defineProperty(mt,"__esModule",{value:!0});mt.callRef=mt.getValidate=void 0;const ju=qt,Kn=ne,je=re,Ht=Me,Bn=Re,Vr=z,Du={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:s}=e,{baseId:a,schemaEnv:o,validateName:l,opts:f,self:d}=s,{root:c}=o;if((r==="#"||r==="#/")&&a===c.baseId)return v();const p=Bn.resolveRef.call(d,c,a,r);if(p===void 0)throw new ju.default(s.opts.uriResolver,a,r);if(p instanceof Bn.SchemaEnv)return E(p);return $(p);function v(){if(o===c)return Jr(e,l,o,o.$async);const g=t.scopeValue("root",{ref:c});return Jr(e,(0,je._)`${g}.validate`,c,c.$async)}function E(g){const _=Eo(e,g);Jr(e,_,g,g.$async)}function $(g){const _=t.scopeValue("schema",f.code.source===!0?{ref:g,code:(0,je.stringify)(g)}:{ref:g}),n=t.name("valid"),i=e.subschema({schema:g,dataTypes:[],schemaPath:je.nil,topSchemaRef:_,errSchemaPath:r},n);e.mergeEvaluated(i),e.ok(n)}}};function Eo(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,je._)`${r.scopeValue("wrapper",{ref:t})}.validate`}mt.getValidate=Eo;function Jr(e,t,r,s){const{gen:a,it:o}=e,{allErrors:l,schemaEnv:f,opts:d}=o,c=d.passContext?Ht.default.this:je.nil;s?p():v();function p(){if(!f.$async)throw new Error("async schema referenced by sync schema");const g=a.let("valid");a.try(()=>{a.code((0,je._)`await ${(0,Kn.callValidateCode)(e,t,c)}`),$(t),l||a.assign(g,!0)},_=>{a.if((0,je._)`!(${_} instanceof ${o.ValidationError})`,()=>a.throw(_)),E(_),l||a.assign(g,!1)}),e.ok(g)}function v(){e.result((0,Kn.callValidateCode)(e,t,c),()=>$(t),()=>E(t))}function E(g){const _=(0,je._)`${g}.errors`;a.assign(Ht.default.vErrors,(0,je._)`${Ht.default.vErrors} === null ? ${_} : ${Ht.default.vErrors}.concat(${_})`),a.assign(Ht.default.errors,(0,je._)`${Ht.default.vErrors}.length`)}function $(g){var _;if(!o.opts.unevaluated)return;const n=(_=r==null?void 0:r.validate)===null||_===void 0?void 0:_.evaluated;if(o.props!==!0)if(n&&!n.dynamicProps)n.props!==void 0&&(o.props=Vr.mergeEvaluated.props(a,n.props,o.props));else{const i=a.var("props",(0,je._)`${g}.evaluated.props`);o.props=Vr.mergeEvaluated.props(a,i,o.props,je.Name)}if(o.items!==!0)if(n&&!n.dynamicItems)n.items!==void 0&&(o.items=Vr.mergeEvaluated.items(a,n.items,o.items));else{const i=a.var("items",(0,je._)`${g}.evaluated.items`);o.items=Vr.mergeEvaluated.items(a,i,o.items,je.Name)}}}mt.callRef=Jr;mt.default=Du;Object.defineProperty(us,"__esModule",{value:!0});const Lu=$a,Mu=mt,Vu=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Lu.default,Mu.default];us.default=Vu;var fs={},Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});const Qr=re,$t=Qr.operators,es={maximum:{okStr:"<=",ok:$t.LTE,fail:$t.GT},minimum:{okStr:">=",ok:$t.GTE,fail:$t.LT},exclusiveMaximum:{okStr:"<",ok:$t.LT,fail:$t.GTE},exclusiveMinimum:{okStr:">",ok:$t.GT,fail:$t.LTE}},Fu={message:({keyword:e,schemaCode:t})=>(0,Qr.str)`must be ${es[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Qr._)`{comparison: ${es[e].okStr}, limit: ${t}}`},xu={keyword:Object.keys(es),type:"number",schemaType:"number",$data:!0,error:Fu,code(e){const{keyword:t,data:r,schemaCode:s}=e;e.fail$data((0,Qr._)`${r} ${es[t].fail} ${s} || isNaN(${r})`)}};Ea.default=xu;var wa={};Object.defineProperty(wa,"__esModule",{value:!0});const br=re,zu={message:({schemaCode:e})=>(0,br.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,br._)`{multipleOf: ${e}}`},qu={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:zu,code(e){const{gen:t,data:r,schemaCode:s,it:a}=e,o=a.opts.multipleOfPrecision,l=t.let("res"),f=o?(0,br._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${o}`:(0,br._)`${l} !== parseInt(${l})`;e.fail$data((0,br._)`(${s} === 0 || (${l} = ${r}/${s}, ${f}))`)}};wa.default=qu;var Sa={},Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});function wo(e){const t=e.length;let r=0,s=0,a;for(;s<t;)r++,a=e.charCodeAt(s++),a>=55296&&a<=56319&&s<t&&(a=e.charCodeAt(s),(a&64512)===56320&&s++);return r}Oa.default=wo;wo.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Sa,"__esModule",{value:!0});const Lt=re,Uu=z,Hu=Oa,Gu={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,Lt.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,Lt._)`{limit: ${e}}`},Ju={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Gu,code(e){const{keyword:t,data:r,schemaCode:s,it:a}=e,o=t==="maxLength"?Lt.operators.GT:Lt.operators.LT,l=a.opts.unicode===!1?(0,Lt._)`${r}.length`:(0,Lt._)`${(0,Uu.useFunc)(e.gen,Hu.default)}(${r})`;e.fail$data((0,Lt._)`${l} ${o} ${s}`)}};Sa.default=Ju;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});const Ku=ne,ts=re,Bu={message:({schemaCode:e})=>(0,ts.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,ts._)`{pattern: ${e}}`},Xu={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Bu,code(e){const{data:t,$data:r,schema:s,schemaCode:a,it:o}=e,l=o.opts.unicodeRegExp?"u":"",f=r?(0,ts._)`(new RegExp(${a}, ${l}))`:(0,Ku.usePattern)(e,s);e.fail$data((0,ts._)`!${f}.test(${t})`)}};Pa.default=Xu;var Na={};Object.defineProperty(Na,"__esModule",{value:!0});const $r=re,Wu={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,$r.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,$r._)`{limit: ${e}}`},Zu={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Wu,code(e){const{keyword:t,data:r,schemaCode:s}=e,a=t==="maxProperties"?$r.operators.GT:$r.operators.LT;e.fail$data((0,$r._)`Object.keys(${r}).length ${a} ${s}`)}};Na.default=Zu;var ka={};Object.defineProperty(ka,"__esModule",{value:!0});const mr=ne,Er=re,Yu=z,Qu={message:({params:{missingProperty:e}})=>(0,Er.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Er._)`{missingProperty: ${e}}`},ef={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Qu,code(e){const{gen:t,schema:r,schemaCode:s,data:a,$data:o,it:l}=e,{opts:f}=l;if(!o&&r.length===0)return;const d=r.length>=f.loopRequired;if(l.allErrors?c():p(),f.strictRequired){const $=e.parentSchema.properties,{definedProperties:g}=e.it;for(const _ of r)if(($==null?void 0:$[_])===void 0&&!g.has(_)){const n=l.schemaEnv.baseId+l.errSchemaPath,i=`required property "${_}" is not defined at "${n}" (strictRequired)`;(0,Yu.checkStrictMode)(l,i,l.opts.strictRequired)}}function c(){if(d||o)e.block$data(Er.nil,v);else for(const $ of r)(0,mr.checkReportMissingProp)(e,$)}function p(){const $=t.let("missing");if(d||o){const g=t.let("valid",!0);e.block$data(g,()=>E($,g)),e.ok(g)}else t.if((0,mr.checkMissingProp)(e,r,$)),(0,mr.reportMissingProp)(e,$),t.else()}function v(){t.forOf("prop",s,$=>{e.setParams({missingProperty:$}),t.if((0,mr.noPropertyInData)(t,a,$,f.ownProperties),()=>e.error())})}function E($,g){e.setParams({missingProperty:$}),t.forOf($,s,()=>{t.assign(g,(0,mr.propertyInData)(t,a,$,f.ownProperties)),t.if((0,Er.not)(g),()=>{e.error(),t.break()})},Er.nil)}}};ka.default=ef;var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});const wr=re,tf={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,wr.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,wr._)`{limit: ${e}}`},rf={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:tf,code(e){const{keyword:t,data:r,schemaCode:s}=e,a=t==="maxItems"?wr.operators.GT:wr.operators.LT;e.fail$data((0,wr._)`${r}.length ${a} ${s}`)}};Ia.default=rf;var Aa={},Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});const So=Xi;So.code='require("ajv/dist/runtime/equal").default';Ar.default=So;Object.defineProperty(Aa,"__esModule",{value:!0});const js=$e,Pe=re,sf=z,af=Ar,nf={message:({params:{i:e,j:t}})=>(0,Pe.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Pe._)`{i: ${e}, j: ${t}}`},of={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:nf,code(e){const{gen:t,data:r,$data:s,schema:a,parentSchema:o,schemaCode:l,it:f}=e;if(!s&&!a)return;const d=t.let("valid"),c=o.items?(0,js.getSchemaTypes)(o.items):[];e.block$data(d,p,(0,Pe._)`${l} === false`),e.ok(d);function p(){const g=t.let("i",(0,Pe._)`${r}.length`),_=t.let("j");e.setParams({i:g,j:_}),t.assign(d,!0),t.if((0,Pe._)`${g} > 1`,()=>(v()?E:$)(g,_))}function v(){return c.length>0&&!c.some(g=>g==="object"||g==="array")}function E(g,_){const n=t.name("item"),i=(0,js.checkDataTypes)(c,n,f.opts.strictNumbers,js.DataType.Wrong),u=t.const("indices",(0,Pe._)`{}`);t.for((0,Pe._)`;${g}--;`,()=>{t.let(n,(0,Pe._)`${r}[${g}]`),t.if(i,(0,Pe._)`continue`),c.length>1&&t.if((0,Pe._)`typeof ${n} == "string"`,(0,Pe._)`${n} += "_"`),t.if((0,Pe._)`typeof ${u}[${n}] == "number"`,()=>{t.assign(_,(0,Pe._)`${u}[${n}]`),e.error(),t.assign(d,!1).break()}).code((0,Pe._)`${u}[${n}] = ${g}`)})}function $(g,_){const n=(0,sf.useFunc)(t,af.default),i=t.name("outer");t.label(i).for((0,Pe._)`;${g}--;`,()=>t.for((0,Pe._)`${_} = ${g}; ${_}--;`,()=>t.if((0,Pe._)`${n}(${r}[${g}], ${r}[${_}])`,()=>{e.error(),t.assign(d,!1).break(i)})))}}};Aa.default=of;var Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});const Gs=re,lf=z,cf=Ar,df={message:"must be equal to constant",params:({schemaCode:e})=>(0,Gs._)`{allowedValue: ${e}}`},uf={keyword:"const",$data:!0,error:df,code(e){const{gen:t,data:r,$data:s,schemaCode:a,schema:o}=e;s||o&&typeof o=="object"?e.fail$data((0,Gs._)`!${(0,lf.useFunc)(t,cf.default)}(${r}, ${a})`):e.fail((0,Gs._)`${o} !== ${r}`)}};Ta.default=uf;var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});const vr=re,ff=z,hf=Ar,mf={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,vr._)`{allowedValues: ${e}}`},pf={keyword:"enum",schemaType:"array",$data:!0,error:mf,code(e){const{gen:t,data:r,$data:s,schema:a,schemaCode:o,it:l}=e;if(!s&&a.length===0)throw new Error("enum must have non-empty array");const f=a.length>=l.opts.loopEnum;let d;const c=()=>d??(d=(0,ff.useFunc)(t,hf.default));let p;if(f||s)p=t.let("valid"),e.block$data(p,v);else{if(!Array.isArray(a))throw new Error("ajv implementation error");const $=t.const("vSchema",o);p=(0,vr.or)(...a.map((g,_)=>E($,_)))}e.pass(p);function v(){t.assign(p,!1),t.forOf("v",o,$=>t.if((0,vr._)`${c()}(${r}, ${$})`,()=>t.assign(p,!0).break()))}function E($,g){const _=a[g];return typeof _=="object"&&_!==null?(0,vr._)`${c()}(${r}, ${$}[${g}])`:(0,vr._)`${r} === ${_}`}}};Ca.default=pf;Object.defineProperty(fs,"__esModule",{value:!0});const vf=Ea,gf=wa,yf=Sa,_f=Pa,bf=Na,$f=ka,Ef=Ia,wf=Aa,Sf=Ta,Of=Ca,Pf=[vf.default,gf.default,yf.default,_f.default,bf.default,$f.default,Ef.default,wf.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Sf.default,Of.default];fs.default=Pf;var hs={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.validateAdditionalItems=void 0;const Mt=re,Js=z,Nf={message:({params:{len:e}})=>(0,Mt.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Mt._)`{limit: ${e}}`},kf={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Nf,code(e){const{parentSchema:t,it:r}=e,{items:s}=t;if(!Array.isArray(s)){(0,Js.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Oo(e,s)}};function Oo(e,t){const{gen:r,schema:s,data:a,keyword:o,it:l}=e;l.items=!0;const f=r.const("len",(0,Mt._)`${a}.length`);if(s===!1)e.setParams({len:t.length}),e.pass((0,Mt._)`${f} <= ${t.length}`);else if(typeof s=="object"&&!(0,Js.alwaysValidSchema)(l,s)){const c=r.var("valid",(0,Mt._)`${f} <= ${t.length}`);r.if((0,Mt.not)(c),()=>d(c)),e.ok(c)}function d(c){r.forRange("i",t.length,f,p=>{e.subschema({keyword:o,dataProp:p,dataPropType:Js.Type.Num},c),l.allErrors||r.if((0,Mt.not)(c),()=>r.break())})}}tr.validateAdditionalItems=Oo;tr.default=kf;var Ra={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.validateTuple=void 0;const Xn=re,Kr=z,If=ne,Af={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Po(e,"additionalItems",t);r.items=!0,!(0,Kr.alwaysValidSchema)(r,t)&&e.ok((0,If.validateArray)(e))}};function Po(e,t,r=e.schema){const{gen:s,parentSchema:a,data:o,keyword:l,it:f}=e;p(a),f.opts.unevaluated&&r.length&&f.items!==!0&&(f.items=Kr.mergeEvaluated.items(s,r.length,f.items));const d=s.name("valid"),c=s.const("len",(0,Xn._)`${o}.length`);r.forEach((v,E)=>{(0,Kr.alwaysValidSchema)(f,v)||(s.if((0,Xn._)`${c} > ${E}`,()=>e.subschema({keyword:l,schemaProp:E,dataProp:E},d)),e.ok(d))});function p(v){const{opts:E,errSchemaPath:$}=f,g=r.length,_=g===v.minItems&&(g===v.maxItems||v[t]===!1);if(E.strictTuples&&!_){const n=`"${l}" is ${g}-tuple, but minItems or maxItems/${t} are not specified or different at path "${$}"`;(0,Kr.checkStrictMode)(f,n,E.strictTuples)}}}rr.validateTuple=Po;rr.default=Af;Object.defineProperty(Ra,"__esModule",{value:!0});const Tf=rr,Cf={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Tf.validateTuple)(e,"items")};Ra.default=Cf;var ja={};Object.defineProperty(ja,"__esModule",{value:!0});const Wn=re,Rf=z,jf=ne,Df=tr,Lf={message:({params:{len:e}})=>(0,Wn.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Wn._)`{limit: ${e}}`},Mf={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Lf,code(e){const{schema:t,parentSchema:r,it:s}=e,{prefixItems:a}=r;s.items=!0,!(0,Rf.alwaysValidSchema)(s,t)&&(a?(0,Df.validateAdditionalItems)(e,a):e.ok((0,jf.validateArray)(e)))}};ja.default=Mf;var Da={};Object.defineProperty(Da,"__esModule",{value:!0});const qe=re,Fr=z,Vf={message:({params:{min:e,max:t}})=>t===void 0?(0,qe.str)`must contain at least ${e} valid item(s)`:(0,qe.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,qe._)`{minContains: ${e}}`:(0,qe._)`{minContains: ${e}, maxContains: ${t}}`},Ff={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Vf,code(e){const{gen:t,schema:r,parentSchema:s,data:a,it:o}=e;let l,f;const{minContains:d,maxContains:c}=s;o.opts.next?(l=d===void 0?1:d,f=c):l=1;const p=t.const("len",(0,qe._)`${a}.length`);if(e.setParams({min:l,max:f}),f===void 0&&l===0){(0,Fr.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&l>f){(0,Fr.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Fr.alwaysValidSchema)(o,r)){let _=(0,qe._)`${p} >= ${l}`;f!==void 0&&(_=(0,qe._)`${_} && ${p} <= ${f}`),e.pass(_);return}o.items=!0;const v=t.name("valid");f===void 0&&l===1?$(v,()=>t.if(v,()=>t.break())):l===0?(t.let(v,!0),f!==void 0&&t.if((0,qe._)`${a}.length > 0`,E)):(t.let(v,!1),E()),e.result(v,()=>e.reset());function E(){const _=t.name("_valid"),n=t.let("count",0);$(_,()=>t.if(_,()=>g(n)))}function $(_,n){t.forRange("i",0,p,i=>{e.subschema({keyword:"contains",dataProp:i,dataPropType:Fr.Type.Num,compositeRule:!0},_),n()})}function g(_){t.code((0,qe._)`${_}++`),f===void 0?t.if((0,qe._)`${_} >= ${l}`,()=>t.assign(v,!0).break()):(t.if((0,qe._)`${_} > ${f}`,()=>t.assign(v,!1).break()),l===1?t.assign(v,!0):t.if((0,qe._)`${_} >= ${l}`,()=>t.assign(v,!0)))}}};Da.default=Ff;var ms={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=re,r=z,s=ne;e.error={message:({params:{property:d,depsCount:c,deps:p}})=>{const v=c===1?"property":"properties";return(0,t.str)`must have ${v} ${p} when property ${d} is present`},params:({params:{property:d,depsCount:c,deps:p,missingProperty:v}})=>(0,t._)`{property: ${d},
    missingProperty: ${v},
    depsCount: ${c},
    deps: ${p}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(d){const[c,p]=o(d);l(d,c),f(d,p)}};function o({schema:d}){const c={},p={};for(const v in d){if(v==="__proto__")continue;const E=Array.isArray(d[v])?c:p;E[v]=d[v]}return[c,p]}function l(d,c=d.schema){const{gen:p,data:v,it:E}=d;if(Object.keys(c).length===0)return;const $=p.let("missing");for(const g in c){const _=c[g];if(_.length===0)continue;const n=(0,s.propertyInData)(p,v,g,E.opts.ownProperties);d.setParams({property:g,depsCount:_.length,deps:_.join(", ")}),E.allErrors?p.if(n,()=>{for(const i of _)(0,s.checkReportMissingProp)(d,i)}):(p.if((0,t._)`${n} && (${(0,s.checkMissingProp)(d,_,$)})`),(0,s.reportMissingProp)(d,$),p.else())}}e.validatePropertyDeps=l;function f(d,c=d.schema){const{gen:p,data:v,keyword:E,it:$}=d,g=p.name("valid");for(const _ in c)(0,r.alwaysValidSchema)($,c[_])||(p.if((0,s.propertyInData)(p,v,_,$.opts.ownProperties),()=>{const n=d.subschema({keyword:E,schemaProp:_},g);d.mergeValidEvaluated(n,g)},()=>p.var(g,!0)),d.ok(g))}e.validateSchemaDeps=f,e.default=a})(ms);var La={};Object.defineProperty(La,"__esModule",{value:!0});const No=re,xf=z,zf={message:"property name must be valid",params:({params:e})=>(0,No._)`{propertyName: ${e.propertyName}}`},qf={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:zf,code(e){const{gen:t,schema:r,data:s,it:a}=e;if((0,xf.alwaysValidSchema)(a,r))return;const o=t.name("valid");t.forIn("key",s,l=>{e.setParams({propertyName:l}),e.subschema({keyword:"propertyNames",data:l,dataTypes:["string"],propertyName:l,compositeRule:!0},o),t.if((0,No.not)(o),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(o)}};La.default=qf;var ps={};Object.defineProperty(ps,"__esModule",{value:!0});const xr=ne,Xe=re,Uf=Me,zr=z,Hf={message:"must NOT have additional properties",params:({params:e})=>(0,Xe._)`{additionalProperty: ${e.additionalProperty}}`},Gf={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Hf,code(e){const{gen:t,schema:r,parentSchema:s,data:a,errsCount:o,it:l}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:f,opts:d}=l;if(l.props=!0,d.removeAdditional!=="all"&&(0,zr.alwaysValidSchema)(l,r))return;const c=(0,xr.allSchemaProperties)(s.properties),p=(0,xr.allSchemaProperties)(s.patternProperties);v(),e.ok((0,Xe._)`${o} === ${Uf.default.errors}`);function v(){t.forIn("key",a,n=>{!c.length&&!p.length?g(n):t.if(E(n),()=>g(n))})}function E(n){let i;if(c.length>8){const u=(0,zr.schemaRefOrVal)(l,s.properties,"properties");i=(0,xr.isOwnProperty)(t,u,n)}else c.length?i=(0,Xe.or)(...c.map(u=>(0,Xe._)`${n} === ${u}`)):i=Xe.nil;return p.length&&(i=(0,Xe.or)(i,...p.map(u=>(0,Xe._)`${(0,xr.usePattern)(e,u)}.test(${n})`))),(0,Xe.not)(i)}function $(n){t.code((0,Xe._)`delete ${a}[${n}]`)}function g(n){if(d.removeAdditional==="all"||d.removeAdditional&&r===!1){$(n);return}if(r===!1){e.setParams({additionalProperty:n}),e.error(),f||t.break();return}if(typeof r=="object"&&!(0,zr.alwaysValidSchema)(l,r)){const i=t.name("valid");d.removeAdditional==="failing"?(_(n,i,!1),t.if((0,Xe.not)(i),()=>{e.reset(),$(n)})):(_(n,i),f||t.if((0,Xe.not)(i),()=>t.break()))}}function _(n,i,u){const h={keyword:"additionalProperties",dataProp:n,dataPropType:zr.Type.Str};u===!1&&Object.assign(h,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(h,i)}}};ps.default=Gf;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});const Jf=He,Zn=ne,Ds=z,Yn=ps,Kf={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:s,data:a,it:o}=e;o.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&Yn.default.code(new Jf.KeywordCxt(o,Yn.default,"additionalProperties"));const l=(0,Zn.allSchemaProperties)(r);for(const v of l)o.definedProperties.add(v);o.opts.unevaluated&&l.length&&o.props!==!0&&(o.props=Ds.mergeEvaluated.props(t,(0,Ds.toHash)(l),o.props));const f=l.filter(v=>!(0,Ds.alwaysValidSchema)(o,r[v]));if(f.length===0)return;const d=t.name("valid");for(const v of f)c(v)?p(v):(t.if((0,Zn.propertyInData)(t,a,v,o.opts.ownProperties)),p(v),o.allErrors||t.else().var(d,!0),t.endIf()),e.it.definedProperties.add(v),e.ok(d);function c(v){return o.opts.useDefaults&&!o.compositeRule&&r[v].default!==void 0}function p(v){e.subschema({keyword:"properties",schemaProp:v,dataProp:v},d)}}};Ma.default=Kf;var Va={};Object.defineProperty(Va,"__esModule",{value:!0});const Qn=ne,qr=re,ei=z,ti=z,Bf={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:s,parentSchema:a,it:o}=e,{opts:l}=o,f=(0,Qn.allSchemaProperties)(r),d=f.filter(_=>(0,ei.alwaysValidSchema)(o,r[_]));if(f.length===0||d.length===f.length&&(!o.opts.unevaluated||o.props===!0))return;const c=l.strictSchema&&!l.allowMatchingProperties&&a.properties,p=t.name("valid");o.props!==!0&&!(o.props instanceof qr.Name)&&(o.props=(0,ti.evaluatedPropsToName)(t,o.props));const{props:v}=o;E();function E(){for(const _ of f)c&&$(_),o.allErrors?g(_):(t.var(p,!0),g(_),t.if(p))}function $(_){for(const n in c)new RegExp(_).test(n)&&(0,ei.checkStrictMode)(o,`property ${n} matches pattern ${_} (use allowMatchingProperties)`)}function g(_){t.forIn("key",s,n=>{t.if((0,qr._)`${(0,Qn.usePattern)(e,_)}.test(${n})`,()=>{const i=d.includes(_);i||e.subschema({keyword:"patternProperties",schemaProp:_,dataProp:n,dataPropType:ti.Type.Str},p),o.opts.unevaluated&&v!==!0?t.assign((0,qr._)`${v}[${n}]`,!0):!i&&!o.allErrors&&t.if((0,qr.not)(p),()=>t.break())})})}}};Va.default=Bf;var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});const Xf=z,Wf={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:s}=e;if((0,Xf.alwaysValidSchema)(s,r)){e.fail();return}const a=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),e.failResult(a,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Fa.default=Wf;var xa={};Object.defineProperty(xa,"__esModule",{value:!0});const Zf=ne,Yf={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Zf.validateUnion,error:{message:"must match a schema in anyOf"}};xa.default=Yf;var za={};Object.defineProperty(za,"__esModule",{value:!0});const Br=re,Qf=z,eh={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Br._)`{passingSchemas: ${e.passing}}`},th={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:eh,code(e){const{gen:t,schema:r,parentSchema:s,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(a.opts.discriminator&&s.discriminator)return;const o=r,l=t.let("valid",!1),f=t.let("passing",null),d=t.name("_valid");e.setParams({passing:f}),t.block(c),e.result(l,()=>e.reset(),()=>e.error(!0));function c(){o.forEach((p,v)=>{let E;(0,Qf.alwaysValidSchema)(a,p)?t.var(d,!0):E=e.subschema({keyword:"oneOf",schemaProp:v,compositeRule:!0},d),v>0&&t.if((0,Br._)`${d} && ${l}`).assign(l,!1).assign(f,(0,Br._)`[${f}, ${v}]`).else(),t.if(d,()=>{t.assign(l,!0),t.assign(f,v),E&&e.mergeEvaluated(E,Br.Name)})})}}};za.default=th;var qa={};Object.defineProperty(qa,"__esModule",{value:!0});const rh=z,sh={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const a=t.name("valid");r.forEach((o,l)=>{if((0,rh.alwaysValidSchema)(s,o))return;const f=e.subschema({keyword:"allOf",schemaProp:l},a);e.ok(a),e.mergeEvaluated(f)})}};qa.default=sh;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});const rs=re,ko=z,ah={message:({params:e})=>(0,rs.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,rs._)`{failingKeyword: ${e.ifClause}}`},nh={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:ah,code(e){const{gen:t,parentSchema:r,it:s}=e;r.then===void 0&&r.else===void 0&&(0,ko.checkStrictMode)(s,'"if" without "then" and "else" is ignored');const a=ri(s,"then"),o=ri(s,"else");if(!a&&!o)return;const l=t.let("valid",!0),f=t.name("_valid");if(d(),e.reset(),a&&o){const p=t.let("ifClause");e.setParams({ifClause:p}),t.if(f,c("then",p),c("else",p))}else a?t.if(f,c("then")):t.if((0,rs.not)(f),c("else"));e.pass(l,()=>e.error(!0));function d(){const p=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},f);e.mergeEvaluated(p)}function c(p,v){return()=>{const E=e.subschema({keyword:p},f);t.assign(l,f),e.mergeValidEvaluated(E,l),v?t.assign(v,(0,rs._)`${p}`):e.setParams({ifClause:p})}}}};function ri(e,t){const r=e.schema[t];return r!==void 0&&!(0,ko.alwaysValidSchema)(e,r)}Ua.default=nh;var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});const ih=z,oh={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,ih.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Ha.default=oh;Object.defineProperty(hs,"__esModule",{value:!0});const lh=tr,ch=Ra,dh=rr,uh=ja,fh=Da,hh=ms,mh=La,ph=ps,vh=Ma,gh=Va,yh=Fa,_h=xa,bh=za,$h=qa,Eh=Ua,wh=Ha;function Sh(e=!1){const t=[yh.default,_h.default,bh.default,$h.default,Eh.default,wh.default,mh.default,ph.default,hh.default,vh.default,gh.default];return e?t.push(ch.default,uh.default):t.push(lh.default,dh.default),t.push(fh.default),t}hs.default=Sh;var vs={},Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});const ge=re,Oh={message:({schemaCode:e})=>(0,ge.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ge._)`{format: ${e}}`},Ph={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Oh,code(e,t){const{gen:r,data:s,$data:a,schema:o,schemaCode:l,it:f}=e,{opts:d,errSchemaPath:c,schemaEnv:p,self:v}=f;if(!d.validateFormats)return;a?E():$();function E(){const g=r.scopeValue("formats",{ref:v.formats,code:d.code.formats}),_=r.const("fDef",(0,ge._)`${g}[${l}]`),n=r.let("fType"),i=r.let("format");r.if((0,ge._)`typeof ${_} == "object" && !(${_} instanceof RegExp)`,()=>r.assign(n,(0,ge._)`${_}.type || "string"`).assign(i,(0,ge._)`${_}.validate`),()=>r.assign(n,(0,ge._)`"string"`).assign(i,_)),e.fail$data((0,ge.or)(u(),h()));function u(){return d.strictSchema===!1?ge.nil:(0,ge._)`${l} && !${i}`}function h(){const y=p.$async?(0,ge._)`(${_}.async ? await ${i}(${s}) : ${i}(${s}))`:(0,ge._)`${i}(${s})`,S=(0,ge._)`(typeof ${i} == "function" ? ${y} : ${i}.test(${s}))`;return(0,ge._)`${i} && ${i} !== true && ${n} === ${t} && !${S}`}}function $(){const g=v.formats[o];if(!g){u();return}if(g===!0)return;const[_,n,i]=h(g);_===t&&e.pass(y());function u(){if(d.strictSchema===!1){v.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${o}" ignored in schema at path "${c}"`}}function h(S){const k=S instanceof RegExp?(0,ge.regexpCode)(S):d.code.formats?(0,ge._)`${d.code.formats}${(0,ge.getProperty)(o)}`:void 0,R=r.scopeValue("formats",{key:o,ref:S,code:k});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,ge._)`${R}.validate`]:["string",S,R]}function y(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!p.$async)throw new Error("async format in sync schema");return(0,ge._)`await ${i}(${s})`}return typeof n=="function"?(0,ge._)`${i}(${s})`:(0,ge._)`${i}.test(${s})`}}}};Ga.default=Ph;Object.defineProperty(vs,"__esModule",{value:!0});const Nh=Ga,kh=[Nh.default];vs.default=kh;var zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.contentVocabulary=zt.metadataVocabulary=void 0;zt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];zt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(ba,"__esModule",{value:!0});const Ih=us,Ah=fs,Th=hs,Ch=vs,si=zt,Rh=[Ih.default,Ah.default,(0,Th.default)(),Ch.default,si.metadataVocabulary,si.contentVocabulary];ba.default=Rh;var gs={},ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.DiscrError=void 0;var ai;(function(e){e.Tag="tag",e.Mapping="mapping"})(ai||(ys.DiscrError=ai={}));Object.defineProperty(gs,"__esModule",{value:!0});const Jt=re,Ks=ys,ni=Re,jh=qt,Dh=z,Lh={message:({params:{discrError:e,tagName:t}})=>e===Ks.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Jt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Mh={keyword:"discriminator",type:"object",schemaType:"object",error:Lh,code(e){const{gen:t,data:r,schema:s,parentSchema:a,it:o}=e,{oneOf:l}=a;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const f=s.propertyName;if(typeof f!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!l)throw new Error("discriminator: requires oneOf keyword");const d=t.let("valid",!1),c=t.const("tag",(0,Jt._)`${r}${(0,Jt.getProperty)(f)}`);t.if((0,Jt._)`typeof ${c} == "string"`,()=>p(),()=>e.error(!1,{discrError:Ks.DiscrError.Tag,tag:c,tagName:f})),e.ok(d);function p(){const $=E();t.if(!1);for(const g in $)t.elseIf((0,Jt._)`${c} === ${g}`),t.assign(d,v($[g]));t.else(),e.error(!1,{discrError:Ks.DiscrError.Mapping,tag:c,tagName:f}),t.endIf()}function v($){const g=t.name("valid"),_=e.subschema({keyword:"oneOf",schemaProp:$},g);return e.mergeEvaluated(_,Jt.Name),g}function E(){var $;const g={},_=i(a);let n=!0;for(let y=0;y<l.length;y++){let S=l[y];if(S!=null&&S.$ref&&!(0,Dh.schemaHasRulesButRef)(S,o.self.RULES)){const R=S.$ref;if(S=ni.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,R),S instanceof ni.SchemaEnv&&(S=S.schema),S===void 0)throw new jh.default(o.opts.uriResolver,o.baseId,R)}const k=($=S==null?void 0:S.properties)===null||$===void 0?void 0:$[f];if(typeof k!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${f}"`);n=n&&(_||i(S)),u(k,y)}if(!n)throw new Error(`discriminator: "${f}" must be required`);return g;function i({required:y}){return Array.isArray(y)&&y.includes(f)}function u(y,S){if(y.const)h(y.const,S);else if(y.enum)for(const k of y.enum)h(k,S);else throw new Error(`discriminator: "properties/${f}" must have "const" or "enum"`)}function h(y,S){if(typeof y!="string"||y in g)throw new Error(`discriminator: "${f}" values must be unique strings`);g[y]=S}}}};gs.default=Mh;const Vh="http://json-schema.org/draft-07/schema#",Fh="http://json-schema.org/draft-07/schema#",xh="Core schema meta-schema",zh={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},qh=["object","boolean"],Uh={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Hh={$schema:Vh,$id:Fh,title:xh,definitions:zh,type:qh,properties:Uh,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=na,s=ba,a=gs,o=Hh,l=["/properties"],f="http://json-schema.org/draft-07/schema";class d extends r.default{_addVocabularies(){super._addVocabularies(),s.default.forEach(g=>this.addVocabulary(g)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const g=this.opts.$data?this.$dataMetaSchema(o,l):o;this.addMetaSchema(g,f,!1),this.refs["http://json-schema.org/schema"]=f}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(f)?f:void 0)}}t.Ajv=d,e.exports=t=d,e.exports.Ajv=d,Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var c=He;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var p=re;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return p.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return p.CodeGen}});var v=er;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return v.default}});var E=qt;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return E.default}})})(xs,xs.exports);var Io=xs.exports;const Gh=aa(Io);var Bs={exports:{}},Ja={},Ka={},sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.dynamicAnchor=void 0;const Ls=re,Jh=Me,ii=Re,Kh=mt,Bh={keyword:"$dynamicAnchor",schemaType:"string",code:e=>Ao(e,e.schema)};function Ao(e,t){const{gen:r,it:s}=e;s.schemaEnv.root.dynamicAnchors[t]=!0;const a=(0,Ls._)`${Jh.default.dynamicAnchors}${(0,Ls.getProperty)(t)}`,o=s.errSchemaPath==="#"?s.validateName:Xh(e);r.if((0,Ls._)`!${a}`,()=>r.assign(a,o))}sr.dynamicAnchor=Ao;function Xh(e){const{schemaEnv:t,schema:r,self:s}=e.it,{root:a,baseId:o,localRefs:l,meta:f}=t.root,{schemaId:d}=s.opts,c=new ii.SchemaEnv({schema:r,schemaId:d,root:a,baseId:o,localRefs:l,meta:f});return ii.compileSchema.call(s,c),(0,Kh.getValidate)(e,c)}sr.default=Bh;var ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.dynamicRef=void 0;const oi=re,Wh=Me,li=mt,Zh={keyword:"$dynamicRef",schemaType:"string",code:e=>To(e,e.schema)};function To(e,t){const{gen:r,keyword:s,it:a}=e;if(t[0]!=="#")throw new Error(`"${s}" only supports hash fragment reference`);const o=t.slice(1);if(a.allErrors)l();else{const d=r.let("valid",!1);l(d),e.ok(d)}function l(d){if(a.schemaEnv.root.dynamicAnchors[o]){const c=r.let("_v",(0,oi._)`${Wh.default.dynamicAnchors}${(0,oi.getProperty)(o)}`);r.if(c,f(c,d),f(a.validateName,d))}else f(a.validateName,d)()}function f(d,c){return c?()=>r.block(()=>{(0,li.callRef)(e,d),r.let(c,!0)}):()=>(0,li.callRef)(e,d)}}ar.dynamicRef=To;ar.default=Zh;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});const Yh=sr,Qh=z,em={keyword:"$recursiveAnchor",schemaType:"boolean",code(e){e.schema?(0,Yh.dynamicAnchor)(e,""):(0,Qh.checkStrictMode)(e.it,"$recursiveAnchor: false is ignored")}};Ba.default=em;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});const tm=ar,rm={keyword:"$recursiveRef",schemaType:"string",code:e=>(0,tm.dynamicRef)(e,e.schema)};Xa.default=rm;Object.defineProperty(Ka,"__esModule",{value:!0});const sm=sr,am=ar,nm=Ba,im=Xa,om=[sm.default,am.default,nm.default,im.default];Ka.default=om;var Wa={},Za={};Object.defineProperty(Za,"__esModule",{value:!0});const ci=ms,lm={keyword:"dependentRequired",type:"object",schemaType:"object",error:ci.error,code:e=>(0,ci.validatePropertyDeps)(e)};Za.default=lm;var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});const cm=ms,dm={keyword:"dependentSchemas",type:"object",schemaType:"object",code:e=>(0,cm.validateSchemaDeps)(e)};Ya.default=dm;var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});const um=z,fm={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:e,parentSchema:t,it:r}){t.contains===void 0&&(0,um.checkStrictMode)(r,`"${e}" without "contains" is ignored`)}};Qa.default=fm;Object.defineProperty(Wa,"__esModule",{value:!0});const hm=Za,mm=Ya,pm=Qa,vm=[hm.default,mm.default,pm.default];Wa.default=vm;var en={},tn={};Object.defineProperty(tn,"__esModule",{value:!0});const Et=re,di=z,gm=Me,ym={message:"must NOT have unevaluated properties",params:({params:e})=>(0,Et._)`{unevaluatedProperty: ${e.unevaluatedProperty}}`},_m={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:ym,code(e){const{gen:t,schema:r,data:s,errsCount:a,it:o}=e;if(!a)throw new Error("ajv implementation error");const{allErrors:l,props:f}=o;f instanceof Et.Name?t.if((0,Et._)`${f} !== true`,()=>t.forIn("key",s,v=>t.if(c(f,v),()=>d(v)))):f!==!0&&t.forIn("key",s,v=>f===void 0?d(v):t.if(p(f,v),()=>d(v))),o.props=!0,e.ok((0,Et._)`${a} === ${gm.default.errors}`);function d(v){if(r===!1){e.setParams({unevaluatedProperty:v}),e.error(),l||t.break();return}if(!(0,di.alwaysValidSchema)(o,r)){const E=t.name("valid");e.subschema({keyword:"unevaluatedProperties",dataProp:v,dataPropType:di.Type.Str},E),l||t.if((0,Et.not)(E),()=>t.break())}}function c(v,E){return(0,Et._)`!${v} || !${v}[${E}]`}function p(v,E){const $=[];for(const g in v)v[g]===!0&&$.push((0,Et._)`${E} !== ${g}`);return(0,Et.and)(...$)}}};tn.default=_m;var rn={};Object.defineProperty(rn,"__esModule",{value:!0});const Vt=re,ui=z,bm={message:({params:{len:e}})=>(0,Vt.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Vt._)`{limit: ${e}}`},$m={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:bm,code(e){const{gen:t,schema:r,data:s,it:a}=e,o=a.items||0;if(o===!0)return;const l=t.const("len",(0,Vt._)`${s}.length`);if(r===!1)e.setParams({len:o}),e.fail((0,Vt._)`${l} > ${o}`);else if(typeof r=="object"&&!(0,ui.alwaysValidSchema)(a,r)){const d=t.var("valid",(0,Vt._)`${l} <= ${o}`);t.if((0,Vt.not)(d),()=>f(d,o)),e.ok(d)}a.items=!0;function f(d,c){t.forRange("i",c,l,p=>{e.subschema({keyword:"unevaluatedItems",dataProp:p,dataPropType:ui.Type.Num},d),a.allErrors||t.if((0,Vt.not)(d),()=>t.break())})}}};rn.default=$m;Object.defineProperty(en,"__esModule",{value:!0});const Em=tn,wm=rn,Sm=[Em.default,wm.default];en.default=Sm;Object.defineProperty(Ja,"__esModule",{value:!0});const Om=us,Pm=fs,Nm=hs,km=Ka,Im=Wa,Am=en,Tm=vs,fi=zt,Cm=[km.default,Om.default,Pm.default,(0,Nm.default)(!0),Tm.default,fi.metadataVocabulary,fi.contentVocabulary,Im.default,Am.default];Ja.default=Cm;var sn={};const Rm="https://json-schema.org/draft/2020-12/schema",jm="https://json-schema.org/draft/2020-12/schema",Dm={"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},Lm="meta",Mm="Core and Validation specifications meta-schema",Vm=[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],Fm=["object","boolean"],xm="This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.",zm={definitions:{$comment:'"definitions" has been replaced by "$defs".',type:"object",additionalProperties:{$dynamicRef:"#meta"},deprecated:!0,default:{}},dependencies:{$comment:'"dependencies" has been split and replaced by "dependentSchemas" and "dependentRequired" in order to serve their differing semantics.',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]},deprecated:!0,default:{}},$recursiveAnchor:{$comment:'"$recursiveAnchor" has been replaced by "$dynamicAnchor".',$ref:"meta/core#/$defs/anchorString",deprecated:!0},$recursiveRef:{$comment:'"$recursiveRef" has been replaced by "$dynamicRef".',$ref:"meta/core#/$defs/uriReferenceString",deprecated:!0}},qm={$schema:Rm,$id:jm,$vocabulary:Dm,$dynamicAnchor:Lm,title:Mm,allOf:Vm,type:Fm,$comment:xm,properties:zm},Um="https://json-schema.org/draft/2020-12/schema",Hm="https://json-schema.org/draft/2020-12/meta/applicator",Gm={"https://json-schema.org/draft/2020-12/vocab/applicator":!0},Jm="meta",Km="Applicator vocabulary meta-schema",Bm=["object","boolean"],Xm={prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},Wm={schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}},Zm={$schema:Um,$id:Hm,$vocabulary:Gm,$dynamicAnchor:Jm,title:Km,type:Bm,properties:Xm,$defs:Wm},Ym="https://json-schema.org/draft/2020-12/schema",Qm="https://json-schema.org/draft/2020-12/meta/unevaluated",ep={"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},tp="meta",rp="Unevaluated applicator vocabulary meta-schema",sp=["object","boolean"],ap={unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}},np={$schema:Ym,$id:Qm,$vocabulary:ep,$dynamicAnchor:tp,title:rp,type:sp,properties:ap},ip="https://json-schema.org/draft/2020-12/schema",op="https://json-schema.org/draft/2020-12/meta/content",lp={"https://json-schema.org/draft/2020-12/vocab/content":!0},cp="meta",dp="Content vocabulary meta-schema",up=["object","boolean"],fp={contentEncoding:{type:"string"},contentMediaType:{type:"string"},contentSchema:{$dynamicRef:"#meta"}},hp={$schema:ip,$id:op,$vocabulary:lp,$dynamicAnchor:cp,title:dp,type:up,properties:fp},mp="https://json-schema.org/draft/2020-12/schema",pp="https://json-schema.org/draft/2020-12/meta/core",vp={"https://json-schema.org/draft/2020-12/vocab/core":!0},gp="meta",yp="Core vocabulary meta-schema",_p=["object","boolean"],bp={$id:{$ref:"#/$defs/uriReferenceString",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{$ref:"#/$defs/uriString"},$ref:{$ref:"#/$defs/uriReferenceString"},$anchor:{$ref:"#/$defs/anchorString"},$dynamicRef:{$ref:"#/$defs/uriReferenceString"},$dynamicAnchor:{$ref:"#/$defs/anchorString"},$vocabulary:{type:"object",propertyNames:{$ref:"#/$defs/uriString"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"}}},$p={anchorString:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},uriString:{type:"string",format:"uri"},uriReferenceString:{type:"string",format:"uri-reference"}},Ep={$schema:mp,$id:pp,$vocabulary:vp,$dynamicAnchor:gp,title:yp,type:_p,properties:bp,$defs:$p},wp="https://json-schema.org/draft/2020-12/schema",Sp="https://json-schema.org/draft/2020-12/meta/format-annotation",Op={"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0},Pp="meta",Np="Format vocabulary meta-schema for annotation results",kp=["object","boolean"],Ip={format:{type:"string"}},Ap={$schema:wp,$id:Sp,$vocabulary:Op,$dynamicAnchor:Pp,title:Np,type:kp,properties:Ip},Tp="https://json-schema.org/draft/2020-12/schema",Cp="https://json-schema.org/draft/2020-12/meta/meta-data",Rp={"https://json-schema.org/draft/2020-12/vocab/meta-data":!0},jp="meta",Dp="Meta-data vocabulary meta-schema",Lp=["object","boolean"],Mp={title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}},Vp={$schema:Tp,$id:Cp,$vocabulary:Rp,$dynamicAnchor:jp,title:Dp,type:Lp,properties:Mp},Fp="https://json-schema.org/draft/2020-12/schema",xp="https://json-schema.org/draft/2020-12/meta/validation",zp={"https://json-schema.org/draft/2020-12/vocab/validation":!0},qp="meta",Up="Validation vocabulary meta-schema",Hp=["object","boolean"],Gp={type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]},const:!0,enum:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}}},Jp={nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Kp={$schema:Fp,$id:xp,$vocabulary:zp,$dynamicAnchor:qp,title:Up,type:Hp,properties:Gp,$defs:Jp};Object.defineProperty(sn,"__esModule",{value:!0});const Bp=qm,Xp=Zm,Wp=np,Zp=hp,Yp=Ep,Qp=Ap,ev=Vp,tv=Kp,rv=["/properties"];function sv(e){return[Bp,Xp,Wp,Zp,Yp,t(this,Qp),ev,t(this,tv)].forEach(r=>this.addMetaSchema(r,void 0,!1)),this;function t(r,s){return e?r.$dataMetaSchema(s,rv):s}}sn.default=sv;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv2020=void 0;const r=na,s=Ja,a=gs,o=sn,l="https://json-schema.org/draft/2020-12/schema";class f extends r.default{constructor($={}){super({...$,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),s.default.forEach($=>this.addVocabulary($)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();const{$data:$,meta:g}=this.opts;g&&(o.default.call(this,$),this.refs["http://json-schema.org/schema"]=l)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv2020=f,e.exports=t=f,e.exports.Ajv2020=f,Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var d=He;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var c=re;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var p=er;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return p.default}});var v=qt;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return v.default}})})(Bs,Bs.exports);var av=Bs.exports;const nv=aa(av);var Xs={exports:{}},Co={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(V,F){return{validate:V,compare:F}}e.fullFormats={date:t(o,l),time:t(d(!0),c),"date-time":t(E(!0),$),"iso-time":t(d(),p),"iso-date-time":t(E(),g),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:i,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:B,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:h,int32:{type:"number",validate:k},int64:{type:"number",validate:R},float:{type:"number",validate:j},double:{type:"number",validate:j},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,l),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,c),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,$),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,p),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,g),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(V){return V%4===0&&(V%100!==0||V%400===0)}const s=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(V){const F=s.exec(V);if(!F)return!1;const X=+F[1],H=+F[2],Z=+F[3];return H>=1&&H<=12&&Z>=1&&Z<=(H===2&&r(X)?29:a[H])}function l(V,F){if(V&&F)return V>F?1:V<F?-1:0}const f=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function d(V){return function(X){const H=f.exec(X);if(!H)return!1;const Z=+H[1],le=+H[2],ie=+H[3],Se=H[4],Oe=H[5]==="-"?-1:1,L=+(H[6]||0),N=+(H[7]||0);if(L>23||N>59||V&&!Se)return!1;if(Z<=23&&le<=59&&ie<60)return!0;const T=le-N*Oe,P=Z-L*Oe-(T<0?1:0);return(P===23||P===-1)&&(T===59||T===-1)&&ie<61}}function c(V,F){if(!(V&&F))return;const X=new Date("2020-01-01T"+V).valueOf(),H=new Date("2020-01-01T"+F).valueOf();if(X&&H)return X-H}function p(V,F){if(!(V&&F))return;const X=f.exec(V),H=f.exec(F);if(X&&H)return V=X[1]+X[2]+X[3],F=H[1]+H[2]+H[3],V>F?1:V<F?-1:0}const v=/t|\s/i;function E(V){const F=d(V);return function(H){const Z=H.split(v);return Z.length===2&&o(Z[0])&&F(Z[1])}}function $(V,F){if(!(V&&F))return;const X=new Date(V).valueOf(),H=new Date(F).valueOf();if(X&&H)return X-H}function g(V,F){if(!(V&&F))return;const[X,H]=V.split(v),[Z,le]=F.split(v),ie=l(X,Z);if(ie!==void 0)return ie||c(H,le)}const _=/\/|:/,n=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function i(V){return _.test(V)&&n.test(V)}const u=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function h(V){return u.lastIndex=0,u.test(V)}const y=-2147483648,S=2**31-1;function k(V){return Number.isInteger(V)&&V<=S&&V>=y}function R(V){return Number.isInteger(V)}function j(){return!0}const D=/[^\\]\\Z/;function B(V){if(D.test(V))return!1;try{return new RegExp(V),!0}catch{return!1}}})(Co);var Ro={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=Io,r=re,s=r.operators,a={formatMaximum:{okStr:"<=",ok:s.LTE,fail:s.GT},formatMinimum:{okStr:">=",ok:s.GTE,fail:s.LT},formatExclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},formatExclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},o={message:({keyword:f,schemaCode:d})=>(0,r.str)`should be ${a[f].okStr} ${d}`,params:({keyword:f,schemaCode:d})=>(0,r._)`{comparison: ${a[f].okStr}, limit: ${d}}`};e.formatLimitDefinition={keyword:Object.keys(a),type:"string",schemaType:"string",$data:!0,error:o,code(f){const{gen:d,data:c,schemaCode:p,keyword:v,it:E}=f,{opts:$,self:g}=E;if(!$.validateFormats)return;const _=new t.KeywordCxt(E,g.RULES.all.format.definition,"format");_.$data?n():i();function n(){const h=d.scopeValue("formats",{ref:g.formats,code:$.code.formats}),y=d.const("fmt",(0,r._)`${h}[${_.schemaCode}]`);f.fail$data((0,r.or)((0,r._)`typeof ${y} != "object"`,(0,r._)`${y} instanceof RegExp`,(0,r._)`typeof ${y}.compare != "function"`,u(y)))}function i(){const h=_.schema,y=g.formats[h];if(!y||y===!0)return;if(typeof y!="object"||y instanceof RegExp||typeof y.compare!="function")throw new Error(`"${v}": format "${h}" does not define "compare" function`);const S=d.scopeValue("formats",{key:h,ref:y,code:$.code.formats?(0,r._)`${$.code.formats}${(0,r.getProperty)(h)}`:void 0});f.fail$data(u(S))}function u(h){return(0,r._)`${h}.compare(${c}, ${p}) ${a[v].fail} 0`}},dependencies:["format"]};const l=f=>(f.addKeyword(e.formatLimitDefinition),f);e.default=l})(Ro);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Co,s=Ro,a=re,o=new a.Name("fullFormats"),l=new a.Name("fastFormats"),f=(c,p={keywords:!0})=>{if(Array.isArray(p))return d(c,p,r.fullFormats,o),c;const[v,E]=p.mode==="fast"?[r.fastFormats,l]:[r.fullFormats,o],$=p.formats||r.formatNames;return d(c,$,v,E),p.keywords&&(0,s.default)(c),c};f.get=(c,p="full")=>{const E=(p==="fast"?r.fastFormats:r.fullFormats)[c];if(!E)throw new Error(`Unknown format "${c}"`);return E};function d(c,p,v,E){var $,g;($=(g=c.opts.code).formats)!==null&&$!==void 0||(g.formats=(0,a._)`require("ajv-formats/dist/formats").${E}`);for(const _ of p)c.addFormat(_,v[_])}e.exports=t=f,Object.defineProperty(t,"__esModule",{value:!0}),t.default=f})(Xs,Xs.exports);var iv=Xs.exports;const ov=aa(iv);class It{constructor(t,r=!1){const s={strict:!0,allErrors:r};this.ajv=t==="pydantic_v1"?new Gh(s):new nv(s),ov(this.ajv),this.canValidate=!1}validateSchema(t){this.ajv.compile(t)}loadSchema(t){try{return this.validator=this.ajv.compile(t),this.canValidate=!0}catch(r){return console.error("SchemaValidator: error compiling schema",r),!1}}isValid(t){if(this.validator)return this.canValidate?this.validator(t):null}getErrors(){return!this.validator||!this.canValidate?null:this.validator.errors||null}}function Ws(e){try{return new It("pydantic_v2").validateSchema(e),"pydantic_v2"}catch{return new It("pydantic_v1").validateSchema(e),"pydantic_v1"}}class lv{constructor(t,r,s,a=[],o=void 0){if(this.schemaVersion=s,this.jsonSchema=Ci(t,a),this.validator=new It(s),!this.validator.loadSchema(this.jsonSchema))throw new Error("Invalid JSON Schema");this.ids=[];const f=ql(this.jsonSchema,s,o);this.onchange=r,this.notifyChange=()=>{const d=this.getFormData();this.onchange(d)},this.root=this.createObjectElement({key:null,property:this.jsonSchema,required:!0,removable:!1,value:f})}createFormElement(t){const{property:r}=t;if("enum"in r)return this.createEnumElement(t);switch(r.type){case"object":{const s=r;return this.createObjectElement({...t,property:s})}case"array":{const s=r;return Ai(s)?this.createTupleElement({...t,property:s}):this.createArrayElement({...t,property:s})}case"number":case"integer":{const s=r;return this.createNumberElement({...t,property:s})}case"boolean":{const s=r;return this.createBooleanElement({...t,property:s})}default:{const s=r;return this.createStringElement({...t,property:s})}}}createStringElement({key:t,property:r,required:s,removable:a,value:o}){const l=this.getBaseElementFields({key:t,property:r,required:s,removable:a});return new Jl({...l,value:o||null})}createBooleanElement({key:t,property:r,required:s,removable:a,value:o}){const l=this.getBaseElementFields({key:t,property:r,required:s,removable:a});return new Kl({...l,value:Xr(o)})}createNumberElement({key:t,property:r,required:s,removable:a,value:o}){const l=this.getBaseElementFields({key:t,property:r,required:s,removable:a});return new Rn({...l,type:"number",value:Xr(o),min:Fl(r),max:xl(r)})}createEnumElement({key:t,property:r,required:s,removable:a,value:o}){const l=this.getBaseElementFields({key:t,property:r,required:s,removable:a});return new Bl({...l,type:"enum",value:o||null,options:r.enum})}createObjectElement({key:t,property:r,required:s,removable:a,value:o}){const l=this.getBaseElementFields({key:t,property:r,required:s,removable:a}),f=r.required||[],d=[],c=Object.entries(Ti(r,o));for(const[v,E]of c){const $=f.includes(v),g=this.createFormElement({key:v,property:E,required:$,removable:zl(r,v),value:o[v]});d.push(g)}return new Xl({...l,children:d,additionalProperties:r.additionalProperties||!1})}createArrayElement({key:t,property:r,required:s,removable:a,value:o}){const l=this.getBaseElementFields({key:t,property:r,required:s,removable:a}),f=r.items,d=o.map(p=>this.createFormElement({key:null,property:f,required:!1,removable:!0,value:p}));return new Wl({...l,children:d,items:f,minItems:r.minItems,maxItems:r.maxItems})}createTupleElement({key:t,property:r,required:s,removable:a,value:o}){const l=this.getBaseElementFields({key:t,property:r,required:s,removable:a}),f=r.minItems,d=this.schemaVersion==="pydantic_v1"?r.items:r.prefixItems;return new Zl({...l,type:"tuple",items:d,size:f,children:s||Array.isArray(o)&&o.length>0?this.createTupleChildren({items:d,size:f,value:o}):[]})}createTupleChildren({items:t,size:r,value:s}){const a={key:null,required:!1,removable:!1};return Array.isArray(t)?t.map((o,l)=>this.createFormElement({...a,property:o,value:s[l]})):Array(r).map((o,l)=>this.createFormElement({...a,property:t,value:s[l]}))}getBaseElementFields({key:t,property:r,required:s,removable:a}){return{key:t,required:s,removable:a,manager:this,id:this.getUniqueId(),type:r.type||null,title:t&&a?t:r.title||t||"",description:r.description||"",property:Pt(r),notifyChange:this.notifyChange}}getUniqueId(){let t;do if(t=Math.random().toString(36).substring(7),!this.ids.includes(t)){this.ids.push(t);break}while(!0);return t}getFormData(){return this.getDataFromObjectElement(this.root)}getDataFromObjectElement(t){const r={};for(const s of t.children){let a=this.getDataFromElement(s);const o=a==null?null:typeof a=="object"&&"subscribe"in a&&typeof a=="function"?Xt(a):a;r[s.key]=o}return r}validate(){const t=ns(this.getFormData());if(!this.validator.isValid(t)){const s=this.validator.getErrors();throw new jo(s)}}getDataFromElement(t){switch(t.type){case"object":return this.getDataFromObjectElement(t);case"array":case"tuple":return this.getDataFromArrayElement(t);default:if(t instanceof kr)return t instanceof Rn&&t.badInput?"invalid":Xt(t.value);throw new Error(`Unsupported type ${t.type}`)}}getDataFromArrayElement(t){return t.children.map(r=>this.getDataFromElement(r))}}class jo extends Error{constructor(t){super("Invalid JSON Schema data"),this.errors=t}}var cv=W('<span tabindex="0" role="button" data-bs-trigger="focus" class="bi bi-info-circle text-primary" data-bs-toggle="collapse" data-bs-target=""></span>'),dv=W('<span class="ms-2 property-description"><!></span>');function uv(e,t){ke(t,!0);let r=_e(t,"html",3,!1),s=q(void 0),a,o;Yt(()=>{b(s)&&b(s).addEventListener("click",function(){a=bootstrap.Popover.getOrCreateInstance(b(s),{trigger:"manual"}),a.toggle(),o||(o=function(c){const p=c.composedPath();p.length>0&&p[0]instanceof HTMLElement&&p[0]!==b(s)&&(p[0].closest(".popover")||(a==null||a.hide(),a=void 0,window.removeEventListener("click",o),o=void 0))},window.addEventListener("click",o))})});var l=dv(),f=A(l);{var d=c=>{var p=cv();At(p,v=>O(s,v),()=>b(s)),oe(()=>{ve(p,"data-bs-html",r()),ve(p,"data-bs-content",t.description)}),G(c,p)};te(f,c=>{t.description&&c(d)})}I(l),G(e,l),Ie()}var fv=W('<span class="visually-hidden"> </span>'),hv=W("<label><!></label>"),mv=W('<span class="visually-hidden"> </span>'),pv=W("<span><!></span>"),vv=W("<!> <!>",1);function Tr(e,t){ke(t,!0);let r=_e(t,"tag",3,"label"),s=_e(t,"defaultTitle",3,""),a=Ft(()=>t.formElement.required?"fw-bold":!("value"in t.formElement)||t.formElement.value!==null&&t.formElement.value!==void 0&&t.formElement.value!==""?"":"text-secondary fw-light");var o=vv(),l=Ee(o);{var f=p=>{var v=hv(),E=A(v);{var $=_=>{var n=gr();oe(()=>fe(n,t.formElement.title)),G(_,n)},g=(_,n)=>{{var i=u=>{var h=fv(),y=A(h,!0);I(h),oe(()=>fe(y,s())),G(u,h)};te(_,u=>{s()&&u(i)},n)}};te(E,_=>{t.formElement.title?_($):_(g,!1)})}I(v),oe(()=>{ye(v,1,kn(b(a))),ve(v,"for",r()==="label"?`property-${t.formElement.id}`:void 0)}),G(p,v)},d=p=>{var v=pv(),E=A(v);{var $=_=>{var n=gr();oe(()=>fe(n,t.formElement.title)),G(_,n)},g=(_,n)=>{{var i=u=>{var h=mv(),y=A(h,!0);I(h),oe(()=>fe(y,s())),G(u,h)};te(_,u=>{s()&&u(i)},n)}};te(E,_=>{t.formElement.title?_($):_(g,!1)})}I(v),oe(()=>ye(v,1,kn(b(a)))),G(p,v)};te(l,p=>{r()==="label"?p(f):p(d,!1)})}var c=M(l,2);uv(c,{get description(){return t.formElement.description}}),G(e,o),Ie()}function gv(e,t){e.preventDefault(),e.stopPropagation(),t()&&t()()}var yv=(e,t)=>t(e),_v=W('<a class="btn btn-warning me-3" role="button">Reset</a>'),bv=W('<div class="d-flex flex-column p-2"><div class="my-2"><div class="accordion"><div class="accordion-item"><div class="accordion-header"><button type="button"><div class="flex-fill"><!></div> <div><!></div></button></div> <div><div class="accordion-body p-1"><!></div></div></div></div></div></div>');function an(e,t){ke(t,!0);let r=_e(t,"reset",3,null),s=q(!1);Zt(()=>{O(s,t.formElement.collapsed,!0)});function a(S){S.target instanceof HTMLElement&&S.target.classList.contains("bi-info-circle")||O(s,!b(s))}var o=bv(),l=A(o),f=A(l),d=A(f),c=A(d),p=A(c);let v;p.__click=[yv,a];var E=A(p),$=A(E);Tr($,{get formElement(){return t.formElement},tag:"span"}),I(E);var g=M(E,2),_=A(g);{var n=S=>{var k=_v();k.__click=[gv,r],G(S,k)};te(_,S=>{r()!==null&&t.formElement.property.default!==void 0&&S(n)})}I(g),I(p),I(c);var i=M(c,2);let u;var h=A(i),y=A(h);Ol(y,()=>t.children??$l),I(h),I(i),I(d),I(f),I(l),I(o),oe((S,k)=>{ve(f,"id",`accordion-${t.formElement.id??""}`),v=ye(p,1,"accordion-button",null,v,S),ve(i,"id",`collapse-${t.formElement.id??""}`),u=ye(i,1,"accordion-collapse jschema-collapsing",null,u,k)},[()=>({collapsed:b(s)}),()=>({collapse:b(s),show:!b(s)})]),G(e,o),Ie()}Ge(["click"]);var $v=(e,t)=>t(),Ev=W('<button class="btn btn-warning" type="button">Remove</button>'),wv=W('<button class="btn btn-light" aria-label="Move item up"><i class="bi-arrow-up"></i></button> <button class="btn btn-light" aria-label="Move item down"><i class="bi-arrow-down"></i></button>',1),Sv=W('<div class="d-flex"><div class="align-self-center m-2"><!></div> <div class="flex-fill"><!></div> <div class="align-self-right mt-2 me-2"><!></div></div>'),Ov=W('<div class="d-flex justify-content-center p-2"><button class="btn btn-primary" type="button">Add argument to list</button></div> <div></div>',1);function Pv(e,t){ke(t,!0);let r=_e(t,"editable",3,!0),s=_e(t,"reset",3,null),a=q(ss([]));Yt(()=>{O(a,t.formElement.children,!0)});function o(){t.formElement.addChild(),O(a,t.formElement.children,!0)}function l(v){t.formElement.removeChild(v),O(a,t.formElement.children,!0)}function f(v){t.formElement.moveChildUp(v),O(a,t.formElement.children,!0)}function d(v){t.formElement.moveChildDown(v),O(a,t.formElement.children,!0)}let c=Ft(()=>r()&&(typeof t.formElement.maxItems!="number"||b(a).length<t.formElement.maxItems)),p=Ft(()=>r()&&!(t.formElement.required&&typeof t.formElement.minItems=="number"&&b(a).length<=t.formElement.minItems));an(e,{get formElement(){return t.formElement},get reset(){return s()},children:(v,E)=>{var $=Ov(),g=Ee($),_=A(g);_.__click=[$v,o],I(g);var n=M(g,2);Qt(n,23,()=>b(a),i=>i.id,(i,u,h)=>{var y=Sv(),S=A(y),k=A(S);{var R=X=>{var H=Ev();H.__click=()=>l(b(h)),G(X,H)};te(k,X=>{b(p)&&X(R)})}I(S);var j=M(S,2),D=A(j);nn(D,{get editable(){return r()},get formElement(){return b(a)[b(h)]}}),I(j);var B=M(j,2),V=A(B);{var F=X=>{var H=wv(),Z=Ee(H);Z.__click=ie=>{ie.preventDefault(),f(b(h))};var le=M(Z,2);le.__click=ie=>{ie.preventDefault(),d(b(h))},oe(()=>{Z.disabled=!r()&&b(h)===0,le.disabled=!r()&&b(h)===b(a).length-1}),G(X,H)};te(V,X=>{b(a).length>1&&X(F)})}I(B),I(y),G(i,y)}),I(n),oe(()=>_.disabled=!b(c)),G(v,$)},$$slots:{default:!0}}),Ie()}Ge(["click"]);var Nv=W('<div class="d-flex align-items-center p-2"><div class="property-metadata d-flex flex-row align-self-center w-50"><!></div> <div class="property-input ms-auto w-50 has-validation"><input type="text"> <span class="invalid-feedback"> </span></div></div>');function kv(e,t){ke(t,!0);let r=_e(t,"editable",3,!0),s=q(void 0);t.formElement.value.subscribe(_=>O(s,_,!0)),Zt(()=>l(b(s)));let a=q(void 0),o=q("");function l(_){var i;Xt(t.formElement.value)!==_&&(t.formElement.value.set(_),t.formElement.notifyChange(),O(o,""),t.formElement.required&&((i=b(a))==null?void 0:i.value)===""&&O(o,"Field is required"))}var f=Nv(),d=A(f),c=A(d);Tr(c,{get formElement(){return t.formElement},defaultTitle:"String argument"}),I(d);var p=M(d,2),v=A(p);Ue(v);let E;At(v,_=>O(a,_),()=>b(a));var $=M(v,2),g=A($,!0);I($),I(p),I(f),oe(_=>{E=ye(v,1,"form-control",null,E,_),ve(v,"id",`property-${t.formElement.id??""}`),v.disabled=!r(),fe(g,b(o))},[()=>({"is-invalid":b(o)})]),st(v,()=>b(s),_=>O(s,_)),G(e,f),Ie()}var Iv=(e,t)=>t(e),Av=W('<div class="d-flex align-items-center p-2"><div class="property-metadata d-flex flex-row align-self-center w-50"><!></div> <div class="property-input ms-auto w-25"><div class="form-check form-switch"><input class="form-check-input" type="checkbox" role="switch"></div></div></div>');function Tv(e,t){ke(t,!0);let r=_e(t,"editable",3,!0),s=q(void 0);t.formElement.value.subscribe(v=>O(s,v,!0));function a(v){const E=v.target.checked;Xt(t.formElement.value)!==E&&(t.formElement.value.set(E),t.formElement.notifyChange())}var o=Av(),l=A(o),f=A(l);Tr(f,{get formElement(){return t.formElement},defaultTitle:"Boolean argument",tag:"span"}),I(l);var d=M(l,2),c=A(d),p=A(c);Ue(p),p.__change=[Iv,a],I(c),I(d),I(o),oe(()=>{ve(p,"id",`property-${t.formElement.id??""}`),jl(p,b(s)===!0),p.disabled=!r()}),G(e,o),Ie()}Ge(["change"]);var Cv=(e,t)=>t(),Rv=W('<div class="d-flex align-items-center p-2"><div class="property-metadata d-flex flex-row align-self-center w-50"><!></div> <div class="property-input ms-auto w-50 has-validation"><input type="number"> <span class="invalid-feedback"> </span></div></div>');function jv(e,t){ke(t,!0);let r=_e(t,"formElement",15),s=_e(t,"editable",3,!0),a=q(void 0);r().value.subscribe(i=>O(a,i,!0)),Zt(()=>f(b(a)));let o=q(void 0),l=q("");function f(i){Xt(r().value)!==i&&(d(),r().value.set(i),r().notifyChange())}function d(){if(O(l,""),!b(o))return;if(r(r().badInput=b(o).validity.badInput,!0),r().badInput){O(l,"Should be a number");return}if(b(o).value===""){r().required?O(l,"Field is required"):O(l,"");return}const i=parseInt(b(o).value),u=r().min,h=r().max;if(u!==null&&i<u){O(l,"Should be greater or equal than "+u);return}if(h!==null&&i>h){O(l,"Should be lower or equal than "+h);return}O(l,"")}var c=Rv(),p=A(c),v=A(p);Tr(v,{get formElement(){return r()},defaultTitle:"Number argument"}),I(p);var E=M(p,2),$=A(E);Ue($),$.__input=[Cv,d];let g;At($,i=>O(o,i),()=>b(o));var _=M($,2),n=A(_,!0);I(_),I(E),I(c),oe(i=>{ve($,"min",r().min),ve($,"max",r().max),g=ye($,1,"form-control",null,g,i),ve($,"id",`property-${r().id??""}`),$.disabled=!s(),fe(n,b(l))},[()=>({"is-invalid":b(l)})]),st($,()=>b(a),i=>O(a,i)),G(e,c),Ie()}Ge(["input"]);var Dv=W("<option> </option>"),Lv=W('<div class="d-flex align-items-center p-2"><div class="property-metadata d-flex flex-row align-self-center w-50"><!></div> <div class="property-input ms-auto w-50 has-validation"><select><option>Select...</option><!></select> <span class="invalid-feedback"> </span></div></div>');function Mv(e,t){ke(t,!0);let r=_e(t,"editable",3,!0),s=q(void 0);t.formElement.value.subscribe(i=>O(s,i,!0)),Zt(()=>l(b(s)));let a=q(void 0),o=q("");function l(i){var h;Xt(t.formElement.value)!==i&&(t.formElement.value.set(i),t.formElement.notifyChange(),O(o,""),t.formElement.required&&((h=b(a))==null?void 0:h.value)===""&&O(o,"Field is required"))}var f=Lv(),d=A(f),c=A(d);Tr(c,{get formElement(){return t.formElement},defaultTitle:"Enum argument"}),I(d);var p=M(d,2),v=A(p);let E;var $=A(v);$.value=$.__value="";var g=M($);Qt(g,17,()=>t.formElement.options,Nr,(i,u)=>{var h=Dv(),y={},S=A(h,!0);I(h),oe(()=>{y!==(y=b(u))&&(h.value=(h.__value=b(u))??""),fe(S,b(u))}),G(i,h)}),I(v),At(v,i=>O(a,i),()=>b(a));var _=M(v,2),n=A(_,!0);I(_),I(p),I(f),oe(i=>{E=ye(v,1,"form-select",null,E,i),ve(v,"id",`property-${t.formElement.id??""}`),v.disabled=!r(),fe(n,b(o))},[()=>({"is-invalid":b(o)})]),Ni(v,()=>b(s),i=>O(s,i)),G(e,f),Ie()}function Vv(e,t,r){t.formElement.addTuple(),r(t.formElement.children)}function Fv(e,t,r){t.formElement.removeTuple(),r(t.formElement.children)}var xv=W('<button class="btn btn-primary" type="button">Remove tuple</button>'),zv=W('<button class="btn btn-primary" type="button">Add tuple</button>'),qv=W('<div class="d-flex"><div class="flex-fill"><!></div></div>'),Uv=W('<div class="d-flex justify-content-center p-2"><!></div> <div></div>',1);function Hv(e,t){ke(t,!0);let r=_e(t,"editable",3,!0),s=_e(t,"children",31,()=>ss([])),a=_e(t,"reset",3,null);Yt(()=>{s(t.formElement.children)}),an(e,{get formElement(){return t.formElement},get reset(){return a()},children:(o,l)=>{var f=Uv(),d=Ee(f),c=A(d);{var p=E=>{var $=Sr(),g=Ee($);{var _=i=>{var u=xv();u.__click=[Fv,t,s],oe(()=>u.disabled=!r()),G(i,u)},n=i=>{var u=zv();u.__click=[Vv,t,s],oe(()=>u.disabled=!r()),G(i,u)};te(g,i=>{s().length>0?i(_):i(n,!1)})}G(E,$)};te(c,E=>{t.formElement.required||E(p)})}I(d);var v=M(d,2);Qt(v,21,s,Nr,(E,$)=>{var g=qv(),_=A(g),n=A(_);nn(n,{get editable(){return r()},get formElement(){return b($)}}),I(_),I(g),G(E,g)}),I(v),G(o,f)},$$slots:{default:!0}}),Ie()}Ge(["click"]);var Gv=W("<p> </p>");function nn(e,t){ke(t,!0);let r=_e(t,"editable",3,!0),s=_e(t,"reset",3,null);var a=Sr(),o=Ee(a);{var l=d=>{kv(d,{get formElement(){return t.formElement},get editable(){return r()}})},f=(d,c)=>{{var p=E=>{jv(E,{get formElement(){return t.formElement},get editable(){return r()}})},v=(E,$)=>{{var g=n=>{Tv(n,{get formElement(){return t.formElement},get editable(){return r()}})},_=(n,i)=>{{var u=y=>{Mv(y,{get formElement(){return t.formElement},get editable(){return r()}})},h=(y,S)=>{{var k=j=>{an(j,{get formElement(){return t.formElement},get reset(){return s()},children:(D,B)=>{Do(D,{get formElement(){return t.formElement},get editable(){return r()}})},$$slots:{default:!0}})},R=(j,D)=>{{var B=F=>{Pv(F,{get formElement(){return t.formElement},get editable(){return r()},get reset(){return s()}})},V=(F,X)=>{{var H=le=>{Hv(le,{get formElement(){return t.formElement},get editable(){return r()},get reset(){return s()}})},Z=le=>{var ie=Gv(),Se=A(ie);I(ie),oe(()=>fe(Se,`Unsupported property type ${t.formElement.type??""}`)),G(le,ie)};te(F,le=>{t.formElement.type==="tuple"?le(H):le(Z,!1)},X)}};te(j,F=>{t.formElement.type==="array"?F(B):F(V,!1)},D)}};te(y,j=>{t.formElement.type==="object"?j(k):j(R,!1)},S)}};te(n,y=>{t.formElement.type==="enum"?y(u):y(h,!1)},i)}};te(E,n=>{t.formElement.type==="boolean"?n(g):n(_,!1)},$)}};te(d,E=>{t.formElement.type==="number"?E(p):E(v,!1)},c)}};te(o,d=>{t.formElement.type==="string"?d(l):d(f,!1)})}G(e,a),Ie()}function Jv(e,t,r,s,a){try{O(t,""),r.formElement.addChild(b(s).trim()),O(a,r.formElement.children,!0),O(s,"")}catch(o){O(t,o.message,!0)}}var Kv=W('<div class="invalid-feedback"> </div>'),Bv=W('<div class="d-flex justify-content-center"><form class="row row-cols-auto g-3 align-items-center p-2 flex-grow-1"><div class="col-lg-6 offset-lg-3 mb-1"><div><input type="text" placeholder="Key"> <button class="btn btn-primary" type="button">Add property</button> <!></div></div></form></div>'),Xv=(e,t,r)=>t(b(r).key),Wv=W('<button class="btn btn-danger w-100" type="button">Remove Property Block</button>'),Zv=W('<div class="property-block svelte-en10qk"><!> <div class="d-flex flex-column properties-block"><!></div></div>'),Yv=W("<!> <!>",1);function Do(e,t){ke(t,!0);let r=_e(t,"isRoot",3,!1),s=_e(t,"editable",3,!0),a=q(ss([]));Yt(()=>{O(a,t.formElement.children,!0)});let o=q(""),l=q("");function f($){t.formElement.removeChild($),O(a,t.formElement.children,!0)}function d($){t.formElement.resetChild($),O(a,t.formElement.children,!0)}var c=Yv(),p=Ee(c);{var v=$=>{var g=Bv(),_=A(g),n=A(_),i=A(n);let u;var h=A(i);Ue(h);let y;var S=M(h,2);S.__click=[Jv,l,t,o,a];var k=M(S,2);{var R=j=>{var D=Kv(),B=A(D,!0);I(D),oe(()=>fe(B,b(l))),G(j,D)};te(k,j=>{b(l)&&j(R)})}I(i),I(n),I(_),I(g),oe((j,D)=>{u=ye(i,1,"input-group",null,u,j),y=ye(h,1,"form-control",null,y,D),h.disabled=!s(),S.disabled=!s()},[()=>({"has-validation":b(l)}),()=>({"is-invalid":b(l)})]),st(h,()=>b(o),j=>O(o,j)),G($,g)};te(p,$=>{t.formElement.additionalProperties&&$(v)})}var E=M(p,2);wi(E,()=>b(a),$=>{var g=Sr(),_=Ee(g);Qt(_,17,()=>b(a),Nr,(n,i,u)=>{var h=Zv(),y=A(h);{var S=D=>{var B=Wv();B.__click=[Xv,f,i],oe(()=>B.disabled=!s()),G(D,B)};te(y,D=>{b(i).removable&&D(S)})}var k=M(y,2),R=A(k);const j=Ft(()=>r()?()=>d(u):null);nn(R,{get formElement(){return b(a)[u]},get editable(){return s()},get reset(){return b(j)}}),I(k),I(h),oe(()=>ve(k,"id",`${b(i).id??""}-wrapper`)),G(n,h)}),G($,g)}),G(e,c),Ie()}Ge(["click"]);var Qv=W("<div><!></div>");function on(e,t){ke(t,!0);let r=_e(t,"propertiesToIgnore",19,()=>[]),s=_e(t,"editable",3,!0),a=q(void 0);Yt(()=>{f()});function o(){var v;return(v=b(a))==null?void 0:v.getFormData()}function l(){var v;for(const E of document.querySelectorAll(`#${t.componentId} input, #${t.componentId} select`))E.dispatchEvent(new Event("input"));(v=b(a))==null||v.validate()}function f(){if(t.schema)try{O(a,new lv(t.schema,t.onchange,t.schemaVersion,r(),t.schemaData),!0)}catch(v){console.error(v),O(a,void 0)}else O(a,void 0)}Zt(()=>{(t.schema||t.schemaData||r())&&f()});var d=Sr(),c=Ee(d);{var p=v=>{var E=Sr(),$=Ee(E);wi($,()=>b(a),g=>{var _=Qv(),n=A(_);Do(n,{get formElement(){return b(a).root},isRoot:!0,get editable(){return s()}}),I(_),oe(()=>ve(_,"id",t.componentId)),G(g,_)}),G(v,E)};te(c,v=>{b(a)&&v(p)})}return G(e,d),Ie({getArguments:o,validateArguments:l})}var Ms={};const eg=typeof process=="object"&&Ms&&Ms.NODE_DEBUG&&/\bsemver\b/i.test(Ms.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var tg=eg;const Lo=256,rg=Number.MAX_SAFE_INTEGER||9007199254740991,sg=16,ag=Lo-6;var Mo={MAX_LENGTH:Lo,MAX_SAFE_COMPONENT_LENGTH:sg,MAX_SAFE_BUILD_LENGTH:ag,MAX_SAFE_INTEGER:rg},Zs={exports:{}};(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:a}=Mo,o=tg;t=e.exports={};const l=t.re=[],f=t.safeRe=[],d=t.src=[],c=t.t={};let p=0;const v="[a-zA-Z0-9-]",E=[["\\s",1],["\\d",a],[v,s]],$=_=>{for(const[n,i]of E)_=_.split(`${n}*`).join(`${n}{0,${i}}`).split(`${n}+`).join(`${n}{1,${i}}`);return _},g=(_,n,i)=>{const u=$(n),h=p++;o(_,h,n),c[_]=h,d[h]=n,l[h]=new RegExp(n,i?"g":void 0),f[h]=new RegExp(u,i?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${v}*`),g("MAINVERSION",`(${d[c.NUMERICIDENTIFIER]})\\.(${d[c.NUMERICIDENTIFIER]})\\.(${d[c.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${d[c.NUMERICIDENTIFIERLOOSE]})\\.(${d[c.NUMERICIDENTIFIERLOOSE]})\\.(${d[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${d[c.NUMERICIDENTIFIER]}|${d[c.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${d[c.NUMERICIDENTIFIERLOOSE]}|${d[c.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${d[c.PRERELEASEIDENTIFIER]}(?:\\.${d[c.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${d[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[c.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${v}+`),g("BUILD",`(?:\\+(${d[c.BUILDIDENTIFIER]}(?:\\.${d[c.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${d[c.MAINVERSION]}${d[c.PRERELEASE]}?${d[c.BUILD]}?`),g("FULL",`^${d[c.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${d[c.MAINVERSIONLOOSE]}${d[c.PRERELEASELOOSE]}?${d[c.BUILD]}?`),g("LOOSE",`^${d[c.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${d[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${d[c.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${d[c.XRANGEIDENTIFIER]})(?:\\.(${d[c.XRANGEIDENTIFIER]})(?:\\.(${d[c.XRANGEIDENTIFIER]})(?:${d[c.PRERELEASE]})?${d[c.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${d[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[c.XRANGEIDENTIFIERLOOSE]})(?:${d[c.PRERELEASELOOSE]})?${d[c.BUILD]}?)?)?`),g("XRANGE",`^${d[c.GTLT]}\\s*${d[c.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${d[c.GTLT]}\\s*${d[c.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),g("COERCE",`${d[c.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",d[c.COERCEPLAIN]+`(?:${d[c.PRERELEASE]})?(?:${d[c.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",d[c.COERCE],!0),g("COERCERTLFULL",d[c.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${d[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${d[c.LONETILDE]}${d[c.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${d[c.LONETILDE]}${d[c.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${d[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${d[c.LONECARET]}${d[c.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${d[c.LONECARET]}${d[c.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${d[c.GTLT]}\\s*(${d[c.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${d[c.GTLT]}\\s*(${d[c.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${d[c.GTLT]}\\s*(${d[c.LOOSEPLAIN]}|${d[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${d[c.XRANGEPLAIN]})\\s+-\\s+(${d[c.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${d[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[c.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Zs,Zs.exports);var Vo=Zs.exports;const hi=/^[0-9]+$/,ng=(e,t)=>{const r=hi.test(e),s=hi.test(t);return r&&s&&(e=+e,t=+t),e===t?0:r&&!s?-1:s&&!r?1:e<t?-1:1};var ig={compareIdentifiers:ng};const{MAX_LENGTH:gy,MAX_SAFE_INTEGER:yy}=Mo,{safeRe:_y,t:by}=Vo,{compareIdentifiers:$y}=ig,{safeRe:Ey,t:wy}=Vo;var og={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(ec,function(){class r{constructor(n){n||(n={}),this.main=n.main||"ss-main",this.placeholder=n.placeholder||"ss-placeholder",this.values=n.values||"ss-values",this.single=n.single||"ss-single",this.max=n.max||"ss-max",this.value=n.value||"ss-value",this.valueText=n.valueText||"ss-value-text",this.valueDelete=n.valueDelete||"ss-value-delete",this.valueOut=n.valueOut||"ss-value-out",this.deselect=n.deselect||"ss-deselect",this.deselectPath=n.deselectPath||"M10,10 L90,90 M10,90 L90,10",this.arrow=n.arrow||"ss-arrow",this.arrowClose=n.arrowClose||"M10,30 L50,70 L90,30",this.arrowOpen=n.arrowOpen||"M10,70 L50,30 L90,70",this.content=n.content||"ss-content",this.openAbove=n.openAbove||"ss-open-above",this.openBelow=n.openBelow||"ss-open-below",this.search=n.search||"ss-search",this.searchHighlighter=n.searchHighlighter||"ss-search-highlight",this.searching=n.searching||"ss-searching",this.addable=n.addable||"ss-addable",this.addablePath=n.addablePath||"M50,10 L50,90 M10,50 L90,50",this.list=n.list||"ss-list",this.optgroup=n.optgroup||"ss-optgroup",this.optgroupLabel=n.optgroupLabel||"ss-optgroup-label",this.optgroupLabelText=n.optgroupLabelText||"ss-optgroup-label-text",this.optgroupActions=n.optgroupActions||"ss-optgroup-actions",this.optgroupSelectAll=n.optgroupSelectAll||"ss-selectall",this.optgroupSelectAllBox=n.optgroupSelectAllBox||"M60,10 L10,10 L10,90 L90,90 L90,50",this.optgroupSelectAllCheck=n.optgroupSelectAllCheck||"M30,45 L50,70 L90,10",this.optgroupClosable=n.optgroupClosable||"ss-closable",this.option=n.option||"ss-option",this.optionDelete=n.optionDelete||"M10,10 L90,90 M10,90 L90,10",this.highlighted=n.highlighted||"ss-highlighted",this.open=n.open||"ss-open",this.close=n.close||"ss-close",this.selected=n.selected||"ss-selected",this.error=n.error||"ss-error",this.disabled=n.disabled||"ss-disabled",this.hide=n.hide||"ss-hide"}}function s(){return Math.random().toString(36).substring(2,10)}function a(_,n){function i(h,y){return y&&h&&h.classList&&h.classList.contains(y)||y&&h&&h.dataset&&h.dataset.id&&h.dataset.id===n?h:null}function u(h,y){return!h||h===document?null:i(h,y)?h:u(h.parentNode,y)}return i(_,n)||u(_,n)}function o(_,n=50,i=!1){let u;return function(...h){const y=self,S=()=>{u=null,i||_.apply(y,h)},k=i&&!u;clearTimeout(u),u=setTimeout(S,n),k&&_.apply(y,h)}}function l(_,n){return JSON.stringify(_)===JSON.stringify(n)}function f(_){const n=_.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,i=>"-"+i.toLowerCase());return _[0]===_[0].toUpperCase()?n.substring(1):n}class d{constructor(n){if(this.id=!n.id||n.id===""?s():n.id,this.label=n.label||"",this.selectAll=n.selectAll===void 0?!1:n.selectAll,this.selectAllText=n.selectAllText||"Select All",this.closable=n.closable||"off",this.options=[],n.options)for(const i of n.options)this.options.push(new c(i))}}class c{constructor(n){this.id=!n.id||n.id===""?s():n.id,this.value=n.value===void 0?n.text:n.value,this.text=n.text||"",this.html=n.html||"",this.selected=n.selected!==void 0?n.selected:!1,this.display=n.display!==void 0?n.display:!0,this.disabled=n.disabled!==void 0?n.disabled:!1,this.mandatory=n.mandatory!==void 0?n.mandatory:!1,this.placeholder=n.placeholder!==void 0?n.placeholder:!1,this.class=n.class||"",this.style=n.style||"",this.data=n.data||{}}}class p{constructor(n,i){this.selectType="single",this.data=[],this.selectedOrder=[],this.selectType=n,this.setData(i)}validateDataArray(n){if(!Array.isArray(n))return new Error("Data must be an array");for(let i of n)if(i instanceof d||"label"in i){if(!("label"in i))return new Error("Optgroup must have a label");if("options"in i&&i.options)for(let u of i.options){const h=this.validateOption(u);if(h)return h}}else if(i instanceof c||"text"in i){const u=this.validateOption(i);if(u)return u}else return new Error("Data object must be a valid optgroup or option");return null}validateOption(n){return"text"in n?null:new Error("Option must have a text")}partialToFullData(n){let i=[];return n.forEach(u=>{if(u instanceof d||"label"in u){let h=[];"options"in u&&u.options&&u.options.forEach(y=>{h.push(new c(y))}),h.length>0&&i.push(new d(u))}(u instanceof c||"text"in u)&&i.push(new c(u))}),i}setData(n){this.data=this.partialToFullData(n),this.selectType==="single"&&this.setSelectedBy("id",this.getSelected())}getData(){return this.filter(null,!0)}getDataOptions(){return this.filter(null,!1)}addOption(n,i=!1){if(i){let u=[new c(n)];this.setData(u.concat(this.getData()))}else this.setData(this.getData().concat(new c(n)))}setSelectedBy(n,i){let u=null,h=!1;const y=[];for(let k of this.data){if(k instanceof d)for(let R of k.options)u||(u=R),R.selected=h?!1:i.includes(R[n]),R.selected&&(y.push(R),this.selectType==="single"&&(h=!0));k instanceof c&&(u||(u=k),k.selected=h?!1:i.includes(k[n]),k.selected&&(y.push(k),this.selectType==="single"&&(h=!0)))}this.selectType==="single"&&u&&!h&&(u.selected=!0,y.push(u));const S=i.map(k=>{var R;return((R=y.find(j=>j[n]===k))===null||R===void 0?void 0:R.id)||""});this.selectedOrder=S}getSelected(){return this.getSelectedOptions().map(n=>n.id)}getSelectedValues(){return this.getSelectedOptions().map(n=>n.value)}getSelectedOptions(){return this.filter(n=>n.selected,!1)}getOptgroupByID(n){for(let i of this.data)if(i instanceof d&&i.id===n)return i;return null}getOptionByID(n){let i=this.filter(u=>u.id===n,!1);return i.length?i[0]:null}getSelectType(){return this.selectType}getFirstOption(){let n=null;for(let i of this.data)if(i instanceof d?n=i.options[0]:i instanceof c&&(n=i),n)break;return n}search(n,i){return n=n.trim(),n===""?this.getData():this.filter(u=>i(u,n),!0)}filter(n,i){const u=[];return this.data.forEach(h=>{if(h instanceof d){let y=[];if(h.options.forEach(S=>{(!n||n(S))&&(i?y.push(new c(S)):u.push(new c(S)))}),y.length>0){let S=new d(h);S.options=y,u.push(S)}}h instanceof c&&(!n||n(h))&&u.push(new c(h))}),u}selectedOrderOptions(n){const i=[];return this.selectedOrder.forEach(u=>{const h=n.find(y=>y.id===u);h&&i.push(h)}),n.forEach(u=>{let h=!1;i.forEach(y=>{if(u.id===y.id){h=!0;return}}),h||i.push(u)}),i}}class v{constructor(n,i,u,h){this.store=u,this.settings=n,this.classes=i,this.callbacks=h,this.main=this.mainDiv(),this.content=this.contentDiv(),this.updateClassStyles(),this.updateAriaAttributes(),this.settings.contentLocation&&this.settings.contentLocation.appendChild(this.content.main)}enable(){this.main.main.classList.remove(this.classes.disabled),this.content.search.input.disabled=!1}disable(){this.main.main.classList.add(this.classes.disabled),this.content.search.input.disabled=!0}open(){this.main.arrow.path.setAttribute("d",this.classes.arrowOpen),this.main.main.classList.add(this.settings.openPosition==="up"?this.classes.openAbove:this.classes.openBelow),this.main.main.setAttribute("aria-expanded","true"),this.moveContent();const n=this.store.getSelectedOptions();if(n.length){const i=n[n.length-1].id,u=this.content.list.querySelector('[data-id="'+i+'"]');u&&this.ensureElementInView(this.content.list,u)}}close(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.remove(this.classes.openBelow),this.main.main.setAttribute("aria-expanded","false"),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.main.arrow.path.setAttribute("d",this.classes.arrowClose)}updateClassStyles(){if(this.main.main.className="",this.main.main.removeAttribute("style"),this.content.main.className="",this.content.main.removeAttribute("style"),this.main.main.classList.add(this.classes.main),this.content.main.classList.add(this.classes.content),this.settings.style!==""&&(this.main.main.style.cssText=this.settings.style,this.content.main.style.cssText=this.settings.style),this.settings.class.length)for(const n of this.settings.class)n.trim()!==""&&(this.main.main.classList.add(n.trim()),this.content.main.classList.add(n.trim()));(this.settings.contentPosition==="relative"||this.settings.contentPosition==="fixed")&&this.content.main.classList.add("ss-"+this.settings.contentPosition)}updateAriaAttributes(){this.main.main.role="combobox",this.main.main.setAttribute("aria-haspopup","listbox"),this.main.main.setAttribute("aria-controls",this.content.main.id),this.main.main.setAttribute("aria-expanded","false"),this.content.main.setAttribute("role","listbox")}mainDiv(){var n;const i=document.createElement("div");i.dataset.id=this.settings.id,i.setAttribute("aria-label",this.settings.ariaLabel),i.tabIndex=0,i.onkeydown=D=>{switch(D.key){case"ArrowUp":case"ArrowDown":return this.callbacks.open(),D.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Enter":case" ":this.callbacks.open();const B=this.content.list.querySelector("."+this.classes.highlighted);return B&&B.click(),!1;case"Escape":return this.callbacks.close(),!1}return D.key.length===1&&this.callbacks.open(),!0},i.onclick=D=>{this.settings.disabled||(this.settings.isOpen?this.callbacks.close():this.callbacks.open())};const u=document.createElement("div");u.classList.add(this.classes.values),i.appendChild(u);const h=document.createElement("div");h.classList.add(this.classes.deselect);const y=(n=this.store)===null||n===void 0?void 0:n.getSelectedOptions();!this.settings.allowDeselect||this.settings.isMultiple&&y&&y.length<=0?h.classList.add(this.classes.hide):h.classList.remove(this.classes.hide),h.onclick=D=>{if(D.stopPropagation(),this.settings.disabled)return;let B=!0;const V=this.store.getSelectedOptions(),F=[];if(this.callbacks.beforeChange&&(B=this.callbacks.beforeChange(F,V)===!0),B){if(this.settings.isMultiple)this.callbacks.setSelected([],!1),this.updateDeselectAll();else{const X=this.store.getFirstOption(),H=X?X.id:"";this.callbacks.setSelected(H,!1)}this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(this.store.getSelectedOptions())}};const S=document.createElementNS("http://www.w3.org/2000/svg","svg");S.setAttribute("viewBox","0 0 100 100");const k=document.createElementNS("http://www.w3.org/2000/svg","path");k.setAttribute("d",this.classes.deselectPath),S.appendChild(k),h.appendChild(S),i.appendChild(h);const R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.classList.add(this.classes.arrow),R.setAttribute("viewBox","0 0 100 100");const j=document.createElementNS("http://www.w3.org/2000/svg","path");return j.setAttribute("d",this.classes.arrowClose),this.settings.alwaysOpen&&R.classList.add(this.classes.hide),R.appendChild(j),i.appendChild(R),{main:i,values:u,deselect:{main:h,svg:S,path:k},arrow:{main:R,path:j}}}mainFocus(n){n!=="click"&&this.main.main.focus({preventScroll:!0})}placeholder(){const n=this.store.filter(h=>h.placeholder,!1);let i=this.settings.placeholderText;n.length&&(n[0].html!==""?i=n[0].html:n[0].text!==""&&(i=n[0].text));const u=document.createElement("div");return u.classList.add(this.classes.placeholder),u.innerHTML=i,u}renderValues(){if(!this.settings.isMultiple){this.renderSingleValue();return}this.renderMultipleValues(),this.updateDeselectAll()}renderSingleValue(){const n=this.store.filter(u=>u.selected&&!u.placeholder,!1),i=n.length>0?n[0]:null;if(!i)this.main.values.innerHTML=this.placeholder().outerHTML;else{const u=document.createElement("div");u.classList.add(this.classes.single),i.html?u.innerHTML=i.html:u.innerText=i.text,this.main.values.innerHTML=u.outerHTML}!this.settings.allowDeselect||!n.length?this.main.deselect.main.classList.add(this.classes.hide):this.main.deselect.main.classList.remove(this.classes.hide)}renderMultipleValues(){let n=this.main.values.childNodes,i=this.store.filter(h=>h.selected&&h.display,!1);if(i.length===0){this.main.values.innerHTML=this.placeholder().outerHTML;return}else{const h=this.main.values.querySelector("."+this.classes.placeholder);h&&h.remove()}if(i.length>this.settings.maxValuesShown){const h=document.createElement("div");h.classList.add(this.classes.max),h.textContent=this.settings.maxValuesMessage.replace("{number}",i.length.toString()),this.main.values.innerHTML=h.outerHTML;return}else{const h=this.main.values.querySelector("."+this.classes.max);h&&h.remove()}this.settings.keepOrder&&(i=this.store.selectedOrderOptions(i));let u=[];for(let h=0;h<n.length;h++){const y=n[h],S=y.getAttribute("data-id");S&&(i.filter(R=>R.id===S,!1).length||u.push(y))}for(const h of u)h.classList.add(this.classes.valueOut),setTimeout(()=>{this.main.values.hasChildNodes()&&this.main.values.contains(h)&&this.main.values.removeChild(h)},100);n=this.main.values.childNodes;for(let h=0;h<i.length;h++){let y=!0;for(let S=0;S<n.length;S++)i[h].id===String(n[S].dataset.id)&&(y=!1);y&&(this.settings.keepOrder?this.main.values.appendChild(this.multipleValue(i[h])):n.length===0?this.main.values.appendChild(this.multipleValue(i[h])):h===0?this.main.values.insertBefore(this.multipleValue(i[h]),n[h]):n[h-1].insertAdjacentElement("afterend",this.multipleValue(i[h])))}}multipleValue(n){const i=document.createElement("div");i.classList.add(this.classes.value),i.dataset.id=n.id;const u=document.createElement("div");if(u.classList.add(this.classes.valueText),u.textContent=n.text,i.appendChild(u),!n.mandatory){const h=document.createElement("div");h.classList.add(this.classes.valueDelete),h.onclick=k=>{if(k.preventDefault(),k.stopPropagation(),this.settings.disabled)return;let R=!0;const j=this.store.getSelectedOptions(),D=j.filter(B=>B.selected&&B.id!==n.id,!0);if(!(this.settings.minSelected&&D.length<this.settings.minSelected)&&(this.callbacks.beforeChange&&(R=this.callbacks.beforeChange(D,j)===!0),R)){let B=[];for(const V of D){if(V instanceof d)for(const F of V.options)B.push(F.id);V instanceof c&&B.push(V.id)}this.callbacks.setSelected(B,!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(D),this.updateDeselectAll()}};const y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.setAttribute("viewBox","0 0 100 100");const S=document.createElementNS("http://www.w3.org/2000/svg","path");S.setAttribute("d",this.classes.optionDelete),y.appendChild(S),h.appendChild(y),i.appendChild(h)}return i}contentDiv(){const n=document.createElement("div");n.dataset.id=this.settings.id;const i=this.searchDiv();n.appendChild(i.main);const u=this.listDiv();return n.appendChild(u),{main:n,search:i,list:u}}moveContent(){if(this.settings.contentPosition==="relative"){this.moveContentBelow();return}if(this.settings.openPosition==="down"){this.moveContentBelow();return}else if(this.settings.openPosition==="up"){this.moveContentAbove();return}this.putContent()==="up"?this.moveContentAbove():this.moveContentBelow()}searchDiv(){const n=document.createElement("div"),i=document.createElement("input"),u=document.createElement("div");n.classList.add(this.classes.search);const h={main:n,input:i};if(this.settings.showSearch||(n.classList.add(this.classes.hide),i.readOnly=!0),i.type="search",i.placeholder=this.settings.searchPlaceholder,i.tabIndex=-1,i.setAttribute("aria-label",this.settings.searchPlaceholder),i.setAttribute("autocapitalize","off"),i.setAttribute("autocomplete","off"),i.setAttribute("autocorrect","off"),i.oninput=o(y=>{this.callbacks.search(y.target.value)},100),i.onkeydown=y=>{switch(y.key){case"ArrowUp":case"ArrowDown":return y.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Escape":return this.callbacks.close(),!1;case" ":const S=this.content.list.querySelector("."+this.classes.highlighted);return S?(S.click(),!1):!0;case"Enter":if(this.callbacks.addable)return u.click(),!1;{const k=this.content.list.querySelector("."+this.classes.highlighted);if(k)return k.click(),!1}return!0}return!0},n.appendChild(i),this.callbacks.addable){u.classList.add(this.classes.addable);const y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.setAttribute("viewBox","0 0 100 100");const S=document.createElementNS("http://www.w3.org/2000/svg","path");S.setAttribute("d",this.classes.addablePath),y.appendChild(S),u.appendChild(y),u.onclick=k=>{if(k.preventDefault(),k.stopPropagation(),!this.callbacks.addable)return;const R=this.content.search.input.value.trim();if(R===""){this.content.search.input.focus();return}const j=B=>{let V=new c(B);if(this.callbacks.addOption(V),this.settings.isMultiple){let F=this.store.getSelected();F.push(V.id),this.callbacks.setSelected(F,!0)}else this.callbacks.setSelected([V.id],!0);this.callbacks.search(""),this.settings.closeOnSelect&&setTimeout(()=>{this.callbacks.close()},100)},D=this.callbacks.addable(R);D===!1||D===void 0||D===null||(D instanceof Promise?D.then(B=>{typeof B=="string"?j({text:B,value:B}):D instanceof Error?this.renderError(D.message):j(B)}):typeof D=="string"?j({text:D,value:D}):D instanceof Error?this.renderError(D.message):j(D))},n.appendChild(u),h.addable={main:u,svg:y,path:S}}return h}searchFocus(){this.content.search.input.focus()}getOptions(n=!1,i=!1,u=!1){let h="."+this.classes.option;return n&&(h+=":not(."+this.classes.placeholder+")"),i&&(h+=":not(."+this.classes.disabled+")"),u&&(h+=":not(."+this.classes.hide+")"),Array.from(this.content.list.querySelectorAll(h))}highlight(n){const i=this.getOptions(!0,!0,!0);if(i.length===0)return;if(i.length===1&&!i[0].classList.contains(this.classes.highlighted)){i[0].classList.add(this.classes.highlighted);return}let u=!1;for(const h of i)h.classList.contains(this.classes.highlighted)&&(u=!0);if(!u){for(const h of i)if(h.classList.contains(this.classes.selected)){h.classList.add(this.classes.highlighted);break}}for(let h=0;h<i.length;h++)if(i[h].classList.contains(this.classes.highlighted)){const y=i[h];y.classList.remove(this.classes.highlighted);const S=y.parentElement;if(S&&S.classList.contains(this.classes.open)){const j=S.querySelector("."+this.classes.optgroupLabel);j&&j.click()}let k=i[n==="down"?h+1<i.length?h+1:0:h-1>=0?h-1:i.length-1];k.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,k);const R=k.parentElement;if(R&&R.classList.contains(this.classes.close)){const j=R.querySelector("."+this.classes.optgroupLabel);j&&j.click()}return}i[n==="down"?0:i.length-1].classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,i[n==="down"?0:i.length-1])}listDiv(){const n=document.createElement("div");return n.classList.add(this.classes.list),n}renderError(n){this.content.list.innerHTML="";const i=document.createElement("div");i.classList.add(this.classes.error),i.textContent=n,this.content.list.appendChild(i)}renderSearching(){this.content.list.innerHTML="";const n=document.createElement("div");n.classList.add(this.classes.searching),n.textContent=this.settings.searchingText,this.content.list.appendChild(n)}renderOptions(n){if(this.content.list.innerHTML="",n.length===0){const i=document.createElement("div");i.classList.add(this.classes.search),this.callbacks.addable?i.innerHTML=this.settings.addableText.replace("{value}",this.content.search.input.value):i.innerHTML=this.settings.searchText,this.content.list.appendChild(i);return}this.settings.allowDeselect&&!this.settings.isMultiple&&(this.store.filter(u=>u.placeholder,!1).length||this.store.addOption(new c({text:"",value:"",selected:!1,placeholder:!0}),!0));for(const i of n){if(i instanceof d){const u=document.createElement("div");u.classList.add(this.classes.optgroup);const h=document.createElement("div");h.classList.add(this.classes.optgroupLabel),u.appendChild(h);const y=document.createElement("div");y.classList.add(this.classes.optgroupLabelText),y.textContent=i.label,h.appendChild(y);const S=document.createElement("div");if(S.classList.add(this.classes.optgroupActions),h.appendChild(S),this.settings.isMultiple&&i.selectAll){const k=document.createElement("div");k.classList.add(this.classes.optgroupSelectAll);let R=!0;for(const F of i.options)if(!F.selected){R=!1;break}R&&k.classList.add(this.classes.selected);const j=document.createElement("span");j.textContent=i.selectAllText,k.appendChild(j);const D=document.createElementNS("http://www.w3.org/2000/svg","svg");D.setAttribute("viewBox","0 0 100 100"),k.appendChild(D);const B=document.createElementNS("http://www.w3.org/2000/svg","path");B.setAttribute("d",this.classes.optgroupSelectAllBox),D.appendChild(B);const V=document.createElementNS("http://www.w3.org/2000/svg","path");V.setAttribute("d",this.classes.optgroupSelectAllCheck),D.appendChild(V),k.addEventListener("click",F=>{F.preventDefault(),F.stopPropagation();const X=this.store.getSelected();if(R){const H=X.filter(Z=>{for(const le of i.options)if(Z===le.id)return!1;return!0});this.callbacks.setSelected(H,!0);return}else{const H=X.concat(i.options.map(Z=>Z.id));for(const Z of i.options)this.store.getOptionByID(Z.id)||this.callbacks.addOption(Z);this.callbacks.setSelected(H,!0);return}}),S.appendChild(k)}if(i.closable!=="off"){const k=document.createElement("div");k.classList.add(this.classes.optgroupClosable);const R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.setAttribute("viewBox","0 0 100 100"),R.classList.add(this.classes.arrow),k.appendChild(R);const j=document.createElementNS("http://www.w3.org/2000/svg","path");R.appendChild(j),i.options.some(D=>D.selected)||this.content.search.input.value.trim()!==""?(k.classList.add(this.classes.open),j.setAttribute("d",this.classes.arrowOpen)):i.closable==="open"?(u.classList.add(this.classes.open),j.setAttribute("d",this.classes.arrowOpen)):i.closable==="close"&&(u.classList.add(this.classes.close),j.setAttribute("d",this.classes.arrowClose)),h.addEventListener("click",D=>{D.preventDefault(),D.stopPropagation(),u.classList.contains(this.classes.close)?(u.classList.remove(this.classes.close),u.classList.add(this.classes.open),j.setAttribute("d",this.classes.arrowOpen)):(u.classList.remove(this.classes.open),u.classList.add(this.classes.close),j.setAttribute("d",this.classes.arrowClose))}),S.appendChild(k)}u.appendChild(h);for(const k of i.options)u.appendChild(this.option(k));this.content.list.appendChild(u)}i instanceof c&&this.content.list.appendChild(this.option(i))}}option(n){if(n.placeholder){const u=document.createElement("div");return u.classList.add(this.classes.option),u.classList.add(this.classes.hide),u}const i=document.createElement("div");return i.dataset.id=n.id,i.classList.add(this.classes.option),i.setAttribute("role","option"),n.class&&n.class.split(" ").forEach(u=>{i.classList.add(u)}),n.style&&(i.style.cssText=n.style),this.settings.searchHighlight&&this.content.search.input.value.trim()!==""?i.innerHTML=this.highlightText(n.html!==""?n.html:n.text,this.content.search.input.value,this.classes.searchHighlighter):n.html!==""?i.innerHTML=n.html:i.textContent=n.text,this.settings.showOptionTooltips&&i.textContent&&i.setAttribute("title",i.textContent),n.display||i.classList.add(this.classes.hide),n.disabled&&i.classList.add(this.classes.disabled),n.selected&&this.settings.hideSelected&&i.classList.add(this.classes.hide),n.selected?(i.classList.add(this.classes.selected),i.setAttribute("aria-selected","true"),this.main.main.setAttribute("aria-activedescendant",i.id)):(i.classList.remove(this.classes.selected),i.setAttribute("aria-selected","false")),i.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation();const h=this.store.getSelected(),y=u.currentTarget,S=String(y.dataset.id);if(n.disabled||n.selected&&!this.settings.allowDeselect||this.settings.isMultiple&&this.settings.maxSelected<=h.length&&!n.selected||this.settings.isMultiple&&this.settings.minSelected>=h.length&&n.selected)return;let k=!1;const R=this.store.getSelectedOptions();let j=[];this.settings.isMultiple&&(n.selected?j=R.filter(D=>D.id!==S):j=R.concat(n)),this.settings.isMultiple||(n.selected?j=[]:j=[n]),this.callbacks.beforeChange||(k=!0),this.callbacks.beforeChange&&(this.callbacks.beforeChange(j,R)===!1?k=!1:k=!0),k&&(this.store.getOptionByID(S)||this.callbacks.addOption(n),this.callbacks.setSelected(j.map(D=>D.id),!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(j))}),i}destroy(){this.main.main.remove(),this.content.main.remove()}highlightText(n,i,u){let h=n;const y=new RegExp("(?![^<]*>)("+i.trim()+")(?![^<]*>[^<>]*</)","i");if(!n.match(y))return n;const S=n.match(y).index,k=S+n.match(y)[0].toString().length,R=n.substring(S,k);return h=h.replace(y,`<mark class="${u}">${R}</mark>`),h}moveContentAbove(){const n=this.main.main.offsetHeight,i=this.content.main.offsetHeight;this.main.main.classList.remove(this.classes.openBelow),this.main.main.classList.add(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.content.main.classList.add(this.classes.openAbove);const u=this.main.main.getBoundingClientRect();this.content.main.style.margin="-"+(n+i-1)+"px 0px 0px 0px",this.content.main.style.top=u.top+u.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=u.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=u.width+"px"}moveContentBelow(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.add(this.classes.openBelow),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.add(this.classes.openBelow);const n=this.main.main.getBoundingClientRect();this.content.main.style.margin="-1px 0px 0px 0px",this.settings.contentPosition!=="relative"&&(this.content.main.style.top=n.top+n.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=n.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=n.width+"px")}ensureElementInView(n,i){const u=n.scrollTop+n.offsetTop,h=u+n.clientHeight,y=i.offsetTop,S=y+i.clientHeight;y<u?n.scrollTop-=u-y:S>h&&(n.scrollTop+=S-h)}putContent(){const n=this.main.main.offsetHeight,i=this.main.main.getBoundingClientRect(),u=this.content.main.offsetHeight;return window.innerHeight-(i.top+n)<=u&&i.top>u?"up":"down"}updateDeselectAll(){if(!this.store||!this.settings)return;const n=this.store.getSelectedOptions(),i=n&&n.length>0,u=this.settings.isMultiple,h=this.settings.allowDeselect,y=this.main.deselect.main,S=this.classes.hide;h&&!(u&&!i)?y.classList.remove(S):y.classList.add(S)}}class E{constructor(n){this.listen=!1,this.observer=null,this.select=n,this.valueChange=this.valueChange.bind(this),this.select.addEventListener("change",this.valueChange,{passive:!0}),this.observer=new MutationObserver(this.observeCall.bind(this)),this.changeListen(!0)}enable(){this.select.disabled=!1}disable(){this.select.disabled=!0}hideUI(){this.select.tabIndex=-1,this.select.style.display="none",this.select.setAttribute("aria-hidden","true")}showUI(){this.select.removeAttribute("tabindex"),this.select.style.display="",this.select.removeAttribute("aria-hidden")}changeListen(n){this.listen=n,n&&this.observer&&this.observer.observe(this.select,{subtree:!0,childList:!0,attributes:!0}),n||this.observer&&this.observer.disconnect()}valueChange(n){return this.listen&&this.onValueChange&&this.onValueChange(this.getSelectedOptions()),!0}observeCall(n){if(!this.listen)return;let i=!1,u=!1,h=!1;for(const y of n){if(y.target===this.select&&(y.attributeName==="disabled"&&(u=!0),y.attributeName==="class"&&(i=!0),y.type==="childList")){for(const S of y.addedNodes)if(S.nodeName==="OPTION"&&S.value===this.select.value){this.select.dispatchEvent(new Event("change"));break}h=!0}(y.target.nodeName==="OPTGROUP"||y.target.nodeName==="OPTION")&&(h=!0)}i&&this.onClassChange&&this.onClassChange(this.select.className.split(" ")),u&&this.onDisabledChange&&(this.changeListen(!1),this.onDisabledChange(this.select.disabled),this.changeListen(!0)),h&&this.onOptionsChange&&(this.changeListen(!1),this.onOptionsChange(this.getData()),this.changeListen(!0))}getData(){let n=[];const i=this.select.childNodes;for(const u of i)u.nodeName==="OPTGROUP"&&n.push(this.getDataFromOptgroup(u)),u.nodeName==="OPTION"&&n.push(this.getDataFromOption(u));return n}getDataFromOptgroup(n){let i={id:n.id,label:n.label,selectAll:n.dataset?n.dataset.selectall==="true":!1,selectAllText:n.dataset?n.dataset.selectalltext:"Select all",closable:n.dataset?n.dataset.closable:"off",options:[]};const u=n.childNodes;for(const h of u)h.nodeName==="OPTION"&&i.options.push(this.getDataFromOption(h));return i}getDataFromOption(n){return{id:n.id,value:n.value,text:n.text,html:n.dataset&&n.dataset.html?n.dataset.html:"",selected:n.selected,display:n.style.display!=="none",disabled:n.disabled,mandatory:n.dataset?n.dataset.mandatory==="true":!1,placeholder:n.dataset.placeholder==="true",class:n.className,style:n.style.cssText,data:n.dataset}}getSelectedOptions(){let n=[];const i=this.select.childNodes;for(const u of i){if(u.nodeName==="OPTGROUP"){const h=u.childNodes;for(const y of h)if(y.nodeName==="OPTION"){const S=y;S.selected&&n.push(this.getDataFromOption(S))}}if(u.nodeName==="OPTION"){const h=u;h.selected&&n.push(this.getDataFromOption(h))}}return n}getSelectedValues(){return this.getSelectedOptions().map(n=>n.value)}setSelected(n){this.changeListen(!1);const i=this.select.childNodes;for(const u of i){if(u.nodeName==="OPTGROUP"){const y=u.childNodes;for(const S of y)if(S.nodeName==="OPTION"){const k=S;k.selected=n.includes(k.id)}}if(u.nodeName==="OPTION"){const h=u;h.selected=n.includes(h.id)}}this.changeListen(!0)}setSelectedByValue(n){this.changeListen(!1);const i=this.select.childNodes;for(const u of i){if(u.nodeName==="OPTGROUP"){const y=u.childNodes;for(const S of y)if(S.nodeName==="OPTION"){const k=S;k.selected=n.includes(k.value)}}if(u.nodeName==="OPTION"){const h=u;h.selected=n.includes(h.value)}}this.changeListen(!0)}updateSelect(n,i,u){this.changeListen(!1),n&&(this.select.dataset.id=n),i&&(this.select.style.cssText=i),u&&(this.select.className="",u.forEach(h=>{h.trim()!==""&&this.select.classList.add(h.trim())})),this.changeListen(!0)}updateOptions(n){this.changeListen(!1),this.select.innerHTML="";for(const i of n)i instanceof d&&this.select.appendChild(this.createOptgroup(i)),i instanceof c&&this.select.appendChild(this.createOption(i));this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.changeListen(!0)}createOptgroup(n){const i=document.createElement("optgroup");if(i.id=n.id,i.label=n.label,n.selectAll&&(i.dataset.selectAll="true"),n.closable!=="off"&&(i.dataset.closable=n.closable),n.options)for(const u of n.options)i.appendChild(this.createOption(u));return i}createOption(n){const i=document.createElement("option");return i.id=n.id,i.value=n.value,i.textContent=n.text,n.html!==""&&i.setAttribute("data-html",n.html),n.selected&&(i.selected=n.selected),n.disabled&&(i.disabled=!0),n.display||(i.style.display="none"),n.placeholder&&i.setAttribute("data-placeholder","true"),n.mandatory&&i.setAttribute("data-mandatory","true"),n.class&&n.class.split(" ").forEach(u=>{i.classList.add(u)}),n.data&&typeof n.data=="object"&&Object.keys(n.data).forEach(u=>{i.setAttribute("data-"+f(u),n.data[u])}),i}destroy(){this.changeListen(!1),this.select.removeEventListener("change",this.valueChange),this.observer&&(this.observer.disconnect(),this.observer=null),delete this.select.dataset.id,this.showUI()}}class ${constructor(n){this.id="",this.style="",this.class=[],this.isMultiple=!1,this.isOpen=!1,this.isFullOpen=!1,this.intervalMove=null,n||(n={}),this.id="ss-"+s(),this.style=n.style||"",this.class=n.class||[],this.disabled=n.disabled!==void 0?n.disabled:!1,this.alwaysOpen=n.alwaysOpen!==void 0?n.alwaysOpen:!1,this.showSearch=n.showSearch!==void 0?n.showSearch:!0,this.focusSearch=n.focusSearch!==void 0?n.focusSearch:!0,this.ariaLabel=n.ariaLabel||"Combobox",this.searchPlaceholder=n.searchPlaceholder||"Search",this.searchText=n.searchText||"No Results",this.searchingText=n.searchingText||"Searching...",this.searchHighlight=n.searchHighlight!==void 0?n.searchHighlight:!1,this.closeOnSelect=n.closeOnSelect!==void 0?n.closeOnSelect:!0,this.contentLocation=n.contentLocation||document.body,this.contentPosition=n.contentPosition||"absolute",this.openPosition=n.openPosition||"auto",this.placeholderText=n.placeholderText!==void 0?n.placeholderText:"Select Value",this.allowDeselect=n.allowDeselect!==void 0?n.allowDeselect:!1,this.hideSelected=n.hideSelected!==void 0?n.hideSelected:!1,this.keepOrder=n.keepOrder!==void 0?n.keepOrder:!1,this.showOptionTooltips=n.showOptionTooltips!==void 0?n.showOptionTooltips:!1,this.minSelected=n.minSelected||0,this.maxSelected=n.maxSelected||1e3,this.timeoutDelay=n.timeoutDelay||200,this.maxValuesShown=n.maxValuesShown||20,this.maxValuesMessage=n.maxValuesMessage||"{number} selected",this.addableText=n.addableText||'Press "Enter" to add {value}'}}class g{constructor(n){var i;if(this.events={search:void 0,searchFilter:(k,R)=>k.text.toLowerCase().indexOf(R.toLowerCase())!==-1,addable:void 0,beforeChange:void 0,afterChange:void 0,beforeOpen:void 0,afterOpen:void 0,beforeClose:void 0,afterClose:void 0},this.windowResize=o(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.windowScroll=o(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.documentClick=k=>{this.settings.isOpen&&k.target&&!a(k.target,this.settings.id)&&this.close(k.type)},this.windowVisibilityChange=()=>{document.hidden&&this.close()},this.selectEl=typeof n.select=="string"?document.querySelector(n.select):n.select,!this.selectEl){n.events&&n.events.error&&n.events.error(new Error("Could not find select element"));return}if(this.selectEl.tagName!=="SELECT"){n.events&&n.events.error&&n.events.error(new Error("Element isnt of type select"));return}this.selectEl.dataset.ssid&&this.destroy(),this.settings=new $(n.settings),this.cssClasses=new r(n.cssClasses);const u=["afterChange","beforeOpen","afterOpen","beforeClose","afterClose"];for(const k in n.events)n.events.hasOwnProperty(k)&&(u.indexOf(k)!==-1?this.events[k]=o(n.events[k],100):this.events[k]=n.events[k]);this.settings.disabled=!((i=n.settings)===null||i===void 0)&&i.disabled?n.settings.disabled:this.selectEl.disabled,this.settings.isMultiple=this.selectEl.multiple,this.settings.style=this.selectEl.style.cssText,this.settings.class=this.selectEl.className.split(" "),this.select=new E(this.selectEl),this.select.updateSelect(this.settings.id,this.settings.style,this.settings.class),this.select.hideUI(),this.select.onValueChange=k=>{this.setSelected(k.map(R=>R.id))},this.select.onClassChange=k=>{this.settings.class=k,this.render.updateClassStyles()},this.select.onDisabledChange=k=>{k?this.disable():this.enable()},this.select.onOptionsChange=k=>{this.setData(k)},this.store=new p(this.settings.isMultiple?"multiple":"single",n.data?n.data:this.select.getData()),n.data&&this.select.updateOptions(this.store.getData());const h={open:this.open.bind(this),close:this.close.bind(this),addable:this.events.addable?this.events.addable:void 0,setSelected:this.setSelected.bind(this),addOption:this.addOption.bind(this),search:this.search.bind(this),beforeChange:this.events.beforeChange,afterChange:this.events.afterChange};this.render=new v(this.settings,this.cssClasses,this.store,h),this.render.renderValues(),this.render.renderOptions(this.store.getData());const y=this.selectEl.getAttribute("aria-label"),S=this.selectEl.getAttribute("aria-labelledby");y?this.render.main.main.setAttribute("aria-label",y):S&&this.render.main.main.setAttribute("aria-labelledby",S),this.selectEl.parentNode&&this.selectEl.parentNode.insertBefore(this.render.main.main,this.selectEl.nextSibling),window.addEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.addEventListener("scroll",this.windowScroll,!1),document.addEventListener("visibilitychange",this.windowVisibilityChange),this.settings.disabled&&this.disable(),this.settings.alwaysOpen&&this.open(),this.selectEl.slim=this}enable(){this.settings.disabled=!1,this.select.enable(),this.render.enable()}disable(){this.settings.disabled=!0,this.select.disable(),this.render.disable()}getData(){return this.store.getData()}setData(n){const i=this.store.getSelected(),u=this.store.validateDataArray(n);if(u){this.events.error&&this.events.error(u);return}this.store.setData(n);const h=this.store.getData();this.select.updateOptions(h),this.render.renderValues(),this.render.renderOptions(h),this.events.afterChange&&!l(i,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}getSelected(){let n=this.store.getSelectedOptions();return this.settings.keepOrder&&(n=this.store.selectedOrderOptions(n)),n.map(i=>i.value)}setSelected(n,i=!0){const u=this.store.getSelected(),h=this.store.getDataOptions();n=Array.isArray(n)?n:[n];const y=[];for(const k of n){if(h.find(R=>R.id==k)){y.push(k);continue}for(const R of h.filter(j=>j.value==k))y.push(R.id)}this.store.setSelectedBy("id",y);const S=this.store.getData();this.select.updateOptions(S),this.render.renderValues(),this.render.content.search.input.value!==""?this.search(this.render.content.search.input.value):this.render.renderOptions(S),i&&this.events.afterChange&&!l(u,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}addOption(n){const i=this.store.getSelected();this.store.getDataOptions().some(h=>{var y;return h.value===((y=n.value)!==null&&y!==void 0?y:n.text)})||this.store.addOption(n);const u=this.store.getData();this.select.updateOptions(u),this.render.renderValues(),this.render.renderOptions(u),this.events.afterChange&&!l(i,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}open(){this.settings.disabled||this.settings.isOpen||(this.events.beforeOpen&&this.events.beforeOpen(),this.render.open(),this.settings.showSearch&&this.settings.focusSearch&&this.render.searchFocus(),this.settings.isOpen=!0,setTimeout(()=>{this.events.afterOpen&&this.events.afterOpen(),this.settings.isOpen&&(this.settings.isFullOpen=!0),document.addEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.contentPosition==="absolute"&&(this.settings.intervalMove&&clearInterval(this.settings.intervalMove),this.settings.intervalMove=setInterval(this.render.moveContent.bind(this.render),500)))}close(n=null){!this.settings.isOpen||this.settings.alwaysOpen||(this.events.beforeClose&&this.events.beforeClose(),this.render.close(),this.render.content.search.input.value!==""&&this.search(""),this.render.mainFocus(n),this.settings.isOpen=!1,this.settings.isFullOpen=!1,setTimeout(()=>{this.events.afterClose&&this.events.afterClose(),document.removeEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.intervalMove&&clearInterval(this.settings.intervalMove))}search(n){if(this.render.content.search.input.value!==n&&(this.render.content.search.input.value=n),!this.events.search){this.render.renderOptions(n===""?this.store.getData():this.store.search(n,this.events.searchFilter));return}this.render.renderSearching();const i=this.events.search(n,this.store.getSelectedOptions());if(i instanceof Promise){i.then(u=>{this.render.renderOptions(this.store.partialToFullData(u))}).catch(u=>{this.render.renderError(typeof u=="string"?u:u.message)});return}else Array.isArray(i)?this.render.renderOptions(this.store.partialToFullData(i)):this.render.renderError("Search event must return a promise or an array of data")}destroy(){document.removeEventListener("click",this.documentClick),window.removeEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.removeEventListener("scroll",this.windowScroll,!1),document.removeEventListener("visibilitychange",this.windowVisibilityChange),this.store.setData([]),this.render.destroy(),this.select.destroy()}}return g})})(og);Ge(["click"]);const lg="CellvoyagerToOmeZarrInit",cg="object",dg={zarr_urls:{title:"Zarr Urls",type:"array",items:{type:"string"},description:"List of paths or urls to the individual OME-Zarr image to be processed. Not used by the converter task. (standard argument for Fractal tasks, managed by Fractal server)."},zarr_dir:{title:"Zarr Dir",type:"string",description:"path of the directory where the new OME-Zarrs will be created. (standard argument for Fractal tasks, managed by Fractal server)."},image_dirs:{title:"Image Dirs",type:"array",items:{type:"string"},description:"list of paths to the folders that contains the Cellvoyager image files. Each entry is a path to a folder that contains the image files themselves for a multiwell plate and the MeasurementData & MeasurementDetail metadata files."},allowed_channels:{title:"Allowed Channels",type:"array",items:{$ref:"#/definitions/OmeroChannel"},description:"A list of `OmeroChannel` s, where each channel must include the `wavelength_id` attribute and where the `wavelength_id` values must be unique across the list."},image_glob_patterns:{title:"Image Glob Patterns",type:"array",items:{type:"string"},description:'If specified, only parse images with filenames that match with all these patterns. Patterns must be defined as in https://docs.python.org/3/library/fnmatch.html, Example: `image_glob_pattern=["*_B03_*"]` => only process well B03 `image_glob_pattern=["*_C09_*", "*F016*", "*Z[0-5][0-9]C*"]` => only process well C09, field of view 16 and Z planes 0-59.'},num_levels:{title:"Num Levels",default:5,type:"integer",description:"Number of resolution-pyramid levels. If set to `5`, there will be the full-resolution level and 4 levels of downsampled images."},coarsening_xy:{title:"Coarsening Xy",default:2,type:"integer",description:"Linear coarsening factor between subsequent levels. If set to `2`, level 1 is 2x downsampled, level 2 is 4x downsampled etc."},image_extension:{title:"Image Extension",default:"tif",type:"string",description:'Filename extension of images (e.g. `"tif"` or `"png"`)'},metadata_table_file:{title:"Metadata Table File",type:"string",description:"If `None`, parse Yokogawa metadata from mrf/mlf files in the input_path folder; else, the full path to a csv file containing the parsed metadata table."},overwrite:{title:"Overwrite",default:!1,type:"boolean",description:"If `True`, overwrite the task output."}},ug=["zarr_urls","zarr_dir","image_dirs","allowed_channels"],fg=!1,hg={Window:{title:"Window",description:"Custom class for Omero-channel window, based on OME-NGFF v0.4.",type:"object",properties:{min:{title:"Min",type:"integer",description:"Do not change. It will be set to `0` by default."},max:{title:"Max",type:"integer",description:"Do not change. It will be set according to bit-depth of the images by default (e.g. 65535 for 16 bit images)."},start:{title:"Start",type:"integer",description:"Lower-bound rescaling value for visualization."},end:{title:"End",type:"integer",description:"Upper-bound rescaling value for visualization."}},required:["start","end"]},OmeroChannel:{title:"OmeroChannel",description:"Custom class for Omero channels, based on OME-NGFF v0.4.",type:"object",properties:{wavelength_id:{title:"Wavelength Id",type:"string",description:"Unique ID for the channel wavelength, e.g. `A01_C01`."},index:{title:"Index",type:"integer",description:"Do not change. For internal use only."},label:{title:"Label",type:"string",description:"Name of the channel."},window:{$ref:"#/definitions/Window",title:"Window",description:"Optional `Window` object to set default display settings for napari."},color:{title:"Color",type:"string",description:"Optional hex colormap to display the channel in napari (it must be of length 6, e.g. `00FFFF`)."},active:{title:"Active",default:!0,type:"boolean",description:"Should this channel be shown in the viewer?"},coefficient:{title:"Coefficient",default:1,type:"integer",description:"Do not change. Omero-channel attribute."},inverted:{title:"Inverted",default:!1,type:"boolean",description:"Do not change. Omero-channel attribute."}},required:["wavelength_id"]}},mg={title:lg,type:cg,properties:dg,required:ug,additionalProperties:fg,definitions:hg};function pg(e,t,r,s,a){O(t,""),O(r,"");try{O(s,JSON.parse(b(a)),!0)}catch{O(s,void 0),O(r,"Invalid JSON")}}function vg(e,t,r,s){var a;try{O(t,""),O(r,!1),(a=b(s))==null||a.validateArguments(),O(r,!0)}catch(o){O(t,sa(o),!0)}}function gg(e,t,r,s){O(t,"pydantic_v2"),O(r,JSON.stringify(mg,null,2),!0),s()}var yg=W('<div class="alert alert-danger"><pre> </pre></div>'),_g=W('<div class="alert alert-success">Data is valid</div>'),bg=W('<h1 class="fw-light">Sandbox page for JSON Schema</h1> <p>This is a test page for the JSON Schema component</p> <div class="row"><div class="col-lg-6 mt-3"><div class="row"><div class="col"><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="schemaVersionOptions" id="pydantic_v1"> <label class="form-check-label" for="pydantic_v1">pydantic_v1</label></div> <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="schemaVersionOptions" id="pydantic_v2"> <label class="form-check-label" for="pydantic_v2">pydantic_v2</label></div> <button class="btn btn-outline-primary float-end">Load example</button></div></div> <div class="row has-validation mt-2 mb-2"><div class="col"><label for="json-schema">JSON Schema</label> <textarea id="json-schema" rows="10"></textarea> <span class="invalid-feedback"> </span></div></div> <div class="row has-validation mt-3 mb-2"><div class="col"><label for="jdata">Initial JSON data</label> <textarea id="jdata" rows="10"></textarea> <span class="invalid-feedback"> </span></div></div> <div class="row mt-3 mb-2"><div class="col"><!> <!> <button class="btn btn-primary">Validate</button></div></div></div> <div class="col-lg-6"><!></div></div>',1);function $g(e,t){ke(t,!0);const r=[];let s=q(void 0),a=q(void 0),o=q(""),l=q(""),f=q(""),d=q(""),c=q("pydantic_v2"),p=q(void 0);function v(){if(O(E,""),O(f,""),b(o)===""){O(s,void 0);return}let ae;try{ae=JSON.parse(b(o))}catch{O(s,void 0),O(f,"Invalid JSON");return}try{new It(b(c)).validateSchema(ae)}catch{try{O(c,Ws(ae),!0)}catch(be){O(s,void 0),O(f,`Invalid JSON Schema: ${be.message}`);return}}O(s,ae,!0),g()}let E=q(""),$=q(!1);async function g(){await Or(),b(p)&&_(b(p).getArguments())}function _(ae){const me=Pt(ae),be=JSON.stringify(ns(me),null,2);be!==b(l)&&O(l,be,!0)}let n=Ft(()=>Zr(!1));var i=bg(),u=M(Ee(i),4),h=A(u),y=A(h),S=A(y),k=A(S),R=A(k);Ue(R),R.value=R.__value="pydantic_v1",R.__change=v,rt(2),I(k);var j=M(k,2),D=A(j);Ue(D),D.value=D.__value="pydantic_v2",D.__change=v,rt(2),I(j);var B=M(j,2);B.__click=[gg,c,o,v],I(S),I(y);var V=M(y,2),F=A(V),X=M(A(F),2);St(X);let H;X.__input=v;var Z=M(X,2),le=A(Z,!0);I(Z),I(F),I(V);var ie=M(V,2),Se=A(ie),Oe=M(A(Se),2);St(Oe);let L;Oe.__input=[pg,E,d,a,l];var N=M(Oe,2),T=A(N,!0);I(N),I(Se),I(ie);var P=M(ie,2),m=A(P),w=A(m);{var C=ae=>{var me=yg(),be=A(me),Ve=A(be,!0);I(be),I(me),oe(()=>fe(Ve,b(E))),G(ae,me)};te(w,ae=>{b(E)&&ae(C)})}var x=M(w,2);{var U=ae=>{var me=_g();G(ae,me)};te(x,ae=>{b($)&&ae(U)})}var Y=M(x,2);Y.__click=[vg,E,$,p],I(m),I(P),I(h);var Q=M(h,2),de=A(Q);{var we=ae=>{At(on(ae,{componentId:"json-schema-sandbox",onchange:_,get schema(){return b(s)},get schemaVersion(){return b(c)},get schemaData(){return b(a)},get propertiesToIgnore(){return b(n)}}),me=>O(p,me,!0),()=>b(p))};te(de,ae=>{b(s)&&!b(f)&&ae(we)})}I(Q),I(u),oe((ae,me)=>{H=ye(X,1,"form-control",null,H,ae),fe(le,b(f)),L=ye(Oe,1,"form-control",null,L,me),fe(T,b(d))},[()=>({"is-invalid":b(f)}),()=>({"is-invalid":b(d)})]),Ot(r,[],R,()=>b(c),ae=>O(c,ae)),Ot(r,[],D,()=>b(c),ae=>O(c,ae)),st(X,()=>b(o),ae=>O(o,ae)),st(Oe,()=>b(l),ae=>O(l,ae)),G(e,i),Ie()}Ge(["change","click","input"]);async function Eg(e,t,r,s,a,o){O(t,!1),b(r)||await s(),b(r)&&(a(),await Or(),o())}var wg=W('<div class="alert alert-danger"><pre> </pre></div>'),Sg=W('<div class="alert alert-success">Data is valid</div>'),Og=W('<li><!> <!> <small data-bs-toggle="collapse" aria-expanded="true" class="text-primary" role="button">more</small> <div class="accordion-collapse collapse" data-bs-parent="#validation-errors"><div class="accordion-body"><pre class="alert alert-warning mt-1"> </pre></div></div></li>'),Pg=W('<div class="alert alert-danger mt-3"><p>Following errors must be fixed before performing the update:</p> <ul id="validation-errors"></ul></div>'),Ng=W('<div class="alert alert-success mt-3">The arguments are valid</div>'),kg=W('<label class="form-label" for="fix-arguments">Fix the arguments:</label> <textarea id="fix-arguments" rows="20"></textarea>',1),Ig=W('<div class="invalid-feedback">Invalid JSON</div>'),Ag=W("<!> <!> <!>",1),Tg=W('<button type="button" class="btn btn-warning mt-3">Check</button>'),Cg=W("<!> <!> <!>",1),Rg=W('<button class="btn btn-primary mt-4 mb-2">Try version update</button> <!>',1),jg=W('<h1 class="fw-light">Sandbox page for task version update</h1> <p>This is a test page for the task version update</p> <div class="row"><div class="col-lg-6 mt-3"><h2>Old schema</h2> <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="oldSchemaVersionOptions" id="old_pydantic_v1"> <label class="form-check-label" for="old_pydantic_v1">pydantic_v1</label></div> <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="oldSchemaVersionOptions" id="old_pydantic_v2"> <label class="form-check-label" for="old_pydantic_v2">pydantic_v2</label></div></div> <div class="col-lg-6 mt-5"><button class="btn btn-outline-primary">Load example</button></div></div> <div class="row"><div class="col-lg-6 mt-3"><div class="row has-validation mb-2"><div class="col"><label for="jschema-old">JSON Schema</label> <textarea id="jschema-old" rows="10"></textarea> <span class="invalid-feedback"> </span></div></div> <div class="row has-validation mt-3 mb-2"><div class="col"><label for="jdata-old">Initial JSON data</label> <textarea id="jdata-old" rows="10"></textarea> <span class="invalid-feedback"> </span></div></div> <div class="row mt-3 mb-2"><div class="col"><!> <!> <button class="btn btn-primary">Validate</button></div></div></div> <div class="col-lg-6 mt-3"><!></div></div> <hr> <div class="row"><div class="col-lg-6 mt-2"><h2>New schema</h2> <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="newSchemaVersionOptions" id="new_pydantic_v1"> <label class="form-check-label" for="new_pydantic_v1">pydantic_v1</label></div> <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="newSchemaVersionOptions" id="new_pydantic_v2"> <label class="form-check-label" for="new_pydantic_v2">pydantic_v2</label></div></div></div> <div class="row mb-5"><div class="col-lg-6 mt-3"><div class="row has-validation mb-2"><div class="col"><label for="jschema-new">JSON Schema</label> <textarea id="jschema-new" rows="10"></textarea> <span class="invalid-feedback"> </span></div></div></div> <div class="col-lg-6"><!></div></div>',1);function Dg(e,t){ke(t,!0);const r=[],s=[];let a=q(void 0),o=q(void 0),l=q(""),f=q(""),d=q(""),c=q(""),p=q("pydantic_v2"),v=q(void 0),E=q(void 0),$=q("pydantic_v2"),g=q(""),_=q(""),n=q(void 0),i=q(void 0);async function u(){if(O(d,""),b(l)===""){O(a,void 0);return}try{O(a,JSON.parse(b(l)),!0),j()}catch{O(a,void 0),O(d,"Invalid JSON")}try{new It(b(p)).validateSchema(b(a))}catch{try{O(p,Ws(b(a)),!0)}catch(ce){O(a,void 0),O(d,`Invalid JSON Schema: ${ce.message}`);return}}}function h(){O(c,""),O(c,"");try{O(o,JSON.parse(b(f)),!0)}catch{O(o,void 0),O(c,"Invalid JSON")}}function y(){if(O(n,void 0),O(i,void 0),O(_,""),b(g)===""){O(E,void 0);return}try{O(E,JSON.parse(b(g)),!0)}catch{O(E,void 0),O(_,"Invalid JSON")}try{new It(b($)).validateSchema(b(E))}catch{try{O($,Ws(b(E)),!0)}catch(ce){O(E,void 0),O(_,`Invalid JSON Schema: ${ce.message}`);return}}}let S=q(void 0),k=q(!1);async function R(){var J;try{O(S,""),O(k,!1),O(o,JSON.parse(b(f)),!0),await Or(),(J=b(v))==null||J.validateArguments(),O(k,!0)}catch(ce){O(S,sa(ce),!0),O(n,void 0),O(i,void 0)}}async function j(){if(await Or(),!b(v))return;const J=Pt(b(v).getArguments()),ce=JSON.stringify(ns(J),null,2);ce!==b(f)&&O(f,ce,!0)}function D(){O(n,{id:1,args_parallel:Pt(b(o)),task_type:"parallel"},!0),O(i,{args_schema_parallel:b(E)},!0)}function B(){O(p,"pydantic_v2"),O($,"pydantic_v2");const J={title:"Test",type:"object",properties:{foo:{title:"foo",type:"string"}},required:["foo"]},ce=Pt(J);ce.properties.bar={title:"bar",type:"string"},ce.required.push("bar"),O(l,JSON.stringify(J,null,2),!0),O(f,JSON.stringify({foo:"something"},null,2),!0),O(g,JSON.stringify(ce,null,2),!0),u(),h(),y()}let V=q(!1),F=q(!1),X=q(""),H=q(!1),Z=q(""),le=q(!0),ie=q(null);function Se(){O(Z,""),O(ie,null)}function Oe(){O(Z,b(X),!0),L()}function L(){if(!b(Z))return;O(le,!0);let J;try{J=JSON.parse(b(Z))}catch{O(le,!1);return}P(J)}function N(){const J=b(n).args_parallel||{};O(X,JSON.stringify(J,null,2),!0),P(J)}function T(){b(Z)!==""?JSON.parse(b(Z)):b(n).args_parallel}function P(J){const ce=b(i).args_schema_parallel,Je=new It(b($),!0);"properties"in ce&&Ri(ce,Zr(!1));const lr=Pt(ce);if(!Je.loadSchema(lr))throw new Error("Invalid JSON schema");Je.isValid(J)?O(ie,null):(O(Z,JSON.stringify(J,null,2),!0),O(H,!0),O(ie,Je.getErrors(),!0))}function m(){var J;return(((J=b(ie))==null?void 0:J.length)||0)>0}Zt(()=>{O(V,b(ie)===null||b(ie).length===0,!0),O(F,b(Z)!==b(X))});let w=Ft(()=>Zr(!1));var C=jg(),x=M(Ee(C),4),U=A(x),Y=M(A(U),2),Q=A(Y);Ue(Q),Q.value=Q.__value="pydantic_v1",Q.__change=u,rt(2),I(Y);var de=M(Y,2),we=A(de);Ue(we),we.value=we.__value="pydantic_v2",we.__change=u,rt(2),I(de),I(U);var ae=M(U,2),me=A(ae);me.__click=B,I(ae),I(x);var be=M(x,2),Ve=A(be),De=A(Ve),it=A(De),Fe=M(A(it),2);St(Fe);let pt;Fe.__input=u;var ot=M(Fe,2),vt=A(ot,!0);I(ot),I(it),I(De);var Ye=M(De,2),gt=A(Ye),xe=M(A(gt),2);St(xe);let Qe;xe.__input=h;var yt=M(xe,2),Tt=A(yt,!0);I(yt),I(gt),I(Ye);var Ct=M(Ye,2),pe=A(Ct),et=A(pe);{var Cr=J=>{var ce=wg(),Je=A(ce),lr=A(Je,!0);I(Je),I(ce),oe(()=>fe(lr,b(S))),G(J,ce)};te(et,J=>{b(S)&&J(Cr)})}var Rr=M(et,2);{var Fo=J=>{var ce=Sg();G(J,ce)};te(Rr,J=>{b(k)&&J(Fo)})}var xo=M(Rr,2);xo.__click=R,I(pe),I(Ct),I(Ve);var ln=M(Ve,2),zo=A(ln);{var qo=J=>{At(on(J,{componentId:"json-schema-version-update-sandbox",get schema(){return b(a)},get schemaData(){return b(o)},get schemaVersion(){return b(p)},get propertiesToIgnore(){return b(w)},$$events:{change:j}}),ce=>O(v,ce,!0),()=>b(v))};te(zo,J=>{b(a)&&J(qo)})}I(ln),I(be);var _s=M(be,4),cn=A(_s),bs=M(A(cn),2),nr=A(bs);Ue(nr),nr.value=nr.__value="pydantic_v1",nr.__change=y,rt(2),I(bs);var dn=M(bs,2),ir=A(dn);Ue(ir),ir.value=ir.__value="pydantic_v2",ir.__change=y,rt(2),I(dn),I(cn),I(_s);var un=M(_s,2),$s=A(un),fn=A($s),hn=A(fn),or=M(A(hn),2);St(or);let mn;or.__input=y;var pn=M(or,2),Uo=A(pn,!0);I(pn),I(hn),I(fn),I($s);var vn=M($s,2),Ho=A(vn);{var Go=J=>{var ce=Rg(),Je=Ee(ce);Je.__click=[Eg,H,k,R,D,N];var lr=M(Je,2);{var gn=jr=>{var yn=Cg(),_n=Ee(yn);{var Jo=Ke=>{var lt=Pg(),cr=M(A(lt),2);Qt(cr,21,()=>b(ie),Nr,(Es,ct,dr)=>{var ur=Og(),Dr=A(ur);{var Le=ze=>{var _t=gr();oe(()=>fe(_t,`${b(ct).instancePath??""}:`)),G(ze,_t)};te(Dr,ze=>{b(ct).instancePath&&ze(Le)})}var dt=M(Dr,2);{var fr=ze=>{var _t=gr();oe(()=>fe(_t,`must NOT have additional property '${b(ct).params.additionalProperty??""}'`)),G(ze,_t)},Lr=ze=>{var _t=gr();oe(()=>fe(_t,b(ct).message)),G(ze,_t)};te(dt,ze=>{b(ct).keyword==="additionalProperties"?ze(fr):ze(Lr,!1)})}var Rt=M(dt,2);ve(Rt,"data-bs-target",`#collapse-${dr}`),ve(Rt,"aria-controls",`collapse-${dr}`);var ws=M(Rt,2);ve(ws,"id",`collapse-${dr}`);var $n=A(ws),En=A($n),Wo=A(En,!0);I(En),I($n),I(ws),I(ur),oe(ze=>fe(Wo,ze),[()=>JSON.stringify(b(ct),null,2)]),G(Es,ur)}),I(cr),I(lt),G(Ke,lt)};te(_n,Ke=>{b(ie)&&Ke(Jo)})}var bn=M(_n,2);{var Ko=Ke=>{var lt=Ag(),cr=Ee(lt);{var Es=Le=>{var dt=Ng();G(Le,dt)};te(cr,Le=>{b(ie)||Le(Es)})}var ct=M(cr,2);{var dr=Le=>{var dt=kg(),fr=M(Ee(dt),2);St(fr);let Lr;oe(Rt=>Lr=ye(fr,1,"form-control",null,Lr,Rt),[()=>({"is-invalid":!b(le)})]),st(fr,()=>b(Z),Rt=>O(Z,Rt)),G(Le,dt)};te(ct,Le=>{b(H)&&Le(dr)})}var ur=M(ct,2);{var Dr=Le=>{var dt=Ig();G(Le,dt)};te(ur,Le=>{b(le)||Le(Dr)})}G(Ke,lt)};te(bn,Ke=>{b(X)&&Ke(Ko)})}var Bo=M(bn,2);{var Xo=Ke=>{var lt=Tg();lt.__click=L,G(Ke,lt)};te(Bo,Ke=>{b(H)&&Ke(Xo)})}G(jr,yn)};te(lr,jr=>{b(n)&&b(i)&&jr(gn)})}G(J,ce)};te(Ho,J=>{b(E)&&J(Go)})}return I(vn),I(un),oe((J,ce,Je)=>{pt=ye(Fe,1,"form-control",null,pt,J),fe(vt,b(d)),Qe=ye(xe,1,"form-control",null,Qe,ce),fe(Tt,b(c)),mn=ye(or,1,"form-control",null,mn,Je),fe(Uo,b(_))},[()=>({"is-invalid":b(d)}),()=>({"is-invalid":b(c)}),()=>({"is-invalid":b(_)})]),Ot(r,[],Q,()=>b(p),J=>O(p,J)),Ot(r,[],we,()=>b(p),J=>O(p,J)),st(Fe,()=>b(l),J=>O(l,J)),st(xe,()=>b(f),J=>O(f,J)),Ot(s,[],nr,()=>b($),J=>O($,J)),Ot(s,[],ir,()=>b($),J=>O($,J)),st(or,()=>b(g),J=>O(g,J)),G(e,C),Ie({reset:Se,cancel:Oe,check:L,checkArgumentsWithNewSchema:N,getNewArgs:T,hasValidationErrors:m})}Ge(["change","click","input"]);const Lg="ManifestV2",Mg=`Packages containing tasks are required to include a special file
\`__FRACTAL_MANIFEST__.json\` in order to be discovered and used by Fractal.

This model class and the model classes it depends on provide the base
schema to read, write and validate manifests.

Attributes:
    manifest_version:
        A version string that provides indication for compatibility between
        manifests as the schema evolves. This is for instance used by
        Fractal to determine which subclass of the present base class needs
        be used to read and validate the input.
    task_list : list[TaskManifestType]
        The list of tasks, represented as specified by subclasses of the
        _TaskManifestBase (a.k.a. TaskManifestType)
    has_args_schemas:
        \`True\` if the manifest incldues JSON Schemas for the arguments of
        each task.
    args_schema_version:
        Label of how \`args_schema\`s were generated (e.g. \`pydantic_v2\`).`,Vg="object",Fg={manifest_version:{title:"Manifest Version",type:"string"},task_list:{title:"Task List",type:"array",items:{$ref:"#/definitions/TaskManifestV2"}},has_args_schemas:{title:"Has Args Schemas",default:!1,type:"boolean"},args_schema_version:{title:"Args Schema Version",type:"string"}},xg=["manifest_version","task_list"],zg={TaskManifestV2:{title:"TaskManifestV2",description:`Represents a task within a V2 manifest.

Attributes:
    name:
        The task name
    executable:
        Path to the executable relative to the package root

        Note: by package root we mean "as it will be installed". If a
        package \`Pkg\` installs in the folder \`pkg\` the executable
        \`pkg/executable.py\`, this attribute must contain only
        \`executable.py\`.
    input_type:
        The input type accepted by the task
    output_type:
        The output type returned by the task
    meta:
        Additional information about the package, such as hash of the
        executable, specific runtime requirements (e.g., need_gpu=True),
        etc.
    args_schema:
        JSON Schema for task arguments
    docs_info:
        Additional information about the Task, coming from the docstring.
    docs_link:
        Link to Task docs.`,type:"object",properties:{name:{title:"Name",type:"string"},executable_non_parallel:{title:"Executable Non Parallel",type:"string"},executable_parallel:{title:"Executable Parallel",type:"string"},input_types:{title:"Input Types",type:"object",additionalProperties:{type:"boolean"}},output_types:{title:"Output Types",type:"object",additionalProperties:{type:"boolean"}},meta_non_parallel:{title:"Meta Non Parallel",type:"object"},meta_parallel:{title:"Meta Parallel",type:"object"},args_schema_non_parallel:{title:"Args Schema Non Parallel",type:"object"},args_schema_parallel:{title:"Args Schema Parallel",type:"object"},docs_info:{title:"Docs Info",type:"string"},docs_link:{title:"Docs Link",minLength:1,maxLength:2083,format:"uri",type:"string"}},required:["name"]}},qg={title:Lg,description:Mg,type:Vg,properties:Fg,required:xg,definitions:zg};async function Ug(e,t,r,s,a){if(O(t,""),!b(r)||b(r).length===0){s("change",{value:null});return}const o=b(r)[0];await a(o)}function Hg(e,t,r,s,a){O(t,""),O(r,null),b(s)&&(b(s).value=""),a("change",{value:null})}var Gg=W('<button class="btn btn-outline-secondary">Clear</button>'),Jg=W('<div role="region"><div class="m-1"><div class="input-group has-validation"><label class="input-group-text"> </label> <input type="file"> <!> <span class="invalid-feedback"> </span></div></div> <p class="text-center mt-1 mb-1"><i class="bi bi-file-earmark-arrow-up"></i> or drag file here</p></div>');function Kg(e,t){ke(t,!0);const r=wl();let s=q(null),a=q(void 0),o=q("");async function l(R){R.preventDefault(),O(d,!1),R.dataTransfer&&R.dataTransfer.files.length>0&&(O(s,R.dataTransfer.files,!0),b(a).files=b(s),await f(b(s)[0]))}async function f(R){O(o,"");let j=await R.text();try{const D=t.validateFile(j);r("change",{value:D})}catch(D){O(o,D.message,!0),r("change",{value:null})}}let d=q(!1);function c(R){R.preventDefault(),O(d,!0)}function p(){O(d,!1)}var v=Jg();let E;var $=A(v),g=A($),_=A(g),n=A(_,!0);I(_);var i=M(_,2);let u;i.__change=[Ug,o,s,r,f],At(i,R=>O(a,R),()=>b(a));var h=M(i,2);{var y=R=>{var j=Gg();j.__click=[Hg,o,s,a,r],G(R,j)};te(h,R=>{b(s)&&b(s).length>0&&R(y)})}var S=M(h,2),k=A(S,!0);I(S),I(g),I($),rt(2),I(v),oe((R,j)=>{E=ye(v,1,"dropZone bg-light svelte-1n1vpyg",null,E,R),ve(_,"for",t.id),fe(n,t.description),u=ye(i,1,"form-control",null,u,j),ve(i,"accept",t.accept),ve(i,"name",t.id),ve(i,"id",t.id),fe(k,b(o))},[()=>({dragOver:b(d)}),()=>({"is-invalid":b(o)})]),Ns("drop",v,l),Ns("dragover",v,c),Ns("dragleave",v,p),Ll(i,()=>b(s),R=>O(s,R)),G(e,v),Ie()}Ge(["change","click"]);function Bg(e,t,r,s){var a;try{O(t,""),O(r,!1),(a=b(s))==null||a.validateArguments(),O(r,!0)}catch(o){O(t,sa(o),!0)}}function Xg(e,t,r,s,a){O(t,""),O(r,"");try{O(s,JSON.parse(b(a)),!0)}catch{O(s,void 0),O(r,"Invalid JSON")}}var Wg=(e,t)=>t(),Zg=W("<option> </option>"),Yg=W('<div class="input-group"><label for="selectedTask" class="input-group-text">Task</label> <select class="form-select" name="selectedTask" id="selectedTask"><option>Select...</option><!></select></div>'),Qg=(e,t)=>t("non_parallel"),ey=(e,t)=>t("parallel"),ty=W('<div class="alert alert-danger"><pre> </pre></div>'),ry=W('<div class="alert alert-success">Data is valid</div>'),sy=W('<div class="row mt-3"><div class="col-md-6"><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="schemaTypeSelector" id="schemaNonParallelSelector"> <label class="form-check-label" for="schemaNonParallelSelector">non parallel</label></div> <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="schemaTypeSelector" id="schemaParallelSelector"> <label class="form-check-label" for="schemaParallelSelector">parallel</label></div></div></div> <div class="row mt-2 mb-3"><div class="col-lg-6"><div class="row"><div class="col"><label for="jschema">JSON Schema</label> <textarea id="jschema" class="form-control" rows="10" disabled></textarea></div></div> <div class="row has-validation mt-3 mb-2"><div class="col"><label for="jdata">Initial JSON data</label> <textarea id="jdata" rows="10"></textarea> <span class="invalid-feedback"> </span></div></div> <div class="row mt-3 mb-2"><div class="col"><!> <!> <button class="btn btn-primary">Validate</button></div></div></div> <div class="col-lg-6"><!></div></div>',1),ay=W('<h1 class="fw-light">Sandbox page for task package manifest</h1> <p>This is a test page for the JSON Schema form of a whole task package manifest</p> <div class="row"><div class="col-lg-7"><!> <div class="form-text">An entire task package manifest</div></div> <div class="col-lg-5"><!></div></div> <!>',1);function ny(e,t){ke(t,!0);const r=[];let s=null,a=q(ss([])),o=q(""),l=q(void 0),f=q("pydantic_v2"),d=q("non_parallel"),c=q(void 0),p=q(void 0),v=q(""),E=q(""),$=q(!1),g=q(!1),_=q(""),n=q(!1);function i(){s=null,O(n,!1),O(_,""),O(a,[],!0),O(o,""),O(l,null),O(c,null),O(E,"")}let u=q(void 0);function h(T){let P;try{P=JSON.parse(T)}catch{throw new Error("File doesn't contain valid JSON")}if(P.args_schema_version!=="pydantic_v2"&&P.args_schema_version!=="pydantic_v1")throw new Error("Unsupported manifest args schema version");if(O(f,P.args_schema_version,!0),S(P)){if(P.manifest_version!=="2")throw new Error("Unsupported manifest version")}else throw new Error("Invalid manifest format");return P}function y({detail:T}){T.value===null?i():k(T.value)}function S(T){const P=new It(b(f));return P.loadSchema(qg),P.isValid(T)}function k(T){s=T,O(a,s.task_list.map(P=>P.name),!0)}async function R(T=void 0){if(O(E,""),O(_,""),O(n,!1),!b(o)){O(l,null),O(c,null);return}O(c,s.task_list.filter(P=>P.name===b(o))[0],!0),O($,j(b(c).args_schema_non_parallel),!0),O(g,j(b(c).args_schema_parallel),!0),T?O(d,T,!0):b($)?O(d,"non_parallel"):O(d,"parallel"),b(d)==="non_parallel"?O(l,b(c).args_schema_non_parallel,!0):O(l,b(c).args_schema_parallel,!0),await D()}function j(T){if(!T)return!1;const P=Ci(T,b(F));return Object.keys(P.properties).length>0}async function D(){await Or(),b(u)&&V(b(u).getArguments())}function B({detail:T}){V(T.value)}function V(T){const P=Pt(T),m=JSON.stringify(ns(P),null,2);m!==b(v)&&O(v,m,!0)}let F=Ft(()=>Zr(!1));var X=ay(),H=M(Ee(X),4),Z=A(H),le=A(Z);Kg(le,{description:"Upload manifest file",accept:"application/json",id:"manifestFileUpload",validateFile:h,$$events:{change:y}}),rt(2),I(Z);var ie=M(Z,2),Se=A(ie);{var Oe=T=>{var P=Yg(),m=M(A(P),2);m.__change=[Wg,R];var w=A(m);w.value=w.__value="";var C=M(w);Qt(C,17,()=>b(a),Nr,(x,U)=>{var Y=Zg(),Q={},de=A(Y,!0);I(Y),oe(()=>{Q!==(Q=b(U))&&(Y.value=(Y.__value=b(U))??""),fe(de,b(U))}),G(x,Y)}),I(m),I(P),Ni(m,()=>b(o),x=>O(o,x)),G(T,P)};te(Se,T=>{b(a).length>0&&T(Oe)})}I(ie),I(H);var L=M(H,2);{var N=T=>{var P=sy(),m=Ee(P),w=A(m),C=A(w),x=A(C);Ue(x),x.value=x.__value="non_parallel",x.__change=[Qg,R],rt(2),I(C);var U=M(C,2),Y=A(U);Ue(Y),Y.value=Y.__value="parallel",Y.__change=[ey,R],rt(2),I(U),I(w),I(m);var Q=M(m,2),de=A(Q),we=A(de),ae=A(we),me=M(A(ae),2);St(me),I(ae),I(we);var be=M(we,2),Ve=A(be),De=M(A(Ve),2);St(De);let it;De.__input=[Xg,_,E,p,v];var Fe=M(De,2),pt=A(Fe,!0);I(Fe),I(Ve),I(be);var ot=M(be,2),vt=A(ot),Ye=A(vt);{var gt=pe=>{var et=ty(),Cr=A(et),Rr=A(Cr,!0);I(Cr),I(et),oe(()=>fe(Rr,b(_))),G(pe,et)};te(Ye,pe=>{b(_)&&pe(gt)})}var xe=M(Ye,2);{var Qe=pe=>{var et=ry();G(pe,et)};te(xe,pe=>{b(n)&&pe(Qe)})}var yt=M(xe,2);yt.__click=[Bg,_,n,u],I(vt),I(ot),I(de);var Tt=M(de,2),Ct=A(Tt);At(on(Ct,{componentId:"json-schema-task-manifest-sandbox",get schema(){return b(l)},get schemaVersion(){return b(f)},get schemaData(){return b(p)},get propertiesToIgnore(){return b(F)},$$events:{change:B}}),pe=>O(u,pe,!0),()=>b(u)),I(Tt),I(Q),oe((pe,et)=>{x.disabled=!b($),Y.disabled=!b(g),Rl(me,pe),it=ye(De,1,"form-control",null,it,et),fe(pt,b(E))},[()=>JSON.stringify(b(l),null,2),()=>({"is-invalid":b(E)})]),Ot(r,[],x,()=>b(d),pe=>O(d,pe)),Ot(r,[],Y,()=>b(d),pe=>O(d,pe)),st(De,()=>b(v),pe=>O(v,pe)),G(T,P)};te(L,T=>{b(l)&&b(c)&&T(N)})}G(e,X),Ie()}Ge(["change","input","click"]);var iy=(e,t)=>O(t,"jschema"),oy=(e,t)=>O(t,"version-update"),ly=(e,t)=>O(t,"task-manifest"),cy=W('<nav class="navbar navbar-expand-lg bg-light mb-3 border-bottom"><div class="container"><a class="navbar-brand" href="https://fractal-analytics-platform.github.io/fractal-web/">Documentation</a> <ul class="navbar-nav me-auto"><li class="nav-item"><a href="#jschema">JSON Schema</a></li> <li class="nav-item"><a href="#version-update">Version update</a></li> <li class="nav-item"><a href="#task-manifest">Task manifest</a></li></ul></div></nav> <div class="container"><!></div>',1);function Sy(e,t){ke(t,!0);const r=["jschema","version-update","task-manifest"];let s=q("jschema");Yt(()=>{for(const S of r)if(`#${S}`===location.hash){O(s,S,!0);break}});var a=cy(),o=Ee(a),l=A(o),f=M(A(l),2),d=A(f),c=A(d);let p;c.__click=[iy,s],I(d);var v=M(d,2),E=A(v);let $;E.__click=[oy,s],I(v);var g=M(v,2),_=A(g);let n;_.__click=[ly,s],I(g),I(f),I(l),I(o);var i=M(o,2),u=A(i);{var h=S=>{$g(S,{})},y=(S,k)=>{{var R=D=>{Dg(D,{})},j=(D,B)=>{{var V=F=>{ny(F,{})};te(D,F=>{b(s)==="task-manifest"&&F(V)},B)}};te(S,D=>{b(s)==="version-update"?D(R):D(j,!1)},k)}};te(u,S=>{b(s)==="jschema"?S(h):S(y,!1)})}I(i),oe((S,k,R)=>{p=ye(c,1,"nav-link",null,p,S),$=ye(E,1,"nav-link",null,$,k),n=ye(_,1,"nav-link",null,n,R)},[()=>({active:b(s)==="jschema"}),()=>({active:b(s)==="version-update"}),()=>({active:b(s)==="task-manifest"})]),G(e,a),Ie()}Ge(["click"]);export{Sy as component};
