var io=Object.defineProperty;var oo=(t,e,r)=>e in t?io(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var rn=(t,e,r)=>oo(t,typeof e!="symbol"?e+"":e,r);import{t as H,a as z,d as dr,c as Fe}from"../chunks/CMr_y-LQ.js";import{i as Ma,ao as Da,ap as lo,h as Ae,j as Ra,aq as xa,ar as co,s as uo,b as La,q as Fa,a as An,c as Nt,U as fo,B as E,A as ho,k as mo,r as Fs,m as nn,o as sn,af as po,p as Va,ai as za,G as vo,as as Vs,at as an,T as zs,au as Nn,av as qs,aw as go,a6 as yo,ax as _o,d as bo,ay as Tn,az as $o,ad as wo,Q as Eo,O as So,aA as qa,w as gn,aB as ko,aC as Po,aD as Oo,aE as Co,aF as Io,v as jn,aG as Ua,ab as Ao,u as No,t as Ha,a0 as $e,al as Z,a3 as M,a4 as j,a2 as we,F as D,a1 as Y,f as fe,a5 as q,an as ut,D as Se,e as qt,n as To,aH as jt,am as Mr}from"../chunks/B2-12AMX.js";import{a as jo,l as Ur,s as ce,d as Re,r as Dr,e as on}from"../chunks/DLt-j_R3.js";import{p as le,i as W,b as $t}from"../chunks/BmiWJJ3L.js";import{o as wt,c as Mo}from"../chunks/_7XZiGKy.js";import{w as Lt,g as ct}from"../chunks/gN7bIyJm.js";import{s as Do}from"../chunks/C7kNLOsI.js";const Ro=[];function Mt(t,e=!1){return Or(t,new Map,"",Ro)}function Or(t,e,r,n,s=null){if(typeof t=="object"&&t!==null){var i=e.get(t);if(i!==void 0)return i;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Ma(t)){var l=Array(t.length);e.set(t,l),s!==null&&e.set(s,l);for(var d=0;d<t.length;d+=1){var f=t[d];d in t&&(l[d]=Or(f,e,r,n))}return l}if(Da(t)===lo){l={},e.set(t,l),s!==null&&e.set(s,l);for(var u in t)l[u]=Or(t[u],e,r,n);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return Or(t.toJSON(),e,r,n,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}function nr(t,e,r){Ae&&Ra();var n=t,s=fo,i,l=xa()?co:uo;La(()=>{l(s,s=e())&&(i&&Fa(i),i=An(()=>r(n)))}),Ae&&(n=Nt)}function je(t,e){return e}function xo(t,e,r,n){for(var s=[],i=e.length,l=0;l<i;l++)go(e[l].e,s,!0);var d=i>0&&s.length===0&&r!==null;if(d){var f=r.parentNode;yo(f),f.append(r),n.clear(),ot(t,e[0].prev,e[i-1].next)}_o(s,()=>{for(var u=0;u<i;u++){var p=e[u];d||(n.delete(p.k),ot(t,p.prev,p.next)),bo(p.e,!d)}})}function Ne(t,e,r,n,s,i=null){var l=t,d={flags:e,items:new Map,first:null},f=(e&qa)!==0;if(f){var u=t;l=Ae?nn(Eo(u)):u.appendChild(So())}Ae&&Ra();var p=null,v=!1,b=ho(()=>{var _=r();return Ma(_)?_:_==null?[]:za(_)});La(()=>{var _=E(b),$=_.length;if(v&&$===0)return;v=$===0;let y=!1;if(Ae){var a=l.data===mo;a!==($===0)&&(l=Fs(),nn(l),sn(!1),y=!0)}if(Ae){for(var o=null,c,h=0;h<$;h++){if(Nt.nodeType===8&&Nt.data===po){l=Nt,y=!0,sn(!1);break}var g=_[h],w=n(g,h);c=Ka(Nt,d,o,null,g,w,h,s,e,r),d.items.set(w,c),o=c}$>0&&nn(Fs())}Ae||Lo(_,d,l,s,e,n,r),i!==null&&($===0?p?Va(p):p=An(()=>i(l)):p!==null&&Fa(p,()=>{p=null})),y&&sn(!0),E(b)}),Ae&&(l=Nt)}function Lo(t,e,r,n,s,i,l){var L,J,Q,ee;var d=(s&ko)!==0,f=(s&(Tn|Nn))!==0,u=t.length,p=e.items,v=e.first,b=v,_,$=null,y,a=[],o=[],c,h,g,w;if(d)for(w=0;w<u;w+=1)c=t[w],h=i(c,w),g=p.get(h),g!==void 0&&((L=g.a)==null||L.measure(),(y??(y=new Set)).add(g));for(w=0;w<u;w+=1){if(c=t[w],h=i(c,w),g=p.get(h),g===void 0){var O=b?b.e.nodes_start:r;$=Ka(O,e,$,$===null?e.first:$.next,c,h,w,n,s,l),p.set(h,$),a=[],o=[],b=$.next;continue}if(f&&Fo(g,c,w,s),g.e.f&an&&(Va(g.e),d&&((J=g.a)==null||J.unfix(),(y??(y=new Set)).delete(g))),g!==b){if(_!==void 0&&_.has(g)){if(a.length<o.length){var C=o[0],T;$=C.prev;var F=a[0],U=a[a.length-1];for(T=0;T<a.length;T+=1)Us(a[T],C,r);for(T=0;T<o.length;T+=1)_.delete(o[T]);ot(e,F.prev,U.next),ot(e,$,F),ot(e,U,C),b=C,$=U,w-=1,a=[],o=[]}else _.delete(g),Us(g,b,r),ot(e,g.prev,g.next),ot(e,g,$===null?e.first:$.next),ot(e,$,g),$=g;continue}for(a=[],o=[];b!==null&&b.k!==h;)b.e.f&an||(_??(_=new Set)).add(b),o.push(b),b=b.next;if(b===null)continue;g=b}a.push(g),$=g,b=g.next}if(b!==null||_!==void 0){for(var P=_===void 0?[]:za(_);b!==null;)b.e.f&an||P.push(b),b=b.next;var A=P.length;if(A>0){var x=s&qa&&u===0?r:null;if(d){for(w=0;w<A;w+=1)(Q=P[w].a)==null||Q.measure();for(w=0;w<A;w+=1)(ee=P[w].a)==null||ee.fix()}xo(e,P,x,p)}}d&&gn(()=>{var de;if(y!==void 0)for(g of y)(de=g.a)==null||de.apply()}),zs.first=e.first&&e.first.e,zs.last=$&&$.e}function Fo(t,e,r,n){n&Tn&&qs(t.v,e),n&Nn?qs(t.i,r):t.i=r}function Ka(t,e,r,n,s,i,l,d,f,u){var p=(f&Tn)!==0,v=(f&$o)===0,b=p?v?vo(s):Vs(s):s,_=f&Nn?Vs(l):l,$={i:_,v:b,k:i,a:null,e:null,prev:r,next:n};try{return $.e=An(()=>d(t,b,_,u),Ae),$.e.prev=r&&r.e,$.e.next=n&&n.e,r===null?e.first=$:(r.next=$,r.e.next=$.e),n!==null&&(n.prev=$,n.e.prev=$.e),$}finally{}}function Us(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,i=t.e.nodes_start;i!==n;){var l=wo(i);s.before(i),i=l}}function ot(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Ba(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=Ba(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Vo(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=Ba(t))&&(n&&(n+=" "),n+=e);return n}function Hs(t){return typeof t=="object"?Vo(t):t??""}const Ks=[...` 	
\r\fÂ \v\uFEFF`];function zo(t,e,r){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var i=s.length,l=0;(l=n.indexOf(s,l))>=0;){var d=l+i;(l===0||Ks.includes(n[l-1]))&&(d===n.length||Ks.includes(n[d]))?n=(l===0?"":n.substring(0,l))+n.substring(d+1):l=d}}return n===""?null:n}function me(t,e,r,n,s,i){var l=t.__className;if(Ae||l!==r||l===void 0){var d=zo(r,n,i);(!Ae||d!==t.getAttribute("class"))&&(d==null?t.removeAttribute("class"):t.className=d),t.__className=r}else if(i&&s!==i)for(var f in i){var u=!!i[f];(s==null||u!==!!s[f])&&t.classList.toggle(f,u)}return i}const qo=Symbol("is custom element"),Uo=Symbol("is html");function qe(t){if(Ae){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var n=t.value;he(t,"value",null),t.value=n}if(t.hasAttribute("checked")){var s=t.checked;he(t,"checked",null),t.checked=s}}};t.__on_r=r,Po(r),jo()}}function Ho(t,e){var r=Mn(t);r.value===(r.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Ko(t,e){var r=Mn(t);r.checked!==(r.checked=e??void 0)&&(t.checked=e)}function he(t,e,r,n){var s=Mn(t);Ae&&(s[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||s[e]!==(s[e]=r)&&(e==="loading"&&(t[Oo]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Bo(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Mn(t){return t.__attributes??(t.__attributes={[qo]:t.nodeName.includes("-"),[Uo]:t.namespaceURI===Co})}var Bs=new Map;function Bo(t){var e=Bs.get(t.nodeName);if(e)return e;Bs.set(t.nodeName,e=[]);for(var r,n=t,s=Element.prototype;s!==n;){r=Io(n);for(var i in r)r[i].set&&e.push(i);n=Da(n)}return e}function Xe(t,e,r=e){var n=xa();Ur(t,"input",s=>{var i=s?t.defaultValue:t.value;if(i=cn(t)?dn(i):i,r(i),n&&i!==(i=e())){var l=t.selectionStart,d=t.selectionEnd;t.value=i??"",d!==null&&(t.selectionStart=l,t.selectionEnd=Math.min(d,t.value.length))}}),(Ae&&t.defaultValue!==t.value||No(e)==null&&t.value)&&r(cn(t)?dn(t.value):t.value),jn(()=>{var s=e();cn(t)&&s===dn(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}const ln=new Set;function Rr(t,e,r,n,s=n){var i=r.getAttribute("type")==="checkbox",l=t;let d=!1;if(e!==null)for(var f of e)l=l[f]??(l[f]=[]);l.push(r),Ur(r,"change",()=>{var u=r.__value;i&&(u=Js(l,u,r.checked)),s(u)},()=>s(i?[]:null)),jn(()=>{var u=n();if(Ae&&r.defaultChecked!==r.checked){d=!0;return}i?(u=u||[],r.checked=u.includes(r.__value)):r.checked=Ua(r.__value,u)}),Ao(()=>{var u=l.indexOf(r);u!==-1&&l.splice(u,1)}),ln.has(l)||(ln.add(l),gn(()=>{l.sort((u,p)=>u.compareDocumentPosition(p)===4?-1:1),ln.delete(l)})),gn(()=>{if(d){var u;if(i)u=Js(l,u,r.checked);else{var p=l.find(v=>v.checked);u=p==null?void 0:p.__value}s(u)}})}function Js(t,e,r){for(var n=new Set,s=0;s<t.length;s+=1)t[s].checked&&n.add(t[s].__value);return r||n.delete(e),Array.from(n)}function cn(t){var e=t.type;return e==="number"||e==="range"}function dn(t){return t===""?null:+t}function Jo(t,e,r=e){Ur(t,"change",()=>{r(t.files)}),Ae&&t.files&&r(t.files),jn(()=>{t.files=e()})}function Ja(t,e,r){if(t.multiple)return Zo(t,e);for(var n of t.options){var s=sr(n);if(Ua(s,e)){n.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Go(t,e){Ha(()=>{var r=new MutationObserver(()=>{var n=t.__value;Ja(t,n)});return r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function Ft(t,e,r=e){var n=!0;Ur(t,"change",s=>{var i=s?"[selected]":":checked",l;if(t.multiple)l=[].map.call(t.querySelectorAll(i),sr);else{var d=t.querySelector(i)??t.querySelector("option:not([disabled])");l=d&&sr(d)}r(l)}),Ha(()=>{var s=e();if(Ja(t,s,n),n&&s===void 0){var i=t.querySelector(":checked");i!==null&&(s=sr(i),r(s))}t.__value=s,n=!1}),Go(t)}function Zo(t,e){for(var r of t.options)r.selected=~e.indexOf(sr(r))}function sr(t){return"__value"in t?t.__value:t.value}function mr(t){if(t!==void 0)return JSON.parse(JSON.stringify(t))}function xr(t){return t===void 0?null:t}function Vt(t){return typeof t=="object"&&t!==null&&t!==void 0}function Dn(t){const e=Ga(t);return Za(e)}function Ga(t){return Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=t[e].filter(r=>r!==null&&r!=="")),t[e]&&typeof t[e]=="object"?Ga(t[e]):(t[e]===null||t[e]==="")&&delete t[e]}),t}function Za(t){return Object.keys(t).forEach(e=>{t[e]&&typeof t[e]=="object"&&(Za(t[e]),Object.keys(t[e]).length===0&&delete t[e])}),t}function Wo(t){return"minimum"in t&&t.minimum!==void 0?Number(t.minimum):"exclusiveMinimum"in t&&t.exclusiveMinimum!==void 0?Number(t.exclusiveMinimum)+1:null}function Xo(t){return"maximum"in t&&t.maximum!==void 0?Number(t.maximum):"exclusiveMaximum"in t&&t.exclusiveMaximum!==void 0?Number(t.exclusiveMaximum)-1:null}function Wa(t){return"minItems"in t&&typeof t.minItems=="number"&&"maxItems"in t&&typeof t.maxItems=="number"&&t.minItems===t.maxItems}function Xa(t,e){const r=t.properties||{};if(t.additionalProperties)for(const n of Object.keys(e))Object.keys(r).includes(n)||(r[n]=t.additionalProperties);return r}function Yo(t,e){const r=t.properties||{};return!Object.keys(r).includes(e)}function Ya(t){return t?["input_paths","output_path","metadata","component"]:["zarr_url","zarr_urls","init_args","zarr_dir"]}function Qa(t){return"mapping"in t&&typeof t.mapping=="object"&&"propertyName"in t&&typeof t.propertyName=="string"}function Qo(t,e,r=void 0){const n=r==null||Object.keys(r).length===0;return De(t,e,!0,r,n)}function el(t,e,r,n){const s=t.required||[],i={};if(r&&(typeof r!="object"||Array.isArray(r)))return r;r==null&&(r={});const l=Xa(t,r);for(const[d,f]of Object.entries(l)){const u=s.includes(d);i[d]=De(f,e,u,xr(r[d]),n)}if(r&&typeof r=="object")for(const[d,f]of Object.entries(r))Object.keys(i).includes(d)||(i[d]=f);return i}function tl(t,e,r,n,s){if("discriminator"in t){const{discriminator:i}=t;if(n){const l=n[i.propertyName];if(!l||i.mapping[l]===void 0)return n;const d=i.mapping[l];return De(t.oneOf[d],e,r,n,s)}else if(t.oneOf.length>0)return De(t.oneOf[0],e,r,n,s)}return{}}function De(t,e,r,n,s){if(!t)return null;if(s&&"default"in t)return De(t,e,r,t.default,!1);if("oneOf"in t)return tl(t,e,r,n,s);if("const"in t)return t.const;if(t.type===null)return null;switch(t.type){case"object":return el(t,e,n,s);case"array":{const i=t;return Wa(i)?nl(i,e,r,n,s):rl(i,e,r,n,s)}default:return xr(n)}}function rl(t,e,r,n,s){if(!Array.isArray(n)){if(n)return n;n=[]}const i=t.items;let l=[];for(let d=0;d<n.length;d++)l.push(De(i,e,r,n[d],s));if(r&&typeof t.minItems=="number"&&l.length<t.minItems)for(let d=l.length;d<t.minItems;d++)l.push(De(i,e,r,null,s));return l}function nl(t,e,r,n,s){if(n&&!Array.isArray(n)||(n||(n=[]),!r&&n.length===0))return n;let i=[];for(let d=0;d<n.length;d++){const f=Gs(t,e,d);f?i.push(De(f,e,r,n[d],s)):i.push(n[d])}const l=t.minItems;for(let d=i.length;d<l;d++)i.push(De(Gs(t,e,d),e,!1,null,s));return i}function Gs(t,e,r){const n=e==="pydantic_v1"?t.items:t.prefixItems;return Array.isArray(n)?r<n.length?n[r]:null:n}class pr{constructor(e){rn(this,"errors");rn(this,"hasErrors");this.manager=e.manager,this.id=e.id,this.key=e.key,this.path=e.path,this.type=e.type,this.title=e.title,this.required=e.required,this.description=e.description,this.removable=e.removable,this.property=e.property,this.errors=Lt([]),this.hasErrors=Lt(!1)}addError(e){this.hasErrors.set(!0),this.errors.update(r=>(r.includes(e)||r.push(e),r))}clearErrors(){this.errors.set([]),this.hasErrors.set(!1)}notifyChange(){this.manager.notifyChange()}}class Et extends pr{constructor(e){super(e),this.value=Lt(e.value)}}class sl extends Et{constructor(e){super(e)}}class al extends Et{constructor(e){super(e)}}class il extends Et{constructor(e){super(e),this.options=e.options}}class Zs extends Et{constructor(e){super(e),this.min=e.min,this.max=e.max,this.badInput=!1}}class ol extends Et{constructor(e){super(e),this.type="unexpected"}}class ll extends Et{constructor(e){super(e),this.originalType=e.type,this.type="invalid"}}class cl extends pr{constructor(e){super(e),this.additionalProperties=e.additionalProperties,this.children=e.children,this.collapsed=!e.required}addChild(e){if(!this.additionalProperties)return;if(e==="")throw new Error("Schema property has no name");if(this.children.map(s=>s.key).includes(e))throw new Error("Schema property already has a property with the same name");const n=this.manager.createFormElement({key:e,path:`${this.path}/${e}`,property:this.additionalProperties,required:!1,removable:!0,value:De(this.additionalProperties,this.manager.schemaVersion,!1,this.additionalProperties.default,!1),parentProperty:this.property});n.title=e,n.removable=!0,this.children=[...this.children,n],this.notifyChange()}removeChild(e){const r=this.children.filter(s=>s.key===e);if(r.length===0){console.warn("Attempted to remove not existing key %s",e);return}const[n]=r;if(!n.removable){console.warn("Attempted to remove not removable child");return}this.children=this.children.filter(s=>s.key!==e),this.notifyChange()}resetChild(e){const r=this.children[e],n=r.property.default;if(n===void 0)return;const s=this.manager.createFormElement({key:r.key,path:`${this.path}/${r.key}`,property:r.property,required:r.required,removable:r.removable,value:n,parentProperty:this.property});s.collapsed=r.collapsed,this.children[e]=s,this.notifyChange()}fixInvalidChild(e){const r=this.children[e],n=this.manager.createFormElement({key:r.key,path:`${this.path}/${r.key}`,property:{...r.property,type:r.originalType},required:r.required,removable:r.removable,value:De(r.property,this.manager.schemaVersion,r.required,void 0,!0),parentProperty:this.property});this.children[e]=n,this.notifyChange()}}class dl extends pr{constructor(e){super(e),this.children=e.children,this.items=e.items,this.minItems=e.minItems,this.maxItems=e.maxItems,this.collapsed=!e.required}addChild(){if(typeof this.maxItems=="number"&&this.children.length===this.maxItems)return;const e=this.manager.createFormElement({key:this.children.length.toString(),path:`${this.path}/${this.children.length}`,property:this.items,required:!1,removable:!0,value:De(this.items,this.manager.schemaVersion,!1,void 0,!0),parentProperty:this.property});this.children=[...this.children,e],this.notifyChange()}removeChild(e){this.children.splice(e,1),this.recomputeIndexes(),this.notifyChange()}recomputeIndexes(){this.children.forEach((e,r)=>{e.key=r.toString(),e.path=e.path.replace(/\d+$/,r.toString()),e.title=e.key&&e.removable?e.key:e.property.title||e.key||""})}moveChildUp(e){if(e>0){let r=[];for(let n=0;n<this.children.length;n++)n===e-1?r[n]=this.children[n+1]:n===e?r[n]=this.children[n-1]:r[n]=this.children[n];this.children=r,this.recomputeIndexes(),this.notifyChange()}}moveChildDown(e){if(e<this.children.length-1){let r=[];for(let n=0;n<this.children.length;n++)n===e?r[n]=this.children[n+1]:n===e+1?r[n]=this.children[n-1]:r[n]=this.children[n];this.children=r,this.recomputeIndexes(),this.notifyChange()}}}class ul extends pr{constructor(e){super(e),this.children=e.children,this.items=e.items,this.size=e.size,this.collapsed=!e.required}addTuple(){let e;if(Array.isArray(this.items))e=this.items.map((r,n)=>De(r,this.manager.schemaVersion,!1,Array.isArray(this.property.default)?this.property.default[n]:void 0,!1));else{const r=this.items;e=Array(this.size).map(n=>De(r,this.manager.schemaVersion,!1,Array.isArray(this.property.default)?this.property.default[n]:void 0,!1))}this.children=this.manager.createTupleChildren({path:this.path,items:this.items,size:this.size,value:e,parentProperty:this.property}),this.notifyChange()}removeTuple(){this.children=[],this.notifyChange()}removeUnexpectedChild(e){this.children=this.children.filter((r,n)=>n!==e),this.notifyChange()}}class fl extends pr{constructor(e){super(e),this.selectedItem=e.selectedItem,this.selectedIndex=Lt(e.selectedIndex),this.discriminator=e.discriminator,this.unexpectedChildren=e.unexpectedChildren}selectChild(e){if(this.selectedIndex.set(e),e===-1)this.selectedItem=null;else if(this.unexpectedChildren=[],"oneOf"in this.property){const r=this.property.oneOf[e];this.selectedItem=this.manager.createFormElement({key:this.key,path:this.path,property:r,required:this.required,removable:this.removable,value:De(r,this.manager.schemaVersion,!1,void 0,!0),parentProperty:this.property}),this.selectedItem&&(this.selectedItem.title=r.title||this.key||"")}this.notifyChange()}removeUnexpectedChild(e){this.unexpectedChildren=this.unexpectedChildren.filter((r,n)=>n!==e),this.notifyChange()}}function ei(t,e=[]){let r=hl(t,e);return r=yn(r,r),r=Cr(r,r),r=Dt(r),r}function hl(t,e=[]){const r=mr(t);for(const n of Object.keys(r.properties||{}))e.includes(n)&&delete r.properties[n];return r.required&&(r.required=r.required.filter(n=>!e.includes(n))),r}function Cr(t,e){if(Array.isArray(e)){const r=[];for(const n of e)r.push(Cr(t,n));return r}else if(Vt(e)){const r={};for(const[n,s]of Object.entries(e))if(n==="$ref"&&typeof s=="string"){const i=ml(t,s);for(const[l,d]of Object.entries(i))r[l]=Cr(t,d)}else r[n]=Cr(t,s);return r}else return e}function yn(t,e){if(Array.isArray(e)){const r=[];for(let n=0;n<e.length;n++){const s=e[n];r.push(yn(t,s))}return r}else if(Vt(e)){const r={};for(const[n,s]of Object.entries(e))if(n==="discriminator"&&Qa(s)&&"oneOf"in e){const i=e.oneOf.map(l=>l.$ref);r[n]={propertyName:s.propertyName,mapping:Object.fromEntries(Object.entries(s.mapping).map(([l,d])=>[l,i.indexOf(d)]))}}else r[n]=yn(t,s);return r}else return e}function ml(t,e){if(!e.startsWith("#/"))throw new Error(`Unsupported $ref field format: ${e}`);const r=e.substring(2).split("/");let n=t;for(const s of r){if(!(s in n))throw new Error(`Unable to resolve reference ${e}. Key ${s} not found.`);n=n[s]}return n}function Dt(t){if(Array.isArray(t)){const e=[];for(const r of t)e.push(Dt(r));return e}else if(Vt(t)){const e={};for(const[r,n]of Object.entries(t))if(r==="allOf"&&Array.isArray(n))for(const s of n)for(const[i,l]of Object.entries(s))pl(e,i,l);else e[r]=Dt(n);return e}else return t}function pl(t,e,r){e in t?Array.isArray(t[e])&&Array.isArray(r)?t[e]=[...t[e],...r.map(n=>Dt(n))]:Vt(t)&&Vt(r)&&(t[e]={...t[e],...Dt(r)}):t[e]=Dt(r)}function yt(t,e=null,r=!1){if(r||(e=mr(t)),Array.isArray(e)){const n=[];for(const s of e)n.push(yt(t,s,!0));return n}else if(Vt(e)){const n={};for(const[s,i]of Object.entries(e))s==="discriminator"&&"oneOf"in e&&Qa(i)||(n[s]=yt(t,i,!0));return n}else return e}var vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _n={exports:{}},xn={},Ue={},zt={},vr={},ne={},ur={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(c){if(super(),!t.IDENTIFIER.test(c))throw new Error("CodeGen: name must be a valid identifier");this.str=c}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(c){super(),this._items=typeof c=="string"?[c]:c}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const c=this._items[0];return c===""||c==='""'}get str(){var c;return(c=this._str)!==null&&c!==void 0?c:this._str=this._items.reduce((h,g)=>`${h}${g}`,"")}get names(){var c;return(c=this._names)!==null&&c!==void 0?c:this._names=this._items.reduce((h,g)=>(g instanceof r&&(h[g.str]=(h[g.str]||0)+1),h),{})}}t._Code=n,t.nil=new n("");function s(o,...c){const h=[o[0]];let g=0;for(;g<c.length;)d(h,c[g]),h.push(o[++g]);return new n(h)}t._=s;const i=new n("+");function l(o,...c){const h=[_(o[0])];let g=0;for(;g<c.length;)h.push(i),d(h,c[g]),h.push(i,_(o[++g]));return f(h),new n(h)}t.str=l;function d(o,c){c instanceof n?o.push(...c._items):c instanceof r?o.push(c):o.push(v(c))}t.addCodeArg=d;function f(o){let c=1;for(;c<o.length-1;){if(o[c]===i){const h=u(o[c-1],o[c+1]);if(h!==void 0){o.splice(c-1,3,h);continue}o[c++]="+"}c++}}function u(o,c){if(c==='""')return o;if(o==='""')return c;if(typeof o=="string")return c instanceof r||o[o.length-1]!=='"'?void 0:typeof c!="string"?`${o.slice(0,-1)}${c}"`:c[0]==='"'?o.slice(0,-1)+c.slice(1):void 0;if(typeof c=="string"&&c[0]==='"'&&!(o instanceof r))return`"${o}${c.slice(1)}`}function p(o,c){return c.emptyStr()?o:o.emptyStr()?c:l`${o}${c}`}t.strConcat=p;function v(o){return typeof o=="number"||typeof o=="boolean"||o===null?o:_(Array.isArray(o)?o.join(","):o)}function b(o){return new n(_(o))}t.stringify=b;function _(o){return JSON.stringify(o).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=_;function $(o){return typeof o=="string"&&t.IDENTIFIER.test(o)?new n(`.${o}`):s`[${o}]`}t.getProperty=$;function y(o){if(typeof o=="string"&&t.IDENTIFIER.test(o))return new n(`${o}`);throw new Error(`CodeGen: invalid export name: ${o}, use explicit $id name mapping`)}t.getEsmExportName=y;function a(o){return new n(o.toString())}t.regexpCode=a})(ur);var bn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=ur;class r extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var n;(function(f){f[f.Started=0]="Started",f[f.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:u,parent:p}={}){this._names={},this._prefixes=u,this._parent=p}toName(u){return u instanceof e.Name?u:this.name(u)}name(u){return new e.Name(this._newName(u))}_newName(u){const p=this._names[u]||this._nameGroup(u);return`${u}${p.index++}`}_nameGroup(u){var p,v;if(!((v=(p=this._parent)===null||p===void 0?void 0:p._prefixes)===null||v===void 0)&&v.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}t.Scope=s;class i extends e.Name{constructor(u,p){super(p),this.prefix=u}setValue(u,{property:p,itemIndex:v}){this.value=u,this.scopePath=(0,e._)`.${new e.Name(p)}[${v}]`}}t.ValueScopeName=i;const l=(0,e._)`\n`;class d extends s{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?l:e.nil}}get(){return this._scope}name(u){return new i(u,this._newName(u))}value(u,p){var v;if(p.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const b=this.toName(u),{prefix:_}=b,$=(v=p.key)!==null&&v!==void 0?v:p.ref;let y=this._values[_];if(y){const c=y.get($);if(c)return c}else y=this._values[_]=new Map;y.set($,b);const a=this._scope[_]||(this._scope[_]=[]),o=a.length;return a[o]=p.ref,b.setValue(p,{property:_,itemIndex:o}),b}getValue(u,p){const v=this._values[u];if(v)return v.get(p)}scopeRefs(u,p=this._values){return this._reduceValues(p,v=>{if(v.scopePath===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return(0,e._)`${u}${v.scopePath}`})}scopeCode(u=this._values,p,v){return this._reduceValues(u,b=>{if(b.value===void 0)throw new Error(`CodeGen: name "${b}" has no value`);return b.value.code},p,v)}_reduceValues(u,p,v={},b){let _=e.nil;for(const $ in u){const y=u[$];if(!y)continue;const a=v[$]=v[$]||new Map;y.forEach(o=>{if(a.has(o))return;a.set(o,n.Started);let c=p(o);if(c){const h=this.opts.es5?t.varKinds.var:t.varKinds.const;_=(0,e._)`${_}${h} ${o} = ${c};${this.opts._n}`}else if(c=b==null?void 0:b(o))_=(0,e._)`${_}${c}${this.opts._n}`;else throw new r(o);a.set(o,n.Completed)})}return _}}t.ValueScope=d})(bn);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=ur,r=bn;var n=ur;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var s=bn;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class i{optimizeNodes(){return this}optimizeNames(m,S){return this}}class l extends i{constructor(m,S,R){super(),this.varKind=m,this.name=S,this.rhs=R}render({es5:m,_n:S}){const R=m?r.varKinds.var:this.varKind,B=this.rhs===void 0?"":` = ${this.rhs}`;return`${R} ${this.name}${B};`+S}optimizeNames(m,S){if(m[this.name.str])return this.rhs&&(this.rhs=L(this.rhs,m,S)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class d extends i{constructor(m,S,R){super(),this.lhs=m,this.rhs=S,this.sideEffects=R}render({_n:m}){return`${this.lhs} = ${this.rhs};`+m}optimizeNames(m,S){if(!(this.lhs instanceof e.Name&&!m[this.lhs.str]&&!this.sideEffects))return this.rhs=L(this.rhs,m,S),this}get names(){const m=this.lhs instanceof e.Name?{}:{...this.lhs.names};return x(m,this.rhs)}}class f extends d{constructor(m,S,R,B){super(m,R,B),this.op=S}render({_n:m}){return`${this.lhs} ${this.op}= ${this.rhs};`+m}}class u extends i{constructor(m){super(),this.label=m,this.names={}}render({_n:m}){return`${this.label}:`+m}}class p extends i{constructor(m){super(),this.label=m,this.names={}}render({_n:m}){return`break${this.label?` ${this.label}`:""};`+m}}class v extends i{constructor(m){super(),this.error=m}render({_n:m}){return`throw ${this.error};`+m}get names(){return this.error.names}}class b extends i{constructor(m){super(),this.code=m}render({_n:m}){return`${this.code};`+m}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(m,S){return this.code=L(this.code,m,S),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class _ extends i{constructor(m=[]){super(),this.nodes=m}render(m){return this.nodes.reduce((S,R)=>S+R.render(m),"")}optimizeNodes(){const{nodes:m}=this;let S=m.length;for(;S--;){const R=m[S].optimizeNodes();Array.isArray(R)?m.splice(S,1,...R):R?m[S]=R:m.splice(S,1)}return m.length>0?this:void 0}optimizeNames(m,S){const{nodes:R}=this;let B=R.length;for(;B--;){const G=R[B];G.optimizeNames(m,S)||(J(m,G.names),R.splice(B,1))}return R.length>0?this:void 0}get names(){return this.nodes.reduce((m,S)=>A(m,S.names),{})}}class $ extends _{render(m){return"{"+m._n+super.render(m)+"}"+m._n}}class y extends _{}class a extends ${}a.kind="else";class o extends ${constructor(m,S){super(S),this.condition=m}render(m){let S=`if(${this.condition})`+super.render(m);return this.else&&(S+="else "+this.else.render(m)),S}optimizeNodes(){super.optimizeNodes();const m=this.condition;if(m===!0)return this.nodes;let S=this.else;if(S){const R=S.optimizeNodes();S=this.else=Array.isArray(R)?new a(R):R}if(S)return m===!1?S instanceof o?S:S.nodes:this.nodes.length?this:new o(Q(m),S instanceof o?[S]:S.nodes);if(!(m===!1||!this.nodes.length))return this}optimizeNames(m,S){var R;if(this.else=(R=this.else)===null||R===void 0?void 0:R.optimizeNames(m,S),!!(super.optimizeNames(m,S)||this.else))return this.condition=L(this.condition,m,S),this}get names(){const m=super.names;return x(m,this.condition),this.else&&A(m,this.else.names),m}}o.kind="if";class c extends ${}c.kind="for";class h extends c{constructor(m){super(),this.iteration=m}render(m){return`for(${this.iteration})`+super.render(m)}optimizeNames(m,S){if(super.optimizeNames(m,S))return this.iteration=L(this.iteration,m,S),this}get names(){return A(super.names,this.iteration.names)}}class g extends c{constructor(m,S,R,B){super(),this.varKind=m,this.name=S,this.from=R,this.to=B}render(m){const S=m.es5?r.varKinds.var:this.varKind,{name:R,from:B,to:G}=this;return`for(${S} ${R}=${B}; ${R}<${G}; ${R}++)`+super.render(m)}get names(){const m=x(super.names,this.from);return x(m,this.to)}}class w extends c{constructor(m,S,R,B){super(),this.loop=m,this.varKind=S,this.name=R,this.iterable=B}render(m){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(m)}optimizeNames(m,S){if(super.optimizeNames(m,S))return this.iterable=L(this.iterable,m,S),this}get names(){return A(super.names,this.iterable.names)}}class O extends ${constructor(m,S,R){super(),this.name=m,this.args=S,this.async=R}render(m){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(m)}}O.kind="func";class C extends _{render(m){return"return "+super.render(m)}}C.kind="return";class T extends ${render(m){let S="try"+super.render(m);return this.catch&&(S+=this.catch.render(m)),this.finally&&(S+=this.finally.render(m)),S}optimizeNodes(){var m,S;return super.optimizeNodes(),(m=this.catch)===null||m===void 0||m.optimizeNodes(),(S=this.finally)===null||S===void 0||S.optimizeNodes(),this}optimizeNames(m,S){var R,B;return super.optimizeNames(m,S),(R=this.catch)===null||R===void 0||R.optimizeNames(m,S),(B=this.finally)===null||B===void 0||B.optimizeNames(m,S),this}get names(){const m=super.names;return this.catch&&A(m,this.catch.names),this.finally&&A(m,this.finally.names),m}}class F extends ${constructor(m){super(),this.error=m}render(m){return`catch(${this.error})`+super.render(m)}}F.kind="catch";class U extends ${render(m){return"finally"+super.render(m)}}U.kind="finally";class P{constructor(m,S={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...S,_n:S.lines?`
`:""},this._extScope=m,this._scope=new r.Scope({parent:m}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(m){return this._scope.name(m)}scopeName(m){return this._extScope.name(m)}scopeValue(m,S){const R=this._extScope.value(m,S);return(this._values[R.prefix]||(this._values[R.prefix]=new Set)).add(R),R}getScopeValue(m,S){return this._extScope.getValue(m,S)}scopeRefs(m){return this._extScope.scopeRefs(m,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(m,S,R,B){const G=this._scope.toName(S);return R!==void 0&&B&&(this._constants[G.str]=R),this._leafNode(new l(m,G,R)),G}const(m,S,R){return this._def(r.varKinds.const,m,S,R)}let(m,S,R){return this._def(r.varKinds.let,m,S,R)}var(m,S,R){return this._def(r.varKinds.var,m,S,R)}assign(m,S,R){return this._leafNode(new d(m,S,R))}add(m,S){return this._leafNode(new f(m,t.operators.ADD,S))}code(m){return typeof m=="function"?m():m!==e.nil&&this._leafNode(new b(m)),this}object(...m){const S=["{"];for(const[R,B]of m)S.length>1&&S.push(","),S.push(R),(R!==B||this.opts.es5)&&(S.push(":"),(0,e.addCodeArg)(S,B));return S.push("}"),new e._Code(S)}if(m,S,R){if(this._blockNode(new o(m)),S&&R)this.code(S).else().code(R).endIf();else if(S)this.code(S).endIf();else if(R)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(m){return this._elseNode(new o(m))}else(){return this._elseNode(new a)}endIf(){return this._endBlockNode(o,a)}_for(m,S){return this._blockNode(m),S&&this.code(S).endFor(),this}for(m,S){return this._for(new h(m),S)}forRange(m,S,R,B,G=this.opts.es5?r.varKinds.var:r.varKinds.let){const re=this._scope.toName(m);return this._for(new g(G,re,S,R),()=>B(re))}forOf(m,S,R,B=r.varKinds.const){const G=this._scope.toName(m);if(this.opts.es5){const re=S instanceof e.Name?S:this.var("_arr",S);return this.forRange("_i",0,(0,e._)`${re}.length`,ie=>{this.var(G,(0,e._)`${re}[${ie}]`),R(G)})}return this._for(new w("of",B,G,S),()=>R(G))}forIn(m,S,R,B=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(m,(0,e._)`Object.keys(${S})`,R);const G=this._scope.toName(m);return this._for(new w("in",B,G,S),()=>R(G))}endFor(){return this._endBlockNode(c)}label(m){return this._leafNode(new u(m))}break(m){return this._leafNode(new p(m))}return(m){const S=new C;if(this._blockNode(S),this.code(m),S.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(m,S,R){if(!S&&!R)throw new Error('CodeGen: "try" without "catch" and "finally"');const B=new T;if(this._blockNode(B),this.code(m),S){const G=this.name("e");this._currNode=B.catch=new F(G),S(G)}return R&&(this._currNode=B.finally=new U,this.code(R)),this._endBlockNode(F,U)}throw(m){return this._leafNode(new v(m))}block(m,S){return this._blockStarts.push(this._nodes.length),m&&this.code(m).endBlock(S),this}endBlock(m){const S=this._blockStarts.pop();if(S===void 0)throw new Error("CodeGen: not in self-balancing block");const R=this._nodes.length-S;if(R<0||m!==void 0&&R!==m)throw new Error(`CodeGen: wrong number of nodes: ${R} vs ${m} expected`);return this._nodes.length=S,this}func(m,S=e.nil,R,B){return this._blockNode(new O(m,S,R)),B&&this.code(B).endFunc(),this}endFunc(){return this._endBlockNode(O)}optimize(m=1){for(;m-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(m){return this._currNode.nodes.push(m),this}_blockNode(m){this._currNode.nodes.push(m),this._nodes.push(m)}_endBlockNode(m,S){const R=this._currNode;if(R instanceof m||S&&R instanceof S)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${S?`${m.kind}/${S.kind}`:m.kind}"`)}_elseNode(m){const S=this._currNode;if(!(S instanceof o))throw new Error('CodeGen: "else" without "if"');return this._currNode=S.else=m,this}get _root(){return this._nodes[0]}get _currNode(){const m=this._nodes;return m[m.length-1]}set _currNode(m){const S=this._nodes;S[S.length-1]=m}}t.CodeGen=P;function A(k,m){for(const S in m)k[S]=(k[S]||0)+(m[S]||0);return k}function x(k,m){return m instanceof e._CodeOrName?A(k,m.names):k}function L(k,m,S){if(k instanceof e.Name)return R(k);if(!B(k))return k;return new e._Code(k._items.reduce((G,re)=>(re instanceof e.Name&&(re=R(re)),re instanceof e._Code?G.push(...re._items):G.push(re),G),[]));function R(G){const re=S[G.str];return re===void 0||m[G.str]!==1?G:(delete m[G.str],re)}function B(G){return G instanceof e._Code&&G._items.some(re=>re instanceof e.Name&&m[re.str]===1&&S[re.str]!==void 0)}}function J(k,m){for(const S in m)k[S]=(k[S]||0)-(m[S]||0)}function Q(k){return typeof k=="boolean"||typeof k=="number"||k===null?!k:(0,e._)`!${N(k)}`}t.not=Q;const ee=I(t.operators.AND);function de(...k){return k.reduce(ee)}t.and=de;const _e=I(t.operators.OR);function V(...k){return k.reduce(_e)}t.or=V;function I(k){return(m,S)=>m===e.nil?S:S===e.nil?m:(0,e._)`${N(m)} ${k} ${N(S)}`}function N(k){return k instanceof e.Name?k:(0,e._)`(${k})`}})(ne);var K={};Object.defineProperty(K,"__esModule",{value:!0});K.checkStrictMode=K.getErrorPath=K.Type=K.useFunc=K.setEvaluated=K.evaluatedPropsToName=K.mergeEvaluated=K.eachItem=K.unescapeJsonPointer=K.escapeJsonPointer=K.escapeFragment=K.unescapeFragment=K.schemaRefOrVal=K.schemaHasRulesButRef=K.schemaHasRules=K.checkUnknownRules=K.alwaysValidSchema=K.toHash=void 0;const ue=ne,gl=ur;function yl(t){const e={};for(const r of t)e[r]=!0;return e}K.toHash=yl;function _l(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(ti(t,e),!ri(e,t.self.RULES.all))}K.alwaysValidSchema=_l;function ti(t,e=t.schema){const{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;const s=n.RULES.keywords;for(const i in e)s[i]||ai(t,`unknown keyword: "${i}"`)}K.checkUnknownRules=ti;function ri(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(e[r])return!0;return!1}K.schemaHasRules=ri;function bl(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}K.schemaHasRulesButRef=bl;function $l({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,ue._)`${r}`}return(0,ue._)`${t}${e}${(0,ue.getProperty)(n)}`}K.schemaRefOrVal=$l;function wl(t){return ni(decodeURIComponent(t))}K.unescapeFragment=wl;function El(t){return encodeURIComponent(Ln(t))}K.escapeFragment=El;function Ln(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}K.escapeJsonPointer=Ln;function ni(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}K.unescapeJsonPointer=ni;function Sl(t,e){if(Array.isArray(t))for(const r of t)e(r);else e(t)}K.eachItem=Sl;function Ws({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,l,d)=>{const f=l===void 0?i:l instanceof ue.Name?(i instanceof ue.Name?t(s,i,l):e(s,i,l),l):i instanceof ue.Name?(e(s,l,i),i):r(i,l);return d===ue.Name&&!(f instanceof ue.Name)?n(s,f):f}}K.mergeEvaluated={props:Ws({mergeNames:(t,e,r)=>t.if((0,ue._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,ue._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,ue._)`${r} || {}`).code((0,ue._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,ue._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,ue._)`${r} || {}`),Fn(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:si}),items:Ws({mergeNames:(t,e,r)=>t.if((0,ue._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,ue._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,ue._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,ue._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function si(t,e){if(e===!0)return t.var("props",!0);const r=t.var("props",(0,ue._)`{}`);return e!==void 0&&Fn(t,r,e),r}K.evaluatedPropsToName=si;function Fn(t,e,r){Object.keys(r).forEach(n=>t.assign((0,ue._)`${e}${(0,ue.getProperty)(n)}`,!0))}K.setEvaluated=Fn;const Xs={};function kl(t,e){return t.scopeValue("func",{ref:e,code:Xs[e.code]||(Xs[e.code]=new gl._Code(e.code))})}K.useFunc=kl;var $n;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})($n||(K.Type=$n={}));function Pl(t,e,r){if(t instanceof ue.Name){const n=e===$n.Num;return r?n?(0,ue._)`"[" + ${t} + "]"`:(0,ue._)`"['" + ${t} + "']"`:n?(0,ue._)`"/" + ${t}`:(0,ue._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,ue.getProperty)(t).toString():"/"+Ln(t)}K.getErrorPath=Pl;function ai(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}K.checkStrictMode=ai;var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});const Ie=ne,Ol={data:new Ie.Name("data"),valCxt:new Ie.Name("valCxt"),instancePath:new Ie.Name("instancePath"),parentData:new Ie.Name("parentData"),parentDataProperty:new Ie.Name("parentDataProperty"),rootData:new Ie.Name("rootData"),dynamicAnchors:new Ie.Name("dynamicAnchors"),vErrors:new Ie.Name("vErrors"),errors:new Ie.Name("errors"),this:new Ie.Name("this"),self:new Ie.Name("self"),scope:new Ie.Name("scope"),json:new Ie.Name("json"),jsonPos:new Ie.Name("jsonPos"),jsonLen:new Ie.Name("jsonLen"),jsonPart:new Ie.Name("jsonPart")};Ve.default=Ol;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=ne,r=K,n=Ve;t.keywordError={message:({keyword:a})=>(0,e.str)`must pass "${a}" keyword validation`},t.keyword$DataError={message:({keyword:a,schemaType:o})=>o?(0,e.str)`"${a}" keyword must be ${o} ($data)`:(0,e.str)`"${a}" keyword is invalid ($data)`};function s(a,o=t.keywordError,c,h){const{it:g}=a,{gen:w,compositeRule:O,allErrors:C}=g,T=v(a,o,c);h??(O||C)?f(w,T):u(g,(0,e._)`[${T}]`)}t.reportError=s;function i(a,o=t.keywordError,c){const{it:h}=a,{gen:g,compositeRule:w,allErrors:O}=h,C=v(a,o,c);f(g,C),w||O||u(h,n.default.vErrors)}t.reportExtraError=i;function l(a,o){a.assign(n.default.errors,o),a.if((0,e._)`${n.default.vErrors} !== null`,()=>a.if(o,()=>a.assign((0,e._)`${n.default.vErrors}.length`,o),()=>a.assign(n.default.vErrors,null)))}t.resetErrorsCount=l;function d({gen:a,keyword:o,schemaValue:c,data:h,errsCount:g,it:w}){if(g===void 0)throw new Error("ajv implementation error");const O=a.name("err");a.forRange("i",g,n.default.errors,C=>{a.const(O,(0,e._)`${n.default.vErrors}[${C}]`),a.if((0,e._)`${O}.instancePath === undefined`,()=>a.assign((0,e._)`${O}.instancePath`,(0,e.strConcat)(n.default.instancePath,w.errorPath))),a.assign((0,e._)`${O}.schemaPath`,(0,e.str)`${w.errSchemaPath}/${o}`),w.opts.verbose&&(a.assign((0,e._)`${O}.schema`,c),a.assign((0,e._)`${O}.data`,h))})}t.extendErrors=d;function f(a,o){const c=a.const("err",o);a.if((0,e._)`${n.default.vErrors} === null`,()=>a.assign(n.default.vErrors,(0,e._)`[${c}]`),(0,e._)`${n.default.vErrors}.push(${c})`),a.code((0,e._)`${n.default.errors}++`)}function u(a,o){const{gen:c,validateName:h,schemaEnv:g}=a;g.$async?c.throw((0,e._)`new ${a.ValidationError}(${o})`):(c.assign((0,e._)`${h}.errors`,o),c.return(!1))}const p={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function v(a,o,c){const{createErrors:h}=a.it;return h===!1?(0,e._)`{}`:b(a,o,c)}function b(a,o,c={}){const{gen:h,it:g}=a,w=[_(g,c),$(a,c)];return y(a,o,w),h.object(...w)}function _({errorPath:a},{instancePath:o}){const c=o?(0,e.str)`${a}${(0,r.getErrorPath)(o,r.Type.Str)}`:a;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,c)]}function $({keyword:a,it:{errSchemaPath:o}},{schemaPath:c,parentSchema:h}){let g=h?o:(0,e.str)`${o}/${a}`;return c&&(g=(0,e.str)`${g}${(0,r.getErrorPath)(c,r.Type.Str)}`),[p.schemaPath,g]}function y(a,{params:o,message:c},h){const{keyword:g,data:w,schemaValue:O,it:C}=a,{opts:T,propertyName:F,topSchemaRef:U,schemaPath:P}=C;h.push([p.keyword,g],[p.params,typeof o=="function"?o(a):o||(0,e._)`{}`]),T.messages&&h.push([p.message,typeof c=="function"?c(a):c]),T.verbose&&h.push([p.schema,O],[p.parentSchema,(0,e._)`${U}${P}`],[n.default.data,w]),F&&h.push([p.propertyName,F])}})(vr);Object.defineProperty(zt,"__esModule",{value:!0});zt.boolOrEmptySchema=zt.topBoolOrEmptySchema=void 0;const Cl=vr,Il=ne,Al=Ve,Nl={message:"boolean schema is false"};function Tl(t){const{gen:e,schema:r,validateName:n}=t;r===!1?ii(t,!1):typeof r=="object"&&r.$async===!0?e.return(Al.default.data):(e.assign((0,Il._)`${n}.errors`,null),e.return(!0))}zt.topBoolOrEmptySchema=Tl;function jl(t,e){const{gen:r,schema:n}=t;n===!1?(r.var(e,!1),ii(t)):r.var(e,!0)}zt.boolOrEmptySchema=jl;function ii(t,e){const{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Cl.reportError)(s,Nl,void 0,e)}var Ee={},_t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.getRules=_t.isJSONType=void 0;const Ml=["string","number","integer","boolean","null","object","array"],Dl=new Set(Ml);function Rl(t){return typeof t=="string"&&Dl.has(t)}_t.isJSONType=Rl;function xl(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}_t.getRules=xl;var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.shouldUseRule=Qe.shouldUseGroup=Qe.schemaHasRulesForType=void 0;function Ll({schema:t,self:e},r){const n=e.RULES.types[r];return n&&n!==!0&&oi(t,n)}Qe.schemaHasRulesForType=Ll;function oi(t,e){return e.rules.some(r=>li(t,r))}Qe.shouldUseGroup=oi;function li(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Qe.shouldUseRule=li;Object.defineProperty(Ee,"__esModule",{value:!0});Ee.reportTypeError=Ee.checkDataTypes=Ee.checkDataType=Ee.coerceAndCheckDataType=Ee.getJSONTypes=Ee.getSchemaTypes=Ee.DataType=void 0;const Fl=_t,Vl=Qe,zl=vr,ae=ne,ci=K;var Rt;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Rt||(Ee.DataType=Rt={}));function ql(t){const e=di(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Ee.getSchemaTypes=ql;function di(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(Fl.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Ee.getJSONTypes=di;function Ul(t,e){const{gen:r,data:n,opts:s}=t,i=Hl(e,s.coerceTypes),l=e.length>0&&!(i.length===0&&e.length===1&&(0,Vl.schemaHasRulesForType)(t,e[0]));if(l){const d=Vn(e,n,s.strictNumbers,Rt.Wrong);r.if(d,()=>{i.length?Kl(t,e,i):zn(t)})}return l}Ee.coerceAndCheckDataType=Ul;const ui=new Set(["string","number","integer","boolean","null"]);function Hl(t,e){return e?t.filter(r=>ui.has(r)||e==="array"&&r==="array"):[]}function Kl(t,e,r){const{gen:n,data:s,opts:i}=t,l=n.let("dataType",(0,ae._)`typeof ${s}`),d=n.let("coerced",(0,ae._)`undefined`);i.coerceTypes==="array"&&n.if((0,ae._)`${l} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,ae._)`${s}[0]`).assign(l,(0,ae._)`typeof ${s}`).if(Vn(e,s,i.strictNumbers),()=>n.assign(d,s))),n.if((0,ae._)`${d} !== undefined`);for(const u of r)(ui.has(u)||u==="array"&&i.coerceTypes==="array")&&f(u);n.else(),zn(t),n.endIf(),n.if((0,ae._)`${d} !== undefined`,()=>{n.assign(s,d),Bl(t,d)});function f(u){switch(u){case"string":n.elseIf((0,ae._)`${l} == "number" || ${l} == "boolean"`).assign(d,(0,ae._)`"" + ${s}`).elseIf((0,ae._)`${s} === null`).assign(d,(0,ae._)`""`);return;case"number":n.elseIf((0,ae._)`${l} == "boolean" || ${s} === null
              || (${l} == "string" && ${s} && ${s} == +${s})`).assign(d,(0,ae._)`+${s}`);return;case"integer":n.elseIf((0,ae._)`${l} === "boolean" || ${s} === null
              || (${l} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(d,(0,ae._)`+${s}`);return;case"boolean":n.elseIf((0,ae._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(d,!1).elseIf((0,ae._)`${s} === "true" || ${s} === 1`).assign(d,!0);return;case"null":n.elseIf((0,ae._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(d,null);return;case"array":n.elseIf((0,ae._)`${l} === "string" || ${l} === "number"
              || ${l} === "boolean" || ${s} === null`).assign(d,(0,ae._)`[${s}]`)}}}function Bl({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,ae._)`${e} !== undefined`,()=>t.assign((0,ae._)`${e}[${r}]`,n))}function wn(t,e,r,n=Rt.Correct){const s=n===Rt.Correct?ae.operators.EQ:ae.operators.NEQ;let i;switch(t){case"null":return(0,ae._)`${e} ${s} null`;case"array":i=(0,ae._)`Array.isArray(${e})`;break;case"object":i=(0,ae._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=l((0,ae._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=l();break;default:return(0,ae._)`typeof ${e} ${s} ${t}`}return n===Rt.Correct?i:(0,ae.not)(i);function l(d=ae.nil){return(0,ae.and)((0,ae._)`typeof ${e} == "number"`,d,r?(0,ae._)`isFinite(${e})`:ae.nil)}}Ee.checkDataType=wn;function Vn(t,e,r,n){if(t.length===1)return wn(t[0],e,r,n);let s;const i=(0,ci.toHash)(t);if(i.array&&i.object){const l=(0,ae._)`typeof ${e} != "object"`;s=i.null?l:(0,ae._)`!${e} || ${l}`,delete i.null,delete i.array,delete i.object}else s=ae.nil;i.number&&delete i.integer;for(const l in i)s=(0,ae.and)(s,wn(l,e,r,n));return s}Ee.checkDataTypes=Vn;const Jl={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,ae._)`{type: ${t}}`:(0,ae._)`{type: ${e}}`};function zn(t){const e=Gl(t);(0,zl.reportError)(e,Jl)}Ee.reportTypeError=zn;function Gl(t){const{gen:e,data:r,schema:n}=t,s=(0,ci.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.assignDefaults=void 0;const It=ne,Zl=K;function Wl(t,e){const{properties:r,items:n}=t.schema;if(e==="object"&&r)for(const s in r)Ys(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>Ys(t,i,s.default))}Hr.assignDefaults=Wl;function Ys(t,e,r){const{gen:n,compositeRule:s,data:i,opts:l}=t;if(r===void 0)return;const d=(0,It._)`${i}${(0,It.getProperty)(e)}`;if(s){(0,Zl.checkStrictMode)(t,`default is ignored for: ${d}`);return}let f=(0,It._)`${d} === undefined`;l.useDefaults==="empty"&&(f=(0,It._)`${f} || ${d} === null || ${d} === ""`),n.if(f,(0,It._)`${d} = ${(0,It.stringify)(r)}`)}var Ze={},oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.validateUnion=oe.validateArray=oe.usePattern=oe.callValidateCode=oe.schemaProperties=oe.allSchemaProperties=oe.noPropertyInData=oe.propertyInData=oe.isOwnProperty=oe.hasPropFunc=oe.reportMissingProp=oe.checkMissingProp=oe.checkReportMissingProp=void 0;const ge=ne,qn=K,st=Ve,Xl=K;function Yl(t,e){const{gen:r,data:n,it:s}=t;r.if(Hn(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,ge._)`${e}`},!0),t.error()})}oe.checkReportMissingProp=Yl;function Ql({gen:t,data:e,it:{opts:r}},n,s){return(0,ge.or)(...n.map(i=>(0,ge.and)(Hn(t,e,i,r.ownProperties),(0,ge._)`${s} = ${i}`)))}oe.checkMissingProp=Ql;function ec(t,e){t.setParams({missingProperty:e},!0),t.error()}oe.reportMissingProp=ec;function fi(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ge._)`Object.prototype.hasOwnProperty`})}oe.hasPropFunc=fi;function Un(t,e,r){return(0,ge._)`${fi(t)}.call(${e}, ${r})`}oe.isOwnProperty=Un;function tc(t,e,r,n){const s=(0,ge._)`${e}${(0,ge.getProperty)(r)} !== undefined`;return n?(0,ge._)`${s} && ${Un(t,e,r)}`:s}oe.propertyInData=tc;function Hn(t,e,r,n){const s=(0,ge._)`${e}${(0,ge.getProperty)(r)} === undefined`;return n?(0,ge.or)(s,(0,ge.not)(Un(t,e,r))):s}oe.noPropertyInData=Hn;function hi(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}oe.allSchemaProperties=hi;function rc(t,e){return hi(e).filter(r=>!(0,qn.alwaysValidSchema)(t,e[r]))}oe.schemaProperties=rc;function nc({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:l},d,f,u){const p=u?(0,ge._)`${t}, ${e}, ${n}${s}`:e,v=[[st.default.instancePath,(0,ge.strConcat)(st.default.instancePath,i)],[st.default.parentData,l.parentData],[st.default.parentDataProperty,l.parentDataProperty],[st.default.rootData,st.default.rootData]];l.opts.dynamicRef&&v.push([st.default.dynamicAnchors,st.default.dynamicAnchors]);const b=(0,ge._)`${p}, ${r.object(...v)}`;return f!==ge.nil?(0,ge._)`${d}.call(${f}, ${b})`:(0,ge._)`${d}(${b})`}oe.callValidateCode=nc;const sc=(0,ge._)`new RegExp`;function ac({gen:t,it:{opts:e}},r){const n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,ge._)`${s.code==="new RegExp"?sc:(0,Xl.useFunc)(t,s)}(${r}, ${n})`})}oe.usePattern=ac;function ic(t){const{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){const d=e.let("valid",!0);return l(()=>e.assign(d,!1)),d}return e.var(i,!0),l(()=>e.break()),i;function l(d){const f=e.const("len",(0,ge._)`${r}.length`);e.forRange("i",0,f,u=>{t.subschema({keyword:n,dataProp:u,dataPropType:qn.Type.Num},i),e.if((0,ge.not)(i),d)})}}oe.validateArray=ic;function oc(t){const{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(f=>(0,qn.alwaysValidSchema)(s,f))&&!s.opts.unevaluated)return;const l=e.let("valid",!1),d=e.name("_valid");e.block(()=>r.forEach((f,u)=>{const p=t.subschema({keyword:n,schemaProp:u,compositeRule:!0},d);e.assign(l,(0,ge._)`${l} || ${d}`),t.mergeValidEvaluated(p,d)||e.if((0,ge.not)(l))})),t.result(l,()=>t.reset(),()=>t.error(!0))}oe.validateUnion=oc;Object.defineProperty(Ze,"__esModule",{value:!0});Ze.validateKeywordUsage=Ze.validSchemaType=Ze.funcKeywordCode=Ze.macroKeywordCode=void 0;const Te=ne,mt=Ve,lc=oe,cc=vr;function dc(t,e){const{gen:r,keyword:n,schema:s,parentSchema:i,it:l}=t,d=e.macro.call(l.self,s,i,l),f=mi(r,n,d);l.opts.validateSchema!==!1&&l.self.validateSchema(d,!0);const u=r.name("valid");t.subschema({schema:d,schemaPath:Te.nil,errSchemaPath:`${l.errSchemaPath}/${n}`,topSchemaRef:f,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}Ze.macroKeywordCode=dc;function uc(t,e){var r;const{gen:n,keyword:s,schema:i,parentSchema:l,$data:d,it:f}=t;hc(f,e);const u=!d&&e.compile?e.compile.call(f.self,i,l,f):e.validate,p=mi(n,s,u),v=n.let("valid");t.block$data(v,b),t.ok((r=e.valid)!==null&&r!==void 0?r:v);function b(){if(e.errors===!1)y(),e.modifying&&Qs(t),a(()=>t.error());else{const o=e.async?_():$();e.modifying&&Qs(t),a(()=>fc(t,o))}}function _(){const o=n.let("ruleErrs",null);return n.try(()=>y((0,Te._)`await `),c=>n.assign(v,!1).if((0,Te._)`${c} instanceof ${f.ValidationError}`,()=>n.assign(o,(0,Te._)`${c}.errors`),()=>n.throw(c))),o}function $(){const o=(0,Te._)`${p}.errors`;return n.assign(o,null),y(Te.nil),o}function y(o=e.async?(0,Te._)`await `:Te.nil){const c=f.opts.passContext?mt.default.this:mt.default.self,h=!("compile"in e&&!d||e.schema===!1);n.assign(v,(0,Te._)`${o}${(0,lc.callValidateCode)(t,p,c,h)}`,e.modifying)}function a(o){var c;n.if((0,Te.not)((c=e.valid)!==null&&c!==void 0?c:v),o)}}Ze.funcKeywordCode=uc;function Qs(t){const{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Te._)`${n.parentData}[${n.parentDataProperty}]`))}function fc(t,e){const{gen:r}=t;r.if((0,Te._)`Array.isArray(${e})`,()=>{r.assign(mt.default.vErrors,(0,Te._)`${mt.default.vErrors} === null ? ${e} : ${mt.default.vErrors}.concat(${e})`).assign(mt.default.errors,(0,Te._)`${mt.default.vErrors}.length`),(0,cc.extendErrors)(t)},()=>t.error())}function hc({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function mi(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Te.stringify)(r)})}function mc(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Ze.validSchemaType=mc;function pc({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const l=s.dependencies;if(l!=null&&l.some(d=>!Object.prototype.hasOwnProperty.call(t,d)))throw new Error(`parent schema must have dependencies of ${i}: ${l.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){const f=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(f);else throw new Error(f)}}Ze.validateKeywordUsage=pc;var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.extendSubschemaMode=dt.extendSubschemaData=dt.getSubschema=void 0;const Ge=ne,pi=K;function vc(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:l}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const d=t.schema[e];return r===void 0?{schema:d,schemaPath:(0,Ge._)`${t.schemaPath}${(0,Ge.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:d[r],schemaPath:(0,Ge._)`${t.schemaPath}${(0,Ge.getProperty)(e)}${(0,Ge.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,pi.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||l===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:l,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}dt.getSubschema=vc;function gc(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:l}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=e;if(r!==void 0){const{errorPath:u,dataPathArr:p,opts:v}=e,b=d.let("data",(0,Ge._)`${e.data}${(0,Ge.getProperty)(r)}`,!0);f(b),t.errorPath=(0,Ge.str)`${u}${(0,pi.getErrorPath)(r,n,v.jsPropertySyntax)}`,t.parentDataProperty=(0,Ge._)`${r}`,t.dataPathArr=[...p,t.parentDataProperty]}if(s!==void 0){const u=s instanceof Ge.Name?s:d.let("data",s,!0);f(u),l!==void 0&&(t.propertyName=l)}i&&(t.dataTypes=i);function f(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}dt.extendSubschemaData=gc;function yc(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}dt.extendSubschemaMode=yc;var Oe={},vi=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var l=i[s];if(!t(e[l],r[l]))return!1}return!0}return e!==e&&r!==r},gi={exports:{}},lt=gi.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Ir(e,n,s,t,"",t)};lt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};lt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};lt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};lt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Ir(t,e,r,n,s,i,l,d,f,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,l,d,f,u);for(var p in n){var v=n[p];if(Array.isArray(v)){if(p in lt.arrayKeywords)for(var b=0;b<v.length;b++)Ir(t,e,r,v[b],s+"/"+p+"/"+b,i,s,p,n,b)}else if(p in lt.propsKeywords){if(v&&typeof v=="object")for(var _ in v)Ir(t,e,r,v[_],s+"/"+p+"/"+_c(_),i,s,p,n,_)}else(p in lt.keywords||t.allKeys&&!(p in lt.skipKeywords))&&Ir(t,e,r,v,s+"/"+p,i,s,p,n)}r(n,s,i,l,d,f,u)}}function _c(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var bc=gi.exports;Object.defineProperty(Oe,"__esModule",{value:!0});Oe.getSchemaRefs=Oe.resolveUrl=Oe.normalizeId=Oe._getFullPath=Oe.getFullPath=Oe.inlineRef=void 0;const $c=K,wc=vi,Ec=bc,Sc=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function kc(t,e=!0){return typeof t=="boolean"?!0:e===!0?!En(t):e?yi(t)<=e:!1}Oe.inlineRef=kc;const Pc=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function En(t){for(const e in t){if(Pc.has(e))return!0;const r=t[e];if(Array.isArray(r)&&r.some(En)||typeof r=="object"&&En(r))return!0}return!1}function yi(t){let e=0;for(const r in t){if(r==="$ref")return 1/0;if(e++,!Sc.has(r)&&(typeof t[r]=="object"&&(0,$c.eachItem)(t[r],n=>e+=yi(n)),e===1/0))return 1/0}return e}function _i(t,e="",r){r!==!1&&(e=xt(e));const n=t.parse(e);return bi(t,n)}Oe.getFullPath=_i;function bi(t,e){return t.serialize(e).split("#")[0]+"#"}Oe._getFullPath=bi;const Oc=/#\/?$/;function xt(t){return t?t.replace(Oc,""):""}Oe.normalizeId=xt;function Cc(t,e,r){return r=xt(r),t.resolve(e,r)}Oe.resolveUrl=Cc;const Ic=/^[a-z_][-a-z0-9._]*$/i;function Ac(t,e){if(typeof t=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=xt(t[r]||e),i={"":s},l=_i(n,s,!1),d={},f=new Set;return Ec(t,{allKeys:!0},(v,b,_,$)=>{if($===void 0)return;const y=l+b;let a=i[$];typeof v[r]=="string"&&(a=o.call(this,v[r])),c.call(this,v.$anchor),c.call(this,v.$dynamicAnchor),i[b]=a;function o(h){const g=this.opts.uriResolver.resolve;if(h=xt(a?g(a,h):h),f.has(h))throw p(h);f.add(h);let w=this.refs[h];return typeof w=="string"&&(w=this.refs[w]),typeof w=="object"?u(v,w.schema,h):h!==xt(y)&&(h[0]==="#"?(u(v,d[h],h),d[h]=v):this.refs[h]=y),h}function c(h){if(typeof h=="string"){if(!Ic.test(h))throw new Error(`invalid anchor "${h}"`);o.call(this,`#${h}`)}}}),d;function u(v,b,_){if(b!==void 0&&!wc(v,b))throw p(_)}function p(v){return new Error(`reference "${v}" resolves to more than one schema`)}}Oe.getSchemaRefs=Ac;Object.defineProperty(Ue,"__esModule",{value:!0});Ue.getData=Ue.KeywordCxt=Ue.validateFunctionCode=void 0;const $i=zt,ea=Ee,Kn=Qe,Lr=Ee,Nc=Hr,ar=Ze,un=dt,X=ne,te=Ve,Tc=Oe,et=K,Qt=vr;function jc(t){if(Si(t)&&(ki(t),Ei(t))){Rc(t);return}wi(t,()=>(0,$i.topBoolOrEmptySchema)(t))}Ue.validateFunctionCode=jc;function wi({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,X._)`${te.default.data}, ${te.default.valCxt}`,n.$async,()=>{t.code((0,X._)`"use strict"; ${ta(r,s)}`),Dc(t,s),t.code(i)}):t.func(e,(0,X._)`${te.default.data}, ${Mc(s)}`,n.$async,()=>t.code(ta(r,s)).code(i))}function Mc(t){return(0,X._)`{${te.default.instancePath}="", ${te.default.parentData}, ${te.default.parentDataProperty}, ${te.default.rootData}=${te.default.data}${t.dynamicRef?(0,X._)`, ${te.default.dynamicAnchors}={}`:X.nil}}={}`}function Dc(t,e){t.if(te.default.valCxt,()=>{t.var(te.default.instancePath,(0,X._)`${te.default.valCxt}.${te.default.instancePath}`),t.var(te.default.parentData,(0,X._)`${te.default.valCxt}.${te.default.parentData}`),t.var(te.default.parentDataProperty,(0,X._)`${te.default.valCxt}.${te.default.parentDataProperty}`),t.var(te.default.rootData,(0,X._)`${te.default.valCxt}.${te.default.rootData}`),e.dynamicRef&&t.var(te.default.dynamicAnchors,(0,X._)`${te.default.valCxt}.${te.default.dynamicAnchors}`)},()=>{t.var(te.default.instancePath,(0,X._)`""`),t.var(te.default.parentData,(0,X._)`undefined`),t.var(te.default.parentDataProperty,(0,X._)`undefined`),t.var(te.default.rootData,te.default.data),e.dynamicRef&&t.var(te.default.dynamicAnchors,(0,X._)`{}`)})}function Rc(t){const{schema:e,opts:r,gen:n}=t;wi(t,()=>{r.$comment&&e.$comment&&Oi(t),zc(t),n.let(te.default.vErrors,null),n.let(te.default.errors,0),r.unevaluated&&xc(t),Pi(t),Hc(t)})}function xc(t){const{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,X._)`${r}.evaluated`),e.if((0,X._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,X._)`${t.evaluated}.props`,(0,X._)`undefined`)),e.if((0,X._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,X._)`${t.evaluated}.items`,(0,X._)`undefined`))}function ta(t,e){const r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,X._)`/*# sourceURL=${r} */`:X.nil}function Lc(t,e){if(Si(t)&&(ki(t),Ei(t))){Fc(t,e);return}(0,$i.boolOrEmptySchema)(t,e)}function Ei({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const r in t)if(e.RULES.all[r])return!0;return!1}function Si(t){return typeof t.schema!="boolean"}function Fc(t,e){const{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&Oi(t),qc(t),Uc(t);const i=n.const("_errs",te.default.errors);Pi(t,i),n.var(e,(0,X._)`${i} === ${te.default.errors}`)}function ki(t){(0,et.checkUnknownRules)(t),Vc(t)}function Pi(t,e){if(t.opts.jtd)return ra(t,[],!1,e);const r=(0,ea.getSchemaTypes)(t.schema),n=(0,ea.coerceAndCheckDataType)(t,r);ra(t,r,!n,e)}function Vc(t){const{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,et.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function zc(t){const{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,et.checkStrictMode)(t,"default is ignored in the schema root")}function qc(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Tc.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Uc(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Oi({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){const i=r.$comment;if(s.$comment===!0)t.code((0,X._)`${te.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const l=(0,X.str)`${n}/$comment`,d=t.scopeValue("root",{ref:e.root});t.code((0,X._)`${te.default.self}.opts.$comment(${i}, ${l}, ${d}.schema)`)}}function Hc(t){const{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,X._)`${te.default.errors} === 0`,()=>e.return(te.default.data),()=>e.throw((0,X._)`new ${s}(${te.default.vErrors})`)):(e.assign((0,X._)`${n}.errors`,te.default.vErrors),i.unevaluated&&Kc(t),e.return((0,X._)`${te.default.errors} === 0`))}function Kc({gen:t,evaluated:e,props:r,items:n}){r instanceof X.Name&&t.assign((0,X._)`${e}.props`,r),n instanceof X.Name&&t.assign((0,X._)`${e}.items`,n)}function ra(t,e,r,n){const{gen:s,schema:i,data:l,allErrors:d,opts:f,self:u}=t,{RULES:p}=u;if(i.$ref&&(f.ignoreKeywordsWithRef||!(0,et.schemaHasRulesButRef)(i,p))){s.block(()=>Ai(t,"$ref",p.all.$ref.definition));return}f.jtd||Bc(t,e),s.block(()=>{for(const b of p.rules)v(b);v(p.post)});function v(b){(0,Kn.shouldUseGroup)(i,b)&&(b.type?(s.if((0,Lr.checkDataType)(b.type,l,f.strictNumbers)),na(t,b),e.length===1&&e[0]===b.type&&r&&(s.else(),(0,Lr.reportTypeError)(t)),s.endIf()):na(t,b),d||s.if((0,X._)`${te.default.errors} === ${n||0}`))}}function na(t,e){const{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,Nc.assignDefaults)(t,e.type),r.block(()=>{for(const i of e.rules)(0,Kn.shouldUseRule)(n,i)&&Ai(t,i.keyword,i.definition,e.type)})}function Bc(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Jc(t,e),t.opts.allowUnionTypes||Gc(t,e),Zc(t,t.dataTypes))}function Jc(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{Ci(t.dataTypes,r)||Bn(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Xc(t,e)}}function Gc(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Bn(t,"use allowUnionTypes to allow union type keyword")}function Zc(t,e){const r=t.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,Kn.shouldUseRule)(t.schema,s)){const{type:i}=s.definition;i.length&&!i.some(l=>Wc(e,l))&&Bn(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function Wc(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function Ci(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Xc(t,e){const r=[];for(const n of t.dataTypes)Ci(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function Bn(t,e){const r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,et.checkStrictMode)(t,e,t.opts.strictTypes)}class Ii{constructor(e,r,n){if((0,ar.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,et.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Ni(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,ar.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",te.default.errors))}result(e,r,n){this.failResult((0,X.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,X.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:r}=this;this.fail((0,X._)`${r} !== undefined && (${(0,X.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Qt.reportExtraError:Qt.reportError)(this,this.def.error,r)}$dataError(){(0,Qt.reportError)(this,this.def.$dataError||Qt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Qt.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=X.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=X.nil,r=X.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:i,def:l}=this;n.if((0,X.or)((0,X._)`${s} === undefined`,r)),e!==X.nil&&n.assign(e,!0),(i.length||l.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==X.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,X.or)(l(),d());function l(){if(n.length){if(!(r instanceof X.Name))throw new Error("ajv implementation error");const f=Array.isArray(n)?n:[n];return(0,X._)`${(0,Lr.checkDataTypes)(f,r,i.opts.strictNumbers,Lr.DataType.Wrong)}`}return X.nil}function d(){if(s.validateSchema){const f=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,X._)`!${f}(${r})`}return X.nil}}subschema(e,r){const n=(0,un.getSubschema)(this.it,e);(0,un.extendSubschemaData)(n,this.it,e),(0,un.extendSubschemaMode)(n,e);const s={...this.it,...n,items:void 0,props:void 0};return Lc(s,r),s}mergeEvaluated(e,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=et.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=et.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,X.Name)),!0}}Ue.KeywordCxt=Ii;function Ai(t,e,r,n){const s=new Ii(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,ar.funcKeywordCode)(s,r):"macro"in r?(0,ar.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,ar.funcKeywordCode)(s,r)}const Yc=/^\/(?:[^~]|~0|~1)*$/,Qc=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ni(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return te.default.rootData;if(t[0]==="/"){if(!Yc.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=te.default.rootData}else{const u=Qc.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);const p=+u[1];if(s=u[2],s==="#"){if(p>=e)throw new Error(f("property/index",p));return n[e-p]}if(p>e)throw new Error(f("data",p));if(i=r[e-p],!s)return i}let l=i;const d=s.split("/");for(const u of d)u&&(i=(0,X._)`${i}${(0,X.getProperty)((0,et.unescapeJsonPointer)(u))}`,l=(0,X._)`${l} && ${i}`);return l;function f(u,p){return`Cannot access ${u} ${p} levels up, current level is ${e}`}}Ue.getData=Ni;var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});class ed extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}Ut.default=ed;var St={};Object.defineProperty(St,"__esModule",{value:!0});const fn=Oe;class td extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,fn.resolveUrl)(e,r,n),this.missingSchema=(0,fn.normalizeId)((0,fn.getFullPath)(e,this.missingRef))}}St.default=td;var Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.resolveSchema=Me.getCompilingSchema=Me.resolveRef=Me.compileSchema=Me.SchemaEnv=void 0;const He=ne,rd=Ut,ht=Ve,Be=Oe,sa=K,nd=Ue;class Kr{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Be.normalizeId)(n==null?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}Me.SchemaEnv=Kr;function Jn(t){const e=Ti.call(this,t);if(e)return e;const r=(0,Be.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,l=new He.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i});let d;t.$async&&(d=l.scopeValue("Error",{ref:rd.default,code:(0,He._)`require("ajv/dist/runtime/validation_error").default`}));const f=l.scopeName("validate");t.validateName=f;const u={gen:l,allErrors:this.opts.allErrors,data:ht.default.data,parentData:ht.default.parentData,parentDataProperty:ht.default.parentDataProperty,dataNames:[ht.default.data],dataPathArr:[He.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:l.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,He.stringify)(t.schema)}:{ref:t.schema}),validateName:f,ValidationError:d,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:He.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,He._)`""`,opts:this.opts,self:this};let p;try{this._compilations.add(t),(0,nd.validateFunctionCode)(u),l.optimize(this.opts.code.optimize);const v=l.toString();p=`${l.scopeRefs(ht.default.scope)}return ${v}`,this.opts.code.process&&(p=this.opts.code.process(p,t));const _=new Function(`${ht.default.self}`,`${ht.default.scope}`,p)(this,this.scope.get());if(this.scope.value(f,{ref:_}),_.errors=null,_.schema=t.schema,_.schemaEnv=t,t.$async&&(_.$async=!0),this.opts.code.source===!0&&(_.source={validateName:f,validateCode:v,scopeValues:l._values}),this.opts.unevaluated){const{props:$,items:y}=u;_.evaluated={props:$ instanceof He.Name?void 0:$,items:y instanceof He.Name?void 0:y,dynamicProps:$ instanceof He.Name,dynamicItems:y instanceof He.Name},_.source&&(_.source.evaluated=(0,He.stringify)(_.evaluated))}return t.validate=_,t}catch(v){throw delete t.validate,delete t.validateName,p&&this.logger.error("Error compiling schema, function code:",p),v}finally{this._compilations.delete(t)}}Me.compileSchema=Jn;function sd(t,e,r){var n;r=(0,Be.resolveUrl)(this.opts.uriResolver,e,r);const s=t.refs[r];if(s)return s;let i=od.call(this,t,r);if(i===void 0){const l=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:d}=this.opts;l&&(i=new Kr({schema:l,schemaId:d,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=ad.call(this,i)}Me.resolveRef=sd;function ad(t){return(0,Be.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Jn.call(this,t)}function Ti(t){for(const e of this._compilations)if(id(e,t))return e}Me.getCompilingSchema=Ti;function id(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function od(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Br.call(this,t,e)}function Br(t,e){const r=this.opts.uriResolver.parse(e),n=(0,Be._getFullPath)(this.opts.uriResolver,r);let s=(0,Be.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return hn.call(this,r,t);const i=(0,Be.normalizeId)(n),l=this.refs[i]||this.schemas[i];if(typeof l=="string"){const d=Br.call(this,t,l);return typeof(d==null?void 0:d.schema)!="object"?void 0:hn.call(this,r,d)}if(typeof(l==null?void 0:l.schema)=="object"){if(l.validate||Jn.call(this,l),i===(0,Be.normalizeId)(e)){const{schema:d}=l,{schemaId:f}=this.opts,u=d[f];return u&&(s=(0,Be.resolveUrl)(this.opts.uriResolver,s,u)),new Kr({schema:d,schemaId:f,root:t,baseId:s})}return hn.call(this,r,l)}}Me.resolveSchema=Br;const ld=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function hn(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const d of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const f=r[(0,sa.unescapeFragment)(d)];if(f===void 0)return;r=f;const u=typeof r=="object"&&r[this.opts.schemaId];!ld.has(d)&&u&&(e=(0,Be.resolveUrl)(this.opts.uriResolver,e,u))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,sa.schemaHasRulesButRef)(r,this.RULES)){const d=(0,Be.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Br.call(this,n,d)}const{schemaId:l}=this.opts;if(i=i||new Kr({schema:r,schemaId:l,root:n,baseId:e}),i.schema!==i.root.schema)return i}const cd="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",dd="Meta-schema for $data reference (JSON AnySchema extension proposal)",ud="object",fd=["$data"],hd={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},md=!1,pd={$id:cd,description:dd,type:ud,required:fd,properties:hd,additionalProperties:md};var Gn={},Jr={exports:{}};const vd={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var gd={HEX:vd};const{HEX:yd}=gd;function ji(t){if(Di(t,".")<3)return{host:t,isIPV4:!1};const e=t.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=e;return r?{host:bd(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function aa(t,e=!1){let r="",n=!0;for(const s of t){if(yd[s]===void 0)return;s!=="0"&&n===!0&&(n=!1),n||(r+=s)}return e&&r.length===0&&(r="0"),r}function _d(t){let e=0;const r={error:!1,address:"",zone:""},n=[],s=[];let i=!1,l=!1,d=!1;function f(){if(s.length){if(i===!1){const u=aa(s);if(u!==void 0)n.push(u);else return r.error=!0,!1}s.length=0}return!0}for(let u=0;u<t.length;u++){const p=t[u];if(!(p==="["||p==="]"))if(p===":"){if(l===!0&&(d=!0),!f())break;if(e++,n.push(":"),e>7){r.error=!0;break}u-1>=0&&t[u-1]===":"&&(l=!0);continue}else if(p==="%"){if(!f())break;i=!0}else{s.push(p);continue}}return s.length&&(i?r.zone=s.join(""):d?n.push(s.join("")):n.push(aa(s))),r.address=n.join(""),r}function Mi(t,e={}){if(Di(t,":")<2)return{host:t,isIPV6:!1};const r=_d(t);if(r.error)return{host:t,isIPV6:!1};{let n=r.address,s=r.address;return r.zone&&(n+="%"+r.zone,s+="%25"+r.zone),{host:n,escapedHost:s,isIPV6:!0}}}function bd(t,e){let r="",n=!0;const s=t.length;for(let i=0;i<s;i++){const l=t[i];l==="0"&&n?(i+1<=s&&t[i+1]===e||i+1===s)&&(r+=l,n=!1):(l===e?n=!0:n=!1,r+=l)}return r}function Di(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}const ia=/^\.\.?\//u,oa=/^\/\.(?:\/|$)/u,la=/^\/\.\.(?:\/|$)/u,$d=/^\/?(?:.|\n)*?(?=\/|$)/u;function wd(t){const e=[];for(;t.length;)if(t.match(ia))t=t.replace(ia,"");else if(t.match(oa))t=t.replace(oa,"/");else if(t.match(la))t=t.replace(la,"/"),e.pop();else if(t==="."||t==="..")t="";else{const r=t.match($d);if(r){const n=r[0];t=t.slice(n.length),e.push(n)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function Ed(t,e){const r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function Sd(t,e){const r=[];if(t.userinfo!==void 0&&(r.push(t.userinfo),r.push("@")),t.host!==void 0){let n=unescape(t.host);const s=ji(n);if(s.isIPV4)n=s.host;else{const i=Mi(s.host,{});i.isIPV6===!0?n=`[${i.escapedHost}]`:n=t.host}r.push(n)}return(typeof t.port=="number"||typeof t.port=="string")&&(r.push(":"),r.push(String(t.port))),r.length?r.join(""):void 0}var kd={recomposeAuthority:Sd,normalizeComponentEncoding:Ed,removeDotSegments:wd,normalizeIPv4:ji,normalizeIPv6:Mi};const Pd=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,Od=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Ri(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function xi(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function Li(t){const e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function Cd(t){return t.secure=Ri(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function Id(t){if((t.port===(Ri(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){const[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function Ad(t,e){if(!t.path)return t.error="URN can not be parsed",t;const r=t.path.match(Od);if(r){const n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];const s=`${n}:${e.nid||t.nid}`,i=Zn[s];t.path=void 0,i&&(t=i.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function Nd(t,e){const r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),s=`${r}:${e.nid||n}`,i=Zn[s];i&&(t=i.serialize(t,e));const l=t,d=t.nss;return l.path=`${n||e.nid}:${d}`,e.skipEscape=!0,l}function Td(t,e){const r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!Pd.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function jd(t){const e=t;return e.nss=(t.uuid||"").toLowerCase(),e}const Fi={scheme:"http",domainHost:!0,parse:xi,serialize:Li},Md={scheme:"https",domainHost:Fi.domainHost,parse:xi,serialize:Li},Ar={scheme:"ws",domainHost:!0,parse:Cd,serialize:Id},Dd={scheme:"wss",domainHost:Ar.domainHost,parse:Ar.parse,serialize:Ar.serialize},Rd={scheme:"urn",parse:Ad,serialize:Nd,skipNormalize:!0},xd={scheme:"urn:uuid",parse:Td,serialize:jd,skipNormalize:!0},Zn={http:Fi,https:Md,ws:Ar,wss:Dd,urn:Rd,"urn:uuid":xd};var Ld=Zn;const{normalizeIPv6:Fd,normalizeIPv4:Vd,removeDotSegments:tr,recomposeAuthority:zd,normalizeComponentEncoding:$r}=kd,Wn=Ld;function qd(t,e){return typeof t=="string"?t=We(tt(t,e),e):typeof t=="object"&&(t=tt(We(t,e),e)),t}function Ud(t,e,r){const n=Object.assign({scheme:"null"},r),s=Vi(tt(t,n),tt(e,n),n,!0);return We(s,{...n,skipEscape:!0})}function Vi(t,e,r,n){const s={};return n||(t=tt(We(t,r),r),e=tt(We(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=tr(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=tr(e.path||""),s.query=e.query):(e.path?(e.path.charAt(0)==="/"?s.path=tr(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=tr(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function Hd(t,e,r){return typeof t=="string"?(t=unescape(t),t=We($r(tt(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=We($r(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=We($r(tt(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=We($r(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function We(t,e){const r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),s=[],i=Wn[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");const l=zd(r,n);if(l!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(l),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let d=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(d=tr(d)),l===void 0&&(d=d.replace(/^\/\//u,"/%2F")),s.push(d)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}const Kd=Array.from({length:127},(t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function Bd(t){let e=0;for(let r=0,n=t.length;r<n;++r)if(e=t.charCodeAt(r),e>126||Kd[e])return!0;return!1}const Jd=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function tt(t,e){const r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=t.indexOf("%")!==-1;let i=!1;r.reference==="suffix"&&(t=(r.scheme?r.scheme+":":"")+"//"+t);const l=t.match(Jd);if(l){if(n.scheme=l[1],n.userinfo=l[3],n.host=l[4],n.port=parseInt(l[5],10),n.path=l[6]||"",n.query=l[7],n.fragment=l[8],isNaN(n.port)&&(n.port=l[5]),n.host){const f=Vd(n.host);if(f.isIPV4===!1){const u=Fd(f.host,{isIPV4:!1});n.host=u.host.toLowerCase(),i=u.isIPV6}else n.host=f.host,i=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const d=Wn[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!d||!d.unicodeSupport)&&n.host&&(r.domainHost||d&&d.domainHost)&&i===!1&&Bd(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(f){n.error=n.error||"Host's domain name can not be converted to ASCII: "+f}(!d||d&&!d.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=escape(unescape(n.path))),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),d&&d.parse&&d.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const Xn={SCHEMES:Wn,normalize:qd,resolve:Ud,resolveComponents:Vi,equal:Hd,serialize:We,parse:tt};Jr.exports=Xn;Jr.exports.default=Xn;Jr.exports.fastUri=Xn;var Gd=Jr.exports;Object.defineProperty(Gn,"__esModule",{value:!0});const zi=Gd;zi.code='require("ajv/dist/runtime/uri").default';Gn.default=zi;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=Ue;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=ne;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Ut,s=St,i=_t,l=Me,d=ne,f=Oe,u=Ee,p=K,v=pd,b=Gn,_=(V,I)=>new RegExp(V,I);_.code="new RegExp";const $=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),a={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},o={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},c=200;function h(V){var I,N,k,m,S,R,B,G,re,ie,pe,se,ye,ke,Le,nt,Ce,Je,kt,Gt,Pt,Ot,Ct,Zt,Wt;const ft=V.strict,Xt=(I=V.code)===null||I===void 0?void 0:I.optimize,Yt=Xt===!0||Xt===void 0?1:Xt||0,br=(k=(N=V.code)===null||N===void 0?void 0:N.regExp)!==null&&k!==void 0?k:_,ve=(m=V.uriResolver)!==null&&m!==void 0?m:b.default;return{strictSchema:(R=(S=V.strictSchema)!==null&&S!==void 0?S:ft)!==null&&R!==void 0?R:!0,strictNumbers:(G=(B=V.strictNumbers)!==null&&B!==void 0?B:ft)!==null&&G!==void 0?G:!0,strictTypes:(ie=(re=V.strictTypes)!==null&&re!==void 0?re:ft)!==null&&ie!==void 0?ie:"log",strictTuples:(se=(pe=V.strictTuples)!==null&&pe!==void 0?pe:ft)!==null&&se!==void 0?se:"log",strictRequired:(ke=(ye=V.strictRequired)!==null&&ye!==void 0?ye:ft)!==null&&ke!==void 0?ke:!1,code:V.code?{...V.code,optimize:Yt,regExp:br}:{optimize:Yt,regExp:br},loopRequired:(Le=V.loopRequired)!==null&&Le!==void 0?Le:c,loopEnum:(nt=V.loopEnum)!==null&&nt!==void 0?nt:c,meta:(Ce=V.meta)!==null&&Ce!==void 0?Ce:!0,messages:(Je=V.messages)!==null&&Je!==void 0?Je:!0,inlineRefs:(kt=V.inlineRefs)!==null&&kt!==void 0?kt:!0,schemaId:(Gt=V.schemaId)!==null&&Gt!==void 0?Gt:"$id",addUsedSchema:(Pt=V.addUsedSchema)!==null&&Pt!==void 0?Pt:!0,validateSchema:(Ot=V.validateSchema)!==null&&Ot!==void 0?Ot:!0,validateFormats:(Ct=V.validateFormats)!==null&&Ct!==void 0?Ct:!0,unicodeRegExp:(Zt=V.unicodeRegExp)!==null&&Zt!==void 0?Zt:!0,int32range:(Wt=V.int32range)!==null&&Wt!==void 0?Wt:!0,uriResolver:ve}}class g{constructor(I={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,I=this.opts={...I,...h(I)};const{es5:N,lines:k}=this.opts.code;this.scope=new d.ValueScope({scope:{},prefixes:y,es5:N,lines:k}),this.logger=A(I.logger);const m=I.validateFormats;I.validateFormats=!1,this.RULES=(0,i.getRules)(),w.call(this,a,I,"NOT SUPPORTED"),w.call(this,o,I,"DEPRECATED","warn"),this._metaOpts=U.call(this),I.formats&&T.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),I.keywords&&F.call(this,I.keywords),typeof I.meta=="object"&&this.addMetaSchema(I.meta),C.call(this),I.validateFormats=m}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:I,meta:N,schemaId:k}=this.opts;let m=v;k==="id"&&(m={...v},m.id=m.$id,delete m.$id),N&&I&&this.addMetaSchema(m,m[k],!1)}defaultMeta(){const{meta:I,schemaId:N}=this.opts;return this.opts.defaultMeta=typeof I=="object"?I[N]||I:void 0}validate(I,N){let k;if(typeof I=="string"){if(k=this.getSchema(I),!k)throw new Error(`no schema with key or ref "${I}"`)}else k=this.compile(I);const m=k(N);return"$async"in k||(this.errors=k.errors),m}compile(I,N){const k=this._addSchema(I,N);return k.validate||this._compileSchemaEnv(k)}compileAsync(I,N){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:k}=this.opts;return m.call(this,I,N);async function m(ie,pe){await S.call(this,ie.$schema);const se=this._addSchema(ie,pe);return se.validate||R.call(this,se)}async function S(ie){ie&&!this.getSchema(ie)&&await m.call(this,{$ref:ie},!0)}async function R(ie){try{return this._compileSchemaEnv(ie)}catch(pe){if(!(pe instanceof s.default))throw pe;return B.call(this,pe),await G.call(this,pe.missingSchema),R.call(this,ie)}}function B({missingSchema:ie,missingRef:pe}){if(this.refs[ie])throw new Error(`AnySchema ${ie} is loaded but ${pe} cannot be resolved`)}async function G(ie){const pe=await re.call(this,ie);this.refs[ie]||await S.call(this,pe.$schema),this.refs[ie]||this.addSchema(pe,ie,N)}async function re(ie){const pe=this._loading[ie];if(pe)return pe;try{return await(this._loading[ie]=k(ie))}finally{delete this._loading[ie]}}}addSchema(I,N,k,m=this.opts.validateSchema){if(Array.isArray(I)){for(const R of I)this.addSchema(R,void 0,k,m);return this}let S;if(typeof I=="object"){const{schemaId:R}=this.opts;if(S=I[R],S!==void 0&&typeof S!="string")throw new Error(`schema ${R} must be string`)}return N=(0,f.normalizeId)(N||S),this._checkUnique(N),this.schemas[N]=this._addSchema(I,k,N,m,!0),this}addMetaSchema(I,N,k=this.opts.validateSchema){return this.addSchema(I,N,!0,k),this}validateSchema(I,N){if(typeof I=="boolean")return!0;let k;if(k=I.$schema,k!==void 0&&typeof k!="string")throw new Error("$schema must be a string");if(k=k||this.opts.defaultMeta||this.defaultMeta(),!k)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const m=this.validate(k,I);if(!m&&N){const S="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(S);else throw new Error(S)}return m}getSchema(I){let N;for(;typeof(N=O.call(this,I))=="string";)I=N;if(N===void 0){const{schemaId:k}=this.opts,m=new l.SchemaEnv({schema:{},schemaId:k});if(N=l.resolveSchema.call(this,m,I),!N)return;this.refs[I]=N}return N.validate||this._compileSchemaEnv(N)}removeSchema(I){if(I instanceof RegExp)return this._removeAllSchemas(this.schemas,I),this._removeAllSchemas(this.refs,I),this;switch(typeof I){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const N=O.call(this,I);return typeof N=="object"&&this._cache.delete(N.schema),delete this.schemas[I],delete this.refs[I],this}case"object":{const N=I;this._cache.delete(N);let k=I[this.opts.schemaId];return k&&(k=(0,f.normalizeId)(k),delete this.schemas[k],delete this.refs[k]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(I){for(const N of I)this.addKeyword(N);return this}addKeyword(I,N){let k;if(typeof I=="string")k=I,typeof N=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),N.keyword=k);else if(typeof I=="object"&&N===void 0){if(N=I,k=N.keyword,Array.isArray(k)&&!k.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(L.call(this,k,N),!N)return(0,p.eachItem)(k,S=>J.call(this,S)),this;ee.call(this,N);const m={...N,type:(0,u.getJSONTypes)(N.type),schemaType:(0,u.getJSONTypes)(N.schemaType)};return(0,p.eachItem)(k,m.type.length===0?S=>J.call(this,S,m):S=>m.type.forEach(R=>J.call(this,S,m,R))),this}getKeyword(I){const N=this.RULES.all[I];return typeof N=="object"?N.definition:!!N}removeKeyword(I){const{RULES:N}=this;delete N.keywords[I],delete N.all[I];for(const k of N.rules){const m=k.rules.findIndex(S=>S.keyword===I);m>=0&&k.rules.splice(m,1)}return this}addFormat(I,N){return typeof N=="string"&&(N=new RegExp(N)),this.formats[I]=N,this}errorsText(I=this.errors,{separator:N=", ",dataVar:k="data"}={}){return!I||I.length===0?"No errors":I.map(m=>`${k}${m.instancePath} ${m.message}`).reduce((m,S)=>m+N+S)}$dataMetaSchema(I,N){const k=this.RULES.all;I=JSON.parse(JSON.stringify(I));for(const m of N){const S=m.split("/").slice(1);let R=I;for(const B of S)R=R[B];for(const B in k){const G=k[B];if(typeof G!="object")continue;const{$data:re}=G.definition,ie=R[B];re&&ie&&(R[B]=_e(ie))}}return I}_removeAllSchemas(I,N){for(const k in I){const m=I[k];(!N||N.test(k))&&(typeof m=="string"?delete I[k]:m&&!m.meta&&(this._cache.delete(m.schema),delete I[k]))}}_addSchema(I,N,k,m=this.opts.validateSchema,S=this.opts.addUsedSchema){let R;const{schemaId:B}=this.opts;if(typeof I=="object")R=I[B];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof I!="boolean")throw new Error("schema must be object or boolean")}let G=this._cache.get(I);if(G!==void 0)return G;k=(0,f.normalizeId)(R||k);const re=f.getSchemaRefs.call(this,I,k);return G=new l.SchemaEnv({schema:I,schemaId:B,meta:N,baseId:k,localRefs:re}),this._cache.set(G.schema,G),S&&!k.startsWith("#")&&(k&&this._checkUnique(k),this.refs[k]=G),m&&this.validateSchema(I,!0),G}_checkUnique(I){if(this.schemas[I]||this.refs[I])throw new Error(`schema with key or id "${I}" already exists`)}_compileSchemaEnv(I){if(I.meta?this._compileMetaSchema(I):l.compileSchema.call(this,I),!I.validate)throw new Error("ajv implementation error");return I.validate}_compileMetaSchema(I){const N=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,I)}finally{this.opts=N}}}g.ValidationError=n.default,g.MissingRefError=s.default,t.default=g;function w(V,I,N,k="error"){for(const m in V){const S=m;S in I&&this.logger[k](`${N}: option ${m}. ${V[S]}`)}}function O(V){return V=(0,f.normalizeId)(V),this.schemas[V]||this.refs[V]}function C(){const V=this.opts.schemas;if(V)if(Array.isArray(V))this.addSchema(V);else for(const I in V)this.addSchema(V[I],I)}function T(){for(const V in this.opts.formats){const I=this.opts.formats[V];I&&this.addFormat(V,I)}}function F(V){if(Array.isArray(V)){this.addVocabulary(V);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const I in V){const N=V[I];N.keyword||(N.keyword=I),this.addKeyword(N)}}function U(){const V={...this.opts};for(const I of $)delete V[I];return V}const P={log(){},warn(){},error(){}};function A(V){if(V===!1)return P;if(V===void 0)return console;if(V.log&&V.warn&&V.error)return V;throw new Error("logger must implement log, warn and error methods")}const x=/^[a-z_$][a-z0-9_$:-]*$/i;function L(V,I){const{RULES:N}=this;if((0,p.eachItem)(V,k=>{if(N.keywords[k])throw new Error(`Keyword ${k} is already defined`);if(!x.test(k))throw new Error(`Keyword ${k} has invalid name`)}),!!I&&I.$data&&!("code"in I||"validate"in I))throw new Error('$data keyword must have "code" or "validate" function')}function J(V,I,N){var k;const m=I==null?void 0:I.post;if(N&&m)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:S}=this;let R=m?S.post:S.rules.find(({type:G})=>G===N);if(R||(R={type:N,rules:[]},S.rules.push(R)),S.keywords[V]=!0,!I)return;const B={keyword:V,definition:{...I,type:(0,u.getJSONTypes)(I.type),schemaType:(0,u.getJSONTypes)(I.schemaType)}};I.before?Q.call(this,R,B,I.before):R.rules.push(B),S.all[V]=B,(k=I.implements)===null||k===void 0||k.forEach(G=>this.addKeyword(G))}function Q(V,I,N){const k=V.rules.findIndex(m=>m.keyword===N);k>=0?V.rules.splice(k,0,I):(V.rules.push(I),this.logger.warn(`rule ${N} is not defined`))}function ee(V){let{metaSchema:I}=V;I!==void 0&&(V.$data&&this.opts.$data&&(I=_e(I)),V.validateSchema=this.compile(I,!0))}const de={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function _e(V){return{anyOf:[V,de]}}})(xn);var Yn={},Gr={},Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});const Zd={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Qn.default=Zd;var rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.callRef=rt.getValidate=void 0;const Wd=St,ca=oe,xe=ne,At=Ve,da=Me,wr=K,Xd={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:l,opts:d,self:f}=n,{root:u}=i;if((r==="#"||r==="#/")&&s===u.baseId)return v();const p=da.resolveRef.call(f,u,s,r);if(p===void 0)throw new Wd.default(n.opts.uriResolver,s,r);if(p instanceof da.SchemaEnv)return b(p);return _(p);function v(){if(i===u)return Nr(t,l,i,i.$async);const $=e.scopeValue("root",{ref:u});return Nr(t,(0,xe._)`${$}.validate`,u,u.$async)}function b($){const y=qi(t,$);Nr(t,y,$,$.$async)}function _($){const y=e.scopeValue("schema",d.code.source===!0?{ref:$,code:(0,xe.stringify)($)}:{ref:$}),a=e.name("valid"),o=t.subschema({schema:$,dataTypes:[],schemaPath:xe.nil,topSchemaRef:y,errSchemaPath:r},a);t.mergeEvaluated(o),t.ok(a)}}};function qi(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,xe._)`${r.scopeValue("wrapper",{ref:e})}.validate`}rt.getValidate=qi;function Nr(t,e,r,n){const{gen:s,it:i}=t,{allErrors:l,schemaEnv:d,opts:f}=i,u=f.passContext?At.default.this:xe.nil;n?p():v();function p(){if(!d.$async)throw new Error("async schema referenced by sync schema");const $=s.let("valid");s.try(()=>{s.code((0,xe._)`await ${(0,ca.callValidateCode)(t,e,u)}`),_(e),l||s.assign($,!0)},y=>{s.if((0,xe._)`!(${y} instanceof ${i.ValidationError})`,()=>s.throw(y)),b(y),l||s.assign($,!1)}),t.ok($)}function v(){t.result((0,ca.callValidateCode)(t,e,u),()=>_(e),()=>b(e))}function b($){const y=(0,xe._)`${$}.errors`;s.assign(At.default.vErrors,(0,xe._)`${At.default.vErrors} === null ? ${y} : ${At.default.vErrors}.concat(${y})`),s.assign(At.default.errors,(0,xe._)`${At.default.vErrors}.length`)}function _($){var y;if(!i.opts.unevaluated)return;const a=(y=r==null?void 0:r.validate)===null||y===void 0?void 0:y.evaluated;if(i.props!==!0)if(a&&!a.dynamicProps)a.props!==void 0&&(i.props=wr.mergeEvaluated.props(s,a.props,i.props));else{const o=s.var("props",(0,xe._)`${$}.evaluated.props`);i.props=wr.mergeEvaluated.props(s,o,i.props,xe.Name)}if(i.items!==!0)if(a&&!a.dynamicItems)a.items!==void 0&&(i.items=wr.mergeEvaluated.items(s,a.items,i.items));else{const o=s.var("items",(0,xe._)`${$}.evaluated.items`);i.items=wr.mergeEvaluated.items(s,o,i.items,xe.Name)}}}rt.callRef=Nr;rt.default=Xd;Object.defineProperty(Gr,"__esModule",{value:!0});const Yd=Qn,Qd=rt,eu=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Yd.default,Qd.default];Gr.default=eu;var Zr={},es={};Object.defineProperty(es,"__esModule",{value:!0});const Fr=ne,at=Fr.operators,Vr={maximum:{okStr:"<=",ok:at.LTE,fail:at.GT},minimum:{okStr:">=",ok:at.GTE,fail:at.LT},exclusiveMaximum:{okStr:"<",ok:at.LT,fail:at.GTE},exclusiveMinimum:{okStr:">",ok:at.GT,fail:at.LTE}},tu={message:({keyword:t,schemaCode:e})=>(0,Fr.str)`must be ${Vr[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Fr._)`{comparison: ${Vr[t].okStr}, limit: ${e}}`},ru={keyword:Object.keys(Vr),type:"number",schemaType:"number",$data:!0,error:tu,code(t){const{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Fr._)`${r} ${Vr[e].fail} ${n} || isNaN(${r})`)}};es.default=ru;var ts={};Object.defineProperty(ts,"__esModule",{value:!0});const ir=ne,nu={message:({schemaCode:t})=>(0,ir.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,ir._)`{multipleOf: ${t}}`},su={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:nu,code(t){const{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,l=e.let("res"),d=i?(0,ir._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${i}`:(0,ir._)`${l} !== parseInt(${l})`;t.fail$data((0,ir._)`(${n} === 0 || (${l} = ${r}/${n}, ${d}))`)}};ts.default=su;var rs={},ns={};Object.defineProperty(ns,"__esModule",{value:!0});function Ui(t){const e=t.length;let r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}ns.default=Ui;Ui.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(rs,"__esModule",{value:!0});const pt=ne,au=K,iu=ns,ou={message({keyword:t,schemaCode:e}){const r=t==="maxLength"?"more":"fewer";return(0,pt.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,pt._)`{limit: ${t}}`},lu={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:ou,code(t){const{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?pt.operators.GT:pt.operators.LT,l=s.opts.unicode===!1?(0,pt._)`${r}.length`:(0,pt._)`${(0,au.useFunc)(t.gen,iu.default)}(${r})`;t.fail$data((0,pt._)`${l} ${i} ${n}`)}};rs.default=lu;var ss={};Object.defineProperty(ss,"__esModule",{value:!0});const cu=oe,zr=ne,du={message:({schemaCode:t})=>(0,zr.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,zr._)`{pattern: ${t}}`},uu={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:du,code(t){const{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,l=i.opts.unicodeRegExp?"u":"",d=r?(0,zr._)`(new RegExp(${s}, ${l}))`:(0,cu.usePattern)(t,n);t.fail$data((0,zr._)`!${d}.test(${e})`)}};ss.default=uu;var as={};Object.defineProperty(as,"__esModule",{value:!0});const or=ne,fu={message({keyword:t,schemaCode:e}){const r=t==="maxProperties"?"more":"fewer";return(0,or.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,or._)`{limit: ${t}}`},hu={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:fu,code(t){const{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?or.operators.GT:or.operators.LT;t.fail$data((0,or._)`Object.keys(${r}).length ${s} ${n}`)}};as.default=hu;var is={};Object.defineProperty(is,"__esModule",{value:!0});const er=oe,lr=ne,mu=K,pu={message:({params:{missingProperty:t}})=>(0,lr.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,lr._)`{missingProperty: ${t}}`},vu={keyword:"required",type:"object",schemaType:"array",$data:!0,error:pu,code(t){const{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:l}=t,{opts:d}=l;if(!i&&r.length===0)return;const f=r.length>=d.loopRequired;if(l.allErrors?u():p(),d.strictRequired){const _=t.parentSchema.properties,{definedProperties:$}=t.it;for(const y of r)if((_==null?void 0:_[y])===void 0&&!$.has(y)){const a=l.schemaEnv.baseId+l.errSchemaPath,o=`required property "${y}" is not defined at "${a}" (strictRequired)`;(0,mu.checkStrictMode)(l,o,l.opts.strictRequired)}}function u(){if(f||i)t.block$data(lr.nil,v);else for(const _ of r)(0,er.checkReportMissingProp)(t,_)}function p(){const _=e.let("missing");if(f||i){const $=e.let("valid",!0);t.block$data($,()=>b(_,$)),t.ok($)}else e.if((0,er.checkMissingProp)(t,r,_)),(0,er.reportMissingProp)(t,_),e.else()}function v(){e.forOf("prop",n,_=>{t.setParams({missingProperty:_}),e.if((0,er.noPropertyInData)(e,s,_,d.ownProperties),()=>t.error())})}function b(_,$){t.setParams({missingProperty:_}),e.forOf(_,n,()=>{e.assign($,(0,er.propertyInData)(e,s,_,d.ownProperties)),e.if((0,lr.not)($),()=>{t.error(),e.break()})},lr.nil)}}};is.default=vu;var os={};Object.defineProperty(os,"__esModule",{value:!0});const cr=ne,gu={message({keyword:t,schemaCode:e}){const r=t==="maxItems"?"more":"fewer";return(0,cr.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,cr._)`{limit: ${t}}`},yu={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:gu,code(t){const{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?cr.operators.GT:cr.operators.LT;t.fail$data((0,cr._)`${r}.length ${s} ${n}`)}};os.default=yu;var ls={},gr={};Object.defineProperty(gr,"__esModule",{value:!0});const Hi=vi;Hi.code='require("ajv/dist/runtime/equal").default';gr.default=Hi;Object.defineProperty(ls,"__esModule",{value:!0});const mn=Ee,Pe=ne,_u=K,bu=gr,$u={message:({params:{i:t,j:e}})=>(0,Pe.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Pe._)`{i: ${t}, j: ${e}}`},wu={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:$u,code(t){const{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:l,it:d}=t;if(!n&&!s)return;const f=e.let("valid"),u=i.items?(0,mn.getSchemaTypes)(i.items):[];t.block$data(f,p,(0,Pe._)`${l} === false`),t.ok(f);function p(){const $=e.let("i",(0,Pe._)`${r}.length`),y=e.let("j");t.setParams({i:$,j:y}),e.assign(f,!0),e.if((0,Pe._)`${$} > 1`,()=>(v()?b:_)($,y))}function v(){return u.length>0&&!u.some($=>$==="object"||$==="array")}function b($,y){const a=e.name("item"),o=(0,mn.checkDataTypes)(u,a,d.opts.strictNumbers,mn.DataType.Wrong),c=e.const("indices",(0,Pe._)`{}`);e.for((0,Pe._)`;${$}--;`,()=>{e.let(a,(0,Pe._)`${r}[${$}]`),e.if(o,(0,Pe._)`continue`),u.length>1&&e.if((0,Pe._)`typeof ${a} == "string"`,(0,Pe._)`${a} += "_"`),e.if((0,Pe._)`typeof ${c}[${a}] == "number"`,()=>{e.assign(y,(0,Pe._)`${c}[${a}]`),t.error(),e.assign(f,!1).break()}).code((0,Pe._)`${c}[${a}] = ${$}`)})}function _($,y){const a=(0,_u.useFunc)(e,bu.default),o=e.name("outer");e.label(o).for((0,Pe._)`;${$}--;`,()=>e.for((0,Pe._)`${y} = ${$}; ${y}--;`,()=>e.if((0,Pe._)`${a}(${r}[${$}], ${r}[${y}])`,()=>{t.error(),e.assign(f,!1).break(o)})))}}};ls.default=wu;var cs={};Object.defineProperty(cs,"__esModule",{value:!0});const Sn=ne,Eu=K,Su=gr,ku={message:"must be equal to constant",params:({schemaCode:t})=>(0,Sn._)`{allowedValue: ${t}}`},Pu={keyword:"const",$data:!0,error:ku,code(t){const{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,Sn._)`!${(0,Eu.useFunc)(e,Su.default)}(${r}, ${s})`):t.fail((0,Sn._)`${i} !== ${r}`)}};cs.default=Pu;var ds={};Object.defineProperty(ds,"__esModule",{value:!0});const rr=ne,Ou=K,Cu=gr,Iu={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,rr._)`{allowedValues: ${t}}`},Au={keyword:"enum",schemaType:"array",$data:!0,error:Iu,code(t){const{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:l}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const d=s.length>=l.opts.loopEnum;let f;const u=()=>f??(f=(0,Ou.useFunc)(e,Cu.default));let p;if(d||n)p=e.let("valid"),t.block$data(p,v);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const _=e.const("vSchema",i);p=(0,rr.or)(...s.map(($,y)=>b(_,y)))}t.pass(p);function v(){e.assign(p,!1),e.forOf("v",i,_=>e.if((0,rr._)`${u()}(${r}, ${_})`,()=>e.assign(p,!0).break()))}function b(_,$){const y=s[$];return typeof y=="object"&&y!==null?(0,rr._)`${u()}(${r}, ${_}[${$}])`:(0,rr._)`${r} === ${y}`}}};ds.default=Au;Object.defineProperty(Zr,"__esModule",{value:!0});const Nu=es,Tu=ts,ju=rs,Mu=ss,Du=as,Ru=is,xu=os,Lu=ls,Fu=cs,Vu=ds,zu=[Nu.default,Tu.default,ju.default,Mu.default,Du.default,Ru.default,xu.default,Lu.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Fu.default,Vu.default];Zr.default=zu;var Wr={},Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.validateAdditionalItems=void 0;const vt=ne,kn=K,qu={message:({params:{len:t}})=>(0,vt.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,vt._)`{limit: ${t}}`},Uu={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:qu,code(t){const{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,kn.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Ki(t,n)}};function Ki(t,e){const{gen:r,schema:n,data:s,keyword:i,it:l}=t;l.items=!0;const d=r.const("len",(0,vt._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,vt._)`${d} <= ${e.length}`);else if(typeof n=="object"&&!(0,kn.alwaysValidSchema)(l,n)){const u=r.var("valid",(0,vt._)`${d} <= ${e.length}`);r.if((0,vt.not)(u),()=>f(u)),t.ok(u)}function f(u){r.forRange("i",e.length,d,p=>{t.subschema({keyword:i,dataProp:p,dataPropType:kn.Type.Num},u),l.allErrors||r.if((0,vt.not)(u),()=>r.break())})}}Ht.validateAdditionalItems=Ki;Ht.default=Uu;var us={},Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.validateTuple=void 0;const ua=ne,Tr=K,Hu=oe,Ku={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:r}=t;if(Array.isArray(e))return Bi(t,"additionalItems",e);r.items=!0,!(0,Tr.alwaysValidSchema)(r,e)&&t.ok((0,Hu.validateArray)(t))}};function Bi(t,e,r=t.schema){const{gen:n,parentSchema:s,data:i,keyword:l,it:d}=t;p(s),d.opts.unevaluated&&r.length&&d.items!==!0&&(d.items=Tr.mergeEvaluated.items(n,r.length,d.items));const f=n.name("valid"),u=n.const("len",(0,ua._)`${i}.length`);r.forEach((v,b)=>{(0,Tr.alwaysValidSchema)(d,v)||(n.if((0,ua._)`${u} > ${b}`,()=>t.subschema({keyword:l,schemaProp:b,dataProp:b},f)),t.ok(f))});function p(v){const{opts:b,errSchemaPath:_}=d,$=r.length,y=$===v.minItems&&($===v.maxItems||v[e]===!1);if(b.strictTuples&&!y){const a=`"${l}" is ${$}-tuple, but minItems or maxItems/${e} are not specified or different at path "${_}"`;(0,Tr.checkStrictMode)(d,a,b.strictTuples)}}}Kt.validateTuple=Bi;Kt.default=Ku;Object.defineProperty(us,"__esModule",{value:!0});const Bu=Kt,Ju={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Bu.validateTuple)(t,"items")};us.default=Ju;var fs={};Object.defineProperty(fs,"__esModule",{value:!0});const fa=ne,Gu=K,Zu=oe,Wu=Ht,Xu={message:({params:{len:t}})=>(0,fa.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,fa._)`{limit: ${t}}`},Yu={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Xu,code(t){const{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,Gu.alwaysValidSchema)(n,e)&&(s?(0,Wu.validateAdditionalItems)(t,s):t.ok((0,Zu.validateArray)(t)))}};fs.default=Yu;var hs={};Object.defineProperty(hs,"__esModule",{value:!0});const ze=ne,Er=K,Qu={message:({params:{min:t,max:e}})=>e===void 0?(0,ze.str)`must contain at least ${t} valid item(s)`:(0,ze.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,ze._)`{minContains: ${t}}`:(0,ze._)`{minContains: ${t}, maxContains: ${e}}`},ef={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Qu,code(t){const{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;let l,d;const{minContains:f,maxContains:u}=n;i.opts.next?(l=f===void 0?1:f,d=u):l=1;const p=e.const("len",(0,ze._)`${s}.length`);if(t.setParams({min:l,max:d}),d===void 0&&l===0){(0,Er.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(d!==void 0&&l>d){(0,Er.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Er.alwaysValidSchema)(i,r)){let y=(0,ze._)`${p} >= ${l}`;d!==void 0&&(y=(0,ze._)`${y} && ${p} <= ${d}`),t.pass(y);return}i.items=!0;const v=e.name("valid");d===void 0&&l===1?_(v,()=>e.if(v,()=>e.break())):l===0?(e.let(v,!0),d!==void 0&&e.if((0,ze._)`${s}.length > 0`,b)):(e.let(v,!1),b()),t.result(v,()=>t.reset());function b(){const y=e.name("_valid"),a=e.let("count",0);_(y,()=>e.if(y,()=>$(a)))}function _(y,a){e.forRange("i",0,p,o=>{t.subschema({keyword:"contains",dataProp:o,dataPropType:Er.Type.Num,compositeRule:!0},y),a()})}function $(y){e.code((0,ze._)`${y}++`),d===void 0?e.if((0,ze._)`${y} >= ${l}`,()=>e.assign(v,!0).break()):(e.if((0,ze._)`${y} > ${d}`,()=>e.assign(v,!1).break()),l===1?e.assign(v,!0):e.if((0,ze._)`${y} >= ${l}`,()=>e.assign(v,!0)))}}};hs.default=ef;var Xr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=ne,r=K,n=oe;t.error={message:({params:{property:f,depsCount:u,deps:p}})=>{const v=u===1?"property":"properties";return(0,e.str)`must have ${v} ${p} when property ${f} is present`},params:({params:{property:f,depsCount:u,deps:p,missingProperty:v}})=>(0,e._)`{property: ${f},
    missingProperty: ${v},
    depsCount: ${u},
    deps: ${p}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(f){const[u,p]=i(f);l(f,u),d(f,p)}};function i({schema:f}){const u={},p={};for(const v in f){if(v==="__proto__")continue;const b=Array.isArray(f[v])?u:p;b[v]=f[v]}return[u,p]}function l(f,u=f.schema){const{gen:p,data:v,it:b}=f;if(Object.keys(u).length===0)return;const _=p.let("missing");for(const $ in u){const y=u[$];if(y.length===0)continue;const a=(0,n.propertyInData)(p,v,$,b.opts.ownProperties);f.setParams({property:$,depsCount:y.length,deps:y.join(", ")}),b.allErrors?p.if(a,()=>{for(const o of y)(0,n.checkReportMissingProp)(f,o)}):(p.if((0,e._)`${a} && (${(0,n.checkMissingProp)(f,y,_)})`),(0,n.reportMissingProp)(f,_),p.else())}}t.validatePropertyDeps=l;function d(f,u=f.schema){const{gen:p,data:v,keyword:b,it:_}=f,$=p.name("valid");for(const y in u)(0,r.alwaysValidSchema)(_,u[y])||(p.if((0,n.propertyInData)(p,v,y,_.opts.ownProperties),()=>{const a=f.subschema({keyword:b,schemaProp:y},$);f.mergeValidEvaluated(a,$)},()=>p.var($,!0)),f.ok($))}t.validateSchemaDeps=d,t.default=s})(Xr);var ms={};Object.defineProperty(ms,"__esModule",{value:!0});const Ji=ne,tf=K,rf={message:"property name must be valid",params:({params:t})=>(0,Ji._)`{propertyName: ${t.propertyName}}`},nf={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:rf,code(t){const{gen:e,schema:r,data:n,it:s}=t;if((0,tf.alwaysValidSchema)(s,r))return;const i=e.name("valid");e.forIn("key",n,l=>{t.setParams({propertyName:l}),t.subschema({keyword:"propertyNames",data:l,dataTypes:["string"],propertyName:l,compositeRule:!0},i),e.if((0,Ji.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};ms.default=nf;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});const Sr=oe,Ke=ne,sf=Ve,kr=K,af={message:"must NOT have additional properties",params:({params:t})=>(0,Ke._)`{additionalProperty: ${t.additionalProperty}}`},of={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:af,code(t){const{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:l}=t;if(!i)throw new Error("ajv implementation error");const{allErrors:d,opts:f}=l;if(l.props=!0,f.removeAdditional!=="all"&&(0,kr.alwaysValidSchema)(l,r))return;const u=(0,Sr.allSchemaProperties)(n.properties),p=(0,Sr.allSchemaProperties)(n.patternProperties);v(),t.ok((0,Ke._)`${i} === ${sf.default.errors}`);function v(){e.forIn("key",s,a=>{!u.length&&!p.length?$(a):e.if(b(a),()=>$(a))})}function b(a){let o;if(u.length>8){const c=(0,kr.schemaRefOrVal)(l,n.properties,"properties");o=(0,Sr.isOwnProperty)(e,c,a)}else u.length?o=(0,Ke.or)(...u.map(c=>(0,Ke._)`${a} === ${c}`)):o=Ke.nil;return p.length&&(o=(0,Ke.or)(o,...p.map(c=>(0,Ke._)`${(0,Sr.usePattern)(t,c)}.test(${a})`))),(0,Ke.not)(o)}function _(a){e.code((0,Ke._)`delete ${s}[${a}]`)}function $(a){if(f.removeAdditional==="all"||f.removeAdditional&&r===!1){_(a);return}if(r===!1){t.setParams({additionalProperty:a}),t.error(),d||e.break();return}if(typeof r=="object"&&!(0,kr.alwaysValidSchema)(l,r)){const o=e.name("valid");f.removeAdditional==="failing"?(y(a,o,!1),e.if((0,Ke.not)(o),()=>{t.reset(),_(a)})):(y(a,o),d||e.if((0,Ke.not)(o),()=>e.break()))}}function y(a,o,c){const h={keyword:"additionalProperties",dataProp:a,dataPropType:kr.Type.Str};c===!1&&Object.assign(h,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(h,o)}}};Yr.default=of;var ps={};Object.defineProperty(ps,"__esModule",{value:!0});const lf=Ue,ha=oe,pn=K,ma=Yr,cf={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&ma.default.code(new lf.KeywordCxt(i,ma.default,"additionalProperties"));const l=(0,ha.allSchemaProperties)(r);for(const v of l)i.definedProperties.add(v);i.opts.unevaluated&&l.length&&i.props!==!0&&(i.props=pn.mergeEvaluated.props(e,(0,pn.toHash)(l),i.props));const d=l.filter(v=>!(0,pn.alwaysValidSchema)(i,r[v]));if(d.length===0)return;const f=e.name("valid");for(const v of d)u(v)?p(v):(e.if((0,ha.propertyInData)(e,s,v,i.opts.ownProperties)),p(v),i.allErrors||e.else().var(f,!0),e.endIf()),t.it.definedProperties.add(v),t.ok(f);function u(v){return i.opts.useDefaults&&!i.compositeRule&&r[v].default!==void 0}function p(v){t.subschema({keyword:"properties",schemaProp:v,dataProp:v},f)}}};ps.default=cf;var vs={};Object.defineProperty(vs,"__esModule",{value:!0});const pa=oe,Pr=ne,va=K,ga=K,df={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:l}=i,d=(0,pa.allSchemaProperties)(r),f=d.filter(y=>(0,va.alwaysValidSchema)(i,r[y]));if(d.length===0||f.length===d.length&&(!i.opts.unevaluated||i.props===!0))return;const u=l.strictSchema&&!l.allowMatchingProperties&&s.properties,p=e.name("valid");i.props!==!0&&!(i.props instanceof Pr.Name)&&(i.props=(0,ga.evaluatedPropsToName)(e,i.props));const{props:v}=i;b();function b(){for(const y of d)u&&_(y),i.allErrors?$(y):(e.var(p,!0),$(y),e.if(p))}function _(y){for(const a in u)new RegExp(y).test(a)&&(0,va.checkStrictMode)(i,`property ${a} matches pattern ${y} (use allowMatchingProperties)`)}function $(y){e.forIn("key",n,a=>{e.if((0,Pr._)`${(0,pa.usePattern)(t,y)}.test(${a})`,()=>{const o=f.includes(y);o||t.subschema({keyword:"patternProperties",schemaProp:y,dataProp:a,dataPropType:ga.Type.Str},p),i.opts.unevaluated&&v!==!0?e.assign((0,Pr._)`${v}[${a}]`,!0):!o&&!i.allErrors&&e.if((0,Pr.not)(p),()=>e.break())})})}}};vs.default=df;var gs={};Object.defineProperty(gs,"__esModule",{value:!0});const uf=K,ff={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:r,it:n}=t;if((0,uf.alwaysValidSchema)(n,r)){t.fail();return}const s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};gs.default=ff;var ys={};Object.defineProperty(ys,"__esModule",{value:!0});const hf=oe,mf={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:hf.validateUnion,error:{message:"must match a schema in anyOf"}};ys.default=mf;var _s={};Object.defineProperty(_s,"__esModule",{value:!0});const jr=ne,pf=K,vf={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,jr._)`{passingSchemas: ${t.passing}}`},gf={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:vf,code(t){const{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const i=r,l=e.let("valid",!1),d=e.let("passing",null),f=e.name("_valid");t.setParams({passing:d}),e.block(u),t.result(l,()=>t.reset(),()=>t.error(!0));function u(){i.forEach((p,v)=>{let b;(0,pf.alwaysValidSchema)(s,p)?e.var(f,!0):b=t.subschema({keyword:"oneOf",schemaProp:v,compositeRule:!0},f),v>0&&e.if((0,jr._)`${f} && ${l}`).assign(l,!1).assign(d,(0,jr._)`[${d}, ${v}]`).else(),e.if(f,()=>{e.assign(l,!0),e.assign(d,v),b&&t.mergeEvaluated(b,jr.Name)})})}}};_s.default=gf;var bs={};Object.defineProperty(bs,"__esModule",{value:!0});const yf=K,_f={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=e.name("valid");r.forEach((i,l)=>{if((0,yf.alwaysValidSchema)(n,i))return;const d=t.subschema({keyword:"allOf",schemaProp:l},s);t.ok(s),t.mergeEvaluated(d)})}};bs.default=_f;var $s={};Object.defineProperty($s,"__esModule",{value:!0});const qr=ne,Gi=K,bf={message:({params:t})=>(0,qr.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,qr._)`{failingKeyword: ${t.ifClause}}`},$f={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:bf,code(t){const{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,Gi.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=ya(n,"then"),i=ya(n,"else");if(!s&&!i)return;const l=e.let("valid",!0),d=e.name("_valid");if(f(),t.reset(),s&&i){const p=e.let("ifClause");t.setParams({ifClause:p}),e.if(d,u("then",p),u("else",p))}else s?e.if(d,u("then")):e.if((0,qr.not)(d),u("else"));t.pass(l,()=>t.error(!0));function f(){const p=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);t.mergeEvaluated(p)}function u(p,v){return()=>{const b=t.subschema({keyword:p},d);e.assign(l,d),t.mergeValidEvaluated(b,l),v?e.assign(v,(0,qr._)`${p}`):t.setParams({ifClause:p})}}}};function ya(t,e){const r=t.schema[e];return r!==void 0&&!(0,Gi.alwaysValidSchema)(t,r)}$s.default=$f;var ws={};Object.defineProperty(ws,"__esModule",{value:!0});const wf=K,Ef={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,wf.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};ws.default=Ef;Object.defineProperty(Wr,"__esModule",{value:!0});const Sf=Ht,kf=us,Pf=Kt,Of=fs,Cf=hs,If=Xr,Af=ms,Nf=Yr,Tf=ps,jf=vs,Mf=gs,Df=ys,Rf=_s,xf=bs,Lf=$s,Ff=ws;function Vf(t=!1){const e=[Mf.default,Df.default,Rf.default,xf.default,Lf.default,Ff.default,Af.default,Nf.default,If.default,Tf.default,jf.default];return t?e.push(kf.default,Of.default):e.push(Sf.default,Pf.default),e.push(Cf.default),e}Wr.default=Vf;var Qr={},Es={};Object.defineProperty(Es,"__esModule",{value:!0});const be=ne,zf={message:({schemaCode:t})=>(0,be.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,be._)`{format: ${t}}`},qf={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:zf,code(t,e){const{gen:r,data:n,$data:s,schema:i,schemaCode:l,it:d}=t,{opts:f,errSchemaPath:u,schemaEnv:p,self:v}=d;if(!f.validateFormats)return;s?b():_();function b(){const $=r.scopeValue("formats",{ref:v.formats,code:f.code.formats}),y=r.const("fDef",(0,be._)`${$}[${l}]`),a=r.let("fType"),o=r.let("format");r.if((0,be._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(a,(0,be._)`${y}.type || "string"`).assign(o,(0,be._)`${y}.validate`),()=>r.assign(a,(0,be._)`"string"`).assign(o,y)),t.fail$data((0,be.or)(c(),h()));function c(){return f.strictSchema===!1?be.nil:(0,be._)`${l} && !${o}`}function h(){const g=p.$async?(0,be._)`(${y}.async ? await ${o}(${n}) : ${o}(${n}))`:(0,be._)`${o}(${n})`,w=(0,be._)`(typeof ${o} == "function" ? ${g} : ${o}.test(${n}))`;return(0,be._)`${o} && ${o} !== true && ${a} === ${e} && !${w}`}}function _(){const $=v.formats[i];if(!$){c();return}if($===!0)return;const[y,a,o]=h($);y===e&&t.pass(g());function c(){if(f.strictSchema===!1){v.logger.warn(w());return}throw new Error(w());function w(){return`unknown format "${i}" ignored in schema at path "${u}"`}}function h(w){const O=w instanceof RegExp?(0,be.regexpCode)(w):f.code.formats?(0,be._)`${f.code.formats}${(0,be.getProperty)(i)}`:void 0,C=r.scopeValue("formats",{key:i,ref:w,code:O});return typeof w=="object"&&!(w instanceof RegExp)?[w.type||"string",w.validate,(0,be._)`${C}.validate`]:["string",w,C]}function g(){if(typeof $=="object"&&!($ instanceof RegExp)&&$.async){if(!p.$async)throw new Error("async format in sync schema");return(0,be._)`await ${o}(${n})`}return typeof a=="function"?(0,be._)`${o}(${n})`:(0,be._)`${o}.test(${n})`}}}};Es.default=qf;Object.defineProperty(Qr,"__esModule",{value:!0});const Uf=Es,Hf=[Uf.default];Qr.default=Hf;var bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.contentVocabulary=bt.metadataVocabulary=void 0;bt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];bt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Yn,"__esModule",{value:!0});const Kf=Gr,Bf=Zr,Jf=Wr,Gf=Qr,_a=bt,Zf=[Kf.default,Bf.default,(0,Jf.default)(),Gf.default,_a.metadataVocabulary,_a.contentVocabulary];Yn.default=Zf;var en={},tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.DiscrError=void 0;var ba;(function(t){t.Tag="tag",t.Mapping="mapping"})(ba||(tn.DiscrError=ba={}));Object.defineProperty(en,"__esModule",{value:!0});const Tt=ne,Pn=tn,$a=Me,Wf=St,Xf=K,Yf={message:({params:{discrError:t,tagName:e}})=>t===Pn.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Tt._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Qf={keyword:"discriminator",type:"object",schemaType:"object",error:Yf,code(t){const{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:l}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const d=n.propertyName;if(typeof d!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!l)throw new Error("discriminator: requires oneOf keyword");const f=e.let("valid",!1),u=e.const("tag",(0,Tt._)`${r}${(0,Tt.getProperty)(d)}`);e.if((0,Tt._)`typeof ${u} == "string"`,()=>p(),()=>t.error(!1,{discrError:Pn.DiscrError.Tag,tag:u,tagName:d})),t.ok(f);function p(){const _=b();e.if(!1);for(const $ in _)e.elseIf((0,Tt._)`${u} === ${$}`),e.assign(f,v(_[$]));e.else(),t.error(!1,{discrError:Pn.DiscrError.Mapping,tag:u,tagName:d}),e.endIf()}function v(_){const $=e.name("valid"),y=t.subschema({keyword:"oneOf",schemaProp:_},$);return t.mergeEvaluated(y,Tt.Name),$}function b(){var _;const $={},y=o(s);let a=!0;for(let g=0;g<l.length;g++){let w=l[g];if(w!=null&&w.$ref&&!(0,Xf.schemaHasRulesButRef)(w,i.self.RULES)){const C=w.$ref;if(w=$a.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,C),w instanceof $a.SchemaEnv&&(w=w.schema),w===void 0)throw new Wf.default(i.opts.uriResolver,i.baseId,C)}const O=(_=w==null?void 0:w.properties)===null||_===void 0?void 0:_[d];if(typeof O!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${d}"`);a=a&&(y||o(w)),c(O,g)}if(!a)throw new Error(`discriminator: "${d}" must be required`);return $;function o({required:g}){return Array.isArray(g)&&g.includes(d)}function c(g,w){if(g.const)h(g.const,w);else if(g.enum)for(const O of g.enum)h(O,w);else throw new Error(`discriminator: "properties/${d}" must have "const" or "enum"`)}function h(g,w){if(typeof g!="string"||g in $)throw new Error(`discriminator: "${d}" values must be unique strings`);$[g]=w}}}};en.default=Qf;const eh="http://json-schema.org/draft-07/schema#",th="http://json-schema.org/draft-07/schema#",rh="Core schema meta-schema",nh={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},sh=["object","boolean"],ah={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},ih={$schema:eh,$id:th,title:rh,definitions:nh,type:sh,properties:ah,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const r=xn,n=Yn,s=en,i=ih,l=["/properties"],d="http://json-schema.org/draft-07/schema";class f extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach($=>this.addVocabulary($)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const $=this.opts.$data?this.$dataMetaSchema(i,l):i;this.addMetaSchema($,d,!1),this.refs["http://json-schema.org/schema"]=d}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(d)?d:void 0)}}e.Ajv=f,t.exports=e=f,t.exports.Ajv=f,Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var u=Ue;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var p=ne;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return p.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return p.CodeGen}});var v=Ut;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return v.default}});var b=St;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return b.default}})})(_n,_n.exports);var Zi=_n.exports;const oh=Rn(Zi);var On={exports:{}},Ss={},ks={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.dynamicAnchor=void 0;const vn=ne,lh=Ve,wa=Me,ch=rt,dh={keyword:"$dynamicAnchor",schemaType:"string",code:t=>Wi(t,t.schema)};function Wi(t,e){const{gen:r,it:n}=t;n.schemaEnv.root.dynamicAnchors[e]=!0;const s=(0,vn._)`${lh.default.dynamicAnchors}${(0,vn.getProperty)(e)}`,i=n.errSchemaPath==="#"?n.validateName:uh(t);r.if((0,vn._)`!${s}`,()=>r.assign(s,i))}Bt.dynamicAnchor=Wi;function uh(t){const{schemaEnv:e,schema:r,self:n}=t.it,{root:s,baseId:i,localRefs:l,meta:d}=e.root,{schemaId:f}=n.opts,u=new wa.SchemaEnv({schema:r,schemaId:f,root:s,baseId:i,localRefs:l,meta:d});return wa.compileSchema.call(n,u),(0,ch.getValidate)(t,u)}Bt.default=dh;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.dynamicRef=void 0;const Ea=ne,fh=Ve,Sa=rt,hh={keyword:"$dynamicRef",schemaType:"string",code:t=>Xi(t,t.schema)};function Xi(t,e){const{gen:r,keyword:n,it:s}=t;if(e[0]!=="#")throw new Error(`"${n}" only supports hash fragment reference`);const i=e.slice(1);if(s.allErrors)l();else{const f=r.let("valid",!1);l(f),t.ok(f)}function l(f){if(s.schemaEnv.root.dynamicAnchors[i]){const u=r.let("_v",(0,Ea._)`${fh.default.dynamicAnchors}${(0,Ea.getProperty)(i)}`);r.if(u,d(u,f),d(s.validateName,f))}else d(s.validateName,f)()}function d(f,u){return u?()=>r.block(()=>{(0,Sa.callRef)(t,f),r.let(u,!0)}):()=>(0,Sa.callRef)(t,f)}}Jt.dynamicRef=Xi;Jt.default=hh;var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});const mh=Bt,ph=K,vh={keyword:"$recursiveAnchor",schemaType:"boolean",code(t){t.schema?(0,mh.dynamicAnchor)(t,""):(0,ph.checkStrictMode)(t.it,"$recursiveAnchor: false is ignored")}};Ps.default=vh;var Os={};Object.defineProperty(Os,"__esModule",{value:!0});const gh=Jt,yh={keyword:"$recursiveRef",schemaType:"string",code:t=>(0,gh.dynamicRef)(t,t.schema)};Os.default=yh;Object.defineProperty(ks,"__esModule",{value:!0});const _h=Bt,bh=Jt,$h=Ps,wh=Os,Eh=[_h.default,bh.default,$h.default,wh.default];ks.default=Eh;var Cs={},Is={};Object.defineProperty(Is,"__esModule",{value:!0});const ka=Xr,Sh={keyword:"dependentRequired",type:"object",schemaType:"object",error:ka.error,code:t=>(0,ka.validatePropertyDeps)(t)};Is.default=Sh;var As={};Object.defineProperty(As,"__esModule",{value:!0});const kh=Xr,Ph={keyword:"dependentSchemas",type:"object",schemaType:"object",code:t=>(0,kh.validateSchemaDeps)(t)};As.default=Ph;var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});const Oh=K,Ch={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:t,parentSchema:e,it:r}){e.contains===void 0&&(0,Oh.checkStrictMode)(r,`"${t}" without "contains" is ignored`)}};Ns.default=Ch;Object.defineProperty(Cs,"__esModule",{value:!0});const Ih=Is,Ah=As,Nh=Ns,Th=[Ih.default,Ah.default,Nh.default];Cs.default=Th;var Ts={},js={};Object.defineProperty(js,"__esModule",{value:!0});const it=ne,Pa=K,jh=Ve,Mh={message:"must NOT have unevaluated properties",params:({params:t})=>(0,it._)`{unevaluatedProperty: ${t.unevaluatedProperty}}`},Dh={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:Mh,code(t){const{gen:e,schema:r,data:n,errsCount:s,it:i}=t;if(!s)throw new Error("ajv implementation error");const{allErrors:l,props:d}=i;d instanceof it.Name?e.if((0,it._)`${d} !== true`,()=>e.forIn("key",n,v=>e.if(u(d,v),()=>f(v)))):d!==!0&&e.forIn("key",n,v=>d===void 0?f(v):e.if(p(d,v),()=>f(v))),i.props=!0,t.ok((0,it._)`${s} === ${jh.default.errors}`);function f(v){if(r===!1){t.setParams({unevaluatedProperty:v}),t.error(),l||e.break();return}if(!(0,Pa.alwaysValidSchema)(i,r)){const b=e.name("valid");t.subschema({keyword:"unevaluatedProperties",dataProp:v,dataPropType:Pa.Type.Str},b),l||e.if((0,it.not)(b),()=>e.break())}}function u(v,b){return(0,it._)`!${v} || !${v}[${b}]`}function p(v,b){const _=[];for(const $ in v)v[$]===!0&&_.push((0,it._)`${b} !== ${$}`);return(0,it.and)(..._)}}};js.default=Dh;var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});const gt=ne,Oa=K,Rh={message:({params:{len:t}})=>(0,gt.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,gt._)`{limit: ${t}}`},xh={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:Rh,code(t){const{gen:e,schema:r,data:n,it:s}=t,i=s.items||0;if(i===!0)return;const l=e.const("len",(0,gt._)`${n}.length`);if(r===!1)t.setParams({len:i}),t.fail((0,gt._)`${l} > ${i}`);else if(typeof r=="object"&&!(0,Oa.alwaysValidSchema)(s,r)){const f=e.var("valid",(0,gt._)`${l} <= ${i}`);e.if((0,gt.not)(f),()=>d(f,i)),t.ok(f)}s.items=!0;function d(f,u){e.forRange("i",u,l,p=>{t.subschema({keyword:"unevaluatedItems",dataProp:p,dataPropType:Oa.Type.Num},f),s.allErrors||e.if((0,gt.not)(f),()=>e.break())})}}};Ms.default=xh;Object.defineProperty(Ts,"__esModule",{value:!0});const Lh=js,Fh=Ms,Vh=[Lh.default,Fh.default];Ts.default=Vh;Object.defineProperty(Ss,"__esModule",{value:!0});const zh=Gr,qh=Zr,Uh=Wr,Hh=ks,Kh=Cs,Bh=Ts,Jh=Qr,Ca=bt,Gh=[Hh.default,zh.default,qh.default,(0,Uh.default)(!0),Jh.default,Ca.metadataVocabulary,Ca.contentVocabulary,Kh.default,Bh.default];Ss.default=Gh;var Ds={};const Zh="https://json-schema.org/draft/2020-12/schema",Wh="https://json-schema.org/draft/2020-12/schema",Xh={"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},Yh="meta",Qh="Core and Validation specifications meta-schema",em=[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],tm=["object","boolean"],rm="This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.",nm={definitions:{$comment:'"definitions" has been replaced by "$defs".',type:"object",additionalProperties:{$dynamicRef:"#meta"},deprecated:!0,default:{}},dependencies:{$comment:'"dependencies" has been split and replaced by "dependentSchemas" and "dependentRequired" in order to serve their differing semantics.',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]},deprecated:!0,default:{}},$recursiveAnchor:{$comment:'"$recursiveAnchor" has been replaced by "$dynamicAnchor".',$ref:"meta/core#/$defs/anchorString",deprecated:!0},$recursiveRef:{$comment:'"$recursiveRef" has been replaced by "$dynamicRef".',$ref:"meta/core#/$defs/uriReferenceString",deprecated:!0}},sm={$schema:Zh,$id:Wh,$vocabulary:Xh,$dynamicAnchor:Yh,title:Qh,allOf:em,type:tm,$comment:rm,properties:nm},am="https://json-schema.org/draft/2020-12/schema",im="https://json-schema.org/draft/2020-12/meta/applicator",om={"https://json-schema.org/draft/2020-12/vocab/applicator":!0},lm="meta",cm="Applicator vocabulary meta-schema",dm=["object","boolean"],um={prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},fm={schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}},hm={$schema:am,$id:im,$vocabulary:om,$dynamicAnchor:lm,title:cm,type:dm,properties:um,$defs:fm},mm="https://json-schema.org/draft/2020-12/schema",pm="https://json-schema.org/draft/2020-12/meta/unevaluated",vm={"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},gm="meta",ym="Unevaluated applicator vocabulary meta-schema",_m=["object","boolean"],bm={unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}},$m={$schema:mm,$id:pm,$vocabulary:vm,$dynamicAnchor:gm,title:ym,type:_m,properties:bm},wm="https://json-schema.org/draft/2020-12/schema",Em="https://json-schema.org/draft/2020-12/meta/content",Sm={"https://json-schema.org/draft/2020-12/vocab/content":!0},km="meta",Pm="Content vocabulary meta-schema",Om=["object","boolean"],Cm={contentEncoding:{type:"string"},contentMediaType:{type:"string"},contentSchema:{$dynamicRef:"#meta"}},Im={$schema:wm,$id:Em,$vocabulary:Sm,$dynamicAnchor:km,title:Pm,type:Om,properties:Cm},Am="https://json-schema.org/draft/2020-12/schema",Nm="https://json-schema.org/draft/2020-12/meta/core",Tm={"https://json-schema.org/draft/2020-12/vocab/core":!0},jm="meta",Mm="Core vocabulary meta-schema",Dm=["object","boolean"],Rm={$id:{$ref:"#/$defs/uriReferenceString",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{$ref:"#/$defs/uriString"},$ref:{$ref:"#/$defs/uriReferenceString"},$anchor:{$ref:"#/$defs/anchorString"},$dynamicRef:{$ref:"#/$defs/uriReferenceString"},$dynamicAnchor:{$ref:"#/$defs/anchorString"},$vocabulary:{type:"object",propertyNames:{$ref:"#/$defs/uriString"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"}}},xm={anchorString:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},uriString:{type:"string",format:"uri"},uriReferenceString:{type:"string",format:"uri-reference"}},Lm={$schema:Am,$id:Nm,$vocabulary:Tm,$dynamicAnchor:jm,title:Mm,type:Dm,properties:Rm,$defs:xm},Fm="https://json-schema.org/draft/2020-12/schema",Vm="https://json-schema.org/draft/2020-12/meta/format-annotation",zm={"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0},qm="meta",Um="Format vocabulary meta-schema for annotation results",Hm=["object","boolean"],Km={format:{type:"string"}},Bm={$schema:Fm,$id:Vm,$vocabulary:zm,$dynamicAnchor:qm,title:Um,type:Hm,properties:Km},Jm="https://json-schema.org/draft/2020-12/schema",Gm="https://json-schema.org/draft/2020-12/meta/meta-data",Zm={"https://json-schema.org/draft/2020-12/vocab/meta-data":!0},Wm="meta",Xm="Meta-data vocabulary meta-schema",Ym=["object","boolean"],Qm={title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}},ep={$schema:Jm,$id:Gm,$vocabulary:Zm,$dynamicAnchor:Wm,title:Xm,type:Ym,properties:Qm},tp="https://json-schema.org/draft/2020-12/schema",rp="https://json-schema.org/draft/2020-12/meta/validation",np={"https://json-schema.org/draft/2020-12/vocab/validation":!0},sp="meta",ap="Validation vocabulary meta-schema",ip=["object","boolean"],op={type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]},const:!0,enum:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}}},lp={nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},cp={$schema:tp,$id:rp,$vocabulary:np,$dynamicAnchor:sp,title:ap,type:ip,properties:op,$defs:lp};Object.defineProperty(Ds,"__esModule",{value:!0});const dp=sm,up=hm,fp=$m,hp=Im,mp=Lm,pp=Bm,vp=ep,gp=cp,yp=["/properties"];function _p(t){return[dp,up,fp,hp,mp,e(this,pp),vp,e(this,gp)].forEach(r=>this.addMetaSchema(r,void 0,!1)),this;function e(r,n){return t?r.$dataMetaSchema(n,yp):n}}Ds.default=_p;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv2020=void 0;const r=xn,n=Ss,s=en,i=Ds,l="https://json-schema.org/draft/2020-12/schema";class d extends r.default{constructor(_={}){super({..._,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),n.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();const{$data:_,meta:$}=this.opts;$&&(i.default.call(this,_),this.refs["http://json-schema.org/schema"]=l)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}e.Ajv2020=d,t.exports=e=d,t.exports.Ajv2020=d,Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var f=Ue;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return f.KeywordCxt}});var u=ne;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var p=Ut;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return p.default}});var v=St;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return v.default}})})(On,On.exports);var bp=On.exports;const $p=Rn(bp);var Cn={exports:{}},Yi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(P,A){return{validate:P,compare:A}}t.fullFormats={date:e(i,l),time:e(f(!0),u),"date-time":e(b(!0),_),"iso-time":e(f(),p),"iso-date-time":e(b(),$),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:o,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:U,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:h,int32:{type:"number",validate:O},int64:{type:"number",validate:C},float:{type:"number",validate:T},double:{type:"number",validate:T},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,l),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,_),"iso-time":e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,p),"iso-date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,$),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function r(P){return P%4===0&&(P%100!==0||P%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(P){const A=n.exec(P);if(!A)return!1;const x=+A[1],L=+A[2],J=+A[3];return L>=1&&L<=12&&J>=1&&J<=(L===2&&r(x)?29:s[L])}function l(P,A){if(P&&A)return P>A?1:P<A?-1:0}const d=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function f(P){return function(x){const L=d.exec(x);if(!L)return!1;const J=+L[1],Q=+L[2],ee=+L[3],de=L[4],_e=L[5]==="-"?-1:1,V=+(L[6]||0),I=+(L[7]||0);if(V>23||I>59||P&&!de)return!1;if(J<=23&&Q<=59&&ee<60)return!0;const N=Q-I*_e,k=J-V*_e-(N<0?1:0);return(k===23||k===-1)&&(N===59||N===-1)&&ee<61}}function u(P,A){if(!(P&&A))return;const x=new Date("2020-01-01T"+P).valueOf(),L=new Date("2020-01-01T"+A).valueOf();if(x&&L)return x-L}function p(P,A){if(!(P&&A))return;const x=d.exec(P),L=d.exec(A);if(x&&L)return P=x[1]+x[2]+x[3],A=L[1]+L[2]+L[3],P>A?1:P<A?-1:0}const v=/t|\s/i;function b(P){const A=f(P);return function(L){const J=L.split(v);return J.length===2&&i(J[0])&&A(J[1])}}function _(P,A){if(!(P&&A))return;const x=new Date(P).valueOf(),L=new Date(A).valueOf();if(x&&L)return x-L}function $(P,A){if(!(P&&A))return;const[x,L]=P.split(v),[J,Q]=A.split(v),ee=l(x,J);if(ee!==void 0)return ee||u(L,Q)}const y=/\/|:/,a=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function o(P){return y.test(P)&&a.test(P)}const c=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function h(P){return c.lastIndex=0,c.test(P)}const g=-2147483648,w=2**31-1;function O(P){return Number.isInteger(P)&&P<=w&&P>=g}function C(P){return Number.isInteger(P)}function T(){return!0}const F=/[^\\]\\Z/;function U(P){if(F.test(P))return!1;try{return new RegExp(P),!0}catch{return!1}}})(Yi);var Qi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=Zi,r=ne,n=r.operators,s={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},i={message:({keyword:d,schemaCode:f})=>(0,r.str)`should be ${s[d].okStr} ${f}`,params:({keyword:d,schemaCode:f})=>(0,r._)`{comparison: ${s[d].okStr}, limit: ${f}}`};t.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:i,code(d){const{gen:f,data:u,schemaCode:p,keyword:v,it:b}=d,{opts:_,self:$}=b;if(!_.validateFormats)return;const y=new e.KeywordCxt(b,$.RULES.all.format.definition,"format");y.$data?a():o();function a(){const h=f.scopeValue("formats",{ref:$.formats,code:_.code.formats}),g=f.const("fmt",(0,r._)`${h}[${y.schemaCode}]`);d.fail$data((0,r.or)((0,r._)`typeof ${g} != "object"`,(0,r._)`${g} instanceof RegExp`,(0,r._)`typeof ${g}.compare != "function"`,c(g)))}function o(){const h=y.schema,g=$.formats[h];if(!g||g===!0)return;if(typeof g!="object"||g instanceof RegExp||typeof g.compare!="function")throw new Error(`"${v}": format "${h}" does not define "compare" function`);const w=f.scopeValue("formats",{key:h,ref:g,code:_.code.formats?(0,r._)`${_.code.formats}${(0,r.getProperty)(h)}`:void 0});d.fail$data(c(w))}function c(h){return(0,r._)`${h}.compare(${u}, ${p}) ${s[v].fail} 0`}},dependencies:["format"]};const l=d=>(d.addKeyword(t.formatLimitDefinition),d);t.default=l})(Qi);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const r=Yi,n=Qi,s=ne,i=new s.Name("fullFormats"),l=new s.Name("fastFormats"),d=(u,p={keywords:!0})=>{if(Array.isArray(p))return f(u,p,r.fullFormats,i),u;const[v,b]=p.mode==="fast"?[r.fastFormats,l]:[r.fullFormats,i],_=p.formats||r.formatNames;return f(u,_,v,b),p.keywords&&(0,n.default)(u),u};d.get=(u,p="full")=>{const b=(p==="fast"?r.fastFormats:r.fullFormats)[u];if(!b)throw new Error(`Unknown format "${u}"`);return b};function f(u,p,v,b){var _,$;(_=($=u.opts.code).formats)!==null&&_!==void 0||($.formats=(0,s._)`require("ajv-formats/dist/formats").${b}`);for(const y of p)u.addFormat(y,v[y])}t.exports=e=d,Object.defineProperty(e,"__esModule",{value:!0}),e.default=d})(Cn,Cn.exports);var wp=Cn.exports;const Ep=Rn(wp);class fr{constructor(e,r=!1){const n={strict:!0,allErrors:r};this.ajv=e==="pydantic_v1"?new oh(n):new $p(n),Ep(this.ajv),this.canValidate=!1}validateSchema(e){this.ajv.compile(e)}loadSchema(e){try{return this.validator=this.ajv.compile(e),this.canValidate=!0}catch(r){return console.error("SchemaValidator: error compiling schema",r),!1}}isValid(e){if(this.validator)return this.canValidate?this.validator(e):null}getErrors(){return!this.validator||!this.canValidate?null:this.validator.errors||null}}function Sp(t){try{return new fr("pydantic_v2").validateSchema(yt(t)),"pydantic_v2"}catch{return new fr("pydantic_v1").validateSchema(yt(t)),"pydantic_v1"}}function kp(t,e){const r=[];for(const n of e)eo(n,t)||r.push(JSON.stringify(n,null,2));return r}function eo(t,e){if(Na(t,e))return!0;if(t.instancePath.startsWith(e.path)&&e.hasErrors.set(!0),e.path===t.instancePath)return Ia(t,e),!0;{const r=Rs(e);for(const n of r){if(Na(t,n))return!0;if(n.path===t.instancePath)return Ia(t,n),!0;if(eo(t,n))return!0}}return!1}function Ia(t,e){if(e.hasErrors.set(!0),"params"in t){if("missingProperty"in t.params&&Aa(t,t.params.missingProperty,e))return;if("additionalProperty"in t.params&&Aa(t,t.params.additionalProperty,e))return}else if("selectedItem"in e&&e.selectedItem){e.selectedItem.addError(In(t,e.selectedItem));return}e.addError(In(t,e))}function Aa(t,e,r){const n=Rs(r);for(const s of n)if(s.key===e){const i=In(t,s);return s.addError(i),!0}return!1}function In(t,e){if("missingProperty"in t.params){if("children"in e&&e.children.length>0)return"missing required child value";if(Pp(e))return"required property"}return t.message}function Pp(t){return t.type&&["string","number","boolean","enum"].includes(t.type)}function Na(t,e){if("selectedItem"in e){const{oneOf:r}=e.property,n=ct(e.selectedIndex);for(let s=0;s<r.length;s++)if(s!==n){if(e.discriminator&&n>=0&&t.keyword==="const"&&"params"in t&&"allowedValue"in t.params){const{allowedValue:i}=t.params,l=e.discriminator.values[n];if(i!==l)return!0}if(t.schemaPath.startsWith(`#/properties${e.path}/oneOf/${s}`))return!0}}return!1}function Rs(t){return"children"in t?t.children:"selectedItem"in t&&t.selectedItem?Rs(t.selectedItem):[]}class Op{constructor(e,r,n,s=[],i=void 0){if(this.schemaVersion=n,this.jsonSchema=ei(e,s),this.validator=new fr(n,!0),!this.validator.loadSchema(yt(this.jsonSchema)))throw new Error("Invalid JSON Schema");this.ids=[],this.genericErrors=Lt([]),this.dataValid=Lt(!0);const d=Qo(this.jsonSchema,n,i);this.onchange=r,this.notifyChange=()=>{const u=this.getFormData(),p=this.validate();this.onchange(u,p)},this.root=this.createObjectElement({key:null,path:"",property:this.jsonSchema,required:!0,removable:!1,value:d,parentProperty:void 0});const f=this.validate();this.onchange(d,f)}createFormElement(e){const{property:r}=e;if("enum"in r)return this.createEnumElement(e);if("oneOf"in r){const n=r;return this.createConditionalElement({...e,property:n})}switch(r.type){case"object":{const n=r;return e.value&&(typeof e.value!="object"||Array.isArray(e.value))?this.createInvalidElement({...e,property:n}):this.createObjectElement({...e,property:n})}case"array":{const n=r;return e.value&&!Array.isArray(e.value)?this.createInvalidElement({...e,property:n}):Wa(n)?this.createTupleElement({...e,property:n}):this.createArrayElement({...e,property:n})}case"number":case"integer":{const n=r;return e.value&&typeof e.value!="number"?this.createInvalidElement({...e,property:n}):this.createNumberElement({...e,property:n})}case"boolean":{const n=r;return e.value&&typeof e.value!="boolean"?this.createInvalidElement({...e,property:n}):this.createBooleanElement({...e,property:n})}default:{const n=r;return e.value&&typeof e.value=="object"?this.createInvalidElement({...e,property:n}):(e.value&&typeof e.value!="string"&&(e.value=e.value.toString()),this.createStringElement({...e,property:n}))}}}createUnexpectedElement({key:e,path:r,value:n}){const s=this.getBaseElementFields({key:e,path:r,property:{type:"unexpected"},required:!1,removable:!0});return new ol({...s,value:n})}createInvalidElement({key:e,path:r,property:n,required:s,removable:i,value:l}){const d=this.getBaseElementFields({key:e,path:r,property:n,required:s,removable:i});return new ll({...d,value:l})}createStringElement({key:e,path:r,property:n,required:s,removable:i,value:l}){const d=this.getBaseElementFields({key:e,path:r,property:n,required:s,removable:i});return new sl({...d,value:l||null})}createBooleanElement({key:e,path:r,property:n,required:s,removable:i,value:l}){const d=this.getBaseElementFields({key:e,path:r,property:n,required:s,removable:i});return new al({...d,value:xr(l)})}createNumberElement({key:e,path:r,property:n,required:s,removable:i,value:l}){const d=this.getBaseElementFields({key:e,path:r,property:n,required:s,removable:i});return new Zs({...d,type:"number",value:xr(l),min:Wo(n),max:Xo(n)})}createEnumElement({key:e,path:r,property:n,required:s,removable:i,value:l}){const d=this.getBaseElementFields({key:e,path:r,property:n,required:s,removable:i});return new il({...d,type:"enum",value:l||null,options:n.enum})}createObjectElement({key:e,path:r,property:n,required:s,removable:i,value:l,parentProperty:d}){const f=this.getBaseElementFields({key:e,path:r,property:n,required:s,removable:i}),u=n.required||[],p=[],v=Object.entries(Xa(n,l)),b=[];for(const[y,a]of v){b.push(y);const o=u.includes(y),c=this.createFormElement({key:y,path:`${r}/${y}`,property:a,required:o,removable:Yo(n,y),value:l[y],parentProperty:n});p.push(c)}const _=this.getDiscriminatorKey(d);_&&b.push(_);for(const[y,a]of Object.entries(l))b.includes(y)||p.push(this.createUnexpectedElement({key:y,path:`${r}/${y}`,value:a}));return new cl({...f,children:p,additionalProperties:n.additionalProperties||!1})}createArrayElement({key:e,path:r,property:n,required:s,removable:i,value:l}){const d=this.getBaseElementFields({key:e,path:r,property:n,required:s,removable:i}),f=n.items,u=(l||[]).map((v,b)=>this.createFormElement({key:b.toString(),path:`${r}/${b}`,property:f,required:!1,removable:!0,value:v,parentProperty:n}));return new dl({...d,children:u,items:f,minItems:n.minItems,maxItems:n.maxItems})}createTupleElement({key:e,path:r,property:n,required:s,removable:i,value:l}){const d=this.getBaseElementFields({key:e,path:r,property:n,required:s,removable:i}),f=n.minItems,u=this.schemaVersion==="pydantic_v1"?n.items:n.prefixItems;return new ul({...d,type:"tuple",items:u,size:f,children:s||Array.isArray(l)&&l.length>0?this.createTupleChildren({path:r,items:u,size:f,value:l,parentProperty:n}):[]})}createTupleChildren({path:e,items:r,size:n,value:s,parentProperty:i}){const l={required:!1,removable:!1};let d=[];if(Array.isArray(r)?d=r.map((f,u)=>this.createFormElement({...l,key:u.toString(),path:`${e}/${u}`,property:f,value:s[u],parentProperty:i})):d=Array(n).map((f,u)=>this.createFormElement({...l,key:u.toString(),path:`${e}/${u}`,property:r,value:s[u],parentProperty:i})),Array.isArray(s))for(let f=r.length;f<s.length;f++)d.push(this.createUnexpectedElement({...l,key:f.toString(),path:`${e}/${f}`,value:s[f]}));return d}createConditionalElement({key:e,path:r,property:n,required:s,removable:i,value:l}){const d=this.getBaseElementFields({key:e,path:r,property:n,required:s,removable:i}),f=l??{},u=this.getConditionalElementSelectedChildIndex(n,f),{discriminator:p,oneOfProperty:v}=this.extractDiscriminatorProperty(n,f),b=v.oneOf[u],_=[];if(u===-1)for(const[y,a]of Object.entries(l))y!==(p==null?void 0:p.key)&&_.push(this.createUnexpectedElement({key:y,path:`${r}/${y}`,value:a}));const $=u===-1?null:this.createFormElement({key:e,path:r,property:b,required:s,removable:i,value:f,parentProperty:n});return $&&($.title=b.title||e||""),new fl({...d,type:"conditional",property:v,selectedIndex:u,discriminator:p,selectedItem:$,unexpectedChildren:_})}getDiscriminatorKey(e){if(e&&"oneOf"in e&&"discriminator"in e&&e.discriminator){let r;const{propertyName:n}=e.discriminator;for(const s of e.oneOf)if(s.type==="object"&&"properties"in s&&s.properties[n]){const i=s.properties[n];if(i.type==="string"&&"const"in i){if(r!==void 0&&r!==n)return;r=n}else return}else return;return r}}extractDiscriminatorProperty(e,r){if("discriminator"in e&&e.discriminator){const{propertyName:n}=e.discriminator,s={key:n,title:"",description:"",values:[],value:r[n]};for(const i of e.oneOf)if(i.type==="object"&&"properties"in i&&i.properties[n]){const l=i.properties[n];l.type==="string"&&"const"in l&&(s.values.push(l.const),!s.title&&l.title&&(s.title=l.title),!s.description&&l.description&&(s.description=l.description))}if(e.oneOf.length>0&&e.oneOf.length===s.values.length)return s.value||(s.value=s.values[0]),{discriminator:s,oneOfProperty:{...e,oneOf:e.oneOf.map(i=>{const l={...i.properties};return delete l[n],{...i,properties:l}})}}}return{discriminator:void 0,oneOfProperty:e}}getConditionalElementSelectedChildIndex(e,r){if("discriminator"in e){const{discriminator:n}=e;if("propertyName"in n&&n.propertyName in r){const s=r[n.propertyName];if("mapping"in n&&s in n.mapping){const i=n.mapping[s];if(typeof i=="number"&&i>=0)return i}}}return r?-1:0}getBaseElementFields({key:e,path:r,property:n,required:s,removable:i}){return{key:e,path:r,required:s,removable:i,manager:this,id:this.getUniqueId(),type:"type"in n&&n.type?n.type:null,title:e&&i&&!e.match(/^\d+$/)?e:n.title||e||"",description:n.description||"",property:mr(n),notifyChange:this.notifyChange}}getUniqueId(){let e;do if(e=Math.random().toString(36).substring(7),!this.ids.includes(e)){this.ids.push(e);break}while(!0);return e}getFormData(){return this.getDataFromObjectElement(this.root)}getDataFromObjectElement(e){const r={};for(const n of e.children){let s=this.getDataFromElement(n);const i=s==null?null:typeof s=="object"&&"subscribe"in s&&typeof s=="function"?ct(s):s;r[n.key]=i}return r}getDataFromConditionalElement(e){const r=e.selectedItem;if(r){const n=this.getDataFromElement(r);if(e.discriminator){const{key:s}=e.discriminator;n[s]=e.discriminator.values[ct(e.selectedIndex)]}return n}if(e.discriminator){const n={[e.discriminator.key]:e.discriminator.value};for(const s of e.unexpectedChildren)n[s.key]=this.getDataFromElement(s);return n}return null}validate(){this.clearErrors(this.root);const e=Dn(this.getFormData()),r=this.validator.isValid(e),n=[];if(!r){const s=this.validator.getErrors();s&&Array.isArray(s)&&n.push(...kp(this.root,s))}return this.genericErrors.set(n),this.dataValid.set(r),r}clearErrors(e){if(e.clearErrors(),"selectedItem"in e&&e.selectedItem)this.clearErrors(e.selectedItem);else if("children"in e)for(const r of e.children)this.clearErrors(r)}getDataFromElement(e){switch(e.type){case"object":return this.getDataFromObjectElement(e);case"array":case"tuple":return this.getDataFromArrayElement(e);case"conditional":return this.getDataFromConditionalElement(e);default:if(e instanceof Et)return e instanceof Zs&&e.badInput?"invalid":ct(e.value);throw new Error(`Unsupported type ${e.type}`)}}getDataFromArrayElement(e){return e.children.map(r=>this.getDataFromElement(r))}}var Cp=H('<span tabindex="0" role="button" data-bs-trigger="focus" class="bi bi-info-circle text-primary" data-bs-toggle="collapse" data-bs-target=""></span>'),Ip=H('<span class="ms-2 property-description"><!></span>');function to(t,e){$e(e,!0);let r=le(e,"html",3,!1),n=Z(void 0),s,i;wt(()=>{E(n)&&E(n).addEventListener("click",function(){s=bootstrap.Popover.getOrCreateInstance(E(n),{trigger:"manual"}),s.toggle(),i||(i=function(u){const p=u.composedPath();p.length>0&&p[0]instanceof HTMLElement&&p[0]!==E(n)&&(p[0].closest(".popover")||(s==null||s.hide(),s=void 0,window.removeEventListener("click",i),i=void 0))},window.addEventListener("click",i))})});var l=Ip(),d=M(l);{var f=u=>{var p=Cp();$t(p,v=>D(n,v),()=>E(n)),Y(()=>{he(p,"data-bs-html",r()),he(p,"data-bs-content",e.description)}),z(u,p)};W(d,u=>{e.description&&u(f)})}j(l),z(t,l),we()}var Ap=H('<span class="visually-hidden"> </span>'),Np=H("<label><!></label>"),Tp=H('<span class="visually-hidden"> </span>'),jp=H("<span><!></span>"),Mp=H("<!> <!>",1);function yr(t,e){$e(e,!0);let r=le(e,"tag",3,"label"),n=le(e,"defaultTitle",3,""),s=ut(()=>e.formElement.required?"fw-bold":!("value"in e.formElement)||e.formElement.value!==null&&e.formElement.value!==void 0&&e.formElement.value!==""?"":"text-secondary fw-light");const i=ut(()=>e.formElement.description||("selectedItem"in e.formElement&&e.formElement.selectedItem?e.formElement.selectedItem.description:""));var l=Mp(),d=fe(l);{var f=v=>{var b=Np(),_=M(b);{var $=a=>{var o=dr();Y(()=>ce(o,e.formElement.title)),z(a,o)},y=(a,o)=>{{var c=h=>{var g=Ap(),w=M(g,!0);j(g),Y(()=>ce(w,n())),z(h,g)};W(a,h=>{n()&&h(c)},o)}};W(_,a=>{e.formElement.title?a($):a(y,!1)})}j(b),Y(()=>{me(b,1,Hs(E(s))),he(b,"for",r()==="label"?`property-${e.formElement.id}`:void 0)}),z(v,b)},u=v=>{var b=jp(),_=M(b);{var $=a=>{var o=dr();Y(()=>ce(o,e.formElement.title)),z(a,o)},y=(a,o)=>{{var c=h=>{var g=Tp(),w=M(g,!0);j(g),Y(()=>ce(w,n())),z(h,g)};W(a,h=>{n()&&h(c)},o)}};W(_,a=>{e.formElement.title?a($):a(y,!1)})}j(b),Y(()=>me(b,1,Hs(E(s)))),z(v,b)};W(d,v=>{r()==="label"?v(f):v(u,!1)})}var p=q(d,2);to(p,{get description(){return E(i)}}),z(t,l),we()}function Dp(t,e){t.preventDefault(),t.stopPropagation(),e()&&e()()}var Rp=(t,e)=>e(t),xp=H('<a class="btn btn-warning me-3" role="button">Reset</a>'),Lp=H('<div class="alert alert-danger mb-1 py-1 px-2"> </div>'),Fp=H('<div><div class="my-2"><div class="accordion"><div><div class="accordion-header"><button type="button"><div class="flex-fill"><!></div> <div><!></div></button></div> <div><div class="accordion-body p-1"><!> <!></div></div></div></div></div></div>');function _r(t,e){$e(e,!0);let r=le(e,"reset",3,null),n=le(e,"padding",3,2),s=le(e,"showErrors",3,!0),i=Z(!1),l=Z(!1);e.formElement.hasErrors.subscribe(A=>D(l,A,!0));let d=Z(Se([]));e.formElement.errors.subscribe(A=>D(d,A,!0)),qt(()=>{D(i,e.formElement.collapsed,!0)});function f(A){A.target instanceof HTMLElement&&A.target.classList.contains("bi-info-circle")||D(i,!E(i))}var u=Fp(),p=M(u),v=M(p),b=M(v);let _;var $=M(b),y=M($);let a;y.__click=[Rp,f];var o=M(y),c=M(o);yr(c,{get formElement(){return e.formElement},tag:"span"}),j(o);var h=q(o,2),g=M(h);{var w=A=>{var x=xp();x.__click=[Dp,r],z(A,x)};W(g,A=>{r()!==null&&e.formElement.property.default!==void 0&&A(w)})}j(h),j(y),j($);var O=q($,2);let C;var T=M(O),F=M(T);{var U=A=>{var x=Fe(),L=fe(x);Ne(L,17,()=>E(d),je,(J,Q)=>{var ee=Lp(),de=M(ee,!0);j(ee),Y(()=>ce(de,E(Q))),z(J,ee)}),z(A,x)};W(F,A=>{s()&&A(U)})}var P=q(F,2);Do(P,()=>e.children??To),j(T),j(O),j(b),j(v),j(p),j(u),Y((A,x,L)=>{me(u,1,`d-flex flex-column p-${n()??""}`),he(v,"id",`accordion-${e.formElement.id??""}`),_=me(b,1,"accordion-item",null,_,A),a=me(y,1,"accordion-button",null,a,x),he(O,"id",`collapse-${e.formElement.id??""}`),C=me(O,1,"accordion-collapse jschema-collapsing",null,C,L)},[()=>({"border-danger":E(l)}),()=>({collapsed:E(i)}),()=>({collapse:E(i),show:!E(i)})]),z(t,u),we()}Re(["click"]);var Vp=(t,e)=>e(),zp=H('<button class="btn btn-danger" type="button" aria-label="Remove"><i class="bi bi-trash"></i></button>'),qp=H('<button class="btn btn-light" aria-label="Move item up"><i class="bi-arrow-up"></i></button> <button class="btn btn-light" aria-label="Move item down"><i class="bi-arrow-down"></i></button>',1),Up=H('<div class="d-flex"><div class="align-self-center m-2"><!></div> <div class="flex-fill"><!></div> <div class="align-self-right mt-2 me-2"><!></div></div>'),Hp=H('<div class="d-flex justify-content-center p-2"><button class="btn btn-primary" type="button">Add argument to list</button></div> <div></div>',1);function Kp(t,e){$e(e,!0);let r=le(e,"editable",3,!0),n=le(e,"reset",3,null),s=Z(Se([]));wt(()=>{D(s,e.formElement.children,!0)});function i(){e.formElement.addChild(),D(s,e.formElement.children,!0)}function l(v){e.formElement.removeChild(v),D(s,e.formElement.children,!0)}function d(v){e.formElement.moveChildUp(v),D(s,e.formElement.children,!0)}function f(v){e.formElement.moveChildDown(v),D(s,e.formElement.children,!0)}let u=ut(()=>r()&&(typeof e.formElement.maxItems!="number"||E(s).length<e.formElement.maxItems)),p=ut(()=>r()&&!(e.formElement.required&&typeof e.formElement.minItems=="number"&&E(s).length<=e.formElement.minItems));_r(t,{get formElement(){return e.formElement},get reset(){return n()},children:(v,b)=>{var _=Hp(),$=fe(_),y=M($);y.__click=[Vp,i],j($);var a=q($,2);Ne(a,23,()=>E(s),(o,c)=>o.id+c,(o,c,h)=>{var g=Up(),w=M(g),O=M(w);{var C=x=>{var L=zp();L.__click=()=>l(E(h)),z(x,L)};W(O,x=>{E(p)&&x(C)})}j(w);var T=q(w,2),F=M(T);hr(F,{get editable(){return r()},get formElement(){return E(s)[E(h)]}}),j(T);var U=q(T,2),P=M(U);{var A=x=>{var L=qp(),J=fe(L);J.__click=ee=>{ee.preventDefault(),d(E(h))};var Q=q(J,2);Q.__click=ee=>{ee.preventDefault(),f(E(h))},Y(()=>{J.disabled=!r()&&E(h)===0,Q.disabled=!r()&&E(h)===E(s).length-1}),z(x,L)};W(P,x=>{E(s).length>1&&x(A)})}j(U),j(g),z(o,g)}),j(a),Y(()=>y.disabled=!E(u)),z(v,_)},$$slots:{default:!0}}),we()}Re(["click"]);var Bp=H('<div class="d-flex align-items-center p-2"><div class="property-metadata d-flex flex-row align-self-center w-50"><!></div> <div class="property-input ms-auto w-50 has-validation"><input type="text"> <span class="invalid-feedback"> </span></div></div>');function ro(t,e){$e(e,!0);let r=le(e,"editable",3,!0),n=le(e,"showErrors",3,!0),s=Z(void 0);e.formElement.value.subscribe(o=>D(s,o,!0)),qt(()=>f(E(s)));let i=Z(void 0),l=Z(Se([]));e.formElement.errors.subscribe(o=>D(l,o,!0));let d=ut(()=>"const"in e.formElement.property);function f(o){ct(e.formElement.value)!==o&&(e.formElement.value.set(o),e.formElement.notifyChange())}var u=Bp(),p=M(u),v=M(p);yr(v,{get formElement(){return e.formElement},defaultTitle:"String argument"}),j(p);var b=q(p,2),_=M(b);qe(_);let $;$t(_,o=>D(i,o),()=>E(i));var y=q(_,2),a=M(y,!0);j(y),j(b),j(u),Y((o,c)=>{$=me(_,1,"form-control",null,$,o),he(_,"id",`property-${e.formElement.id??""}`),_.disabled=!r()||E(d),ce(a,c)},[()=>({"is-invalid":n()&&E(l).length>0}),()=>n()&&E(l).length>0?E(l).join(", "):""]),Xe(_,()=>E(s),o=>D(s,o)),z(t,u),we()}var Jp=(t,e)=>e(t),Gp=H('<span class="text-danger"> </span>'),Zp=H('<div class="d-flex align-items-center p-2"><div class="property-metadata d-flex flex-row align-self-center w-50"><!></div> <div class="property-input ms-auto w-25 has-validation"><div class="form-check form-switch"><input type="checkbox" role="switch"> <!></div> <!></div></div>');function Wp(t,e){$e(e,!0);let r=le(e,"editable",3,!0),n=Z(void 0);e.formElement.value.subscribe(o=>D(n,o,!0));let s=Z(Se([]));e.formElement.errors.subscribe(o=>D(s,o,!0));function i(o){const c=o.target.checked;ct(e.formElement.value)!==c&&(e.formElement.value.set(c),e.formElement.notifyChange())}var l=Zp(),d=M(l),f=M(d);yr(f,{get formElement(){return e.formElement},defaultTitle:"Boolean argument",tag:"span"}),j(d);var u=q(d,2),p=M(u),v=M(p);qe(v);let b;v.__change=[Jp,i];var _=q(v,2);{var $=o=>{var c=dr("(unset)");z(o,c)};W(_,o=>{E(n)===null&&o($)})}j(p);var y=q(p,2);{var a=o=>{var c=Gp(),h=M(c,!0);j(c),Y(g=>ce(h,g),[()=>E(s).join(", ")]),z(o,c)};W(y,o=>{E(s).length>0&&o(a)})}j(u),j(l),Y(o=>{he(v,"id",`property-${e.formElement.id??""}`),b=me(v,1,"form-check-input",null,b,o),Ko(v,E(n)===!0),v.disabled=!r()},[()=>({"is-invalid":E(s).length>0})]),z(t,l),we()}Re(["change"]);var Xp=H('<div class="d-flex align-items-center p-2"><div class="property-metadata d-flex flex-row align-self-center w-50"><!></div> <div class="property-input ms-auto w-50 has-validation"><input type="number"> <span class="invalid-feedback"> </span></div></div>');function Yp(t,e){$e(e,!0);let r=le(e,"formElement",15),n=le(e,"editable",3,!0),s=Z(void 0);r().value.subscribe(o=>D(s,o,!0)),qt(()=>d(E(s)));let i=Z(void 0),l=Z(Se([]));r().errors.subscribe(o=>D(l,o,!0));function d(o){f(),ct(r().value)!==o&&(r().value.set(o),r().notifyChange())}function f(){E(i)&&r().badInput!==E(i).validity.badInput&&(r(r().badInput=E(i).validity.badInput,!0),r().notifyChange())}var u=Xp(),p=M(u),v=M(p);yr(v,{get formElement(){return r()},defaultTitle:"Number argument"}),j(p);var b=q(p,2),_=M(b);qe(_),_.__input=f;let $;$t(_,o=>D(i,o),()=>E(i));var y=q(_,2),a=M(y,!0);j(y),j(b),j(u),Y((o,c)=>{he(_,"min",r().min),he(_,"max",r().max),$=me(_,1,"form-control",null,$,o),he(_,"id",`property-${r().id??""}`),_.disabled=!n(),ce(a,c)},[()=>({"is-invalid":E(l).length>0}),()=>E(l).join(", ")]),Xe(_,()=>E(s),o=>D(s,o)),z(t,u),we()}Re(["input"]);var Qp=H("<option> </option>"),ev=H('<div class="d-flex align-items-center p-2"><div class="property-metadata d-flex flex-row align-self-center w-50"><!></div> <div class="property-input ms-auto w-50 has-validation"><select><option>Select...</option><!></select> <span class="invalid-feedback"> </span></div></div>');function tv(t,e){$e(e,!0);let r=le(e,"editable",3,!0),n=Z(void 0);e.formElement.value.subscribe(o=>D(n,o,!0)),qt(()=>l(E(n)));let s=Z(void 0),i=Z(Se([]));e.formElement.errors.subscribe(o=>D(i,o,!0));function l(o){ct(e.formElement.value)!==o&&(e.formElement.value.set(o),e.formElement.notifyChange())}var d=ev(),f=M(d),u=M(f);yr(u,{get formElement(){return e.formElement},defaultTitle:"Enum argument"}),j(f);var p=q(f,2),v=M(p);let b;var _=M(v);_.value=(_.__value=null)??"";var $=q(_);Ne($,17,()=>e.formElement.options,je,(o,c)=>{var h=Qp(),g={},w=M(h,!0);j(h),Y(()=>{g!==(g=E(c))&&(h.value=(h.__value=E(c))??""),ce(w,E(c))}),z(o,h)}),j(v),$t(v,o=>D(s,o),()=>E(s));var y=q(v,2),a=M(y,!0);j(y),j(p),j(d),Y((o,c)=>{b=me(v,1,"form-select",null,b,o),he(v,"id",`property-${e.formElement.id??""}`),v.disabled=!r(),ce(a,c)},[()=>({"is-invalid":E(i).length>0}),()=>E(i).join(", ")]),Ft(v,()=>E(n),o=>D(n,o)),z(t,d),we()}function rv(t,e,r){e.formElement.addTuple(),r(e.formElement.children)}function nv(t,e,r){e.formElement.removeTuple(),r(e.formElement.children)}var sv=H('<button class="btn btn-danger" type="button">Remove tuple</button>'),av=H('<button class="btn btn-primary" type="button">Add tuple</button>'),iv=H('<button class="btn btn-danger w-100 mt-2" type="button">Remove Property Block</button>'),ov=H('<div class="d-flex"><div class="flex-fill"><!> <!></div></div>'),lv=H('<div class="d-flex justify-content-center p-2"><!></div> <div></div>',1);function cv(t,e){$e(e,!0);let r=le(e,"editable",3,!0),n=le(e,"children",31,()=>Se([])),s=le(e,"reset",3,null);wt(()=>{n(e.formElement.children)});function i(l){e.formElement.removeUnexpectedChild(l),n(e.formElement.children)}_r(t,{get formElement(){return e.formElement},get reset(){return s()},children:(l,d)=>{var f=lv(),u=fe(f),p=M(u);{var v=_=>{var $=Fe(),y=fe($);{var a=c=>{var h=sv();h.__click=[nv,e,n],Y(()=>h.disabled=!r()),z(c,h)},o=c=>{var h=av();h.__click=[rv,e,n],Y(()=>h.disabled=!r()),z(c,h)};W(y,c=>{n().length>0?c(a):c(o,!1)})}z(_,$)};W(p,_=>{e.formElement.required||_(v)})}j(u);var b=q(u,2);Ne(b,21,n,je,(_,$,y)=>{var a=ov(),o=M(a),c=M(o);{var h=w=>{var O=iv();O.__click=()=>i(y),Y(()=>O.disabled=!r()),z(w,O)};W(c,w=>{E($).removable&&w(h)})}var g=q(c,2);hr(g,{get editable(){return r()},get formElement(){return E($)}}),j(o),j(a),z(_,a)}),j(b),z(l,f)},$$slots:{default:!0}}),we()}Re(["click"]);function Ta(t,e,r,n,s){e.formElement.selectChild(E(r)),D(n,e.formElement.selectedItem,!0),D(s,e.formElement.unexpectedChildren,!0)}var dv=H('<div class="alert alert-danger mb-1 py-1 px-2"> </div>'),uv=H('<div class="alert alert-danger mb-1 py-1 px-2"> </div>'),fv=H("<option>Select...</option>"),hv=H("<option> </option>"),mv=H('<div class="mx-2"><!> <!> <div class="d-flex align-items-center mt-2"><div class="property-metadata d-flex flex-row align-self-center w-50"><label class="fw-bold"> </label> <!></div> <div class="property-input ms-auto w-50 has-validation"><select><!><!></select></div></div></div> <!>',1),pv=H("<option> </option>"),vv=H('<div class="alert alert-danger mt-2 mb-1 py-1 px-2"> </div>'),gv=H('<div class="mx-2"><select class="form-select mt-3"></select> <!></div> <!>',1),yv=H('<button class="btn btn-danger w-100 mt-2" type="button">Remove Property Block</button>'),_v=H('<div class="property-block"><!> <div class="d-flex flex-column properties-block"><!></div></div>'),bv=H("<!> <!>",1);function $v(t,e){$e(e,!0);let r=le(e,"reset",3,null),n=Z(Se([])),s=Z(Se([]));e.formElement.errors.subscribe(y=>D(n,y,!0));let i=Z(void 0),l=Z(0),d=Z(Se([])),f=Z(Se([]));wt(()=>{D(d,e.formElement.property.oneOf.map(y=>y.title),!0),D(i,e.formElement.selectedItem,!0),e.formElement.selectedIndex.subscribe(y=>D(l,y,!0)),D(f,e.formElement.unexpectedChildren,!0)});function u(y){e.formElement.removeUnexpectedChild(y),D(f,e.formElement.unexpectedChildren,!0)}qt(()=>{E(i)&&E(i).errors.subscribe(y=>D(s,y,!0))});var p=bv(),v=fe(p);{var b=y=>{var a=Fe(),o=fe(a);nr(o,()=>E(i),c=>{_r(c,{get formElement(){return e.formElement},get reset(){return r()},showErrors:!1,children:(h,g)=>{var w=mv(),O=fe(w),C=M(O);Ne(C,17,()=>E(n),je,(N,k)=>{var m=dv(),S=M(m,!0);j(m),Y(()=>ce(S,E(k))),z(N,m)});var T=q(C,2);Ne(T,17,()=>E(s),je,(N,k)=>{var m=uv(),S=M(m,!0);j(m),Y(()=>ce(S,E(k))),z(N,m)});var F=q(T,2),U=M(F),P=M(U),A=M(P,!0);j(P);var x=q(P,2);to(x,{get description(){return e.formElement.discriminator.description}}),j(U);var L=q(U,2),J=M(L);let Q;J.__change=[Ta,e,l,i,f];var ee=M(J);{var de=N=>{var k=fv();k.value=k.__value=-1,z(N,k)};W(ee,N=>{E(l)===-1&&N(de)})}var _e=q(ee);Ne(_e,17,()=>e.formElement.discriminator.values,je,(N,k,m)=>{var S=hv();S.value=S.__value=m;var R=M(S,!0);j(S),Y(()=>ce(R,E(k))),z(N,S)}),j(J),j(L),j(F),j(O);var V=q(O,2);{var I=N=>{xs(N,{get formElement(){return E(i)},get editable(){return e.editable},showErrors:!1})};W(V,N=>{E(i)&&N(I)})}Y(N=>{he(P,"for",`discriminator-${e.formElement.id??""}`),ce(A,e.formElement.discriminator.title||e.formElement.discriminator.key),Q=me(J,1,"form-select",null,Q,N),he(J,"id",`discriminator-${e.formElement.id??""}`)},[()=>({"is-invalid":E(l)===-1})]),Ft(J,()=>E(l),N=>D(l,N)),z(h,w)},$$slots:{default:!0}})}),z(y,a)},_=y=>{var a=gv(),o=fe(a),c=M(o);c.__change=[Ta,e,l,i,f],Ne(c,21,()=>E(d),je,(w,O,C)=>{var T=pv();T.value=T.__value=C;var F=M(T,!0);j(T),Y(()=>ce(F,E(O))),z(w,T)}),j(c);var h=q(c,2);Ne(h,17,()=>E(n),je,(w,O)=>{var C=vv(),T=M(C,!0);j(C),Y(()=>ce(T,E(O))),z(w,C)}),j(o);var g=q(o,2);nr(g,()=>E(i),w=>{var O=Fe(),C=fe(O);{var T=F=>{hr(F,{get editable(){return e.editable},get reset(){return r()},get formElement(){return E(i)}})};W(C,F=>{E(i)&&F(T)})}z(w,O)}),Ft(c,()=>E(l),w=>D(l,w)),z(y,a)};W(v,y=>{e.formElement.discriminator?y(b):y(_,!1)})}var $=q(v,2);nr($,()=>E(f),y=>{var a=Fe(),o=fe(a);Ne(o,17,()=>E(f),je,(c,h,g)=>{var w=_v(),O=M(w);{var C=U=>{var P=yv();P.__click=()=>u(g),Y(()=>P.disabled=!e.editable),z(U,P)};W(O,U=>{E(h).removable&&U(C)})}var T=q(O,2),F=M(T);hr(F,{get formElement(){return E(f)[g]},get editable(){return e.editable}}),j(T),j(w),Y(()=>he(T,"id",`${E(h).id??""}-wrapper`)),z(c,w)}),z(y,a)}),z(t,p),we()}Re(["change","click"]);var wv=H('<input type="text" placeholder="Argument name">'),Ev=H('<input type="text" placeholder="Argument value">'),Sv=H('<input type="number" placeholder="Argument value">'),kv=H('<select class="form-select"><option>True</option><option>False</option></select>'),Pv=H('<div class="invalid-feedback"> </div>'),Ov=H('<div><!> <!> <select class="form-select"><option>String</option><option>Number</option><option>Boolean</option><option>Object</option><option>Array</option></select> <button class="btn btn-outline-danger" type="button" aria-label="Remove property"><i class="bi bi-trash"></i></button> <!></div>');function ja(t,e){$e(e,!0);let r=le(e,"entry",15),n=le(e,"editable",3,!0);var s=Ov();let i;var l=M(s);{var d=g=>{var w=wv();qe(w);let O;w.__input=function(...C){var T;(T=e.triggerChanges)==null||T.apply(this,C)},Y(C=>{O=me(w,1,"form-control",null,O,C),w.disabled=!n()},[()=>({"is-invalid":r().error})]),Xe(w,()=>r().key,C=>r(r().key=C,!0)),z(g,w)};W(l,g=>{"key"in r()&&g(d)})}var f=q(l,2);{var u=g=>{var w=Ev();qe(w);let O;w.__input=function(...C){var T;(T=e.triggerChanges)==null||T.apply(this,C)},Y(C=>{O=me(w,1,"form-control",null,O,C),w.disabled=!n()},[()=>({"is-invalid":r().error})]),Xe(w,()=>r().value,C=>r(r().value=C,!0)),z(g,w)},p=(g,w)=>{{var O=T=>{var F=Sv();qe(F);let U;F.__input=function(...P){var A;(A=e.triggerChanges)==null||A.apply(this,P)},Y(P=>{U=me(F,1,"form-control",null,U,P),F.disabled=!n()},[()=>({"is-invalid":r().error})]),Xe(F,()=>r().value,P=>r(r().value=P,!0)),z(T,F)},C=(T,F)=>{{var U=P=>{var A=kv();A.__change=function(...J){var Q;(Q=e.triggerChanges)==null||Q.apply(this,J)};var x=M(A);x.value=x.__value=!0;var L=q(x);L.value=L.__value=!1,j(A),Y(()=>A.disabled=!n()),Ft(A,()=>r().value,J=>r(r().value=J,!0)),z(P,A)};W(T,P=>{r().type==="boolean"&&P(U)},F)}};W(g,T=>{r().type==="number"?T(O):T(C,!1)},w)}};W(f,g=>{r().type==="string"?g(u):g(p,!1)})}var v=q(f,2);v.__change=function(...g){var w;(w=e.changeType)==null||w.apply(this,g)};var b=M(v);b.value=b.__value="string";var _=q(b);_.value=_.__value="number";var $=q(_);$.value=$.__value="boolean";var y=q($);y.value=y.__value="object";var a=q(y);a.value=a.__value="array",j(v);var o=q(v,2);o.__click=function(...g){var w;(w=e.removeProperty)==null||w.apply(this,g)};var c=q(o,2);{var h=g=>{var w=Pv(),O=M(w,!0);j(w),Y(()=>ce(O,r().error)),z(g,w)};W(c,g=>{r().error&&g(h)})}j(s),Y(g=>{i=me(s,1,"input-group mb-2",null,i,g),v.disabled=!n(),o.disabled=!n()},[()=>({"has-validation":r().error})]),Ft(v,()=>r().type,g=>r(r().type=g,!0)),z(t,s),we()}Re(["input","change","click"]);var Cv=H('<input type="text" placeholder="Argument name" data-bs-toggle="collapse" data-bs-target="">'),Iv=(t,e)=>e.removeProperty(e.parent,e.index),Av=H('<div class="invalid-feedback"> </div>'),Nv=(t,e,r)=>{"children"in e()&&r.addProperty(e().children,e().type==="object")},Tv=H('<!> <div class="d-flex justify-content-center align-items-center mt-3"><button class="btn btn-secondary">Add property</button></div>',1),jv=H('<div class="accordion mb-2"><div class="accordion-item"><h2 class="accordion-header"><div class="accordion-button collapsed ps-1 pt-1 pb-1" data-bs-toggle="collapse" aria-expanded="false"><div><!> <button class="btn btn-outline-danger" type="button" aria-label="Remove property" data-bs-toggle="collapse" data-bs-target=""><i class="bi bi-trash"></i></button> <!></div> <!></div></h2> <div class="accordion-collapse collapse"><div class="accordion-body"><!></div></div></div></div>');function no(t,e){$e(e,!0);let r=le(e,"entry",15),n=le(e,"editable",3,!0);var s=Fe(),i=fe(s);{var l=f=>{var u=jv(),p=M(u),v=M(p),b=M(v),_=M(b);let $;var y=M(_);{var a=P=>{var A=Cv();qe(A);let x;A.__input=function(...L){var J;(J=e.triggerChanges)==null||J.apply(this,L)},Y(L=>{x=me(A,1,"form-control",null,x,L),A.disabled=!n()},[()=>({"is-invalid":r().error})]),Xe(A,()=>r().key,L=>r(r().key=L,!0)),z(P,A)};W(y,P=>{"key"in r()&&P(a)})}var o=q(y,2);o.__click=[Iv,e];var c=q(o,2);{var h=P=>{var A=Av(),x=M(A,!0);j(A),Y(()=>ce(x,r().error)),z(P,A)};W(c,P=>{r().error&&P(h)})}j(_);var g=q(_,2);{var w=P=>{var A=dr("(obj)");z(P,A)},O=P=>{var A=dr("(list)");z(P,A)};W(g,P=>{r().type==="object"?P(w):P(O,!1)})}j(b),j(v);var C=q(v,2),T=M(C),F=M(T);{var U=P=>{var A=Tv(),x=fe(A);Ne(x,17,()=>r().children,je,(Q,ee,de)=>{var _e=Fe(),V=fe(_e);{var I=k=>{no(k,{get editable(){return n()},get parent(){return r().children},index:de,get changeType(){return e.changeType},get removeProperty(){return e.removeProperty},get addProperty(){return e.addProperty},get triggerChanges(){return e.triggerChanges},get entry(){return r().children[de]},set entry(m){r(r().children[de]=m,!0)}})},N=k=>{ja(k,{get editable(){return n()},get triggerChanges(){return e.triggerChanges},changeType:()=>{"children"in r()&&e.changeType(r().children,de,E(ee).type)},removeProperty:()=>{"children"in r()&&e.removeProperty(r().children,de)},get entry(){return r().children[de]},set entry(m){r(r().children[de]=m,!0)}})};W(V,k=>{E(ee).type==="object"||E(ee).type==="array"?k(I):k(N,!1)})}z(Q,_e)});var L=q(x,2),J=M(L);J.__click=[Nv,r,e],j(L),Y(()=>J.disabled=!n()),z(P,A)};W(F,P=>{r().children&&P(U)})}j(T),j(C),j(p),j(u),Y(P=>{he(u,"id",`accordion-${r().id??""}`),he(b,"data-bs-target",`#collapse-${r().id??""}`),he(b,"aria-controls",`collapse-${r().id??""}`),$=me(_,1,"input-group w-50 me-3",null,$,P),o.disabled=!n(),he(C,"id",`collapse-${r().id??""}`),he(C,"data-bs-parent",`#accordion-${r().id??""}`)},[()=>({"has-validation":r().error})]),z(f,u)},d=f=>{ja(f,{get editable(){return n()},get triggerChanges(){return e.triggerChanges},changeType:()=>e.changeType(e.parent,e.index,r().type),removeProperty:()=>e.removeProperty(e.parent,e.index),get entry(){return r()},set entry(u){r(u)}})};W(i,f=>{r().type==="object"||r().type==="array"?f(l):f(d,!1)})}z(t,s),we()}Re(["input","click"]);var Mv=(t,e,r)=>e(E(r),!0),Dv=H('<div class="d-flex justify-content-center align-items-center mt-3"><button class="btn btn-secondary">Add property</button></div>'),Rv=H('<div class="mt-2 p-2"><!> <!></div>');function xv(t,e){$e(e,!0);let r=le(e,"unsavedChanges",15,!1),n=le(e,"editable",3,!0),s=le(e,"onChange",3,()=>{}),i=le(e,"allowAddingProperty",3,!0),l=le(e,"idPrefix",3,""),d=Z(Se([])),f=Z(""),u=0;wt(()=>{p(e.args)});function p(P){if(Array.isArray(P))E(d).push(v(P,null));else for(const[A,x]of Object.entries(P||{}))E(d).push(v(x,A));O(),D(f,JSON.stringify(E(d)),!0)}qt(()=>{r(E(f)!==JSON.stringify(Mt(E(d))))});function v(P,A){u++;let x={id:`item-${l()}-${u}`,error:""};if(Array.isArray(P)){const L=[];for(const J of P)L.push(v(J,null));x.type="array",x.children=L}else if(typeof P=="object"){const L=[];for(const[J,Q]of Object.entries(P))L.push(v(Q,J));x.type="object",x.children=L}else x.type=typeof P,x.value=P;return A!==null&&(x.key=A),x}function b(P,A){P.push(v("",A?"":null)),O()}function _(P,A){P.splice(A,1),O()}async function $(P,A,x){P[A]=v(y(x),"key"in P[A]?P[A].key||"":null),P[A].type=x,O()}function y(P){switch(P){case"object":return{};case"array":return[];case"boolean":return!0;default:return""}}function a(){o(E(d));const P=[];return c(E(d),P),O(),P.length===0}function o(P){for(const A of P)A.error="",(A.type==="object"||A.type==="array")&&o(A.children)}function c(P,A){const x=[];for(const L of P)"key"in L&&L.key!==void 0&&(L.key.trim()===""?(L.error="Property name can't be empty",A.push(L.error)):x.includes(L.key)?(L.error=`Property name "${L.key}" is already used`,A.push(L.error)):x.push(L.key)),(L.type==="object"||L.type==="array")&&c(L.children,A),L.type==="number"&&typeof L.value=="string"&&!L.value.match(/^\d+\.*\d*$/)&&(L.error="Invalid number",A.push(L.error))}function h(){const P={};if(E(d).length===1&&E(d)[0].type==="array"&&!E(d)[0].key)return g(E(d)[0]);for(const A of E(d))P[A.key]=g(A);return P}function g(P){if(P.type==="object"){const A={};for(const x of P.children)A[x.key]=g(x);return A}else if(P.type==="array"){const A=[];for(const x of P.children)A.push(g(x));return A}else{if(P.type==="number")return Number(P.value);if(P.type==="boolean"||P.type==="string")return P.value}}function w(P){D(d,[],!0),p(P)}function O(){s()(h()),D(d,E(d),!0)}var C=Rv(),T=M(C);Ne(T,17,()=>E(d),je,(P,A,x)=>{no(P,{get editable(){return n()},index:x,get parent(){return E(d)},addProperty:b,changeType:$,removeProperty:_,triggerChanges:O,get entry(){return E(d)[x]},set entry(L){E(d)[x]=L}})});var F=q(T,2);{var U=P=>{var A=Dv(),x=M(A);x.__click=[Mv,b,d],j(A),Y(()=>x.disabled=!n()),z(P,A)};W(F,P=>{i()&&P(U)})}return j(C),z(t,C),we({validateArguments:a,getArguments:h,discardChanges:w})}Re(["click"]);var Lv=H('<div class="alert alert-danger mb-0 py-1 px-2"> </div>'),Fv=H("<div><!> <!></div>");function Vv(t,e){$e(e,!0);let r=le(e,"editable",3,!0),n=Z(Se({}));e.formElement.value.subscribe(b=>D(n,b,!0));let s=Z(Se([]));e.formElement.errors.subscribe(b=>D(s,b,!0));var i=Fv();let l;var d=M(i);{var f=b=>{var _=Lv(),$=M(_,!0);j(_),Y(y=>ce($,y),[()=>E(s).join(", ")]),z(b,_)};W(d,b=>{E(s).length>0&&b(f)})}var u=q(d,2);{var p=b=>{_r(b,{get formElement(){return e.formElement},padding:1,showErrors:!1,children:(_,$)=>{xv(_,{get args(){return E(n)},onChange:y=>{e.formElement.value.set(y),e.formElement.notifyChange()},allowAddingProperty:!1,get editable(){return r()},get idPrefix(){return e.formElement.id}})},$$slots:{default:!0}})},v=b=>{ro(b,{get formElement(){return e.formElement},get editable(){return r()},showErrors:!1})};W(u,b=>{typeof E(n)=="object"?b(p):b(v,!1)})}j(i),Y(b=>l=me(i,1,"border rounded my-2",null,l,b),[()=>({"border-danger":E(s).length>0})]),z(t,i),we()}var zv=H("<p> </p>");function hr(t,e){$e(e,!0);let r=le(e,"editable",3,!0),n=le(e,"reset",3,null);var s=Fe(),i=fe(s);{var l=f=>{ro(f,{get formElement(){return e.formElement},get editable(){return r()}})},d=(f,u)=>{{var p=b=>{Yp(b,{get formElement(){return e.formElement},get editable(){return r()}})},v=(b,_)=>{{var $=a=>{Wp(a,{get formElement(){return e.formElement},get editable(){return r()}})},y=(a,o)=>{{var c=g=>{tv(g,{get formElement(){return e.formElement},get editable(){return r()}})},h=(g,w)=>{{var O=T=>{_r(T,{get formElement(){return e.formElement},get reset(){return n()},children:(F,U)=>{xs(F,{get formElement(){return e.formElement},get editable(){return r()},showErrors:!1})},$$slots:{default:!0}})},C=(T,F)=>{{var U=A=>{Kp(A,{get formElement(){return e.formElement},get editable(){return r()},get reset(){return n()}})},P=(A,x)=>{{var L=Q=>{cv(Q,{get formElement(){return e.formElement},get editable(){return r()},get reset(){return n()}})},J=(Q,ee)=>{{var de=V=>{$v(V,{get formElement(){return e.formElement},get editable(){return r()},get reset(){return n()}})},_e=(V,I)=>{{var N=m=>{Vv(m,{get formElement(){return e.formElement},get editable(){return r()}})},k=m=>{var S=zv(),R=M(S);j(S),Y(()=>ce(R,`Unsupported property type ${e.formElement.type??""}`)),z(m,S)};W(V,m=>{e.formElement.type==="unexpected"||e.formElement.type==="invalid"?m(N):m(k,!1)},I)}};W(Q,V=>{e.formElement.type==="conditional"?V(de):V(_e,!1)},ee)}};W(A,Q=>{e.formElement.type==="tuple"?Q(L):Q(J,!1)},x)}};W(T,A=>{e.formElement.type==="array"?A(U):A(P,!1)},F)}};W(g,T=>{e.formElement.type==="object"?T(O):T(C,!1)},w)}};W(a,g=>{e.formElement.type==="enum"?g(c):g(h,!1)},o)}};W(b,a=>{e.formElement.type==="boolean"?a($):a(y,!1)},_)}};W(f,b=>{e.formElement.type==="number"?b(p):b(v,!1)},u)}};W(i,f=>{e.formElement.type==="string"?f(l):f(d,!1)})}z(t,s),we()}function qv(t,e,r,n,s){try{D(e,""),r.formElement.addChild(E(n).trim()),D(s,r.formElement.children,!0),D(n,"")}catch(i){D(e,i.message,!0)}}var Uv=(t,e,r)=>e(E(r).key),Hv=H('<button class="btn btn-danger w-100 mt-2" type="button">Remove Property Block</button>'),Kv=H('<button class="btn btn-danger w-100 mt-2" type="button">Reset to Default Value</button>'),Bv=H('<div class="property-block svelte-en10qk"><!> <!> <div class="d-flex flex-column properties-block"><!></div></div>'),Jv=H('<div class="alert alert-danger mt-2 mb-1 py-1 px-2"> </div>'),Gv=(t,e)=>D(e,""),Zv=H('<div class="invalid-feedback"> </div>'),Wv=H('<div class="d-flex justify-content-center"><form class="row row-cols-auto g-3 align-items-center p-2 flex-grow-1"><div class="col-lg-6 offset-lg-3 mb-1"><div><input type="text" placeholder="Key"> <button class="btn btn-primary" type="button">Add property</button> <!></div></div></form></div>'),Xv=H("<!> <!> <!>",1);function xs(t,e){$e(e,!0);let r=le(e,"isRoot",3,!1),n=le(e,"editable",3,!0),s=le(e,"showErrors",3,!0),i=Z(Se([])),l=Z(Se([]));e.formElement.errors.subscribe(c=>D(l,c,!0)),wt(()=>{D(i,e.formElement.children,!0)});let d=Z(""),f=Z("");function u(c){e.formElement.removeChild(c),D(i,e.formElement.children,!0)}function p(c){e.formElement.resetChild(c),D(i,e.formElement.children,!0)}function v(c){e.formElement.fixInvalidChild(c),D(i,e.formElement.children,!0)}var b=Xv(),_=fe(b);nr(_,()=>E(i),c=>{var h=Fe(),g=fe(h);Ne(g,17,()=>E(i),je,(w,O,C)=>{var T=Bv(),F=M(T);{var U=Q=>{var ee=Hv();ee.__click=[Uv,u,O],Y(()=>ee.disabled=!n()),z(Q,ee)};W(F,Q=>{E(O).removable&&Q(U)})}var P=q(F,2);{var A=Q=>{var ee=Kv();ee.__click=()=>v(C),Y(()=>ee.disabled=!n()),z(Q,ee)};W(P,Q=>{E(O).type==="invalid"&&Q(A)})}var x=q(P,2),L=M(x);const J=ut(()=>r()?()=>p(C):null);hr(L,{get formElement(){return E(i)[C]},get editable(){return n()},get reset(){return E(J)}}),j(x),j(T),Y(()=>he(x,"id",`${E(O).id??""}-wrapper`)),z(w,T)}),z(c,h)});var $=q(_,2);{var y=c=>{var h=Fe(),g=fe(h);Ne(g,17,()=>E(l),je,(w,O)=>{var C=Jv(),T=M(C,!0);j(C),Y(()=>ce(T,E(O))),z(w,C)}),z(c,h)};W($,c=>{s()&&c(y)})}var a=q($,2);{var o=c=>{var h=Wv(),g=M(h),w=M(g),O=M(w);let C;var T=M(O);qe(T);let F;T.__input=[Gv,f];var U=q(T,2);U.__click=[qv,f,e,d,i];var P=q(U,2);{var A=x=>{var L=Zv(),J=M(L,!0);j(L),Y(()=>ce(J,E(f))),z(x,L)};W(P,x=>{E(f)&&x(A)})}j(O),j(w),j(g),j(h),Y((x,L)=>{C=me(O,1,"input-group",null,C,x),F=me(T,1,"form-control",null,F,L),T.disabled=!n(),U.disabled=!n()},[()=>({"has-validation":E(f)}),()=>({"is-invalid":E(f)})]),Xe(T,()=>E(d),x=>D(d,x)),z(c,h)};W(a,c=>{e.formElement.additionalProperties&&c(o)})}z(t,b),we()}Re(["click","input"]);var Yv=H('<div class="alert alert-danger mt-1"><pre> </pre></div>'),Qv=H("<!> <div><!></div>",1);function so(t,e){$e(e,!0);let r=le(e,"propertiesToIgnore",19,()=>[]),n=le(e,"editable",3,!0),s=le(e,"dataValid",15),i=Z(void 0),l=Z(Se([]));function d(){var _;return(_=E(i))==null?void 0:_.getFormData()}function f(_,$=void 0){if(_)try{D(i,new Op(_,e.onchange,e.schemaVersion,r(),$),!0),E(i).genericErrors.subscribe(y=>D(l,y,!0)),E(i).dataValid.subscribe(y=>s(y))}catch(y){console.error(y),D(i,void 0)}else D(i,void 0)}function u(_,$=void 0){f(_,$)}var p=Fe(),v=fe(p);{var b=_=>{var $=Fe(),y=fe($);nr(y,()=>E(i),a=>{var o=Qv(),c=fe(o);Ne(c,17,()=>E(l),je,(w,O)=>{var C=Yv(),T=M(C),F=M(T,!0);j(T),j(C),Y(()=>ce(F,E(O))),z(w,C)});var h=q(c,2),g=M(h);xs(g,{get formElement(){return E(i).root},isRoot:!0,get editable(){return n()}}),j(h),Y(()=>he(h,"id",e.componentId)),z(a,o)}),z(_,$)};W(v,_=>{E(i)&&_(b)})}return z(t,p),we({getArguments:d,update:u})}var eg={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(vl,function(){class r{constructor(a){a||(a={}),this.main=a.main||"ss-main",this.placeholder=a.placeholder||"ss-placeholder",this.values=a.values||"ss-values",this.single=a.single||"ss-single",this.max=a.max||"ss-max",this.value=a.value||"ss-value",this.valueText=a.valueText||"ss-value-text",this.valueDelete=a.valueDelete||"ss-value-delete",this.valueOut=a.valueOut||"ss-value-out",this.deselect=a.deselect||"ss-deselect",this.deselectPath=a.deselectPath||"M10,10 L90,90 M10,90 L90,10",this.arrow=a.arrow||"ss-arrow",this.arrowClose=a.arrowClose||"M10,30 L50,70 L90,30",this.arrowOpen=a.arrowOpen||"M10,70 L50,30 L90,70",this.content=a.content||"ss-content",this.openAbove=a.openAbove||"ss-open-above",this.openBelow=a.openBelow||"ss-open-below",this.search=a.search||"ss-search",this.searchHighlighter=a.searchHighlighter||"ss-search-highlight",this.searching=a.searching||"ss-searching",this.addable=a.addable||"ss-addable",this.addablePath=a.addablePath||"M50,10 L50,90 M10,50 L90,50",this.list=a.list||"ss-list",this.optgroup=a.optgroup||"ss-optgroup",this.optgroupLabel=a.optgroupLabel||"ss-optgroup-label",this.optgroupLabelText=a.optgroupLabelText||"ss-optgroup-label-text",this.optgroupActions=a.optgroupActions||"ss-optgroup-actions",this.optgroupSelectAll=a.optgroupSelectAll||"ss-selectall",this.optgroupSelectAllBox=a.optgroupSelectAllBox||"M60,10 L10,10 L10,90 L90,90 L90,50",this.optgroupSelectAllCheck=a.optgroupSelectAllCheck||"M30,45 L50,70 L90,10",this.optgroupClosable=a.optgroupClosable||"ss-closable",this.option=a.option||"ss-option",this.optionDelete=a.optionDelete||"M10,10 L90,90 M10,90 L90,10",this.highlighted=a.highlighted||"ss-highlighted",this.open=a.open||"ss-open",this.close=a.close||"ss-close",this.selected=a.selected||"ss-selected",this.error=a.error||"ss-error",this.disabled=a.disabled||"ss-disabled",this.hide=a.hide||"ss-hide"}}function n(){return Math.random().toString(36).substring(2,10)}function s(y,a){function o(h,g){return g&&h&&h.classList&&h.classList.contains(g)||g&&h&&h.dataset&&h.dataset.id&&h.dataset.id===a?h:null}function c(h,g){return!h||h===document?null:o(h,g)?h:c(h.parentNode,g)}return o(y,a)||c(y,a)}function i(y,a=50,o=!1){let c;return function(...h){const g=self,w=()=>{c=null,o||y.apply(g,h)},O=o&&!c;clearTimeout(c),c=setTimeout(w,a),O&&y.apply(g,h)}}function l(y,a){return JSON.stringify(y)===JSON.stringify(a)}function d(y){const a=y.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,o=>"-"+o.toLowerCase());return y[0]===y[0].toUpperCase()?a.substring(1):a}class f{constructor(a){if(this.id=!a.id||a.id===""?n():a.id,this.label=a.label||"",this.selectAll=a.selectAll===void 0?!1:a.selectAll,this.selectAllText=a.selectAllText||"Select All",this.closable=a.closable||"off",this.options=[],a.options)for(const o of a.options)this.options.push(new u(o))}}class u{constructor(a){this.id=!a.id||a.id===""?n():a.id,this.value=a.value===void 0?a.text:a.value,this.text=a.text||"",this.html=a.html||"",this.defaultSelected=a.defaultSelected!==void 0?a.defaultSelected:!1,this.selected=a.selected!==void 0?a.selected:!1,this.display=a.display!==void 0?a.display:!0,this.disabled=a.disabled!==void 0?a.disabled:!1,this.mandatory=a.mandatory!==void 0?a.mandatory:!1,this.placeholder=a.placeholder!==void 0?a.placeholder:!1,this.class=a.class||"",this.style=a.style||"",this.data=a.data||{}}}class p{constructor(a,o){this.selectType="single",this.data=[],this.selectedOrder=[],this.selectType=a,this.setData(o)}validateDataArray(a){if(!Array.isArray(a))return new Error("Data must be an array");for(let o of a)if(o instanceof f||"label"in o){if(!("label"in o))return new Error("Optgroup must have a label");if("options"in o&&o.options)for(let c of o.options){const h=this.validateOption(c);if(h)return h}}else if(o instanceof u||"text"in o){const c=this.validateOption(o);if(c)return c}else return new Error("Data object must be a valid optgroup or option");return null}validateOption(a){return"text"in a?null:new Error("Option must have a text")}partialToFullData(a){let o=[];return a.forEach(c=>{if(c instanceof f||"label"in c){let h=[];"options"in c&&c.options&&c.options.forEach(g=>{h.push(new u(g))}),h.length>0&&o.push(new f(c))}(c instanceof u||"text"in c)&&o.push(new u(c))}),o}setData(a){this.data=this.partialToFullData(a),this.selectType==="single"&&this.setSelectedBy("id",this.getSelected())}getData(){return this.filter(null,!0)}getDataOptions(){return this.filter(null,!1)}addOption(a,o=!1){if(o){let c=[new u(a)];this.setData(c.concat(this.getData()))}else this.setData(this.getData().concat(new u(a)))}setSelectedBy(a,o){let c=null,h=!1;const g=[];for(let O of this.data){if(O instanceof f)for(let C of O.options)c||(c=C),C.selected=h?!1:o.includes(C[a]),C.selected&&(g.push(C),this.selectType==="single"&&(h=!0));O instanceof u&&(c||(c=O),O.selected=h?!1:o.includes(O[a]),O.selected&&(g.push(O),this.selectType==="single"&&(h=!0)))}this.selectType==="single"&&c&&!h&&(c.selected=!0,g.push(c));const w=o.map(O=>{var C;return((C=g.find(T=>T[a]===O))===null||C===void 0?void 0:C.id)||""});this.selectedOrder=w}getSelected(){return this.getSelectedOptions().map(a=>a.id)}getSelectedValues(){return this.getSelectedOptions().map(a=>a.value)}getSelectedOptions(){return this.filter(a=>a.selected,!1)}getOptgroupByID(a){for(let o of this.data)if(o instanceof f&&o.id===a)return o;return null}getOptionByID(a){let o=this.filter(c=>c.id===a,!1);return o.length?o[0]:null}getSelectType(){return this.selectType}getFirstOption(){let a=null;for(let o of this.data)if(o instanceof f?a=o.options[0]:o instanceof u&&(a=o),a)break;return a}search(a,o){return a=a.trim(),a===""?this.getData():this.filter(c=>o(c,a),!0)}filter(a,o){const c=[];return this.data.forEach(h=>{if(h instanceof f){let g=[];if(h.options.forEach(w=>{(!a||a(w))&&(o?g.push(new u(w)):c.push(new u(w)))}),g.length>0){let w=new f(h);w.options=g,c.push(w)}}h instanceof u&&(!a||a(h))&&c.push(new u(h))}),c}selectedOrderOptions(a){const o=[];return this.selectedOrder.forEach(c=>{const h=a.find(g=>g.id===c);h&&o.push(h)}),a.forEach(c=>{let h=!1;o.forEach(g=>{if(c.id===g.id){h=!0;return}}),h||o.push(c)}),o}}class v{constructor(a,o,c,h){this.store=c,this.settings=a,this.classes=o,this.callbacks=h,this.lastSelectedOption=null,this.main=this.mainDiv(),this.content=this.contentDiv(),this.updateClassStyles(),this.updateAriaAttributes(),this.settings.contentLocation&&this.settings.contentLocation.appendChild(this.content.main)}enable(){this.main.main.classList.remove(this.classes.disabled),this.content.search.input.disabled=!1}disable(){this.main.main.classList.add(this.classes.disabled),this.content.search.input.disabled=!0}open(){this.main.arrow.path.setAttribute("d",this.classes.arrowOpen),this.main.main.classList.add(this.settings.openPosition==="up"?this.classes.openAbove:this.classes.openBelow),this.main.main.setAttribute("aria-expanded","true"),this.moveContent();const a=this.store.getSelectedOptions();if(a.length){const o=a[a.length-1].id,c=this.content.list.querySelector('[data-id="'+o+'"]');c&&this.ensureElementInView(this.content.list,c)}}close(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.remove(this.classes.openBelow),this.main.main.setAttribute("aria-expanded","false"),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.main.arrow.path.setAttribute("d",this.classes.arrowClose)}updateClassStyles(){if(this.main.main.className="",this.main.main.removeAttribute("style"),this.content.main.className="",this.content.main.removeAttribute("style"),this.main.main.classList.add(this.classes.main),this.content.main.classList.add(this.classes.content),this.settings.style!==""&&(this.main.main.style.cssText=this.settings.style,this.content.main.style.cssText=this.settings.style),this.settings.class.length)for(const a of this.settings.class)a.trim()!==""&&(this.main.main.classList.add(a.trim()),this.content.main.classList.add(a.trim()));(this.settings.contentPosition==="relative"||this.settings.contentPosition==="fixed")&&this.content.main.classList.add("ss-"+this.settings.contentPosition)}updateAriaAttributes(){var a;this.main.main.role="combobox",this.main.main.setAttribute("aria-haspopup","listbox"),this.main.main.setAttribute("aria-controls",(a=this.content.main.dataset.id)!==null&&a!==void 0?a:""),this.main.main.setAttribute("aria-expanded","false"),this.content.main.setAttribute("role","listbox")}mainDiv(){var a;const o=document.createElement("div");o.dataset.id=this.settings.id,o.setAttribute("aria-label",this.settings.ariaLabel),o.tabIndex=0,o.onkeydown=F=>{switch(F.key){case"ArrowUp":case"ArrowDown":return this.callbacks.open(),F.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Enter":case" ":this.callbacks.open();const U=this.content.list.querySelector("."+this.classes.highlighted);return U&&U.click(),!1;case"Escape":return this.callbacks.close(),!1}return F.key.length===1&&this.callbacks.open(),!0},o.onclick=F=>{this.settings.disabled||(this.settings.isOpen?this.callbacks.close():this.callbacks.open())};const c=document.createElement("div");c.classList.add(this.classes.values),o.appendChild(c);const h=document.createElement("div");h.classList.add(this.classes.deselect);const g=(a=this.store)===null||a===void 0?void 0:a.getSelectedOptions();!this.settings.allowDeselect||this.settings.isMultiple&&g&&g.length<=0?h.classList.add(this.classes.hide):h.classList.remove(this.classes.hide),h.onclick=F=>{if(F.stopPropagation(),this.settings.disabled)return;let U=!0;const P=this.store.getSelectedOptions(),A=[];if(this.callbacks.beforeChange&&(U=this.callbacks.beforeChange(A,P)===!0),U){if(this.settings.isMultiple)this.callbacks.setSelected([],!1),this.updateDeselectAll();else{const x=this.store.getFirstOption(),L=x?x.id:"";this.callbacks.setSelected(L,!1)}this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(this.store.getSelectedOptions())}};const w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.setAttribute("viewBox","0 0 100 100");const O=document.createElementNS("http://www.w3.org/2000/svg","path");O.setAttribute("d",this.classes.deselectPath),w.appendChild(O),h.appendChild(w),o.appendChild(h);const C=document.createElementNS("http://www.w3.org/2000/svg","svg");C.classList.add(this.classes.arrow),C.setAttribute("viewBox","0 0 100 100");const T=document.createElementNS("http://www.w3.org/2000/svg","path");return T.setAttribute("d",this.classes.arrowClose),this.settings.alwaysOpen&&C.classList.add(this.classes.hide),C.appendChild(T),o.appendChild(C),{main:o,values:c,deselect:{main:h,svg:w,path:O},arrow:{main:C,path:T}}}mainFocus(a){a!=="click"&&this.main.main.focus({preventScroll:!0})}placeholder(){const a=this.store.filter(h=>h.placeholder,!1);let o=this.settings.placeholderText;a.length&&(a[0].html!==""?o=a[0].html:a[0].text!==""&&(o=a[0].text));const c=document.createElement("div");return c.classList.add(this.classes.placeholder),c.innerHTML=o,c}renderValues(){if(!this.settings.isMultiple){this.renderSingleValue();return}this.renderMultipleValues(),this.updateDeselectAll()}renderSingleValue(){const a=this.store.filter(c=>c.selected&&!c.placeholder,!1),o=a.length>0?a[0]:null;if(!o)this.main.values.innerHTML=this.placeholder().outerHTML;else{const c=document.createElement("div");c.classList.add(this.classes.single),o.html?c.innerHTML=o.html:c.innerText=o.text,this.main.values.innerHTML=c.outerHTML}!this.settings.allowDeselect||!a.length?this.main.deselect.main.classList.add(this.classes.hide):this.main.deselect.main.classList.remove(this.classes.hide)}renderMultipleValues(){let a=this.main.values.childNodes,o=this.store.filter(h=>h.selected&&h.display,!1);if(o.length===0){this.main.values.innerHTML=this.placeholder().outerHTML;return}else{const h=this.main.values.querySelector("."+this.classes.placeholder);h&&h.remove()}if(o.length>this.settings.maxValuesShown){const h=document.createElement("div");h.classList.add(this.classes.max),h.textContent=this.settings.maxValuesMessage.replace("{number}",o.length.toString()),this.main.values.innerHTML=h.outerHTML;return}else{const h=this.main.values.querySelector("."+this.classes.max);h&&h.remove()}this.settings.keepOrder&&(o=this.store.selectedOrderOptions(o));let c=[];for(let h=0;h<a.length;h++){const g=a[h],w=g.getAttribute("data-id");w&&(o.filter(C=>C.id===w,!1).length||c.push(g))}for(const h of c)h.classList.add(this.classes.valueOut),setTimeout(()=>{this.main.values.hasChildNodes()&&this.main.values.contains(h)&&this.main.values.removeChild(h)},100);a=this.main.values.childNodes;for(let h=0;h<o.length;h++){let g=!0;for(let w=0;w<a.length;w++)o[h].id===String(a[w].dataset.id)&&(g=!1);g&&(this.settings.keepOrder?this.main.values.appendChild(this.multipleValue(o[h])):a.length===0?this.main.values.appendChild(this.multipleValue(o[h])):h===0?this.main.values.insertBefore(this.multipleValue(o[h]),a[h]):a[h-1].insertAdjacentElement("afterend",this.multipleValue(o[h])))}}multipleValue(a){const o=document.createElement("div");o.classList.add(this.classes.value),o.dataset.id=a.id;const c=document.createElement("div");if(c.classList.add(this.classes.valueText),c.textContent=a.text,o.appendChild(c),!a.mandatory){const h=document.createElement("div");h.classList.add(this.classes.valueDelete),h.setAttribute("tabindex","0"),h.onclick=O=>{if(O.preventDefault(),O.stopPropagation(),this.settings.disabled)return;let C=!0;const T=this.store.getSelectedOptions(),F=T.filter(U=>U.selected&&U.id!==a.id,!0);if(!(this.settings.minSelected&&F.length<this.settings.minSelected)&&(this.callbacks.beforeChange&&(C=this.callbacks.beforeChange(F,T)===!0),C)){let U=[];for(const P of F){if(P instanceof f)for(const A of P.options)U.push(A.id);P instanceof u&&U.push(P.id)}this.callbacks.setSelected(U,!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(F),this.updateDeselectAll()}};const g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttribute("viewBox","0 0 100 100");const w=document.createElementNS("http://www.w3.org/2000/svg","path");w.setAttribute("d",this.classes.optionDelete),g.appendChild(w),h.appendChild(g),o.appendChild(h),h.onkeydown=O=>{O.key==="Enter"&&h.click()}}return o}contentDiv(){const a=document.createElement("div");a.dataset.id=this.settings.id;const o=this.searchDiv();a.appendChild(o.main);const c=this.listDiv();return a.appendChild(c),{main:a,search:o,list:c}}moveContent(){if(this.settings.contentPosition==="relative"){this.moveContentBelow();return}if(this.settings.openPosition==="down"){this.moveContentBelow();return}else if(this.settings.openPosition==="up"){this.moveContentAbove();return}this.putContent()==="up"?this.moveContentAbove():this.moveContentBelow()}searchDiv(){const a=document.createElement("div"),o=document.createElement("input"),c=document.createElement("div");a.classList.add(this.classes.search);const h={main:a,input:o};if(this.settings.showSearch||(a.classList.add(this.classes.hide),o.readOnly=!0),o.type="search",o.placeholder=this.settings.searchPlaceholder,o.tabIndex=-1,o.setAttribute("aria-label",this.settings.searchPlaceholder),o.setAttribute("autocapitalize","off"),o.setAttribute("autocomplete","off"),o.setAttribute("autocorrect","off"),o.oninput=i(g=>{this.callbacks.search(g.target.value)},100),o.onkeydown=g=>{switch(g.key){case"ArrowUp":case"ArrowDown":return g.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Escape":return this.callbacks.close(),!1;case" ":const w=this.content.list.querySelector("."+this.classes.highlighted);return w?(w.click(),!1):!0;case"Enter":if(this.callbacks.addable)return c.click(),!1;{const O=this.content.list.querySelector("."+this.classes.highlighted);if(O)return O.click(),!1}return!0}return!0},a.appendChild(o),this.callbacks.addable){c.classList.add(this.classes.addable);const g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttribute("viewBox","0 0 100 100");const w=document.createElementNS("http://www.w3.org/2000/svg","path");w.setAttribute("d",this.classes.addablePath),g.appendChild(w),c.appendChild(g),c.onclick=O=>{if(O.preventDefault(),O.stopPropagation(),!this.callbacks.addable)return;const C=this.content.search.input.value.trim();if(C===""){this.content.search.input.focus();return}const T=U=>{let P=new u(U);if(this.callbacks.addOption(P),this.settings.isMultiple){let A=this.store.getSelected();A.push(P.id),this.callbacks.setSelected(A,!0)}else this.callbacks.setSelected([P.id],!0);this.callbacks.search(""),this.settings.closeOnSelect&&setTimeout(()=>{this.callbacks.close()},100)},F=this.callbacks.addable(C);F===!1||F===void 0||F===null||(F instanceof Promise?F.then(U=>{typeof U=="string"?T({text:U,value:U}):F instanceof Error?this.renderError(F.message):T(U)}):typeof F=="string"?T({text:F,value:F}):F instanceof Error?this.renderError(F.message):T(F))},a.appendChild(c),h.addable={main:c,svg:g,path:w}}return h}searchFocus(){this.content.search.input.focus()}getOptions(a=!1,o=!1,c=!1){let h="."+this.classes.option;return a&&(h+=":not(."+this.classes.placeholder+")"),o&&(h+=":not(."+this.classes.disabled+")"),c&&(h+=":not(."+this.classes.hide+")"),Array.from(this.content.list.querySelectorAll(h))}highlight(a){const o=this.getOptions(!0,!0,!0);if(o.length===0)return;if(o.length===1&&!o[0].classList.contains(this.classes.highlighted)){o[0].classList.add(this.classes.highlighted);return}let c=!1;for(const h of o)h.classList.contains(this.classes.highlighted)&&(c=!0);if(!c){for(const h of o)if(h.classList.contains(this.classes.selected)){h.classList.add(this.classes.highlighted);break}}for(let h=0;h<o.length;h++)if(o[h].classList.contains(this.classes.highlighted)){const g=o[h];g.classList.remove(this.classes.highlighted);const w=g.parentElement;if(w&&w.classList.contains(this.classes.open)){const T=w.querySelector("."+this.classes.optgroupLabel);T&&T.click()}let O=o[a==="down"?h+1<o.length?h+1:0:h-1>=0?h-1:o.length-1];O.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,O);const C=O.parentElement;if(C&&C.classList.contains(this.classes.close)){const T=C.querySelector("."+this.classes.optgroupLabel);T&&T.click()}return}o[a==="down"?0:o.length-1].classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,o[a==="down"?0:o.length-1])}listDiv(){const a=document.createElement("div");return a.classList.add(this.classes.list),a}renderError(a){this.content.list.innerHTML="";const o=document.createElement("div");o.classList.add(this.classes.error),o.textContent=a,this.content.list.appendChild(o)}renderSearching(){this.content.list.innerHTML="";const a=document.createElement("div");a.classList.add(this.classes.searching),a.textContent=this.settings.searchingText,this.content.list.appendChild(a)}renderOptions(a){if(this.content.list.innerHTML="",a.length===0){const c=document.createElement("div");c.classList.add(this.classes.search),this.callbacks.addable?c.innerHTML=this.settings.addableText.replace("{value}",this.content.search.input.value):c.innerHTML=this.settings.searchText,this.content.list.appendChild(c);return}this.settings.allowDeselect&&!this.settings.isMultiple&&(this.store.filter(h=>h.placeholder,!1).length||this.store.addOption(new u({text:"",value:"",selected:!1,placeholder:!0}),!0));const o=document.createDocumentFragment();for(const c of a){if(c instanceof f){const h=document.createElement("div");h.classList.add(this.classes.optgroup);const g=document.createElement("div");g.classList.add(this.classes.optgroupLabel),h.appendChild(g);const w=document.createElement("div");w.classList.add(this.classes.optgroupLabelText),w.textContent=c.label,g.appendChild(w);const O=document.createElement("div");if(O.classList.add(this.classes.optgroupActions),g.appendChild(O),this.settings.isMultiple&&c.selectAll){const C=document.createElement("div");C.classList.add(this.classes.optgroupSelectAll);let T=!0;for(const x of c.options)if(!x.selected){T=!1;break}T&&C.classList.add(this.classes.selected);const F=document.createElement("span");F.textContent=c.selectAllText,C.appendChild(F);const U=document.createElementNS("http://www.w3.org/2000/svg","svg");U.setAttribute("viewBox","0 0 100 100"),C.appendChild(U);const P=document.createElementNS("http://www.w3.org/2000/svg","path");P.setAttribute("d",this.classes.optgroupSelectAllBox),U.appendChild(P);const A=document.createElementNS("http://www.w3.org/2000/svg","path");A.setAttribute("d",this.classes.optgroupSelectAllCheck),U.appendChild(A),C.addEventListener("click",x=>{x.preventDefault(),x.stopPropagation();const L=this.store.getSelected();if(T){const J=L.filter(Q=>{for(const ee of c.options)if(Q===ee.id)return!1;return!0});this.callbacks.setSelected(J,!0);return}else{const J=L.concat(c.options.map(Q=>Q.id));for(const Q of c.options)this.store.getOptionByID(Q.id)||this.callbacks.addOption(Q);this.callbacks.setSelected(J,!0);return}}),O.appendChild(C)}if(c.closable!=="off"){const C=document.createElement("div");C.classList.add(this.classes.optgroupClosable);const T=document.createElementNS("http://www.w3.org/2000/svg","svg");T.setAttribute("viewBox","0 0 100 100"),T.classList.add(this.classes.arrow),C.appendChild(T);const F=document.createElementNS("http://www.w3.org/2000/svg","path");T.appendChild(F),c.options.some(U=>U.selected)||this.content.search.input.value.trim()!==""?(C.classList.add(this.classes.open),F.setAttribute("d",this.classes.arrowOpen)):c.closable==="open"?(h.classList.add(this.classes.open),F.setAttribute("d",this.classes.arrowOpen)):c.closable==="close"&&(h.classList.add(this.classes.close),F.setAttribute("d",this.classes.arrowClose)),g.addEventListener("click",U=>{U.preventDefault(),U.stopPropagation(),h.classList.contains(this.classes.close)?(h.classList.remove(this.classes.close),h.classList.add(this.classes.open),F.setAttribute("d",this.classes.arrowOpen)):(h.classList.remove(this.classes.open),h.classList.add(this.classes.close),F.setAttribute("d",this.classes.arrowClose))}),O.appendChild(C)}h.appendChild(g);for(const C of c.options)h.appendChild(this.option(C)),o.appendChild(h)}c instanceof u&&o.appendChild(this.option(c))}this.content.list.appendChild(o)}option(a){if(a.placeholder){const c=document.createElement("div");return c.classList.add(this.classes.option),c.classList.add(this.classes.hide),c}const o=document.createElement("div");return o.dataset.id=a.id,o.classList.add(this.classes.option),o.setAttribute("role","option"),a.class&&a.class.split(" ").forEach(c=>{o.classList.add(c)}),a.style&&(o.style.cssText=a.style),this.settings.searchHighlight&&this.content.search.input.value.trim()!==""?o.innerHTML=this.highlightText(a.html!==""?a.html:a.text,this.content.search.input.value,this.classes.searchHighlighter):a.html!==""?o.innerHTML=a.html:o.textContent=a.text,this.settings.showOptionTooltips&&o.textContent&&o.setAttribute("title",o.textContent),a.display||o.classList.add(this.classes.hide),a.disabled&&o.classList.add(this.classes.disabled),a.selected&&this.settings.hideSelected&&o.classList.add(this.classes.hide),a.selected?(o.classList.add(this.classes.selected),o.setAttribute("aria-selected","true"),this.main.main.setAttribute("aria-activedescendant",o.id)):(o.classList.remove(this.classes.selected),o.setAttribute("aria-selected","false")),o.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation();const h=this.store.getSelected(),g=c.currentTarget,w=String(g.dataset.id);if(a.disabled||a.selected&&!this.settings.allowDeselect||this.settings.isMultiple&&this.settings.maxSelected<=h.length&&!a.selected||this.settings.isMultiple&&this.settings.minSelected>=h.length&&a.selected)return;let O=!1;const C=this.store.getSelectedOptions();let T=[];if(this.settings.isMultiple){if(a.selected)T=C.filter(F=>F.id!==w);else if(T=C.concat(a),!this.settings.closeOnSelect)if(c.shiftKey&&this.lastSelectedOption){const F=this.store.getDataOptions();let U=F.findIndex(A=>A.id===this.lastSelectedOption.id),P=F.findIndex(A=>A.id===a.id);if(U>=0&&P>=0){const A=Math.min(U,P),x=Math.max(U,P),L=F.slice(A,x+1);L.length>0&&L.length<this.settings.maxSelected&&(T=C.concat(L.filter(J=>!C.find(Q=>Q.id===J.id))))}}else a.selected||(this.lastSelectedOption=a)}this.settings.isMultiple||(a.selected?T=[]:T=[a]),this.callbacks.beforeChange||(O=!0),this.callbacks.beforeChange&&(this.callbacks.beforeChange(T,C)===!1?O=!1:O=!0),O&&(this.store.getOptionByID(w)||this.callbacks.addOption(a),this.callbacks.setSelected(T.map(F=>F.id),!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(T))}),o}destroy(){this.main.main.remove(),this.content.main.remove()}highlightText(a,o,c){let h=a;const g=new RegExp("(?![^<]*>)("+o.trim()+")(?![^<]*>[^<>]*</)","i");if(!a.match(g))return a;const w=a.match(g).index,O=w+a.match(g)[0].toString().length,C=a.substring(w,O);return h=h.replace(g,`<mark class="${c}">${C}</mark>`),h}moveContentAbove(){const a=this.main.main.offsetHeight,o=this.content.main.offsetHeight;this.main.main.classList.remove(this.classes.openBelow),this.main.main.classList.add(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.content.main.classList.add(this.classes.openAbove);const c=this.main.main.getBoundingClientRect();this.content.main.style.margin="-"+(a+o-1)+"px 0px 0px 0px",this.content.main.style.top=c.top+c.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=c.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=c.width+"px"}moveContentBelow(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.add(this.classes.openBelow),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.add(this.classes.openBelow);const a=this.main.main.getBoundingClientRect();this.content.main.style.margin="-1px 0px 0px 0px",this.settings.contentPosition!=="relative"&&(this.content.main.style.top=a.top+a.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=a.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=a.width+"px")}ensureElementInView(a,o){const c=a.scrollTop+a.offsetTop,h=c+a.clientHeight,g=o.offsetTop,w=g+o.clientHeight;g<c?a.scrollTop-=c-g:w>h&&(a.scrollTop+=w-h)}putContent(){const a=this.main.main.offsetHeight,o=this.main.main.getBoundingClientRect(),c=this.content.main.offsetHeight;return window.innerHeight-(o.top+a)<=c&&o.top>c?"up":"down"}updateDeselectAll(){if(!this.store||!this.settings)return;const a=this.store.getSelectedOptions(),o=a&&a.length>0,c=this.settings.isMultiple,h=this.settings.allowDeselect,g=this.main.deselect.main,w=this.classes.hide;h&&!(c&&!o)?g.classList.remove(w):g.classList.add(w)}}class b{constructor(a){this.listen=!1,this.observer=null,this.select=a,this.valueChange=this.valueChange.bind(this),this.select.addEventListener("change",this.valueChange,{passive:!0}),this.observer=new MutationObserver(this.observeCall.bind(this)),this.changeListen(!0)}enable(){this.select.disabled=!1}disable(){this.select.disabled=!0}hideUI(){this.select.tabIndex=-1,this.select.style.display="none",this.select.setAttribute("aria-hidden","true")}showUI(){this.select.removeAttribute("tabindex"),this.select.style.display="",this.select.removeAttribute("aria-hidden")}changeListen(a){this.listen=a,a&&this.observer&&this.observer.observe(this.select,{subtree:!0,childList:!0,attributes:!0}),a||this.observer&&this.observer.disconnect()}valueChange(a){return this.listen&&this.onValueChange&&this.onValueChange(this.getSelectedOptions()),!0}observeCall(a){if(!this.listen)return;let o=!1,c=!1,h=!1;for(const g of a){if(g.target===this.select&&(g.attributeName==="disabled"&&(c=!0),g.attributeName==="class"&&(o=!0),g.type==="childList")){for(const w of g.addedNodes)if(w.nodeName==="OPTION"&&w.value===this.select.value){this.select.dispatchEvent(new Event("change"));break}h=!0}(g.target.nodeName==="OPTGROUP"||g.target.nodeName==="OPTION")&&(h=!0)}o&&this.onClassChange&&this.onClassChange(this.select.className.split(" ")),c&&this.onDisabledChange&&(this.changeListen(!1),this.onDisabledChange(this.select.disabled),this.changeListen(!0)),h&&this.onOptionsChange&&(this.changeListen(!1),this.onOptionsChange(this.getData()),this.changeListen(!0))}getData(){let a=[];const o=this.select.childNodes;for(const c of o)c.nodeName==="OPTGROUP"&&a.push(this.getDataFromOptgroup(c)),c.nodeName==="OPTION"&&a.push(this.getDataFromOption(c));return a}getDataFromOptgroup(a){let o={id:a.id,label:a.label,selectAll:a.dataset?a.dataset.selectall==="true":!1,selectAllText:a.dataset?a.dataset.selectalltext:"Select all",closable:a.dataset?a.dataset.closable:"off",options:[]};const c=a.childNodes;for(const h of c)h.nodeName==="OPTION"&&o.options.push(this.getDataFromOption(h));return o}getDataFromOption(a){return{id:a.id,value:a.value,text:a.text,html:a.dataset&&a.dataset.html?a.dataset.html:"",defaultSelected:a.defaultSelected,selected:a.selected,display:a.style.display!=="none",disabled:a.disabled,mandatory:a.dataset?a.dataset.mandatory==="true":!1,placeholder:a.dataset.placeholder==="true",class:a.className,style:a.style.cssText,data:a.dataset}}getSelectedOptions(){let a=[];const o=this.select.childNodes;for(const c of o){if(c.nodeName==="OPTGROUP"){const h=c.childNodes;for(const g of h)if(g.nodeName==="OPTION"){const w=g;w.selected&&a.push(this.getDataFromOption(w))}}if(c.nodeName==="OPTION"){const h=c;h.selected&&a.push(this.getDataFromOption(h))}}return a}getSelectedValues(){return this.getSelectedOptions().map(a=>a.value)}setSelected(a){this.changeListen(!1);const o=this.select.childNodes;for(const c of o){if(c.nodeName==="OPTGROUP"){const g=c.childNodes;for(const w of g)if(w.nodeName==="OPTION"){const O=w;O.selected=a.includes(O.id)}}if(c.nodeName==="OPTION"){const h=c;h.selected=a.includes(h.id)}}this.changeListen(!0)}setSelectedByValue(a){this.changeListen(!1);const o=this.select.childNodes;for(const c of o){if(c.nodeName==="OPTGROUP"){const g=c.childNodes;for(const w of g)if(w.nodeName==="OPTION"){const O=w;O.selected=a.includes(O.value)}}if(c.nodeName==="OPTION"){const h=c;h.selected=a.includes(h.value)}}this.changeListen(!0)}updateSelect(a,o,c){this.changeListen(!1),a&&(this.select.dataset.id=a),o&&(this.select.style.cssText=o),c&&(this.select.className="",c.forEach(h=>{h.trim()!==""&&this.select.classList.add(h.trim())})),this.changeListen(!0)}updateOptions(a){this.changeListen(!1),this.select.innerHTML="";for(const o of a)o instanceof f&&this.select.appendChild(this.createOptgroup(o)),o instanceof u&&this.select.appendChild(this.createOption(o));this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.changeListen(!0)}createOptgroup(a){const o=document.createElement("optgroup");if(o.id=a.id,o.label=a.label,a.selectAll&&(o.dataset.selectAll="true"),a.closable!=="off"&&(o.dataset.closable=a.closable),a.options)for(const c of a.options)o.appendChild(this.createOption(c));return o}createOption(a){const o=document.createElement("option");return o.id=a.id,o.value=a.value,o.textContent=a.text,a.html!==""&&o.setAttribute("data-html",a.html),o.defaultSelected=a.defaultSelected,o.selected=a.selected,a.disabled&&(o.disabled=!0),a.display||(o.style.display="none"),a.placeholder&&o.setAttribute("data-placeholder","true"),a.mandatory&&o.setAttribute("data-mandatory","true"),a.class&&a.class.split(" ").forEach(c=>{o.classList.add(c)}),a.data&&typeof a.data=="object"&&Object.keys(a.data).forEach(c=>{o.setAttribute("data-"+d(c),a.data[c])}),o}destroy(){this.changeListen(!1),this.select.removeEventListener("change",this.valueChange),this.observer&&(this.observer.disconnect(),this.observer=null),delete this.select.dataset.id,this.showUI()}}class _{constructor(a){this.id="",this.style="",this.class=[],this.isMultiple=!1,this.isOpen=!1,this.isFullOpen=!1,this.intervalMove=null,a||(a={}),this.id="ss-"+n(),this.style=a.style||"",this.class=a.class||[],this.disabled=a.disabled!==void 0?a.disabled:!1,this.alwaysOpen=a.alwaysOpen!==void 0?a.alwaysOpen:!1,this.showSearch=a.showSearch!==void 0?a.showSearch:!0,this.focusSearch=a.focusSearch!==void 0?a.focusSearch:!0,this.ariaLabel=a.ariaLabel||"Combobox",this.searchPlaceholder=a.searchPlaceholder||"Search",this.searchText=a.searchText||"No Results",this.searchingText=a.searchingText||"Searching...",this.searchHighlight=a.searchHighlight!==void 0?a.searchHighlight:!1,this.closeOnSelect=a.closeOnSelect!==void 0?a.closeOnSelect:!0,this.contentLocation=a.contentLocation||document.body,this.contentPosition=a.contentPosition||"absolute",this.openPosition=a.openPosition||"auto",this.placeholderText=a.placeholderText!==void 0?a.placeholderText:"Select Value",this.allowDeselect=a.allowDeselect!==void 0?a.allowDeselect:!1,this.hideSelected=a.hideSelected!==void 0?a.hideSelected:!1,this.keepOrder=a.keepOrder!==void 0?a.keepOrder:!1,this.showOptionTooltips=a.showOptionTooltips!==void 0?a.showOptionTooltips:!1,this.minSelected=a.minSelected||0,this.maxSelected=a.maxSelected||1e3,this.timeoutDelay=a.timeoutDelay||200,this.maxValuesShown=a.maxValuesShown||20,this.maxValuesMessage=a.maxValuesMessage||"{number} selected",this.addableText=a.addableText||'Press "Enter" to add {value}'}}class ${constructor(a){var o;if(this.events={search:void 0,searchFilter:(O,C)=>O.text.toLowerCase().indexOf(C.toLowerCase())!==-1,addable:void 0,beforeChange:void 0,afterChange:void 0,beforeOpen:void 0,afterOpen:void 0,beforeClose:void 0,afterClose:void 0},this.windowResize=i(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.windowScroll=i(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.documentClick=O=>{this.settings.isOpen&&O.target&&!s(O.target,this.settings.id)&&this.close(O.type)},this.windowVisibilityChange=()=>{document.hidden&&this.close()},this.selectEl=typeof a.select=="string"?document.querySelector(a.select):a.select,!this.selectEl){a.events&&a.events.error&&a.events.error(new Error("Could not find select element"));return}if(this.selectEl.tagName!=="SELECT"){a.events&&a.events.error&&a.events.error(new Error("Element isnt of type select"));return}this.selectEl.dataset.ssid&&this.destroy(),this.settings=new _(a.settings),this.cssClasses=new r(a.cssClasses);const c=["afterChange","beforeOpen","afterOpen","beforeClose","afterClose"];for(const O in a.events)a.events.hasOwnProperty(O)&&(c.indexOf(O)!==-1?this.events[O]=i(a.events[O],100):this.events[O]=a.events[O]);this.settings.disabled=!((o=a.settings)===null||o===void 0)&&o.disabled?a.settings.disabled:this.selectEl.disabled,this.settings.isMultiple=this.selectEl.multiple,this.settings.style=this.selectEl.style.cssText,this.settings.class=this.selectEl.className.split(" "),this.select=new b(this.selectEl),this.select.updateSelect(this.settings.id,this.settings.style,this.settings.class),this.select.hideUI(),this.select.onValueChange=O=>{this.setSelected(O.map(C=>C.id))},this.select.onClassChange=O=>{this.settings.class=O,this.render.updateClassStyles()},this.select.onDisabledChange=O=>{O?this.disable():this.enable()},this.select.onOptionsChange=O=>{this.setData(O)},this.store=new p(this.settings.isMultiple?"multiple":"single",a.data?a.data:this.select.getData()),a.data&&this.select.updateOptions(this.store.getData());const h={open:this.open.bind(this),close:this.close.bind(this),addable:this.events.addable?this.events.addable:void 0,setSelected:this.setSelected.bind(this),addOption:this.addOption.bind(this),search:this.search.bind(this),beforeChange:this.events.beforeChange,afterChange:this.events.afterChange};this.render=new v(this.settings,this.cssClasses,this.store,h),this.render.renderValues(),this.render.renderOptions(this.store.getData());const g=this.selectEl.getAttribute("aria-label"),w=this.selectEl.getAttribute("aria-labelledby");g?this.render.main.main.setAttribute("aria-label",g):w&&this.render.main.main.setAttribute("aria-labelledby",w),this.selectEl.parentNode&&this.selectEl.parentNode.insertBefore(this.render.main.main,this.selectEl.nextSibling),window.addEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.addEventListener("scroll",this.windowScroll,!1),document.addEventListener("visibilitychange",this.windowVisibilityChange),this.settings.disabled&&this.disable(),this.settings.alwaysOpen&&this.open(),this.selectEl.slim=this}enable(){this.settings.disabled=!1,this.select.enable(),this.render.enable()}disable(){this.settings.disabled=!0,this.select.disable(),this.render.disable()}getData(){return this.store.getData()}setData(a){const o=this.store.getSelected(),c=this.store.validateDataArray(a);if(c){this.events.error&&this.events.error(c);return}this.store.setData(a);const h=this.store.getData();this.select.updateOptions(h),this.render.renderValues(),this.render.renderOptions(h),this.events.afterChange&&!l(o,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}getSelected(){let a=this.store.getSelectedOptions();return this.settings.keepOrder&&(a=this.store.selectedOrderOptions(a)),a.map(o=>o.value)}setSelected(a,o=!0){const c=this.store.getSelected(),h=this.store.getDataOptions();a=Array.isArray(a)?a:[a];const g=[];for(const O of a){if(h.find(C=>C.id==O)){g.push(O);continue}for(const C of h.filter(T=>T.value==O))g.push(C.id)}this.store.setSelectedBy("id",g);const w=this.store.getData();this.select.updateOptions(w),this.render.renderValues(),this.render.content.search.input.value!==""?this.search(this.render.content.search.input.value):this.render.renderOptions(w),o&&this.events.afterChange&&!l(c,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}addOption(a){const o=this.store.getSelected();this.store.getDataOptions().some(h=>{var g;return h.value===((g=a.value)!==null&&g!==void 0?g:a.text)})||this.store.addOption(a);const c=this.store.getData();this.select.updateOptions(c),this.render.renderValues(),this.render.renderOptions(c),this.events.afterChange&&!l(o,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}open(){this.settings.disabled||this.settings.isOpen||(this.events.beforeOpen&&this.events.beforeOpen(),this.render.open(),this.settings.showSearch&&this.settings.focusSearch&&this.render.searchFocus(),this.settings.isOpen=!0,setTimeout(()=>{this.events.afterOpen&&this.events.afterOpen(),this.settings.isOpen&&(this.settings.isFullOpen=!0),document.addEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.contentPosition==="absolute"&&(this.settings.intervalMove&&clearInterval(this.settings.intervalMove),this.settings.intervalMove=setInterval(this.render.moveContent.bind(this.render),500)))}close(a=null){!this.settings.isOpen||this.settings.alwaysOpen||(this.events.beforeClose&&this.events.beforeClose(),this.render.close(),this.render.content.search.input.value!==""&&this.search(""),this.render.mainFocus(a),this.settings.isOpen=!1,this.settings.isFullOpen=!1,setTimeout(()=>{this.events.afterClose&&this.events.afterClose(),document.removeEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.intervalMove&&clearInterval(this.settings.intervalMove))}search(a){if(this.render.content.search.input.value!==a&&(this.render.content.search.input.value=a),!this.events.search){this.render.renderOptions(a===""?this.store.getData():this.store.search(a,this.events.searchFilter));return}this.render.renderSearching();const o=this.events.search(a,this.store.getSelectedOptions());if(o instanceof Promise){o.then(c=>{this.render.renderOptions(this.store.partialToFullData(c))}).catch(c=>{this.render.renderError(typeof c=="string"?c:c.message)});return}else Array.isArray(o)?this.render.renderOptions(this.store.partialToFullData(o)):this.render.renderError("Search event must return a promise or an array of data")}destroy(){document.removeEventListener("click",this.documentClick),window.removeEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.removeEventListener("scroll",this.windowScroll,!1),document.removeEventListener("visibilitychange",this.windowVisibilityChange),this.store.setData([]),this.render.destroy(),this.select.destroy()}}return $})})(eg);Re(["click"]);const tg="CellvoyagerToOmeZarrInit",rg="object",ng={zarr_urls:{title:"Zarr Urls",type:"array",items:{type:"string"},description:"List of paths or urls to the individual OME-Zarr image to be processed. Not used by the converter task. (standard argument for Fractal tasks, managed by Fractal server)."},zarr_dir:{title:"Zarr Dir",type:"string",description:"path of the directory where the new OME-Zarrs will be created. (standard argument for Fractal tasks, managed by Fractal server)."},image_dirs:{title:"Image Dirs",type:"array",items:{type:"string"},description:"list of paths to the folders that contains the Cellvoyager image files. Each entry is a path to a folder that contains the image files themselves for a multiwell plate and the MeasurementData & MeasurementDetail metadata files."},allowed_channels:{title:"Allowed Channels",type:"array",items:{$ref:"#/definitions/OmeroChannel"},description:"A list of `OmeroChannel` s, where each channel must include the `wavelength_id` attribute and where the `wavelength_id` values must be unique across the list."},image_glob_patterns:{title:"Image Glob Patterns",type:"array",items:{type:"string"},description:'If specified, only parse images with filenames that match with all these patterns. Patterns must be defined as in https://docs.python.org/3/library/fnmatch.html, Example: `image_glob_pattern=["*_B03_*"]` => only process well B03 `image_glob_pattern=["*_C09_*", "*F016*", "*Z[0-5][0-9]C*"]` => only process well C09, field of view 16 and Z planes 0-59.'},num_levels:{title:"Num Levels",default:5,type:"integer",description:"Number of resolution-pyramid levels. If set to `5`, there will be the full-resolution level and 4 levels of downsampled images."},coarsening_xy:{title:"Coarsening Xy",default:2,type:"integer",description:"Linear coarsening factor between subsequent levels. If set to `2`, level 1 is 2x downsampled, level 2 is 4x downsampled etc."},image_extension:{title:"Image Extension",default:"tif",type:"string",description:'Filename extension of images (e.g. `"tif"` or `"png"`)'},metadata_table_file:{title:"Metadata Table File",type:"string",description:"If `None`, parse Yokogawa metadata from mrf/mlf files in the input_path folder; else, the full path to a csv file containing the parsed metadata table."},overwrite:{title:"Overwrite",default:!1,type:"boolean",description:"If `True`, overwrite the task output."}},sg=["zarr_urls","zarr_dir","image_dirs","allowed_channels"],ag=!1,ig={Window:{title:"Window",description:"Custom class for Omero-channel window, based on OME-NGFF v0.4.",type:"object",properties:{min:{title:"Min",type:"integer",description:"Do not change. It will be set to `0` by default."},max:{title:"Max",type:"integer",description:"Do not change. It will be set according to bit-depth of the images by default (e.g. 65535 for 16 bit images)."},start:{title:"Start",type:"integer",description:"Lower-bound rescaling value for visualization."},end:{title:"End",type:"integer",description:"Upper-bound rescaling value for visualization."}},required:["start","end"]},OmeroChannel:{title:"OmeroChannel",description:"Custom class for Omero channels, based on OME-NGFF v0.4.",type:"object",properties:{wavelength_id:{title:"Wavelength Id",type:"string",description:"Unique ID for the channel wavelength, e.g. `A01_C01`."},index:{title:"Index",type:"integer",description:"Do not change. For internal use only."},label:{title:"Label",type:"string",description:"Name of the channel."},window:{$ref:"#/definitions/Window",title:"Window",description:"Optional `Window` object to set default display settings for napari."},color:{title:"Color",type:"string",description:"Optional hex colormap to display the channel in napari (it must be of length 6, e.g. `00FFFF`)."},active:{title:"Active",default:!0,type:"boolean",description:"Should this channel be shown in the viewer?"},coefficient:{title:"Coefficient",default:1,type:"integer",description:"Do not change. Omero-channel attribute."},inverted:{title:"Inverted",default:!1,type:"boolean",description:"Do not change. Omero-channel attribute."}},required:["wavelength_id"]}},og={title:tg,type:rg,properties:ng,required:sg,additionalProperties:ag,definitions:ig};async function lg(t,e,r,n,s,i){var l,d;await Mr(),D(e,"");try{D(r,JSON.parse(E(n)),!0),(l=E(s))==null||l.update(E(i),Mt(E(r)))}catch{E(n)||(D(r,void 0),(d=E(s))==null||d.update(E(i),void 0)),D(e,"Invalid JSON")}}function cg(t,e,r,n){D(e,"pydantic_v2"),D(r,JSON.stringify(og,null,2),!0),n()}var dg=H('<div class="alert alert-danger"><pre> </pre></div>'),ug=H('<div class="alert alert-success">Data is valid</div>'),fg=H('<div class="alert alert-danger">Data is not valid</div>'),hg=H('<h1 class="fw-light">Sandbox page for JSON Schema</h1> <p>This is a test page for the JSON Schema component</p> <div class="row"><div class="col-lg-6 mt-3"><div class="row"><div class="col"><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="schemaVersionOptions" id="pydantic_v1"> <label class="form-check-label" for="pydantic_v1">pydantic_v1</label></div> <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="schemaVersionOptions" id="pydantic_v2"> <label class="form-check-label" for="pydantic_v2">pydantic_v2</label></div> <button class="btn btn-outline-primary float-end">Load example</button></div></div> <div class="row has-validation mt-2 mb-2"><div class="col"><label for="json-schema">JSON Schema</label> <textarea id="json-schema" rows="10"></textarea> <span class="invalid-feedback"> </span></div></div> <div class="row has-validation mt-3 mb-2"><div class="col"><label for="jdata">Initial JSON data</label> <textarea id="jdata" rows="10"></textarea> <span class="invalid-feedback"> </span></div></div> <div class="row mt-3 mb-2"><div class="col"><!> <!></div></div></div> <div class="col-lg-6"><!></div></div>',1);function mg(t,e){$e(e,!0);const r=[];let n=Z(void 0),s=Z(void 0),i=Z(""),l=Z(""),d=Z(""),f=Z(""),u=Z("pydantic_v2"),p=Z(void 0);async function v(){var ye;if(D(b,""),D(d,""),E(i)===""){D(n,void 0);return}let se;try{se=JSON.parse(E(i))}catch{D(n,void 0),D(d,"Invalid JSON");return}try{new fr(E(u)).validateSchema(yt(se))}catch{try{D(u,Sp(se),!0)}catch(Le){D(n,void 0),D(d,`Invalid JSON Schema: ${Le.message}`);return}}D(n,se,!0),D(s,void 0),await Mr(),(ye=E(p))==null||ye.update(se,void 0),$()}let b=Z(""),_=Z(!1);async function $(){await Mr(),E(p)&&y(E(p).getArguments())}function y(se){if(!se)return;const ye=mr(se),ke=JSON.stringify(Dn(ye),null,2);ke!==E(l)&&(D(l,ke,!0),D(f,""),D(s,JSON.parse(E(l)),!0))}let a=ut(()=>Ya(!1));var o=hg(),c=q(fe(o),4),h=M(c),g=M(h),w=M(g),O=M(w),C=M(O);qe(C),C.value=C.__value="pydantic_v1",C.__change=v,jt(2),j(O);var T=q(O,2),F=M(T);qe(F),F.value=F.__value="pydantic_v2",F.__change=v,jt(2),j(T);var U=q(T,2);U.__click=[cg,u,i,v],j(w),j(g);var P=q(g,2),A=M(P),x=q(M(A),2);Dr(x);let L;x.__input=v;var J=q(x,2),Q=M(J,!0);j(J),j(A),j(P);var ee=q(P,2),de=M(ee),_e=q(M(de),2);Dr(_e);let V;_e.__input=[lg,f,s,l,p,n];var I=q(_e,2),N=M(I,!0);j(I),j(de),j(ee);var k=q(ee,2),m=M(k),S=M(m);{var R=se=>{var ye=dg(),ke=M(ye),Le=M(ke,!0);j(ke),j(ye),Y(()=>ce(Le,E(b))),z(se,ye)};W(S,se=>{E(b)&&se(R)})}var B=q(S,2);{var G=se=>{var ye=Fe(),ke=fe(ye);{var Le=Ce=>{var Je=ug();z(Ce,Je)},nt=Ce=>{var Je=fg();z(Ce,Je)};W(ke,Ce=>{E(_)?Ce(Le):Ce(nt,!1)})}z(se,ye)};W(B,se=>{E(n)&&!E(d)&&se(G)})}j(m),j(k),j(h);var re=q(h,2),ie=M(re);{var pe=se=>{$t(so(se,{componentId:"json-schema-sandbox",onchange:y,get schemaVersion(){return E(u)},get propertiesToIgnore(){return E(a)},get dataValid(){return E(_)},set dataValid(ye){D(_,ye,!0)}}),ye=>D(p,ye,!0),()=>E(p))};W(ie,se=>{E(n)&&!E(d)&&se(pe)})}j(re),j(c),Y((se,ye)=>{L=me(x,1,"form-control",null,L,se),ce(Q,E(d)),V=me(_e,1,"form-control",null,V,ye),ce(N,E(f))},[()=>({"is-invalid":E(d)}),()=>({"is-invalid":E(f)})]),Rr(r,[],C,()=>E(u),se=>D(u,se)),Rr(r,[],F,()=>E(u),se=>D(u,se)),Xe(x,()=>E(i),se=>D(i,se)),Xe(_e,()=>E(l),se=>D(l,se)),z(t,o),we()}Re(["change","click","input"]);const pg="ManifestV2",vg=`Packages containing tasks are required to include a special file
\`__FRACTAL_MANIFEST__.json\` in order to be discovered and used by Fractal.

This model class and the model classes it depends on provide the base
schema to read, write and validate manifests.

Attributes:
    manifest_version:
        A version string that provides indication for compatibility between
        manifests as the schema evolves. This is for instance used by
        Fractal to determine which subclass of the present base class needs
        be used to read and validate the input.
    task_list : list[TaskManifestType]
        The list of tasks, represented as specified by subclasses of the
        _TaskManifestBase (a.k.a. TaskManifestType)
    has_args_schemas:
        \`True\` if the manifest incldues JSON Schemas for the arguments of
        each task.
    args_schema_version:
        Label of how \`args_schema\`s were generated (e.g. \`pydantic_v2\`).`,gg="object",yg={manifest_version:{title:"Manifest Version",type:"string"},task_list:{title:"Task List",type:"array",items:{$ref:"#/definitions/TaskManifestV2"}},has_args_schemas:{title:"Has Args Schemas",default:!1,type:"boolean"},args_schema_version:{title:"Args Schema Version",type:"string"}},_g=["manifest_version","task_list"],bg={TaskManifestV2:{title:"TaskManifestV2",description:`Represents a task within a V2 manifest.

Attributes:
    name:
        The task name
    executable:
        Path to the executable relative to the package root

        Note: by package root we mean "as it will be installed". If a
        package \`Pkg\` installs in the folder \`pkg\` the executable
        \`pkg/executable.py\`, this attribute must contain only
        \`executable.py\`.
    input_type:
        The input type accepted by the task
    output_type:
        The output type returned by the task
    meta:
        Additional information about the package, such as hash of the
        executable, specific runtime requirements (e.g., need_gpu=True),
        etc.
    args_schema:
        JSON Schema for task arguments
    docs_info:
        Additional information about the Task, coming from the docstring.
    docs_link:
        Link to Task docs.`,type:"object",properties:{name:{title:"Name",type:"string"},executable_non_parallel:{title:"Executable Non Parallel",type:"string"},executable_parallel:{title:"Executable Parallel",type:"string"},input_types:{title:"Input Types",type:"object",additionalProperties:{type:"boolean"}},output_types:{title:"Output Types",type:"object",additionalProperties:{type:"boolean"}},meta_non_parallel:{title:"Meta Non Parallel",type:"object"},meta_parallel:{title:"Meta Parallel",type:"object"},args_schema_non_parallel:{title:"Args Schema Non Parallel",type:"object"},args_schema_parallel:{title:"Args Schema Parallel",type:"object"},docs_info:{title:"Docs Info",type:"string"},docs_link:{title:"Docs Link",minLength:1,maxLength:2083,format:"uri",type:"string"}},required:["name"]}},$g={title:pg,description:vg,type:gg,properties:yg,required:_g,definitions:bg};async function wg(t,e,r,n,s){if(D(e,""),!E(r)||E(r).length===0){n("change",{value:null});return}const i=E(r)[0];await s(i)}function Eg(t,e,r,n,s){D(e,""),D(r,null),E(n)&&(E(n).value=""),s("change",{value:null})}var Sg=H('<button class="btn btn-outline-secondary">Clear</button>'),kg=H('<div role="region"><div class="m-1"><div class="input-group has-validation"><label class="input-group-text"> </label> <input type="file"> <!> <span class="invalid-feedback"> </span></div></div> <p class="text-center mt-1 mb-1"><i class="bi bi-file-earmark-arrow-up"></i> or drag file here</p></div>');function Pg(t,e){$e(e,!0);const r=Mo();let n=Z(null),s=Z(void 0),i=Z("");async function l(C){C.preventDefault(),D(f,!1),C.dataTransfer&&C.dataTransfer.files.length>0&&(D(n,C.dataTransfer.files,!0),E(s).files=E(n),await d(E(n)[0]))}async function d(C){D(i,"");let T=await C.text();try{const F=e.validateFile(T);r("change",{value:F})}catch(F){D(i,F.message,!0),r("change",{value:null})}}let f=Z(!1);function u(C){C.preventDefault(),D(f,!0)}function p(){D(f,!1)}var v=kg();let b;var _=M(v),$=M(_),y=M($),a=M(y,!0);j(y);var o=q(y,2);let c;o.__change=[wg,i,n,r,d],$t(o,C=>D(s,C),()=>E(s));var h=q(o,2);{var g=C=>{var T=Sg();T.__click=[Eg,i,n,s,r],z(C,T)};W(h,C=>{E(n)&&E(n).length>0&&C(g)})}var w=q(h,2),O=M(w,!0);j(w),j($),j(_),jt(2),j(v),Y((C,T)=>{b=me(v,1,"dropZone bg-light svelte-1n1vpyg",null,b,C),he(y,"for",e.id),ce(a,e.description),c=me(o,1,"form-control",null,c,T),he(o,"accept",e.accept),he(o,"name",e.id),he(o,"id",e.id),ce(O,E(i))},[()=>({dragOver:E(f)}),()=>({"is-invalid":E(i)})]),on("drop",v,l),on("dragover",v,u),on("dragleave",v,p),Jo(o,()=>E(n),C=>D(n,C)),z(t,v),we()}Re(["change","click"]);const Og="2",Cg=[{name:"task1",type:"non_parallel",executable_non_parallel:"task1.py",args_schema_non_parallel:{$defs:{MyEnum:{enum:["Value 1","Value 2"],title:"MyEnum",type:"string",description:"Missing description for MyEnum."}},additionalProperties:!1,properties:{zarr_urls:{items:{type:"string"},title:"Zarr Urls",type:"array",description:"Missing description"},zarr_dir:{title:"Zarr Dir",type:"string",description:"Missing description"},int_1:{title:"Int 1",type:"integer",description:"Integer argument."},int_2:{default:1,title:"Int 2",type:"integer",description:"Integer argument with a default value."},int_3:{title:"Int 3",type:"integer",description:"Integer or null argument, with default value set to null."},int_4:{title:"Int 4",type:"integer",description:"Integer or null argument, with default value set to null."},str_1:{title:"Str 1",type:"string",description:"String argument."},str_2:{default:"default",title:"Str 2",type:"string",description:"String argument with a default value."},bool_1:{title:"Bool 1",type:"boolean",description:"Boolean argument."},bool_2:{default:!1,title:"Bool 2",type:"boolean",description:"Boolean argument with a default value."},float_1:{title:"Float 1",type:"number",description:"Float argument."},float_2:{default:1.23,title:"Float 2",type:"number",description:"Float argument with a default value"},enum_1:{$ref:"#/$defs/MyEnum",title:"Enum 1",description:"Enum argument."},enum_2:{$ref:"#/$defs/MyEnum",default:"Value 1",title:"Enum 2",description:"Enum argument with a default."},literal_1:{enum:["a","b","c"],title:"Literal 1",type:"string",description:"Literal argument."},literal_2:{default:"a",enum:["a","b","c"],title:"Literal 2",type:"string",description:"Literal argument with a default value."}},required:["zarr_urls","zarr_dir","int_1","str_1","bool_1","float_1","enum_1","literal_1"],type:"object",title:"Task1"},docs_info:`## task1
Short description of task1

Long description of this wonderful task that actually only represents a
mock task for testing.
`},{name:"task2",type:"non_parallel",executable_non_parallel:"task2.py",args_schema_non_parallel:{additionalProperties:!1,properties:{zarr_urls:{items:{type:"string"},title:"Zarr Urls",type:"array",description:"Missing description"},zarr_dir:{title:"Zarr Dir",type:"string",description:"Missing description"},list_arg:{items:{type:"integer"},title:"List Arg",type:"array",description:"An arbitrary-size array of integers."},tuple_arg:{maxItems:3,minItems:3,prefixItems:[{type:"integer"},{type:"integer"},{type:"integer"}],title:"Tuple Arg",type:"array",description:"A fixed-size array of integers."},optional_list_arg:{items:{type:"integer"},title:"Optional List Arg",type:"array",description:"An optional arbitrary-size array of integers."},optional_tuple_arg:{maxItems:3,minItems:3,prefixItems:[{type:"integer"},{type:"integer"},{type:"integer"}],title:"Optional Tuple Arg",type:"array",description:"An optional fixed-size array of integers."}},required:["zarr_urls","zarr_dir","list_arg","tuple_arg"],type:"object",title:"Task2"},docs_info:`## task2
Short description of task2

Long description of this wonderful task that actually only represents a
mock task for testing.
`},{name:"task3",type:"non_parallel",executable_non_parallel:"task3.py",args_schema_non_parallel:{additionalProperties:!1,properties:{zarr_urls:{items:{type:"string"},title:"Zarr Urls",type:"array",description:"Missing description"},zarr_dir:{title:"Zarr Dir",type:"string",description:"Missing description"},object_arg:{additionalProperties:{type:"boolean"},title:"Object Arg",type:"object",description:"Object argument."},optional_object_arg:{additionalProperties:{type:"boolean"},title:"Optional Object Arg",type:"object",description:"Optional object argument."},nested_object_arg:{additionalProperties:{additionalProperties:{type:"string"},type:"object"},title:"Nested Object Arg",type:"object",description:"Nested object argument."}},required:["zarr_urls","zarr_dir","object_arg","nested_object_arg"],type:"object",title:"Task3"},docs_info:`## task3
Short description of task3

Long description of this wonderful task that actually only represents a
mock task for testing.
`},{name:"task4",type:"non_parallel",executable_non_parallel:"task4.py",args_schema_non_parallel:{$defs:{InternalModel1:{description:"Description of InternalModel1.",properties:{label:{const:"label1",default:"label1",title:"Label",type:"string",description:"FIXME"},field:{default:1,title:"Field",type:"integer",description:"Missing description"}},title:"InternalModel1",type:"object"},InternalModel2:{description:"Description of InternalModel2.",properties:{label:{const:"label2",default:"label2",title:"Label",type:"string",description:"FIXME"},field:{title:"Field",type:"string",description:"Missing description"}},required:["field"],title:"InternalModel2",type:"object"},InternalModel3:{description:"Description of InternalModel3.",properties:{label:{const:"label3",default:"label3",title:"Label",type:"string",description:"xxx"},field:{title:"Field",type:"boolean",description:"yyy"}},required:["field"],title:"InternalModel3",type:"object"},ModelAllOptional:{description:"Short description of `ModelAllOptional`.",properties:{x:{title:"X",type:"integer",description:"FIXME"},y:{default:1,title:"Y",type:"integer",description:"FIXME"}},title:"ModelAllOptional",type:"object"},ModelSomeRequired:{description:"Short description of `ModelSomeRequired`.",properties:{x:{title:"X",type:"integer",description:"FIXME"},y:{title:"Y",type:"string",description:"FIXME"}},required:["y"],title:"ModelSomeRequired",type:"object"}},additionalProperties:!1,properties:{zarr_urls:{items:{type:"string"},title:"Zarr Urls",type:"array",description:"Missing description"},zarr_dir:{title:"Zarr Dir",type:"string",description:"Missing description"},pydantic_1:{$ref:"#/$defs/ModelAllOptional",title:"Pydantic 1",description:"Example of a Pydantic model with no required field."},pydantic_2:{$ref:"#/$defs/ModelAllOptional",default:{x:null,y:1},title:"Pydantic 2",description:"Example of a Pydantic model with no required field, with a default value."},pydantic_3:{$ref:"#/$defs/ModelAllOptional",default:{x:null,y:1},title:"Pydantic 3",description:"Example of a Pydantic model with no required field, with a default factory."},pydantic_4:{$ref:"#/$defs/ModelSomeRequired",title:"Pydantic 4",description:"Example of a Pydantic model with some required field."},tagged_union:{default:{label:"label1",field:1},discriminator:{mapping:{label1:"#/$defs/InternalModel1",label2:"#/$defs/InternalModel2",label3:"#/$defs/InternalModel3"},propertyName:"label"},oneOf:[{$ref:"#/$defs/InternalModel1"},{$ref:"#/$defs/InternalModel2"},{$ref:"#/$defs/InternalModel3"}],title:"Tagged Union",description:"Example of a top-level tagged union, with a default value."},nested_tagged_union:{default:[],items:{discriminator:{mapping:{label1:"#/$defs/InternalModel1",label2:"#/$defs/InternalModel2",label3:"#/$defs/InternalModel3"},propertyName:"label"},oneOf:[{$ref:"#/$defs/InternalModel1"},{$ref:"#/$defs/InternalModel2"},{$ref:"#/$defs/InternalModel3"}]},title:"Nested Tagged Union",type:"array",description:"Example of a nested tagged union, with a default value."}},required:["zarr_urls","zarr_dir","pydantic_1","pydantic_4"],type:"object",title:"Task4"},docs_info:`## task4
Short description of task4

Long description of this wonderful task that actually only represents a
mock task for testing.
`},{name:"task5",type:"non_parallel",executable_non_parallel:"task5.py",args_schema_non_parallel:{$defs:{EnumDropdown:{enum:["Value 1","Value 2"],title:"EnumDropdown",type:"string",description:"Missing description for EnumDropdown."},InternalModel1:{description:"Description of InternalModel1.",properties:{label:{const:"label1",default:"label1",title:"Label",type:"string",description:"FIXME"},field:{default:1,title:"Field",type:"integer",description:"Missing description"}},title:"InternalModel1",type:"object"},InternalModel2:{description:"Description of InternalModel2.",properties:{label:{const:"label2",default:"label2",title:"Label",type:"string",description:"FIXME"},field:{title:"Field",type:"string",description:"Missing description"}},required:["field"],title:"InternalModel2",type:"object"},InternalModel3:{description:"Description of InternalModel3.",properties:{label:{const:"label3",default:"label3",title:"Label",type:"string",description:"xxx"},field:{title:"Field",type:"boolean",description:"yyy"}},required:["field"],title:"InternalModel3",type:"object"},InternalModel4:{description:"Description of InternalModel4.",properties:{label:{const:"label4",default:"label4",title:"Label",type:"string",description:"FIXME"},field:{default:1,title:"Field",type:"integer",description:"Missing description"}},title:"InternalModel4",type:"object"},NestedModel:{description:"Description of NestedModel.",properties:{field_1:{default:"default value",title:"Field 1",type:"string",description:"xxx"},field_2:{default:1,title:"Field 2",type:"integer",description:"yyy"},field_3:{items:{discriminator:{mapping:{label1:"#/$defs/InternalModel1",label2:"#/$defs/InternalModel2",label3:"#/$defs/InternalModel3",label4:"#/$defs/InternalModel4"},propertyName:"label"},oneOf:[{$ref:"#/$defs/InternalModel1"},{$ref:"#/$defs/InternalModel2"},{$ref:"#/$defs/InternalModel3"},{$ref:"#/$defs/InternalModel4"}]},title:"Field 3",type:"array",description:"list of pydantic models union with none. When the list is empty the field will be set to none."},field_4:{default:[],items:{discriminator:{mapping:{label1:"#/$defs/InternalModel1",label2:"#/$defs/InternalModel2",label3:"#/$defs/InternalModel3",label4:"#/$defs/InternalModel4"},propertyName:"label"},oneOf:[{$ref:"#/$defs/InternalModel1"},{$ref:"#/$defs/InternalModel2"},{$ref:"#/$defs/InternalModel3"},{$ref:"#/$defs/InternalModel4"}]},title:"Field 4",type:"array",description:"same as field_3 but with default value set to an empty list instead of none."}},title:"NestedModel",type:"object"}},additionalProperties:!1,properties:{zarr_urls:{items:{type:"string"},title:"Zarr Urls",type:"array",description:"Missing description"},zarr_dir:{title:"Zarr Dir",type:"string",description:"Missing description"},custom_title:{default:"test",title:"Custom title 2",type:"string",description:"example of a way to add a custom title to the schema of an argument."},regex_arg:{default:"test",pattern:"^[a-zA-Z0-9_]+$",title:"Regex Arg",type:"string",description:"example of a way to add a regex pattern to the schema of an argument."},list_arg:{default:[1,2,3],items:{type:"integer"},maxItems:10,minItems:0,title:"List Arg",type:"array",uniqueItems:!0,description:"example of a way to add a list with minimum and maximum length constraints to the schema of an argument."},float_arg:{default:50,maximum:100,minimum:0,multipleOf:5,title:"Float Arg",type:"number",description:"example of a way to add a float with minimum and maximum value constraints to the schema of an argument."},nested_tagged_union_arg:{discriminator:{mapping:{label1:"#/$defs/InternalModel1",label2:"#/$defs/InternalModel2",label3:"#/$defs/InternalModel3",label4:"#/$defs/InternalModel4"},propertyName:"label"},oneOf:[{$ref:"#/$defs/InternalModel1"},{$ref:"#/$defs/InternalModel2"},{$ref:"#/$defs/InternalModel3"},{$ref:"#/$defs/InternalModel4"}],title:"Nested Tagged Union Arg",description:"example of a way to add a nested tagged union argument (usefull to extend tagged unions defined in other tasks)."},enum_arg:{$ref:"#/$defs/EnumDropdown",title:"Enum Arg",description:"menu argument using StrEnum, which will be rendered as a dropdown in the UI."},literal_arg:{default:"option1",enum:["option1","option2","option3"],title:"Literal Arg",type:"string",description:"menu argument using Literal, which will be rendered as a dropdown in the UI."},nested_model_arg:{$ref:"#/$defs/NestedModel",default:{field_1:"default value",field_2:1,field_3:null,field_4:[]},title:"Nested Model Arg",description:"example of a way to add a nested Pydantic model as an argument."},model_or_none:{$ref:"#/$defs/InternalModel4",title:"Model Or None",description:"example of a field that is currently not correctly handled by the UI."},factory_args:{default:[1,2,3],items:{type:"integer"},title:"Factory Args",type:"array",description:"example of a field with a default factory, which is not evaluated during the build process."}},required:["zarr_urls","zarr_dir","nested_tagged_union_arg"],type:"object",title:"Task5"},docs_info:`## task5
Short description of task5

Long description of this wonderful task that actually only represents a
mock task for testing.
`}],Ig=!0,Ag="pydantic_v2",Ng="Your Name",Tg={manifest_version:Og,task_list:Cg,has_args_schemas:Ig,args_schema_version:Ag,authors:Ng};function jg(t,e,r,n,s,i,l){var d,f;D(e,""),D(r,"");try{D(n,JSON.parse(E(s)),!0),E(i)&&((d=E(l))==null||d.update(Mt(E(i)),Mt(E(n))))}catch{E(s)||(D(n,void 0),E(i)&&((f=E(l))==null||f.update(Mt(E(i)),void 0))),D(r,"Invalid JSON")}}function Mg(t,e){e(Tg)}var Dg=(t,e)=>e(),Rg=H("<option> </option>"),xg=H('<div class="input-group"><label for="selectedTask" class="input-group-text">Task</label> <select class="form-select" name="selectedTask" id="selectedTask"><option>Select...</option><!></select></div>'),Lg=(t,e)=>e("non_parallel"),Fg=(t,e)=>e("parallel"),Vg=H('<div class="alert alert-danger"><pre> </pre></div>'),zg=H('<div class="alert alert-success">Data is valid</div>'),qg=H('<div class="alert alert-danger">Data is not valid</div>'),Ug=H('<div class="row mt-3"><div class="col-md-6"><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="schemaTypeSelector" id="schemaNonParallelSelector"> <label class="form-check-label" for="schemaNonParallelSelector">non parallel</label></div> <div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="schemaTypeSelector" id="schemaParallelSelector"> <label class="form-check-label" for="schemaParallelSelector">parallel</label></div></div></div> <div class="row mt-2 mb-3"><div class="col-lg-6"><div class="row"><div class="col"><label for="jschema">JSON Schema</label> <textarea id="jschema" class="form-control" rows="10" disabled></textarea></div></div> <div class="row has-validation mt-3 mb-2"><div class="col"><label for="jdata">Initial JSON data</label> <textarea id="jdata" rows="10"></textarea> <span class="invalid-feedback"> </span></div></div> <div class="row mt-3 mb-2"><div class="col"><!> <!></div></div></div> <div class="col-lg-6"><!></div></div>',1),Hg=H('<button class="btn btn-outline-primary float-end">Load example</button> <h1 class="fw-light">Sandbox page for task package manifest</h1> <p>This is a test page for the JSON Schema form of a whole task package manifest</p> <div class="row"><div class="col-lg-7"><!> <div class="form-text">An entire task package manifest</div></div> <div class="col-lg-5"><!></div></div> <!>',1);function Kg(t,e){$e(e,!0);const r=[];let n=Z(void 0),s=Z(Se([])),i=Z(""),l=Z(void 0),d=Z("pydantic_v2"),f=Z("non_parallel"),u=Z(void 0),p=Z(void 0),v=Z(""),b=Z(""),_=Z(!1),$=Z(!1),y=Z(""),a=Z(!1);function o(){D(n,null),D(y,""),D(s,[],!0),D(i,""),D(l,null),D(u,null),D(b,"")}let c=Z(void 0);function h(N){let k;try{k=JSON.parse(N)}catch{throw new Error("File doesn't contain valid JSON")}if(k.args_schema_version!=="pydantic_v2"&&k.args_schema_version!=="pydantic_v1")throw new Error("Unsupported manifest args schema version");if(D(d,k.args_schema_version,!0),w(k)){if(k.manifest_version!=="2")throw new Error("Unsupported manifest version")}else throw new Error("Invalid manifest format");return k}function g({detail:N}){N.value===null?o():O(N.value)}function w(N){const k=new fr(E(d));return k.loadSchema(yt($g)),k.isValid(N)}function O(N){D(n,N,!0),D(l,null),D(u,null),D(i,""),D(b,""),D(s,E(n).task_list.map(k=>k.name),!0)}async function C(N=void 0){if(D(b,""),D(y,""),D(a,!1),!E(i)){D(l,null),D(u,null);return}D(u,E(n).task_list.filter(k=>k.name===E(i))[0],!0),D(_,T(E(u).args_schema_non_parallel),!0),D($,T(E(u).args_schema_parallel),!0),N?D(f,N,!0):E(_)?D(f,"non_parallel"):D(f,"parallel"),E(f)==="non_parallel"?D(l,E(u).args_schema_non_parallel,!0):D(l,E(u).args_schema_parallel,!0),await F()}function T(N){if(!N)return!1;const k=ei(N,E(P));return Object.keys(k.properties).length>0}async function F(){var N;await Mr(),E(c)&&((N=E(c))==null||N.update(Mt(E(l)),void 0))}function U(N){if(!N)return;const k=mr(N),m=JSON.stringify(Dn(k),null,2);m!==E(v)&&(D(v,m,!0),D(b,""),D(p,JSON.parse(E(v)),!0))}let P=ut(()=>Ya(!1));var A=Hg(),x=fe(A);x.__click=[Mg,O];var L=q(x,6),J=M(L),Q=M(J);Pg(Q,{description:"Upload manifest file",accept:"application/json",id:"manifestFileUpload",validateFile:h,$$events:{change:g}}),jt(2),j(J);var ee=q(J,2),de=M(ee);{var _e=N=>{var k=xg(),m=q(M(k),2);m.__change=[Dg,C];var S=M(m);S.value=S.__value="";var R=q(S);Ne(R,17,()=>E(s),je,(B,G)=>{var re=Rg(),ie={},pe=M(re,!0);j(re),Y(()=>{ie!==(ie=E(G))&&(re.value=(re.__value=E(G))??""),ce(pe,E(G))}),z(B,re)}),j(m),j(k),Ft(m,()=>E(i),B=>D(i,B)),z(N,k)};W(de,N=>{E(s).length>0&&N(_e)})}j(ee),j(L);var V=q(L,2);{var I=N=>{var k=Ug(),m=fe(k),S=M(m),R=M(S),B=M(R);qe(B),B.value=B.__value="non_parallel",B.__change=[Lg,C],jt(2),j(R);var G=q(R,2),re=M(G);qe(re),re.value=re.__value="parallel",re.__change=[Fg,C],jt(2),j(G),j(S),j(m);var ie=q(m,2),pe=M(ie),se=M(pe),ye=M(se),ke=q(M(ye),2);Dr(ke),j(ye),j(se);var Le=q(se,2),nt=M(Le),Ce=q(M(nt),2);Dr(Ce);let Je;Ce.__input=[jg,y,b,p,v,l,c];var kt=q(Ce,2),Gt=M(kt,!0);j(kt),j(nt),j(Le);var Pt=q(Le,2),Ot=M(Pt),Ct=M(Ot);{var Zt=ve=>{var Ye=Vg(),Ls=M(Ye),ao=M(Ls,!0);j(Ls),j(Ye),Y(()=>ce(ao,E(y))),z(ve,Ye)};W(Ct,ve=>{E(y)&&ve(Zt)})}var Wt=q(Ct,2);{var ft=ve=>{var Ye=zg();z(ve,Ye)},Xt=ve=>{var Ye=qg();z(ve,Ye)};W(Wt,ve=>{E(a)?ve(ft):ve(Xt,!1)})}j(Ot),j(Pt),j(pe);var Yt=q(pe,2),br=M(Yt);$t(so(br,{componentId:"json-schema-task-manifest-sandbox",onchange:ve=>U(ve),get schemaVersion(){return E(d)},get propertiesToIgnore(){return E(P)},get dataValid(){return E(a)},set dataValid(ve){D(a,ve,!0)}}),ve=>D(c,ve,!0),()=>E(c)),j(Yt),j(ie),Y((ve,Ye)=>{B.disabled=!E(_),re.disabled=!E($),Ho(ke,ve),Je=me(Ce,1,"form-control",null,Je,Ye),ce(Gt,E(b))},[()=>JSON.stringify(E(l),null,2),()=>({"is-invalid":E(b)})]),Rr(r,[],B,()=>E(f),ve=>D(f,ve)),Rr(r,[],re,()=>E(f),ve=>D(f,ve)),Xe(Ce,()=>E(v),ve=>D(v,ve)),z(N,k)};W(V,N=>{E(l)&&E(u)&&N(I)})}z(t,A),we()}Re(["click","change","input"]);var Bg=(t,e)=>D(e,"jschema"),Jg=(t,e)=>D(e,"task-manifest"),Gg=H('<nav class="navbar navbar-expand-lg bg-light mb-3 border-bottom"><div class="container"><a class="navbar-brand" href="https://fractal-analytics-platform.github.io/fractal-web/">Documentation</a> <ul class="navbar-nav me-auto"><li class="nav-item"><a href="#jschema">JSON Schema</a></li> <li class="nav-item"><a href="#task-manifest">Task manifest</a></li></ul></div></nav> <div class="container"><!></div>',1);function ny(t,e){$e(e,!0);const r=["jschema","task-manifest"];let n=Z("jschema");wt(()=>{for(const c of r)if(`#${c}`===location.hash){D(n,c,!0);break}});var s=Gg(),i=fe(s),l=M(i),d=q(M(l),2),f=M(d),u=M(f);let p;u.__click=[Bg,n],j(f);var v=q(f,2),b=M(v);let _;b.__click=[Jg,n],j(v),j(d),j(l),j(i);var $=q(i,2),y=M($);{var a=c=>{mg(c,{})},o=(c,h)=>{{var g=w=>{Kg(w,{})};W(c,w=>{E(n)==="task-manifest"&&w(g)},h)}};W(y,c=>{E(n)==="jschema"?c(a):c(o,!1)})}j($),Y((c,h)=>{p=me(u,1,"nav-link",null,p,c),_=me(b,1,"nav-link",null,_,h)},[()=>({active:E(n)==="jschema"}),()=>({active:E(n)==="task-manifest"})]),z(t,s),we()}Re(["click"]);export{ny as component};
