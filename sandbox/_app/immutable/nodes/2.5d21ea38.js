var ro=Object.defineProperty;var no=(t,e,r)=>e in t?ro(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var et=(t,e,r)=>(no(t,typeof e!="symbol"?e+"":e,r),r);import{S as gt,i as yt,s as ht,k as O,l as T,m as D,h as _,n as g,b as q,H as kt,o as wr,w as rr,a as K,y as Me,c as B,z as Fe,A as Ue,g as ue,d as de,B as qe,q as G,r as W,G as y,u as He,C as ao,J as ye,K as oe,D as so,E as io,F as oo,v as jt,L as ei,f as Rt,M as ti,N as qa,O as It,P as ct,Q as ri,R as ni,T as dn,U as En,V as ai,e as ut,W as si,t as jr,X as lo}from"../chunks/index.7d84d21f.js";function xt(t){if(t!==void 0)return JSON.parse(JSON.stringify(t))}function hn(t){return t===void 0?null:t}function mn(t){return typeof t=="object"&&t!==null&&t!==void 0}function $n(t){const e=ii(t);return oi(e)}function ii(t){return Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=t[e].filter(r=>r!==null&&r!=="")),t[e]&&typeof t[e]=="object"?ii(t[e]):(t[e]===null||t[e]==="")&&delete t[e]}),t}function oi(t){return Object.keys(t).forEach(e=>{t[e]&&typeof t[e]=="object"&&(oi(t[e]),Object.keys(t[e]).length===0&&delete t[e])}),t}function Kn(t){return t instanceof eo?JSON.stringify(t.errors.length===1?t.errors[0]:t.errors,null,2):(console.error(t),t.message)}function co(t){return"minimum"in t&&t.minimum!==void 0?Number(t.minimum):"exclusiveMinimum"in t&&t.exclusiveMinimum!==void 0?Number(t.exclusiveMinimum)+1:null}function uo(t){return"maximum"in t&&t.maximum!==void 0?Number(t.maximum):"exclusiveMaximum"in t&&t.exclusiveMaximum!==void 0?Number(t.exclusiveMaximum)-1:null}function li(t){return"minItems"in t&&typeof t.minItems=="number"&&"maxItems"in t&&typeof t.maxItems=="number"&&t.minItems===t.maxItems}function ci(t,e){const r=t.properties||{};if(t.additionalProperties)for(const n of Object.keys(e))Object.keys(r).includes(n)||(r[n]=t.additionalProperties);return r}function fo(t,e){const r=t.properties||{};return!Object.keys(r).includes(e)}function pn(t){return t?["input_paths","output_path","metadata","component"]:["zarr_url","zarr_urls","init_args","zarr_dir"]}function ho(t,e=void 0){return At(t,!0,e,e===void 0)}function mo(t,e,r){const n=t.required||[],a={};e==null&&(e={});const s=ci(t,e);for(const[i,o]of Object.entries(s)){const l=n.includes(i);a[i]=At(o,l,hn(e[i]),r)}return a}function At(t,e,r,n){if(!t)return null;if(n&&"default"in t)return At(t,e,t.default,!1);if(t.type===null)return null;switch(t.type){case"object":return mo(t,r,n);case"array":{const a=t;return li(a)?vo(a,e,r,n):po(a,e,r,n)}default:return hn(r)}}function po(t,e,r,n){Array.isArray(r)||(r=[]);const a=t.items;let s=[];for(let i=0;i<r.length;i++)s.push(At(a,e,r[i],n));if(e&&typeof t.minItems=="number"&&s.length<t.minItems)for(let i=s.length;i<t.minItems;i++)s.push(At(a,e,null,n));return s}function vo(t,e,r,n){if(Array.isArray(r)||(r=[]),!e&&r.length===0)return r;let a=[];for(let i=0;i<r.length;i++)a.push(At(La(t,i),e,r[i],n));const s=t.minItems;for(let i=a.length;i<s;i++)a.push(At(La(t,i),!1,null,n));return a.length>s&&(console.warn("Tuple initial value has more items than allowed (%d)",s,r),a.splice(s,a.length)),a}function La(t,e){return Array.isArray(t.items)?e<t.items.length?t.items[e]:(console.warn("Unable to retrieve tuple child on index %d",e),null):t.items}class wn{constructor(e){et(this,"manager");et(this,"id");et(this,"key");et(this,"type");et(this,"title");et(this,"description");et(this,"required");et(this,"removable");et(this,"property");this.manager=e.manager,this.id=e.id,this.key=e.key,this.type=e.type,this.title=e.title,this.required=e.required,this.description=e.description,this.removable=e.removable,this.property=e.property}notifyChange(){this.manager.notifyChange()}}class Lr extends wn{constructor(r){super(r);et(this,"value");this.value=r.value}}class _o extends Lr{constructor(e){super(e)}}class go extends Lr{constructor(e){super(e)}}class yo extends Lr{constructor(r){super(r);et(this,"options");this.options=r.options}}class za extends Lr{constructor(r){super(r);et(this,"badInput",!1);this.min=r.min,this.max=r.max}}class bo extends wn{constructor(r){super(r);et(this,"children");et(this,"additionalProperties",!1);this.additionalProperties=r.additionalProperties,this.children=r.children,this.collapsed=!r.required}addChild(r){if(!this.additionalProperties)return;if(r==="")throw new Error("Schema property has no name");if(this.children.map(s=>s.key).includes(r))throw new Error("Schema property already has a property with the same name");const a=this.manager.createFormElement({key:r,property:this.additionalProperties,required:!1,removable:!0,value:At(this.additionalProperties,!1,this.additionalProperties.default,!1)});a.title=r,a.removable=!0,this.children=[...this.children,a],this.notifyChange()}removeChild(r){if(!this.additionalProperties){console.warn("Attempted to call remove child on element without additional properties");return}const n=this.children.filter(s=>s.key===r);if(n.length===0){console.warn("Attempted to remove not existing key %s",r);return}const[a]=n;if(!a.removable){console.warn("Attempted to remove not removable child");return}this.children=this.children.filter(s=>s.key!==r),this.notifyChange()}resetChild(r){const n=this.children[r],a=n.property.default;if(a===void 0)return;const s=this.manager.createFormElement({key:n.key,property:n.property,required:n.required,removable:n.removable,value:a});s.collapsed=n.collapsed,this.children[r]=s,this.notifyChange()}}class Eo extends wn{constructor(r){super(r);et(this,"children");et(this,"items");et(this,"minItems");et(this,"maxItems");this.children=r.children,this.items=r.items,this.minItems=r.minItems,this.maxItems=r.maxItems,this.collapsed=!r.required}addChild(){if(typeof this.maxItems=="number"&&this.children.length===this.maxItems)return;const r=this.manager.createFormElement({key:null,property:this.items,required:!1,removable:!0,value:At(this.items,!1,void 0,!0)});this.children=[...this.children,r],this.notifyChange()}removeChild(r){this.children.splice(r,1),this.notifyChange()}moveChildUp(r){if(r>0){let n=[];for(let a=0;a<this.children.length;a++)a===r-1?n[a]=this.children[a+1]:a===r?n[a]=this.children[a-1]:n[a]=this.children[a];this.children=n,this.notifyChange()}}moveChildDown(r){if(r<this.children.length-1){let n=[];for(let a=0;a<this.children.length;a++)a===r?n[a]=this.children[a+1]:a===r+1?n[a]=this.children[a-1]:n[a]=this.children[a];this.children=n,this.notifyChange()}}}class $o extends wn{constructor(r){super(r);et(this,"children");et(this,"items");et(this,"size");this.children=r.children,this.items=r.items,this.size=r.size,this.collapsed=!r.required}addTuple(){let r;if(Array.isArray(this.items))r=this.items.map((n,a)=>At(n,!1,Array.isArray(this.property.default)?this.property.default[a]:void 0,!1));else{const n=this.items;r=Array(this.size).map(a=>At(n,!1,Array.isArray(this.property.default)?this.property.default[a]:void 0,!1))}this.children=this.manager.createTupleChildren({items:this.items,size:this.size,value:r}),this.notifyChange()}removeTuple(){this.children=[],this.notifyChange()}}function ui(t,e=[]){let r=fi(t,e);return r=on(r,r),r=jn(r),r}function fi(t,e=[]){const r=xt(t);for(const n of Object.keys(r.properties))e.includes(n)&&delete r.properties[n];return r.required&&(r.required=r.required.filter(n=>!e.includes(n))),r}function on(t,e){if(Array.isArray(e)){const r=[];for(const n of e)r.push(on(t,n));return r}else if(mn(e)){const r={};for(const[n,a]of Object.entries(e))if(n==="$ref"&&typeof a=="string"){const s=wo(t,a);for(const[i,o]of Object.entries(s))r[i]=on(t,o)}else r[n]=on(t,a);return r}else return e}function wo(t,e){if(!e.startsWith("#/"))throw new Error(`Unsupported $ref field format: ${e}`);const r=e.substring(2).split("/");let n=t;for(const a of r){if(!(a in n))throw new Error(`Unable to resolve reference ${e}. Key ${a} not found.`);n=n[a]}return n}function jn(t){if(Array.isArray(t)){const e=[];for(const r of t)e.push(jn(r));return e}else if(mn(t)){const e={};for(const[r,n]of Object.entries(t))if(r==="allOf"&&Array.isArray(n))for(const a of n)for(const[s,i]of Object.entries(a))So(e,s,i);else e[r]=jn(n);return e}else return t}function So(t,e,r){e in t?Array.isArray(t[e])&&Array.isArray(r)?t[e]=[...t[e],...r]:mn(t)&&mn(r)&&(t[e]={...t[e],...r}):t[e]=r}var ko=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Po(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rn={exports:{}},di={},Ct={},Er={},zr={},$e={},qr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor($){if(super(),!t.IDENTIFIER.test($))throw new Error("CodeGen: name must be a valid identifier");this.str=$}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor($){super(),this._items=typeof $=="string"?[$]:$}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const $=this._items[0];return $===""||$==='""'}get str(){var $;return($=this._str)!==null&&$!==void 0?$:this._str=this._items.reduce((k,N)=>`${k}${N}`,"")}get names(){var $;return($=this._names)!==null&&$!==void 0?$:this._names=this._items.reduce((k,N)=>(N instanceof r&&(k[N.str]=(k[N.str]||0)+1),k),{})}}t._Code=n,t.nil=new n("");function a(v,...$){const k=[v[0]];let N=0;for(;N<$.length;)o(k,$[N]),k.push(v[++N]);return new n(k)}t._=a;const s=new n("+");function i(v,...$){const k=[E(v[0])];let N=0;for(;N<$.length;)k.push(s),o(k,$[N]),k.push(s,E(v[++N]));return l(k),new n(k)}t.str=i;function o(v,$){$ instanceof n?v.push(...$._items):$ instanceof r?v.push($):v.push(f($))}t.addCodeArg=o;function l(v){let $=1;for(;$<v.length-1;){if(v[$]===s){const k=u(v[$-1],v[$+1]);if(k!==void 0){v.splice($-1,3,k);continue}v[$++]="+"}$++}}function u(v,$){if($==='""')return v;if(v==='""')return $;if(typeof v=="string")return $ instanceof r||v[v.length-1]!=='"'?void 0:typeof $!="string"?`${v.slice(0,-1)}${$}"`:$[0]==='"'?v.slice(0,-1)+$.slice(1):void 0;if(typeof $=="string"&&$[0]==='"'&&!(v instanceof r))return`"${v}${$.slice(1)}`}function c(v,$){return $.emptyStr()?v:v.emptyStr()?$:i`${v}${$}`}t.strConcat=c;function f(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:E(Array.isArray(v)?v.join(","):v)}function m(v){return new n(E(v))}t.stringify=m;function E(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=E;function d(v){return typeof v=="string"&&t.IDENTIFIER.test(v)?new n(`.${v}`):a`[${v}]`}t.getProperty=d;function w(v){if(typeof v=="string"&&t.IDENTIFIER.test(v))return new n(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}t.getEsmExportName=w;function p(v){return new n(v.toString())}t.regexpCode=p})(qr);var Vn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=qr;class r extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var n;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class a{constructor({prefixes:u,parent:c}={}){this._names={},this._prefixes=u,this._parent=c}toName(u){return u instanceof e.Name?u:this.name(u)}name(u){return new e.Name(this._newName(u))}_newName(u){const c=this._names[u]||this._nameGroup(u);return`${u}${c.index++}`}_nameGroup(u){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}t.Scope=a;class s extends e.Name{constructor(u,c){super(c),this.prefix=u}setValue(u,{property:c,itemIndex:f}){this.value=u,this.scopePath=(0,e._)`.${new e.Name(c)}[${f}]`}}t.ValueScopeName=s;const i=(0,e._)`\n`;class o extends a{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?i:e.nil}}get(){return this._scope}name(u){return new s(u,this._newName(u))}value(u,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const m=this.toName(u),{prefix:E}=m,d=(f=c.key)!==null&&f!==void 0?f:c.ref;let w=this._values[E];if(w){const $=w.get(d);if($)return $}else w=this._values[E]=new Map;w.set(d,m);const p=this._scope[E]||(this._scope[E]=[]),v=p.length;return p[v]=c.ref,m.setValue(c,{property:E,itemIndex:v}),m}getValue(u,c){const f=this._values[u];if(f)return f.get(c)}scopeRefs(u,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,e._)`${u}${f.scopePath}`})}scopeCode(u=this._values,c,f){return this._reduceValues(u,m=>{if(m.value===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return m.value.code},c,f)}_reduceValues(u,c,f={},m){let E=e.nil;for(const d in u){const w=u[d];if(!w)continue;const p=f[d]=f[d]||new Map;w.forEach(v=>{if(p.has(v))return;p.set(v,n.Started);let $=c(v);if($){const k=this.opts.es5?t.varKinds.var:t.varKinds.const;E=(0,e._)`${E}${k} ${v} = ${$};${this.opts._n}`}else if($=m==null?void 0:m(v))E=(0,e._)`${E}${$}${this.opts._n}`;else throw new r(v);p.set(v,n.Completed)})}return E}}t.ValueScope=o})(Vn);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=qr,r=Vn;var n=qr;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var a=Vn;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class s{optimizeNodes(){return this}optimizeNames(h,S){return this}}class i extends s{constructor(h,S,M){super(),this.varKind=h,this.name=S,this.rhs=M}render({es5:h,_n:S}){const M=h?r.varKinds.var:this.varKind,L=this.rhs===void 0?"":` = ${this.rhs}`;return`${M} ${this.name}${L};`+S}optimizeNames(h,S){if(h[this.name.str])return this.rhs&&(this.rhs=fe(this.rhs,h,S)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class o extends s{constructor(h,S,M){super(),this.lhs=h,this.rhs=S,this.sideEffects=M}render({_n:h}){return`${this.lhs} = ${this.rhs};`+h}optimizeNames(h,S){if(!(this.lhs instanceof e.Name&&!h[this.lhs.str]&&!this.sideEffects))return this.rhs=fe(this.rhs,h,S),this}get names(){const h=this.lhs instanceof e.Name?{}:{...this.lhs.names};return re(h,this.rhs)}}class l extends o{constructor(h,S,M,L){super(h,M,L),this.op=S}render({_n:h}){return`${this.lhs} ${this.op}= ${this.rhs};`+h}}class u extends s{constructor(h){super(),this.label=h,this.names={}}render({_n:h}){return`${this.label}:`+h}}class c extends s{constructor(h){super(),this.label=h,this.names={}}render({_n:h}){return`break${this.label?` ${this.label}`:""};`+h}}class f extends s{constructor(h){super(),this.error=h}render({_n:h}){return`throw ${this.error};`+h}get names(){return this.error.names}}class m extends s{constructor(h){super(),this.code=h}render({_n:h}){return`${this.code};`+h}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(h,S){return this.code=fe(this.code,h,S),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class E extends s{constructor(h=[]){super(),this.nodes=h}render(h){return this.nodes.reduce((S,M)=>S+M.render(h),"")}optimizeNodes(){const{nodes:h}=this;let S=h.length;for(;S--;){const M=h[S].optimizeNodes();Array.isArray(M)?h.splice(S,1,...M):M?h[S]=M:h.splice(S,1)}return h.length>0?this:void 0}optimizeNames(h,S){const{nodes:M}=this;let L=M.length;for(;L--;){const J=M[L];J.optimizeNames(h,S)||(Oe(h,J.names),M.splice(L,1))}return M.length>0?this:void 0}get names(){return this.nodes.reduce((h,S)=>H(h,S.names),{})}}class d extends E{render(h){return"{"+h._n+super.render(h)+"}"+h._n}}class w extends E{}class p extends d{}p.kind="else";class v extends d{constructor(h,S){super(S),this.condition=h}render(h){let S=`if(${this.condition})`+super.render(h);return this.else&&(S+="else "+this.else.render(h)),S}optimizeNodes(){super.optimizeNodes();const h=this.condition;if(h===!0)return this.nodes;let S=this.else;if(S){const M=S.optimizeNodes();S=this.else=Array.isArray(M)?new p(M):M}if(S)return h===!1?S instanceof v?S:S.nodes:this.nodes.length?this:new v(le(h),S instanceof v?[S]:S.nodes);if(!(h===!1||!this.nodes.length))return this}optimizeNames(h,S){var M;if(this.else=(M=this.else)===null||M===void 0?void 0:M.optimizeNames(h,S),!!(super.optimizeNames(h,S)||this.else))return this.condition=fe(this.condition,h,S),this}get names(){const h=super.names;return re(h,this.condition),this.else&&H(h,this.else.names),h}}v.kind="if";class $ extends d{}$.kind="for";class k extends ${constructor(h){super(),this.iteration=h}render(h){return`for(${this.iteration})`+super.render(h)}optimizeNames(h,S){if(super.optimizeNames(h,S))return this.iteration=fe(this.iteration,h,S),this}get names(){return H(super.names,this.iteration.names)}}class N extends ${constructor(h,S,M,L){super(),this.varKind=h,this.name=S,this.from=M,this.to=L}render(h){const S=h.es5?r.varKinds.var:this.varKind,{name:M,from:L,to:J}=this;return`for(${S} ${M}=${L}; ${M}<${J}; ${M}++)`+super.render(h)}get names(){const h=re(super.names,this.from);return re(h,this.to)}}class j extends ${constructor(h,S,M,L){super(),this.loop=h,this.varKind=S,this.name=M,this.iterable=L}render(h){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(h)}optimizeNames(h,S){if(super.optimizeNames(h,S))return this.iterable=fe(this.iterable,h,S),this}get names(){return H(super.names,this.iterable.names)}}class U extends d{constructor(h,S,M){super(),this.name=h,this.args=S,this.async=M}render(h){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(h)}}U.kind="func";class X extends E{render(h){return"return "+super.render(h)}}X.kind="return";class ee extends d{render(h){let S="try"+super.render(h);return this.catch&&(S+=this.catch.render(h)),this.finally&&(S+=this.finally.render(h)),S}optimizeNodes(){var h,S;return super.optimizeNodes(),(h=this.catch)===null||h===void 0||h.optimizeNodes(),(S=this.finally)===null||S===void 0||S.optimizeNodes(),this}optimizeNames(h,S){var M,L;return super.optimizeNames(h,S),(M=this.catch)===null||M===void 0||M.optimizeNames(h,S),(L=this.finally)===null||L===void 0||L.optimizeNames(h,S),this}get names(){const h=super.names;return this.catch&&H(h,this.catch.names),this.finally&&H(h,this.finally.names),h}}class ie extends d{constructor(h){super(),this.error=h}render(h){return`catch(${this.error})`+super.render(h)}}ie.kind="catch";class me extends d{render(h){return"finally"+super.render(h)}}me.kind="finally";class be{constructor(h,S={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...S,_n:S.lines?`
`:""},this._extScope=h,this._scope=new r.Scope({parent:h}),this._nodes=[new w]}toString(){return this._root.render(this.opts)}name(h){return this._scope.name(h)}scopeName(h){return this._extScope.name(h)}scopeValue(h,S){const M=this._extScope.value(h,S);return(this._values[M.prefix]||(this._values[M.prefix]=new Set)).add(M),M}getScopeValue(h,S){return this._extScope.getValue(h,S)}scopeRefs(h){return this._extScope.scopeRefs(h,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(h,S,M,L){const J=this._scope.toName(S);return M!==void 0&&L&&(this._constants[J.str]=M),this._leafNode(new i(h,J,M)),J}const(h,S,M){return this._def(r.varKinds.const,h,S,M)}let(h,S,M){return this._def(r.varKinds.let,h,S,M)}var(h,S,M){return this._def(r.varKinds.var,h,S,M)}assign(h,S,M){return this._leafNode(new o(h,S,M))}add(h,S){return this._leafNode(new l(h,t.operators.ADD,S))}code(h){return typeof h=="function"?h():h!==e.nil&&this._leafNode(new m(h)),this}object(...h){const S=["{"];for(const[M,L]of h)S.length>1&&S.push(","),S.push(M),(M!==L||this.opts.es5)&&(S.push(":"),(0,e.addCodeArg)(S,L));return S.push("}"),new e._Code(S)}if(h,S,M){if(this._blockNode(new v(h)),S&&M)this.code(S).else().code(M).endIf();else if(S)this.code(S).endIf();else if(M)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(h){return this._elseNode(new v(h))}else(){return this._elseNode(new p)}endIf(){return this._endBlockNode(v,p)}_for(h,S){return this._blockNode(h),S&&this.code(S).endFor(),this}for(h,S){return this._for(new k(h),S)}forRange(h,S,M,L,J=this.opts.es5?r.varKinds.var:r.varKinds.let){const Z=this._scope.toName(h);return this._for(new N(J,Z,S,M),()=>L(Z))}forOf(h,S,M,L=r.varKinds.const){const J=this._scope.toName(h);if(this.opts.es5){const Z=S instanceof e.Name?S:this.var("_arr",S);return this.forRange("_i",0,(0,e._)`${Z}.length`,Y=>{this.var(J,(0,e._)`${Z}[${Y}]`),M(J)})}return this._for(new j("of",L,J,S),()=>M(J))}forIn(h,S,M,L=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(h,(0,e._)`Object.keys(${S})`,M);const J=this._scope.toName(h);return this._for(new j("in",L,J,S),()=>M(J))}endFor(){return this._endBlockNode($)}label(h){return this._leafNode(new u(h))}break(h){return this._leafNode(new c(h))}return(h){const S=new X;if(this._blockNode(S),this.code(h),S.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(X)}try(h,S,M){if(!S&&!M)throw new Error('CodeGen: "try" without "catch" and "finally"');const L=new ee;if(this._blockNode(L),this.code(h),S){const J=this.name("e");this._currNode=L.catch=new ie(J),S(J)}return M&&(this._currNode=L.finally=new me,this.code(M)),this._endBlockNode(ie,me)}throw(h){return this._leafNode(new f(h))}block(h,S){return this._blockStarts.push(this._nodes.length),h&&this.code(h).endBlock(S),this}endBlock(h){const S=this._blockStarts.pop();if(S===void 0)throw new Error("CodeGen: not in self-balancing block");const M=this._nodes.length-S;if(M<0||h!==void 0&&M!==h)throw new Error(`CodeGen: wrong number of nodes: ${M} vs ${h} expected`);return this._nodes.length=S,this}func(h,S=e.nil,M,L){return this._blockNode(new U(h,S,M)),L&&this.code(L).endFunc(),this}endFunc(){return this._endBlockNode(U)}optimize(h=1){for(;h-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(h){return this._currNode.nodes.push(h),this}_blockNode(h){this._currNode.nodes.push(h),this._nodes.push(h)}_endBlockNode(h,S){const M=this._currNode;if(M instanceof h||S&&M instanceof S)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${S?`${h.kind}/${S.kind}`:h.kind}"`)}_elseNode(h){const S=this._currNode;if(!(S instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=S.else=h,this}get _root(){return this._nodes[0]}get _currNode(){const h=this._nodes;return h[h.length-1]}set _currNode(h){const S=this._nodes;S[S.length-1]=h}}t.CodeGen=be;function H(C,h){for(const S in h)C[S]=(C[S]||0)+(h[S]||0);return C}function re(C,h){return h instanceof e._CodeOrName?H(C,h.names):C}function fe(C,h,S){if(C instanceof e.Name)return M(C);if(!L(C))return C;return new e._Code(C._items.reduce((J,Z)=>(Z instanceof e.Name&&(Z=M(Z)),Z instanceof e._Code?J.push(...Z._items):J.push(Z),J),[]));function M(J){const Z=S[J.str];return Z===void 0||h[J.str]!==1?J:(delete h[J.str],Z)}function L(J){return J instanceof e._Code&&J._items.some(Z=>Z instanceof e.Name&&h[Z.str]===1&&S[Z.str]!==void 0)}}function Oe(C,h){for(const S in h)C[S]=(C[S]||0)-(h[S]||0)}function le(C){return typeof C=="boolean"||typeof C=="number"||C===null?!C:(0,e._)`!${F(C)}`}t.not=le;const Le=A(t.operators.AND);function Ie(...C){return C.reduce(Le)}t.and=Ie;const Se=A(t.operators.OR);function z(...C){return C.reduce(Se)}t.or=z;function A(C){return(h,S)=>h===e.nil?S:S===e.nil?h:(0,e._)`${F(h)} ${C} ${F(S)}`}function F(C){return C instanceof e.Name?C:(0,e._)`(${C})`}})($e);var Q={};Object.defineProperty(Q,"__esModule",{value:!0});Q.checkStrictMode=Q.getErrorPath=Q.Type=Q.useFunc=Q.setEvaluated=Q.evaluatedPropsToName=Q.mergeEvaluated=Q.eachItem=Q.unescapeJsonPointer=Q.escapeJsonPointer=Q.escapeFragment=Q.unescapeFragment=Q.schemaRefOrVal=Q.schemaHasRulesButRef=Q.schemaHasRules=Q.checkUnknownRules=Q.alwaysValidSchema=Q.toHash=void 0;const Ve=$e,No=qr;function Io(t){const e={};for(const r of t)e[r]=!0;return e}Q.toHash=Io;function Oo(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(hi(t,e),!mi(e,t.self.RULES.all))}Q.alwaysValidSchema=Oo;function hi(t,e=t.schema){const{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;const a=n.RULES.keywords;for(const s in e)a[s]||_i(t,`unknown keyword: "${s}"`)}Q.checkUnknownRules=hi;function mi(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(e[r])return!0;return!1}Q.schemaHasRules=mi;function To(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Q.schemaHasRulesButRef=To;function Do({topSchemaRef:t,schemaPath:e},r,n,a){if(!a){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Ve._)`${r}`}return(0,Ve._)`${t}${e}${(0,Ve.getProperty)(n)}`}Q.schemaRefOrVal=Do;function Co(t){return pi(decodeURIComponent(t))}Q.unescapeFragment=Co;function Ao(t){return encodeURIComponent(Bn(t))}Q.escapeFragment=Ao;function Bn(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Q.escapeJsonPointer=Bn;function pi(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Q.unescapeJsonPointer=pi;function jo(t,e){if(Array.isArray(t))for(const r of t)e(r);else e(t)}Q.eachItem=jo;function Ja({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(a,s,i,o)=>{const l=i===void 0?s:i instanceof Ve.Name?(s instanceof Ve.Name?t(a,s,i):e(a,s,i),i):s instanceof Ve.Name?(e(a,i,s),s):r(s,i);return o===Ve.Name&&!(l instanceof Ve.Name)?n(a,l):l}}Q.mergeEvaluated={props:Ja({mergeNames:(t,e,r)=>t.if((0,Ve._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Ve._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Ve._)`${r} || {}`).code((0,Ve._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Ve._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Ve._)`${r} || {}`),Hn(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:vi}),items:Ja({mergeNames:(t,e,r)=>t.if((0,Ve._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Ve._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Ve._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Ve._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function vi(t,e){if(e===!0)return t.var("props",!0);const r=t.var("props",(0,Ve._)`{}`);return e!==void 0&&Hn(t,r,e),r}Q.evaluatedPropsToName=vi;function Hn(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Ve._)`${e}${(0,Ve.getProperty)(n)}`,!0))}Q.setEvaluated=Hn;const Ka={};function Ro(t,e){return t.scopeValue("func",{ref:e,code:Ka[e.code]||(Ka[e.code]=new No._Code(e.code))})}Q.useFunc=Ro;var Mn;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(Mn||(Q.Type=Mn={}));function Vo(t,e,r){if(t instanceof Ve.Name){const n=e===Mn.Num;return r?n?(0,Ve._)`"[" + ${t} + "]"`:(0,Ve._)`"['" + ${t} + "']"`:n?(0,Ve._)`"/" + ${t}`:(0,Ve._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Ve.getProperty)(t).toString():"/"+Bn(t)}Q.getErrorPath=Vo;function _i(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Q.checkStrictMode=_i;var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});const bt=$e,Mo={data:new bt.Name("data"),valCxt:new bt.Name("valCxt"),instancePath:new bt.Name("instancePath"),parentData:new bt.Name("parentData"),parentDataProperty:new bt.Name("parentDataProperty"),rootData:new bt.Name("rootData"),dynamicAnchors:new bt.Name("dynamicAnchors"),vErrors:new bt.Name("vErrors"),errors:new bt.Name("errors"),this:new bt.Name("this"),self:new bt.Name("self"),scope:new bt.Name("scope"),json:new bt.Name("json"),jsonPos:new bt.Name("jsonPos"),jsonLen:new bt.Name("jsonLen"),jsonPart:new bt.Name("jsonPart")};Lt.default=Mo;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=$e,r=Q,n=Lt;t.keywordError={message:({keyword:p})=>(0,e.str)`must pass "${p}" keyword validation`},t.keyword$DataError={message:({keyword:p,schemaType:v})=>v?(0,e.str)`"${p}" keyword must be ${v} ($data)`:(0,e.str)`"${p}" keyword is invalid ($data)`};function a(p,v=t.keywordError,$,k){const{it:N}=p,{gen:j,compositeRule:U,allErrors:X}=N,ee=f(p,v,$);k??(U||X)?l(j,ee):u(N,(0,e._)`[${ee}]`)}t.reportError=a;function s(p,v=t.keywordError,$){const{it:k}=p,{gen:N,compositeRule:j,allErrors:U}=k,X=f(p,v,$);l(N,X),j||U||u(k,n.default.vErrors)}t.reportExtraError=s;function i(p,v){p.assign(n.default.errors,v),p.if((0,e._)`${n.default.vErrors} !== null`,()=>p.if(v,()=>p.assign((0,e._)`${n.default.vErrors}.length`,v),()=>p.assign(n.default.vErrors,null)))}t.resetErrorsCount=i;function o({gen:p,keyword:v,schemaValue:$,data:k,errsCount:N,it:j}){if(N===void 0)throw new Error("ajv implementation error");const U=p.name("err");p.forRange("i",N,n.default.errors,X=>{p.const(U,(0,e._)`${n.default.vErrors}[${X}]`),p.if((0,e._)`${U}.instancePath === undefined`,()=>p.assign((0,e._)`${U}.instancePath`,(0,e.strConcat)(n.default.instancePath,j.errorPath))),p.assign((0,e._)`${U}.schemaPath`,(0,e.str)`${j.errSchemaPath}/${v}`),j.opts.verbose&&(p.assign((0,e._)`${U}.schema`,$),p.assign((0,e._)`${U}.data`,k))})}t.extendErrors=o;function l(p,v){const $=p.const("err",v);p.if((0,e._)`${n.default.vErrors} === null`,()=>p.assign(n.default.vErrors,(0,e._)`[${$}]`),(0,e._)`${n.default.vErrors}.push(${$})`),p.code((0,e._)`${n.default.errors}++`)}function u(p,v){const{gen:$,validateName:k,schemaEnv:N}=p;N.$async?$.throw((0,e._)`new ${p.ValidationError}(${v})`):($.assign((0,e._)`${k}.errors`,v),$.return(!1))}const c={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function f(p,v,$){const{createErrors:k}=p.it;return k===!1?(0,e._)`{}`:m(p,v,$)}function m(p,v,$={}){const{gen:k,it:N}=p,j=[E(N,$),d(p,$)];return w(p,v,j),k.object(...j)}function E({errorPath:p},{instancePath:v}){const $=v?(0,e.str)`${p}${(0,r.getErrorPath)(v,r.Type.Str)}`:p;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,$)]}function d({keyword:p,it:{errSchemaPath:v}},{schemaPath:$,parentSchema:k}){let N=k?v:(0,e.str)`${v}/${p}`;return $&&(N=(0,e.str)`${N}${(0,r.getErrorPath)($,r.Type.Str)}`),[c.schemaPath,N]}function w(p,{params:v,message:$},k){const{keyword:N,data:j,schemaValue:U,it:X}=p,{opts:ee,propertyName:ie,topSchemaRef:me,schemaPath:be}=X;k.push([c.keyword,N],[c.params,typeof v=="function"?v(p):v||(0,e._)`{}`]),ee.messages&&k.push([c.message,typeof $=="function"?$(p):$]),ee.verbose&&k.push([c.schema,U],[c.parentSchema,(0,e._)`${me}${be}`],[n.default.data,j]),ie&&k.push([c.propertyName,ie])}})(zr);Object.defineProperty(Er,"__esModule",{value:!0});Er.boolOrEmptySchema=Er.topBoolOrEmptySchema=void 0;const Fo=zr,Uo=$e,qo=Lt,Lo={message:"boolean schema is false"};function zo(t){const{gen:e,schema:r,validateName:n}=t;r===!1?gi(t,!1):typeof r=="object"&&r.$async===!0?e.return(qo.default.data):(e.assign((0,Uo._)`${n}.errors`,null),e.return(!0))}Er.topBoolOrEmptySchema=zo;function Jo(t,e){const{gen:r,schema:n}=t;n===!1?(r.var(e,!1),gi(t)):r.var(e,!0)}Er.boolOrEmptySchema=Jo;function gi(t,e){const{gen:r,data:n}=t,a={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Fo.reportError)(a,Lo,void 0,e)}var dt={},cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.getRules=cr.isJSONType=void 0;const Ko=["string","number","integer","boolean","null","object","array"],Bo=new Set(Ko);function Ho(t){return typeof t=="string"&&Bo.has(t)}cr.isJSONType=Ho;function Go(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}cr.getRules=Go;var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.shouldUseRule=Ht.shouldUseGroup=Ht.schemaHasRulesForType=void 0;function Wo({schema:t,self:e},r){const n=e.RULES.types[r];return n&&n!==!0&&yi(t,n)}Ht.schemaHasRulesForType=Wo;function yi(t,e){return e.rules.some(r=>bi(t,r))}Ht.shouldUseGroup=yi;function bi(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Ht.shouldUseRule=bi;Object.defineProperty(dt,"__esModule",{value:!0});dt.reportTypeError=dt.checkDataTypes=dt.checkDataType=dt.coerceAndCheckDataType=dt.getJSONTypes=dt.getSchemaTypes=dt.DataType=void 0;const Xo=cr,Zo=Ht,Qo=zr,_e=$e,Ei=Q;var gr;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(gr||(dt.DataType=gr={}));function Yo(t){const e=$i(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}dt.getSchemaTypes=Yo;function $i(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(Xo.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}dt.getJSONTypes=$i;function xo(t,e){const{gen:r,data:n,opts:a}=t,s=el(e,a.coerceTypes),i=e.length>0&&!(s.length===0&&e.length===1&&(0,Zo.schemaHasRulesForType)(t,e[0]));if(i){const o=Gn(e,n,a.strictNumbers,gr.Wrong);r.if(o,()=>{s.length?tl(t,e,s):Wn(t)})}return i}dt.coerceAndCheckDataType=xo;const wi=new Set(["string","number","integer","boolean","null"]);function el(t,e){return e?t.filter(r=>wi.has(r)||e==="array"&&r==="array"):[]}function tl(t,e,r){const{gen:n,data:a,opts:s}=t,i=n.let("dataType",(0,_e._)`typeof ${a}`),o=n.let("coerced",(0,_e._)`undefined`);s.coerceTypes==="array"&&n.if((0,_e._)`${i} == 'object' && Array.isArray(${a}) && ${a}.length == 1`,()=>n.assign(a,(0,_e._)`${a}[0]`).assign(i,(0,_e._)`typeof ${a}`).if(Gn(e,a,s.strictNumbers),()=>n.assign(o,a))),n.if((0,_e._)`${o} !== undefined`);for(const u of r)(wi.has(u)||u==="array"&&s.coerceTypes==="array")&&l(u);n.else(),Wn(t),n.endIf(),n.if((0,_e._)`${o} !== undefined`,()=>{n.assign(a,o),rl(t,o)});function l(u){switch(u){case"string":n.elseIf((0,_e._)`${i} == "number" || ${i} == "boolean"`).assign(o,(0,_e._)`"" + ${a}`).elseIf((0,_e._)`${a} === null`).assign(o,(0,_e._)`""`);return;case"number":n.elseIf((0,_e._)`${i} == "boolean" || ${a} === null
              || (${i} == "string" && ${a} && ${a} == +${a})`).assign(o,(0,_e._)`+${a}`);return;case"integer":n.elseIf((0,_e._)`${i} === "boolean" || ${a} === null
              || (${i} === "string" && ${a} && ${a} == +${a} && !(${a} % 1))`).assign(o,(0,_e._)`+${a}`);return;case"boolean":n.elseIf((0,_e._)`${a} === "false" || ${a} === 0 || ${a} === null`).assign(o,!1).elseIf((0,_e._)`${a} === "true" || ${a} === 1`).assign(o,!0);return;case"null":n.elseIf((0,_e._)`${a} === "" || ${a} === 0 || ${a} === false`),n.assign(o,null);return;case"array":n.elseIf((0,_e._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${a} === null`).assign(o,(0,_e._)`[${a}]`)}}}function rl({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,_e._)`${e} !== undefined`,()=>t.assign((0,_e._)`${e}[${r}]`,n))}function Fn(t,e,r,n=gr.Correct){const a=n===gr.Correct?_e.operators.EQ:_e.operators.NEQ;let s;switch(t){case"null":return(0,_e._)`${e} ${a} null`;case"array":s=(0,_e._)`Array.isArray(${e})`;break;case"object":s=(0,_e._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":s=i((0,_e._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":s=i();break;default:return(0,_e._)`typeof ${e} ${a} ${t}`}return n===gr.Correct?s:(0,_e.not)(s);function i(o=_e.nil){return(0,_e.and)((0,_e._)`typeof ${e} == "number"`,o,r?(0,_e._)`isFinite(${e})`:_e.nil)}}dt.checkDataType=Fn;function Gn(t,e,r,n){if(t.length===1)return Fn(t[0],e,r,n);let a;const s=(0,Ei.toHash)(t);if(s.array&&s.object){const i=(0,_e._)`typeof ${e} != "object"`;a=s.null?i:(0,_e._)`!${e} || ${i}`,delete s.null,delete s.array,delete s.object}else a=_e.nil;s.number&&delete s.integer;for(const i in s)a=(0,_e.and)(a,Fn(i,e,r,n));return a}dt.checkDataTypes=Gn;const nl={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,_e._)`{type: ${t}}`:(0,_e._)`{type: ${e}}`};function Wn(t){const e=al(t);(0,Qo.reportError)(e,nl)}dt.reportTypeError=Wn;function al(t){const{gen:e,data:r,schema:n}=t,a=(0,Ei.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:a,schemaValue:a,parentSchema:n,params:{},it:t}}var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.assignDefaults=void 0;const pr=$e,sl=Q;function il(t,e){const{properties:r,items:n}=t.schema;if(e==="object"&&r)for(const a in r)Ba(t,a,r[a].default);else e==="array"&&Array.isArray(n)&&n.forEach((a,s)=>Ba(t,s,a.default))}Sn.assignDefaults=il;function Ba(t,e,r){const{gen:n,compositeRule:a,data:s,opts:i}=t;if(r===void 0)return;const o=(0,pr._)`${s}${(0,pr.getProperty)(e)}`;if(a){(0,sl.checkStrictMode)(t,`default is ignored for: ${o}`);return}let l=(0,pr._)`${o} === undefined`;i.useDefaults==="empty"&&(l=(0,pr._)`${l} || ${o} === null || ${o} === ""`),n.if(l,(0,pr._)`${o} = ${(0,pr.stringify)(r)}`)}var qt={},Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.validateUnion=Ee.validateArray=Ee.usePattern=Ee.callValidateCode=Ee.schemaProperties=Ee.allSchemaProperties=Ee.noPropertyInData=Ee.propertyInData=Ee.isOwnProperty=Ee.hasPropFunc=Ee.reportMissingProp=Ee.checkMissingProp=Ee.checkReportMissingProp=void 0;const We=$e,Xn=Q,Qt=Lt,ol=Q;function ll(t,e){const{gen:r,data:n,it:a}=t;r.if(Qn(r,n,e,a.opts.ownProperties),()=>{t.setParams({missingProperty:(0,We._)`${e}`},!0),t.error()})}Ee.checkReportMissingProp=ll;function cl({gen:t,data:e,it:{opts:r}},n,a){return(0,We.or)(...n.map(s=>(0,We.and)(Qn(t,e,s,r.ownProperties),(0,We._)`${a} = ${s}`)))}Ee.checkMissingProp=cl;function ul(t,e){t.setParams({missingProperty:e},!0),t.error()}Ee.reportMissingProp=ul;function Si(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,We._)`Object.prototype.hasOwnProperty`})}Ee.hasPropFunc=Si;function Zn(t,e,r){return(0,We._)`${Si(t)}.call(${e}, ${r})`}Ee.isOwnProperty=Zn;function fl(t,e,r,n){const a=(0,We._)`${e}${(0,We.getProperty)(r)} !== undefined`;return n?(0,We._)`${a} && ${Zn(t,e,r)}`:a}Ee.propertyInData=fl;function Qn(t,e,r,n){const a=(0,We._)`${e}${(0,We.getProperty)(r)} === undefined`;return n?(0,We.or)(a,(0,We.not)(Zn(t,e,r))):a}Ee.noPropertyInData=Qn;function ki(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Ee.allSchemaProperties=ki;function dl(t,e){return ki(e).filter(r=>!(0,Xn.alwaysValidSchema)(t,e[r]))}Ee.schemaProperties=dl;function hl({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:a,errorPath:s},it:i},o,l,u){const c=u?(0,We._)`${t}, ${e}, ${n}${a}`:e,f=[[Qt.default.instancePath,(0,We.strConcat)(Qt.default.instancePath,s)],[Qt.default.parentData,i.parentData],[Qt.default.parentDataProperty,i.parentDataProperty],[Qt.default.rootData,Qt.default.rootData]];i.opts.dynamicRef&&f.push([Qt.default.dynamicAnchors,Qt.default.dynamicAnchors]);const m=(0,We._)`${c}, ${r.object(...f)}`;return l!==We.nil?(0,We._)`${o}.call(${l}, ${m})`:(0,We._)`${o}(${m})`}Ee.callValidateCode=hl;const ml=(0,We._)`new RegExp`;function pl({gen:t,it:{opts:e}},r){const n=e.unicodeRegExp?"u":"",{regExp:a}=e.code,s=a(r,n);return t.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,We._)`${a.code==="new RegExp"?ml:(0,ol.useFunc)(t,a)}(${r}, ${n})`})}Ee.usePattern=pl;function vl(t){const{gen:e,data:r,keyword:n,it:a}=t,s=e.name("valid");if(a.allErrors){const o=e.let("valid",!0);return i(()=>e.assign(o,!1)),o}return e.var(s,!0),i(()=>e.break()),s;function i(o){const l=e.const("len",(0,We._)`${r}.length`);e.forRange("i",0,l,u=>{t.subschema({keyword:n,dataProp:u,dataPropType:Xn.Type.Num},s),e.if((0,We.not)(s),o)})}}Ee.validateArray=vl;function _l(t){const{gen:e,schema:r,keyword:n,it:a}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,Xn.alwaysValidSchema)(a,l))&&!a.opts.unevaluated)return;const i=e.let("valid",!1),o=e.name("_valid");e.block(()=>r.forEach((l,u)=>{const c=t.subschema({keyword:n,schemaProp:u,compositeRule:!0},o);e.assign(i,(0,We._)`${i} || ${o}`),t.mergeValidEvaluated(c,o)||e.if((0,We.not)(i))})),t.result(i,()=>t.reset(),()=>t.error(!0))}Ee.validateUnion=_l;Object.defineProperty(qt,"__esModule",{value:!0});qt.validateKeywordUsage=qt.validSchemaType=qt.funcKeywordCode=qt.macroKeywordCode=void 0;const Et=$e,ir=Lt,gl=Ee,yl=zr;function bl(t,e){const{gen:r,keyword:n,schema:a,parentSchema:s,it:i}=t,o=e.macro.call(i.self,a,s,i),l=Pi(r,n,o);i.opts.validateSchema!==!1&&i.self.validateSchema(o,!0);const u=r.name("valid");t.subschema({schema:o,schemaPath:Et.nil,errSchemaPath:`${i.errSchemaPath}/${n}`,topSchemaRef:l,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}qt.macroKeywordCode=bl;function El(t,e){var r;const{gen:n,keyword:a,schema:s,parentSchema:i,$data:o,it:l}=t;wl(l,e);const u=!o&&e.compile?e.compile.call(l.self,s,i,l):e.validate,c=Pi(n,a,u),f=n.let("valid");t.block$data(f,m),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function m(){if(e.errors===!1)w(),e.modifying&&Ha(t),p(()=>t.error());else{const v=e.async?E():d();e.modifying&&Ha(t),p(()=>$l(t,v))}}function E(){const v=n.let("ruleErrs",null);return n.try(()=>w((0,Et._)`await `),$=>n.assign(f,!1).if((0,Et._)`${$} instanceof ${l.ValidationError}`,()=>n.assign(v,(0,Et._)`${$}.errors`),()=>n.throw($))),v}function d(){const v=(0,Et._)`${c}.errors`;return n.assign(v,null),w(Et.nil),v}function w(v=e.async?(0,Et._)`await `:Et.nil){const $=l.opts.passContext?ir.default.this:ir.default.self,k=!("compile"in e&&!o||e.schema===!1);n.assign(f,(0,Et._)`${v}${(0,gl.callValidateCode)(t,c,$,k)}`,e.modifying)}function p(v){var $;n.if((0,Et.not)(($=e.valid)!==null&&$!==void 0?$:f),v)}}qt.funcKeywordCode=El;function Ha(t){const{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Et._)`${n.parentData}[${n.parentDataProperty}]`))}function $l(t,e){const{gen:r}=t;r.if((0,Et._)`Array.isArray(${e})`,()=>{r.assign(ir.default.vErrors,(0,Et._)`${ir.default.vErrors} === null ? ${e} : ${ir.default.vErrors}.concat(${e})`).assign(ir.default.errors,(0,Et._)`${ir.default.vErrors}.length`),(0,yl.extendErrors)(t)},()=>t.error())}function wl({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function Pi(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Et.stringify)(r)})}function Sl(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}qt.validSchemaType=Sl;function kl({schema:t,opts:e,self:r,errSchemaPath:n},a,s){if(Array.isArray(a.keyword)?!a.keyword.includes(s):a.keyword!==s)throw new Error("ajv implementation error");const i=a.dependencies;if(i!=null&&i.some(o=>!Object.prototype.hasOwnProperty.call(t,o)))throw new Error(`parent schema must have dependencies of ${s}: ${i.join(",")}`);if(a.validateSchema&&!a.validateSchema(t[s])){const l=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(a.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}qt.validateKeywordUsage=kl;var tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.extendSubschemaMode=tr.extendSubschemaData=tr.getSubschema=void 0;const Ut=$e,Ni=Q;function Pl(t,{keyword:e,schemaProp:r,schema:n,schemaPath:a,errSchemaPath:s,topSchemaRef:i}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const o=t.schema[e];return r===void 0?{schema:o,schemaPath:(0,Ut._)`${t.schemaPath}${(0,Ut.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:o[r],schemaPath:(0,Ut._)`${t.schemaPath}${(0,Ut.getProperty)(e)}${(0,Ut.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,Ni.escapeFragment)(r)}`}}if(n!==void 0){if(a===void 0||s===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:a,topSchemaRef:i,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}tr.getSubschema=Pl;function Nl(t,e,{dataProp:r,dataPropType:n,data:a,dataTypes:s,propertyName:i}){if(a!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:o}=e;if(r!==void 0){const{errorPath:u,dataPathArr:c,opts:f}=e,m=o.let("data",(0,Ut._)`${e.data}${(0,Ut.getProperty)(r)}`,!0);l(m),t.errorPath=(0,Ut.str)`${u}${(0,Ni.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,Ut._)`${r}`,t.dataPathArr=[...c,t.parentDataProperty]}if(a!==void 0){const u=a instanceof Ut.Name?a:o.let("data",a,!0);l(u),i!==void 0&&(t.propertyName=i)}s&&(t.dataTypes=s);function l(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}tr.extendSubschemaData=Nl;function Il(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:a,allErrors:s}){n!==void 0&&(t.compositeRule=n),a!==void 0&&(t.createErrors=a),s!==void 0&&(t.allErrors=s),t.jtdDiscriminator=e,t.jtdMetadata=r}tr.extendSubschemaMode=Il;var _t={},Ii=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!t(e[a],r[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!==0;){var i=s[a];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r},Oi={exports:{}},er=Oi.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},a=r.post||function(){};ln(e,n,a,t,"",t)};er.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};er.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};er.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};er.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function ln(t,e,r,n,a,s,i,o,l,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,a,s,i,o,l,u);for(var c in n){var f=n[c];if(Array.isArray(f)){if(c in er.arrayKeywords)for(var m=0;m<f.length;m++)ln(t,e,r,f[m],a+"/"+c+"/"+m,s,a,c,n,m)}else if(c in er.propsKeywords){if(f&&typeof f=="object")for(var E in f)ln(t,e,r,f[E],a+"/"+c+"/"+Ol(E),s,a,c,n,E)}else(c in er.keywords||t.allKeys&&!(c in er.skipKeywords))&&ln(t,e,r,f,a+"/"+c,s,a,c,n)}r(n,a,s,i,o,l,u)}}function Ol(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var Tl=Oi.exports;Object.defineProperty(_t,"__esModule",{value:!0});_t.getSchemaRefs=_t.resolveUrl=_t.normalizeId=_t._getFullPath=_t.getFullPath=_t.inlineRef=void 0;const Dl=Q,Cl=Ii,Al=Tl,jl=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Rl(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Un(t):e?Ti(t)<=e:!1}_t.inlineRef=Rl;const Vl=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Un(t){for(const e in t){if(Vl.has(e))return!0;const r=t[e];if(Array.isArray(r)&&r.some(Un)||typeof r=="object"&&Un(r))return!0}return!1}function Ti(t){let e=0;for(const r in t){if(r==="$ref")return 1/0;if(e++,!jl.has(r)&&(typeof t[r]=="object"&&(0,Dl.eachItem)(t[r],n=>e+=Ti(n)),e===1/0))return 1/0}return e}function Di(t,e="",r){r!==!1&&(e=yr(e));const n=t.parse(e);return Ci(t,n)}_t.getFullPath=Di;function Ci(t,e){return t.serialize(e).split("#")[0]+"#"}_t._getFullPath=Ci;const Ml=/#\/?$/;function yr(t){return t?t.replace(Ml,""):""}_t.normalizeId=yr;function Fl(t,e,r){return r=yr(r),t.resolve(e,r)}_t.resolveUrl=Fl;const Ul=/^[a-z_][-a-z0-9._]*$/i;function ql(t,e){if(typeof t=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,a=yr(t[r]||e),s={"":a},i=Di(n,a,!1),o={},l=new Set;return Al(t,{allKeys:!0},(f,m,E,d)=>{if(d===void 0)return;const w=i+m;let p=s[d];typeof f[r]=="string"&&(p=v.call(this,f[r])),$.call(this,f.$anchor),$.call(this,f.$dynamicAnchor),s[m]=p;function v(k){const N=this.opts.uriResolver.resolve;if(k=yr(p?N(p,k):k),l.has(k))throw c(k);l.add(k);let j=this.refs[k];return typeof j=="string"&&(j=this.refs[j]),typeof j=="object"?u(f,j.schema,k):k!==yr(w)&&(k[0]==="#"?(u(f,o[k],k),o[k]=f):this.refs[k]=w),k}function $(k){if(typeof k=="string"){if(!Ul.test(k))throw new Error(`invalid anchor "${k}"`);v.call(this,`#${k}`)}}}),o;function u(f,m,E){if(m!==void 0&&!Cl(f,m))throw c(E)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}_t.getSchemaRefs=ql;Object.defineProperty(Ct,"__esModule",{value:!0});Ct.getData=Ct.KeywordCxt=Ct.validateFunctionCode=void 0;const Ai=Er,Ga=dt,Yn=Ht,vn=dt,Ll=Sn,Rr=qt,On=tr,ae=$e,pe=Lt,zl=_t,Gt=Q,Dr=zr;function Jl(t){if(Vi(t)&&(Mi(t),Ri(t))){Hl(t);return}ji(t,()=>(0,Ai.topBoolOrEmptySchema)(t))}Ct.validateFunctionCode=Jl;function ji({gen:t,validateName:e,schema:r,schemaEnv:n,opts:a},s){a.code.es5?t.func(e,(0,ae._)`${pe.default.data}, ${pe.default.valCxt}`,n.$async,()=>{t.code((0,ae._)`"use strict"; ${Wa(r,a)}`),Bl(t,a),t.code(s)}):t.func(e,(0,ae._)`${pe.default.data}, ${Kl(a)}`,n.$async,()=>t.code(Wa(r,a)).code(s))}function Kl(t){return(0,ae._)`{${pe.default.instancePath}="", ${pe.default.parentData}, ${pe.default.parentDataProperty}, ${pe.default.rootData}=${pe.default.data}${t.dynamicRef?(0,ae._)`, ${pe.default.dynamicAnchors}={}`:ae.nil}}={}`}function Bl(t,e){t.if(pe.default.valCxt,()=>{t.var(pe.default.instancePath,(0,ae._)`${pe.default.valCxt}.${pe.default.instancePath}`),t.var(pe.default.parentData,(0,ae._)`${pe.default.valCxt}.${pe.default.parentData}`),t.var(pe.default.parentDataProperty,(0,ae._)`${pe.default.valCxt}.${pe.default.parentDataProperty}`),t.var(pe.default.rootData,(0,ae._)`${pe.default.valCxt}.${pe.default.rootData}`),e.dynamicRef&&t.var(pe.default.dynamicAnchors,(0,ae._)`${pe.default.valCxt}.${pe.default.dynamicAnchors}`)},()=>{t.var(pe.default.instancePath,(0,ae._)`""`),t.var(pe.default.parentData,(0,ae._)`undefined`),t.var(pe.default.parentDataProperty,(0,ae._)`undefined`),t.var(pe.default.rootData,pe.default.data),e.dynamicRef&&t.var(pe.default.dynamicAnchors,(0,ae._)`{}`)})}function Hl(t){const{schema:e,opts:r,gen:n}=t;ji(t,()=>{r.$comment&&e.$comment&&Ui(t),Ql(t),n.let(pe.default.vErrors,null),n.let(pe.default.errors,0),r.unevaluated&&Gl(t),Fi(t),ec(t)})}function Gl(t){const{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,ae._)`${r}.evaluated`),e.if((0,ae._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,ae._)`${t.evaluated}.props`,(0,ae._)`undefined`)),e.if((0,ae._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,ae._)`${t.evaluated}.items`,(0,ae._)`undefined`))}function Wa(t,e){const r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,ae._)`/*# sourceURL=${r} */`:ae.nil}function Wl(t,e){if(Vi(t)&&(Mi(t),Ri(t))){Xl(t,e);return}(0,Ai.boolOrEmptySchema)(t,e)}function Ri({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const r in t)if(e.RULES.all[r])return!0;return!1}function Vi(t){return typeof t.schema!="boolean"}function Xl(t,e){const{schema:r,gen:n,opts:a}=t;a.$comment&&r.$comment&&Ui(t),Yl(t),xl(t);const s=n.const("_errs",pe.default.errors);Fi(t,s),n.var(e,(0,ae._)`${s} === ${pe.default.errors}`)}function Mi(t){(0,Gt.checkUnknownRules)(t),Zl(t)}function Fi(t,e){if(t.opts.jtd)return Xa(t,[],!1,e);const r=(0,Ga.getSchemaTypes)(t.schema),n=(0,Ga.coerceAndCheckDataType)(t,r);Xa(t,r,!n,e)}function Zl(t){const{schema:e,errSchemaPath:r,opts:n,self:a}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Gt.schemaHasRulesButRef)(e,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Ql(t){const{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Gt.checkStrictMode)(t,"default is ignored in the schema root")}function Yl(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,zl.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function xl(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ui({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:a}){const s=r.$comment;if(a.$comment===!0)t.code((0,ae._)`${pe.default.self}.logger.log(${s})`);else if(typeof a.$comment=="function"){const i=(0,ae.str)`${n}/$comment`,o=t.scopeValue("root",{ref:e.root});t.code((0,ae._)`${pe.default.self}.opts.$comment(${s}, ${i}, ${o}.schema)`)}}function ec(t){const{gen:e,schemaEnv:r,validateName:n,ValidationError:a,opts:s}=t;r.$async?e.if((0,ae._)`${pe.default.errors} === 0`,()=>e.return(pe.default.data),()=>e.throw((0,ae._)`new ${a}(${pe.default.vErrors})`)):(e.assign((0,ae._)`${n}.errors`,pe.default.vErrors),s.unevaluated&&tc(t),e.return((0,ae._)`${pe.default.errors} === 0`))}function tc({gen:t,evaluated:e,props:r,items:n}){r instanceof ae.Name&&t.assign((0,ae._)`${e}.props`,r),n instanceof ae.Name&&t.assign((0,ae._)`${e}.items`,n)}function Xa(t,e,r,n){const{gen:a,schema:s,data:i,allErrors:o,opts:l,self:u}=t,{RULES:c}=u;if(s.$ref&&(l.ignoreKeywordsWithRef||!(0,Gt.schemaHasRulesButRef)(s,c))){a.block(()=>zi(t,"$ref",c.all.$ref.definition));return}l.jtd||rc(t,e),a.block(()=>{for(const m of c.rules)f(m);f(c.post)});function f(m){(0,Yn.shouldUseGroup)(s,m)&&(m.type?(a.if((0,vn.checkDataType)(m.type,i,l.strictNumbers)),Za(t,m),e.length===1&&e[0]===m.type&&r&&(a.else(),(0,vn.reportTypeError)(t)),a.endIf()):Za(t,m),o||a.if((0,ae._)`${pe.default.errors} === ${n||0}`))}}function Za(t,e){const{gen:r,schema:n,opts:{useDefaults:a}}=t;a&&(0,Ll.assignDefaults)(t,e.type),r.block(()=>{for(const s of e.rules)(0,Yn.shouldUseRule)(n,s)&&zi(t,s.keyword,s.definition,e.type)})}function rc(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(nc(t,e),t.opts.allowUnionTypes||ac(t,e),sc(t,t.dataTypes))}function nc(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{qi(t.dataTypes,r)||xn(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),oc(t,e)}}function ac(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&xn(t,"use allowUnionTypes to allow union type keyword")}function sc(t,e){const r=t.self.RULES.all;for(const n in r){const a=r[n];if(typeof a=="object"&&(0,Yn.shouldUseRule)(t.schema,a)){const{type:s}=a.definition;s.length&&!s.some(i=>ic(e,i))&&xn(t,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function ic(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function qi(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function oc(t,e){const r=[];for(const n of t.dataTypes)qi(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function xn(t,e){const r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Gt.checkStrictMode)(t,e,t.opts.strictTypes)}class Li{constructor(e,r,n){if((0,Rr.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Gt.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Ji(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Rr.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",pe.default.errors))}result(e,r,n){this.failResult((0,ae.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,ae.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:r}=this;this.fail((0,ae._)`${r} !== undefined && (${(0,ae.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Dr.reportExtraError:Dr.reportError)(this,this.def.error,r)}$dataError(){(0,Dr.reportError)(this,this.def.$dataError||Dr.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Dr.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=ae.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=ae.nil,r=ae.nil){if(!this.$data)return;const{gen:n,schemaCode:a,schemaType:s,def:i}=this;n.if((0,ae.or)((0,ae._)`${a} === undefined`,r)),e!==ae.nil&&n.assign(e,!0),(s.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==ae.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:r,schemaType:n,def:a,it:s}=this;return(0,ae.or)(i(),o());function i(){if(n.length){if(!(r instanceof ae.Name))throw new Error("ajv implementation error");const l=Array.isArray(n)?n:[n];return(0,ae._)`${(0,vn.checkDataTypes)(l,r,s.opts.strictNumbers,vn.DataType.Wrong)}`}return ae.nil}function o(){if(a.validateSchema){const l=e.scopeValue("validate$data",{ref:a.validateSchema});return(0,ae._)`!${l}(${r})`}return ae.nil}}subschema(e,r){const n=(0,On.getSubschema)(this.it,e);(0,On.extendSubschemaData)(n,this.it,e),(0,On.extendSubschemaMode)(n,e);const a={...this.it,...n,items:void 0,props:void 0};return Wl(a,r),a}mergeEvaluated(e,r){const{it:n,gen:a}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Gt.mergeEvaluated.props(a,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Gt.mergeEvaluated.items(a,e.items,n.items,r)))}mergeValidEvaluated(e,r){const{it:n,gen:a}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return a.if(r,()=>this.mergeEvaluated(e,ae.Name)),!0}}Ct.KeywordCxt=Li;function zi(t,e,r,n){const a=new Li(t,r,e);"code"in r?r.code(a,n):a.$data&&r.validate?(0,Rr.funcKeywordCode)(a,r):"macro"in r?(0,Rr.macroKeywordCode)(a,r):(r.compile||r.validate)&&(0,Rr.funcKeywordCode)(a,r)}const lc=/^\/(?:[^~]|~0|~1)*$/,cc=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ji(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let a,s;if(t==="")return pe.default.rootData;if(t[0]==="/"){if(!lc.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);a=t,s=pe.default.rootData}else{const u=cc.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);const c=+u[1];if(a=u[2],a==="#"){if(c>=e)throw new Error(l("property/index",c));return n[e-c]}if(c>e)throw new Error(l("data",c));if(s=r[e-c],!a)return s}let i=s;const o=a.split("/");for(const u of o)u&&(s=(0,ae._)`${s}${(0,ae.getProperty)((0,Gt.unescapeJsonPointer)(u))}`,i=(0,ae._)`${i} && ${s}`);return i;function l(u,c){return`Cannot access ${u} ${c} levels up, current level is ${e}`}}Ct.getData=Ji;var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});class uc extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}Jr.default=uc;var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});const Tn=_t;class fc extends Error{constructor(e,r,n,a){super(a||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Tn.resolveUrl)(e,r,n),this.missingSchema=(0,Tn.normalizeId)((0,Tn.getFullPath)(e,this.missingRef))}}Sr.default=fc;var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.resolveSchema=wt.getCompilingSchema=wt.resolveRef=wt.compileSchema=wt.SchemaEnv=void 0;const Ot=$e,dc=Jr,sr=Lt,Dt=_t,Qa=Q,hc=Ct;class kn{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Dt.normalizeId)(n==null?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}wt.SchemaEnv=kn;function ea(t){const e=Ki.call(this,t);if(e)return e;const r=(0,Dt.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:a}=this.opts.code,{ownProperties:s}=this.opts,i=new Ot.CodeGen(this.scope,{es5:n,lines:a,ownProperties:s});let o;t.$async&&(o=i.scopeValue("Error",{ref:dc.default,code:(0,Ot._)`require("ajv/dist/runtime/validation_error").default`}));const l=i.scopeName("validate");t.validateName=l;const u={gen:i,allErrors:this.opts.allErrors,data:sr.default.data,parentData:sr.default.parentData,parentDataProperty:sr.default.parentDataProperty,dataNames:[sr.default.data],dataPathArr:[Ot.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Ot.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:o,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Ot.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ot._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(t),(0,hc.validateFunctionCode)(u),i.optimize(this.opts.code.optimize);const f=i.toString();c=`${i.scopeRefs(sr.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,t));const E=new Function(`${sr.default.self}`,`${sr.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:E}),E.errors=null,E.schema=t.schema,E.schemaEnv=t,t.$async&&(E.$async=!0),this.opts.code.source===!0&&(E.source={validateName:l,validateCode:f,scopeValues:i._values}),this.opts.unevaluated){const{props:d,items:w}=u;E.evaluated={props:d instanceof Ot.Name?void 0:d,items:w instanceof Ot.Name?void 0:w,dynamicProps:d instanceof Ot.Name,dynamicItems:w instanceof Ot.Name},E.source&&(E.source.evaluated=(0,Ot.stringify)(E.evaluated))}return t.validate=E,t}catch(f){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(t)}}wt.compileSchema=ea;function mc(t,e,r){var n;r=(0,Dt.resolveUrl)(this.opts.uriResolver,e,r);const a=t.refs[r];if(a)return a;let s=_c.call(this,t,r);if(s===void 0){const i=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:o}=this.opts;i&&(s=new kn({schema:i,schemaId:o,root:t,baseId:e}))}if(s!==void 0)return t.refs[r]=pc.call(this,s)}wt.resolveRef=mc;function pc(t){return(0,Dt.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:ea.call(this,t)}function Ki(t){for(const e of this._compilations)if(vc(e,t))return e}wt.getCompilingSchema=Ki;function vc(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function _c(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Pn.call(this,t,e)}function Pn(t,e){const r=this.opts.uriResolver.parse(e),n=(0,Dt._getFullPath)(this.opts.uriResolver,r);let a=(0,Dt.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===a)return Dn.call(this,r,t);const s=(0,Dt.normalizeId)(n),i=this.refs[s]||this.schemas[s];if(typeof i=="string"){const o=Pn.call(this,t,i);return typeof(o==null?void 0:o.schema)!="object"?void 0:Dn.call(this,r,o)}if(typeof(i==null?void 0:i.schema)=="object"){if(i.validate||ea.call(this,i),s===(0,Dt.normalizeId)(e)){const{schema:o}=i,{schemaId:l}=this.opts,u=o[l];return u&&(a=(0,Dt.resolveUrl)(this.opts.uriResolver,a,u)),new kn({schema:o,schemaId:l,root:t,baseId:a})}return Dn.call(this,r,i)}}wt.resolveSchema=Pn;const gc=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Dn(t,{baseId:e,schema:r,root:n}){var a;if(((a=t.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(const o of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const l=r[(0,Qa.unescapeFragment)(o)];if(l===void 0)return;r=l;const u=typeof r=="object"&&r[this.opts.schemaId];!gc.has(o)&&u&&(e=(0,Dt.resolveUrl)(this.opts.uriResolver,e,u))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,Qa.schemaHasRulesButRef)(r,this.RULES)){const o=(0,Dt.resolveUrl)(this.opts.uriResolver,e,r.$ref);s=Pn.call(this,n,o)}const{schemaId:i}=this.opts;if(s=s||new kn({schema:r,schemaId:i,root:n,baseId:e}),s.schema!==s.root.schema)return s}const yc="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",bc="Meta-schema for $data reference (JSON AnySchema extension proposal)",Ec="object",$c=["$data"],wc={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Sc=!1,kc={$id:yc,description:bc,type:Ec,required:$c,properties:wc,additionalProperties:Sc};var ta={},qn={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(t,e){(function(r,n){n(e)})(ko,function(r){function n(){for(var P=arguments.length,b=Array(P),I=0;I<P;I++)b[I]=arguments[I];if(b.length>1){b[0]=b[0].slice(0,-1);for(var R=b.length-1,V=1;V<R;++V)b[V]=b[V].slice(1,-1);return b[R]=b[R].slice(1),b.join("")}else return b[0]}function a(P){return"(?:"+P+")"}function s(P){return P===void 0?"undefined":P===null?"null":Object.prototype.toString.call(P).split(" ").pop().split("]").shift().toLowerCase()}function i(P){return P.toUpperCase()}function o(P){return P!=null?P instanceof Array?P:typeof P.length!="number"||P.split||P.setInterval||P.call?[P]:Array.prototype.slice.call(P):[]}function l(P,b){var I=P;if(b)for(var R in b)I[R]=b[R];return I}function u(P){var b="[A-Za-z]",I="[0-9]",R=n(I,"[A-Fa-f]"),V=a(a("%[EFef]"+R+"%"+R+R+"%"+R+R)+"|"+a("%[89A-Fa-f]"+R+"%"+R+R)+"|"+a("%"+R+R)),ne="[\\:\\/\\?\\#\\[\\]\\@]",te="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",we=n(ne,te),Re=P?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Qe=P?"[\\uE000-\\uF8FF]":"[]",Ne=n(b,I,"[\\-\\.\\_\\~]",Re);a(b+n(b,I,"[\\+\\-\\.]")+"*"),a(a(V+"|"+n(Ne,te,"[\\:]"))+"*");var Be=a(a("25[0-5]")+"|"+a("2[0-4]"+I)+"|"+a("1"+I+I)+"|"+a("0?[1-9]"+I)+"|0?0?"+I),st=a(Be+"\\."+Be+"\\."+Be+"\\."+Be),ve=a(R+"{1,4}"),Ye=a(a(ve+"\\:"+ve)+"|"+st),lt=a(a(ve+"\\:")+"{6}"+Ye),xe=a("\\:\\:"+a(ve+"\\:")+"{5}"+Ye),Zt=a(a(ve)+"?\\:\\:"+a(ve+"\\:")+"{4}"+Ye),Vt=a(a(a(ve+"\\:")+"{0,1}"+ve)+"?\\:\\:"+a(ve+"\\:")+"{3}"+Ye),Mt=a(a(a(ve+"\\:")+"{0,2}"+ve)+"?\\:\\:"+a(ve+"\\:")+"{2}"+Ye),mr=a(a(a(ve+"\\:")+"{0,3}"+ve)+"?\\:\\:"+ve+"\\:"+Ye),nr=a(a(a(ve+"\\:")+"{0,4}"+ve)+"?\\:\\:"+Ye),Pt=a(a(a(ve+"\\:")+"{0,5}"+ve)+"?\\:\\:"+ve),Ft=a(a(a(ve+"\\:")+"{0,6}"+ve)+"?\\:\\:"),ar=a([lt,xe,Zt,Vt,Mt,mr,nr,Pt,Ft].join("|")),Bt=a(a(Ne+"|"+V)+"+");a("[vV]"+R+"+\\."+n(Ne,te,"[\\:]")+"+"),a(a(V+"|"+n(Ne,te))+"*");var Or=a(V+"|"+n(Ne,te,"[\\:\\@]"));return a(a(V+"|"+n(Ne,te,"[\\@]"))+"+"),a(a(Or+"|"+n("[\\/\\?]",Qe))+"*"),{NOT_SCHEME:new RegExp(n("[^]",b,I,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",Ne,te),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",Ne,te),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",Ne,te),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",Ne,te),"g"),NOT_QUERY:new RegExp(n("[^\\%]",Ne,te,"[\\:\\@\\/\\?]",Qe),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",Ne,te,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",Ne,te),"g"),UNRESERVED:new RegExp(Ne,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",Ne,we),"g"),PCT_ENCODED:new RegExp(V,"g"),IPV4ADDRESS:new RegExp("^("+st+")$"),IPV6ADDRESS:new RegExp("^\\[?("+ar+")"+a(a("\\%25|\\%(?!"+R+"{2})")+"("+Bt+")")+"?\\]?$")}}var c=u(!1),f=u(!0),m=function(){function P(b,I){var R=[],V=!0,ne=!1,te=void 0;try{for(var we=b[Symbol.iterator](),Re;!(V=(Re=we.next()).done)&&(R.push(Re.value),!(I&&R.length===I));V=!0);}catch(Qe){ne=!0,te=Qe}finally{try{!V&&we.return&&we.return()}finally{if(ne)throw te}}return R}return function(b,I){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return P(b,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(P){if(Array.isArray(P)){for(var b=0,I=Array(P.length);b<P.length;b++)I[b]=P[b];return I}else return Array.from(P)},d=2147483647,w=36,p=1,v=26,$=38,k=700,N=72,j=128,U="-",X=/^xn--/,ee=/[^\0-\x7E]/,ie=/[\x2E\u3002\uFF0E\uFF61]/g,me={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},be=w-p,H=Math.floor,re=String.fromCharCode;function fe(P){throw new RangeError(me[P])}function Oe(P,b){for(var I=[],R=P.length;R--;)I[R]=b(P[R]);return I}function le(P,b){var I=P.split("@"),R="";I.length>1&&(R=I[0]+"@",P=I[1]),P=P.replace(ie,".");var V=P.split("."),ne=Oe(V,b).join(".");return R+ne}function Le(P){for(var b=[],I=0,R=P.length;I<R;){var V=P.charCodeAt(I++);if(V>=55296&&V<=56319&&I<R){var ne=P.charCodeAt(I++);(ne&64512)==56320?b.push(((V&1023)<<10)+(ne&1023)+65536):(b.push(V),I--)}else b.push(V)}return b}var Ie=function(b){return String.fromCodePoint.apply(String,E(b))},Se=function(b){return b-48<10?b-22:b-65<26?b-65:b-97<26?b-97:w},z=function(b,I){return b+22+75*(b<26)-((I!=0)<<5)},A=function(b,I,R){var V=0;for(b=R?H(b/k):b>>1,b+=H(b/I);b>be*v>>1;V+=w)b=H(b/be);return H(V+(be+1)*b/(b+$))},F=function(b){var I=[],R=b.length,V=0,ne=j,te=N,we=b.lastIndexOf(U);we<0&&(we=0);for(var Re=0;Re<we;++Re)b.charCodeAt(Re)>=128&&fe("not-basic"),I.push(b.charCodeAt(Re));for(var Qe=we>0?we+1:0;Qe<R;){for(var Ne=V,Be=1,st=w;;st+=w){Qe>=R&&fe("invalid-input");var ve=Se(b.charCodeAt(Qe++));(ve>=w||ve>H((d-V)/Be))&&fe("overflow"),V+=ve*Be;var Ye=st<=te?p:st>=te+v?v:st-te;if(ve<Ye)break;var lt=w-Ye;Be>H(d/lt)&&fe("overflow"),Be*=lt}var xe=I.length+1;te=A(V-Ne,xe,Ne==0),H(V/xe)>d-ne&&fe("overflow"),ne+=H(V/xe),V%=xe,I.splice(V++,0,ne)}return String.fromCodePoint.apply(String,I)},C=function(b){var I=[];b=Le(b);var R=b.length,V=j,ne=0,te=N,we=!0,Re=!1,Qe=void 0;try{for(var Ne=b[Symbol.iterator](),Be;!(we=(Be=Ne.next()).done);we=!0){var st=Be.value;st<128&&I.push(re(st))}}catch(Tr){Re=!0,Qe=Tr}finally{try{!we&&Ne.return&&Ne.return()}finally{if(Re)throw Qe}}var ve=I.length,Ye=ve;for(ve&&I.push(U);Ye<R;){var lt=d,xe=!0,Zt=!1,Vt=void 0;try{for(var Mt=b[Symbol.iterator](),mr;!(xe=(mr=Mt.next()).done);xe=!0){var nr=mr.value;nr>=V&&nr<lt&&(lt=nr)}}catch(Tr){Zt=!0,Vt=Tr}finally{try{!xe&&Mt.return&&Mt.return()}finally{if(Zt)throw Vt}}var Pt=Ye+1;lt-V>H((d-ne)/Pt)&&fe("overflow"),ne+=(lt-V)*Pt,V=lt;var Ft=!0,ar=!1,Bt=void 0;try{for(var Or=b[Symbol.iterator](),Va;!(Ft=(Va=Or.next()).done);Ft=!0){var Ma=Va.value;if(Ma<V&&++ne>d&&fe("overflow"),Ma==V){for(var Yr=ne,xr=w;;xr+=w){var en=xr<=te?p:xr>=te+v?v:xr-te;if(Yr<en)break;var Fa=Yr-en,Ua=w-en;I.push(re(z(en+Fa%Ua,0))),Yr=H(Fa/Ua)}I.push(re(z(Yr,0))),te=A(ne,Pt,Ye==ve),ne=0,++Ye}}}catch(Tr){ar=!0,Bt=Tr}finally{try{!Ft&&Or.return&&Or.return()}finally{if(ar)throw Bt}}++ne,++V}return I.join("")},h=function(b){return le(b,function(I){return X.test(I)?F(I.slice(4).toLowerCase()):I})},S=function(b){return le(b,function(I){return ee.test(I)?"xn--"+C(I):I})},M={version:"2.1.0",ucs2:{decode:Le,encode:Ie},decode:F,encode:C,toASCII:S,toUnicode:h},L={};function J(P){var b=P.charCodeAt(0),I=void 0;return b<16?I="%0"+b.toString(16).toUpperCase():b<128?I="%"+b.toString(16).toUpperCase():b<2048?I="%"+(b>>6|192).toString(16).toUpperCase()+"%"+(b&63|128).toString(16).toUpperCase():I="%"+(b>>12|224).toString(16).toUpperCase()+"%"+(b>>6&63|128).toString(16).toUpperCase()+"%"+(b&63|128).toString(16).toUpperCase(),I}function Z(P){for(var b="",I=0,R=P.length;I<R;){var V=parseInt(P.substr(I+1,2),16);if(V<128)b+=String.fromCharCode(V),I+=3;else if(V>=194&&V<224){if(R-I>=6){var ne=parseInt(P.substr(I+4,2),16);b+=String.fromCharCode((V&31)<<6|ne&63)}else b+=P.substr(I,6);I+=6}else if(V>=224){if(R-I>=9){var te=parseInt(P.substr(I+4,2),16),we=parseInt(P.substr(I+7,2),16);b+=String.fromCharCode((V&15)<<12|(te&63)<<6|we&63)}else b+=P.substr(I,9);I+=9}else b+=P.substr(I,3),I+=3}return b}function Y(P,b){function I(R){var V=Z(R);return V.match(b.UNRESERVED)?V:R}return P.scheme&&(P.scheme=String(P.scheme).replace(b.PCT_ENCODED,I).toLowerCase().replace(b.NOT_SCHEME,"")),P.userinfo!==void 0&&(P.userinfo=String(P.userinfo).replace(b.PCT_ENCODED,I).replace(b.NOT_USERINFO,J).replace(b.PCT_ENCODED,i)),P.host!==void 0&&(P.host=String(P.host).replace(b.PCT_ENCODED,I).toLowerCase().replace(b.NOT_HOST,J).replace(b.PCT_ENCODED,i)),P.path!==void 0&&(P.path=String(P.path).replace(b.PCT_ENCODED,I).replace(P.scheme?b.NOT_PATH:b.NOT_PATH_NOSCHEME,J).replace(b.PCT_ENCODED,i)),P.query!==void 0&&(P.query=String(P.query).replace(b.PCT_ENCODED,I).replace(b.NOT_QUERY,J).replace(b.PCT_ENCODED,i)),P.fragment!==void 0&&(P.fragment=String(P.fragment).replace(b.PCT_ENCODED,I).replace(b.NOT_FRAGMENT,J).replace(b.PCT_ENCODED,i)),P}function ce(P){return P.replace(/^0*(.*)/,"$1")||"0"}function se(P,b){var I=P.match(b.IPV4ADDRESS)||[],R=m(I,2),V=R[1];return V?V.split(".").map(ce).join("."):P}function Te(P,b){var I=P.match(b.IPV6ADDRESS)||[],R=m(I,3),V=R[1],ne=R[2];if(V){for(var te=V.toLowerCase().split("::").reverse(),we=m(te,2),Re=we[0],Qe=we[1],Ne=Qe?Qe.split(":").map(ce):[],Be=Re.split(":").map(ce),st=b.IPV4ADDRESS.test(Be[Be.length-1]),ve=st?7:8,Ye=Be.length-ve,lt=Array(ve),xe=0;xe<ve;++xe)lt[xe]=Ne[xe]||Be[Ye+xe]||"";st&&(lt[ve-1]=se(lt[ve-1],b));var Zt=lt.reduce(function(Pt,Ft,ar){if(!Ft||Ft==="0"){var Bt=Pt[Pt.length-1];Bt&&Bt.index+Bt.length===ar?Bt.length++:Pt.push({index:ar,length:1})}return Pt},[]),Vt=Zt.sort(function(Pt,Ft){return Ft.length-Pt.length})[0],Mt=void 0;if(Vt&&Vt.length>1){var mr=lt.slice(0,Vt.index),nr=lt.slice(Vt.index+Vt.length);Mt=mr.join(":")+"::"+nr.join(":")}else Mt=lt.join(":");return ne&&(Mt+="%"+ne),Mt}else return P}var Ae=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ke="".match(/(){0}/)[1]===void 0;function Ce(P){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I={},R=b.iri!==!1?f:c;b.reference==="suffix"&&(P=(b.scheme?b.scheme+":":"")+"//"+P);var V=P.match(Ae);if(V){ke?(I.scheme=V[1],I.userinfo=V[3],I.host=V[4],I.port=parseInt(V[5],10),I.path=V[6]||"",I.query=V[7],I.fragment=V[8],isNaN(I.port)&&(I.port=V[5])):(I.scheme=V[1]||void 0,I.userinfo=P.indexOf("@")!==-1?V[3]:void 0,I.host=P.indexOf("//")!==-1?V[4]:void 0,I.port=parseInt(V[5],10),I.path=V[6]||"",I.query=P.indexOf("?")!==-1?V[7]:void 0,I.fragment=P.indexOf("#")!==-1?V[8]:void 0,isNaN(I.port)&&(I.port=P.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?V[4]:void 0)),I.host&&(I.host=Te(se(I.host,R),R)),I.scheme===void 0&&I.userinfo===void 0&&I.host===void 0&&I.port===void 0&&!I.path&&I.query===void 0?I.reference="same-document":I.scheme===void 0?I.reference="relative":I.fragment===void 0?I.reference="absolute":I.reference="uri",b.reference&&b.reference!=="suffix"&&b.reference!==I.reference&&(I.error=I.error||"URI is not a "+b.reference+" reference.");var ne=L[(b.scheme||I.scheme||"").toLowerCase()];if(!b.unicodeSupport&&(!ne||!ne.unicodeSupport)){if(I.host&&(b.domainHost||ne&&ne.domainHost))try{I.host=M.toASCII(I.host.replace(R.PCT_ENCODED,Z).toLowerCase())}catch(te){I.error=I.error||"Host's domain name can not be converted to ASCII via punycode: "+te}Y(I,c)}else Y(I,R);ne&&ne.parse&&ne.parse(I,b)}else I.error=I.error||"URI can not be parsed.";return I}function he(P,b){var I=b.iri!==!1?f:c,R=[];return P.userinfo!==void 0&&(R.push(P.userinfo),R.push("@")),P.host!==void 0&&R.push(Te(se(String(P.host),I),I).replace(I.IPV6ADDRESS,function(V,ne,te){return"["+ne+(te?"%25"+te:"")+"]"})),(typeof P.port=="number"||typeof P.port=="string")&&(R.push(":"),R.push(String(P.port))),R.length?R.join(""):void 0}var ge=/^\.\.?\//,ze=/^\/\.(\/|$)/,mt=/^\/\.\.(\/|$)/,ft=/^\/?(?:.|\n)*?(?=\/|$)/;function De(P){for(var b=[];P.length;)if(P.match(ge))P=P.replace(ge,"");else if(P.match(ze))P=P.replace(ze,"/");else if(P.match(mt))P=P.replace(mt,"/"),b.pop();else if(P==="."||P==="..")P="";else{var I=P.match(ft);if(I){var R=I[0];P=P.slice(R.length),b.push(R)}else throw new Error("Unexpected dot segment condition")}return b.join("")}function Xe(P){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=b.iri?f:c,R=[],V=L[(b.scheme||P.scheme||"").toLowerCase()];if(V&&V.serialize&&V.serialize(P,b),P.host&&!I.IPV6ADDRESS.test(P.host)){if(b.domainHost||V&&V.domainHost)try{P.host=b.iri?M.toUnicode(P.host):M.toASCII(P.host.replace(I.PCT_ENCODED,Z).toLowerCase())}catch(we){P.error=P.error||"Host's domain name can not be converted to "+(b.iri?"Unicode":"ASCII")+" via punycode: "+we}}Y(P,I),b.reference!=="suffix"&&P.scheme&&(R.push(P.scheme),R.push(":"));var ne=he(P,b);if(ne!==void 0&&(b.reference!=="suffix"&&R.push("//"),R.push(ne),P.path&&P.path.charAt(0)!=="/"&&R.push("/")),P.path!==void 0){var te=P.path;!b.absolutePath&&(!V||!V.absolutePath)&&(te=De(te)),ne===void 0&&(te=te.replace(/^\/\//,"/%2F")),R.push(te)}return P.query!==void 0&&(R.push("?"),R.push(P.query)),P.fragment!==void 0&&(R.push("#"),R.push(P.fragment)),R.join("")}function tt(P,b){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},R=arguments[3],V={};return R||(P=Ce(Xe(P,I),I),b=Ce(Xe(b,I),I)),I=I||{},!I.tolerant&&b.scheme?(V.scheme=b.scheme,V.userinfo=b.userinfo,V.host=b.host,V.port=b.port,V.path=De(b.path||""),V.query=b.query):(b.userinfo!==void 0||b.host!==void 0||b.port!==void 0?(V.userinfo=b.userinfo,V.host=b.host,V.port=b.port,V.path=De(b.path||""),V.query=b.query):(b.path?(b.path.charAt(0)==="/"?V.path=De(b.path):((P.userinfo!==void 0||P.host!==void 0||P.port!==void 0)&&!P.path?V.path="/"+b.path:P.path?V.path=P.path.slice(0,P.path.lastIndexOf("/")+1)+b.path:V.path=b.path,V.path=De(V.path)),V.query=b.query):(V.path=P.path,b.query!==void 0?V.query=b.query:V.query=P.query),V.userinfo=P.userinfo,V.host=P.host,V.port=P.port),V.scheme=P.scheme),V.fragment=b.fragment,V}function Ze(P,b,I){var R=l({scheme:"null"},I);return Xe(tt(Ce(P,R),Ce(b,R),R,!0),R)}function pt(P,b){return typeof P=="string"?P=Xe(Ce(P,b),b):s(P)==="object"&&(P=Ce(Xe(P,b),b)),P}function rt(P,b,I){return typeof P=="string"?P=Xe(Ce(P,I),I):s(P)==="object"&&(P=Xe(P,I)),typeof b=="string"?b=Xe(Ce(b,I),I):s(b)==="object"&&(b=Xe(b,I)),P===b}function nt(P,b){return P&&P.toString().replace(!b||!b.iri?c.ESCAPE:f.ESCAPE,J)}function Je(P,b){return P&&P.toString().replace(!b||!b.iri?c.PCT_ENCODED:f.PCT_ENCODED,Z)}var ot={scheme:"http",domainHost:!0,parse:function(b,I){return b.host||(b.error=b.error||"HTTP URIs must have a host."),b},serialize:function(b,I){var R=String(b.scheme).toLowerCase()==="https";return(b.port===(R?443:80)||b.port==="")&&(b.port=void 0),b.path||(b.path="/"),b}},Ge={scheme:"https",domainHost:ot.domainHost,parse:ot.parse,serialize:ot.serialize};function at(P){return typeof P.secure=="boolean"?P.secure:String(P.scheme).toLowerCase()==="wss"}var je={scheme:"ws",domainHost:!0,parse:function(b,I){var R=b;return R.secure=at(R),R.resourceName=(R.path||"/")+(R.query?"?"+R.query:""),R.path=void 0,R.query=void 0,R},serialize:function(b,I){if((b.port===(at(b)?443:80)||b.port==="")&&(b.port=void 0),typeof b.secure=="boolean"&&(b.scheme=b.secure?"wss":"ws",b.secure=void 0),b.resourceName){var R=b.resourceName.split("?"),V=m(R,2),ne=V[0],te=V[1];b.path=ne&&ne!=="/"?ne:void 0,b.query=te,b.resourceName=void 0}return b.fragment=void 0,b}},Ke={scheme:"wss",domainHost:je.domainHost,parse:je.parse,serialize:je.serialize},x={},Pe="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",St="[0-9A-Fa-f]",Hr=a(a("%[EFef]"+St+"%"+St+St+"%"+St+St)+"|"+a("%[89A-Fa-f]"+St+"%"+St+St)+"|"+a("%"+St+St)),fr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Gr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Wr=n(Gr,'[\\"\\\\]'),dr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Wt=new RegExp(Pe,"g"),zt=new RegExp(Hr,"g"),Xt=new RegExp(n("[^]",fr,"[\\.]",'[\\"]',Wr),"g"),Nr=new RegExp(n("[^]",Pe,dr),"g"),Xr=Nr;function hr(P){var b=Z(P);return b.match(Wt)?b:P}var Jt={scheme:"mailto",parse:function(b,I){var R=b,V=R.to=R.path?R.path.split(","):[];if(R.path=void 0,R.query){for(var ne=!1,te={},we=R.query.split("&"),Re=0,Qe=we.length;Re<Qe;++Re){var Ne=we[Re].split("=");switch(Ne[0]){case"to":for(var Be=Ne[1].split(","),st=0,ve=Be.length;st<ve;++st)V.push(Be[st]);break;case"subject":R.subject=Je(Ne[1],I);break;case"body":R.body=Je(Ne[1],I);break;default:ne=!0,te[Je(Ne[0],I)]=Je(Ne[1],I);break}}ne&&(R.headers=te)}R.query=void 0;for(var Ye=0,lt=V.length;Ye<lt;++Ye){var xe=V[Ye].split("@");if(xe[0]=Je(xe[0]),I.unicodeSupport)xe[1]=Je(xe[1],I).toLowerCase();else try{xe[1]=M.toASCII(Je(xe[1],I).toLowerCase())}catch(Zt){R.error=R.error||"Email address's domain name can not be converted to ASCII via punycode: "+Zt}V[Ye]=xe.join("@")}return R},serialize:function(b,I){var R=b,V=o(b.to);if(V){for(var ne=0,te=V.length;ne<te;++ne){var we=String(V[ne]),Re=we.lastIndexOf("@"),Qe=we.slice(0,Re).replace(zt,hr).replace(zt,i).replace(Xt,J),Ne=we.slice(Re+1);try{Ne=I.iri?M.toUnicode(Ne):M.toASCII(Je(Ne,I).toLowerCase())}catch(Ye){R.error=R.error||"Email address's domain name can not be converted to "+(I.iri?"Unicode":"ASCII")+" via punycode: "+Ye}V[ne]=Qe+"@"+Ne}R.path=V.join(",")}var Be=b.headers=b.headers||{};b.subject&&(Be.subject=b.subject),b.body&&(Be.body=b.body);var st=[];for(var ve in Be)Be[ve]!==x[ve]&&st.push(ve.replace(zt,hr).replace(zt,i).replace(Nr,J)+"="+Be[ve].replace(zt,hr).replace(zt,i).replace(Xr,J));return st.length&&(R.query=st.join("&")),R}},Zr=/^([^\:]+)\:(.*)/,Ir={scheme:"urn",parse:function(b,I){var R=b.path&&b.path.match(Zr),V=b;if(R){var ne=I.scheme||V.scheme||"urn",te=R[1].toLowerCase(),we=R[2],Re=ne+":"+(I.nid||te),Qe=L[Re];V.nid=te,V.nss=we,V.path=void 0,Qe&&(V=Qe.parse(V,I))}else V.error=V.error||"URN can not be parsed.";return V},serialize:function(b,I){var R=I.scheme||b.scheme||"urn",V=b.nid,ne=R+":"+(I.nid||V),te=L[ne];te&&(b=te.serialize(b,I));var we=b,Re=b.nss;return we.path=(V||I.nid)+":"+Re,we}},Qr=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Kt={scheme:"urn:uuid",parse:function(b,I){var R=b;return R.uuid=R.nss,R.nss=void 0,!I.tolerant&&(!R.uuid||!R.uuid.match(Qr))&&(R.error=R.error||"UUID is not valid."),R},serialize:function(b,I){var R=b;return R.nss=(b.uuid||"").toLowerCase(),R}};L[ot.scheme]=ot,L[Ge.scheme]=Ge,L[je.scheme]=je,L[Ke.scheme]=Ke,L[Jt.scheme]=Jt,L[Ir.scheme]=Ir,L[Kt.scheme]=Kt,r.SCHEMES=L,r.pctEncChar=J,r.pctDecChars=Z,r.parse=Ce,r.removeDotSegments=De,r.serialize=Xe,r.resolveComponents=tt,r.resolve=Ze,r.normalize=pt,r.equal=rt,r.escapeComponent=nt,r.unescapeComponent=Je,Object.defineProperty(r,"__esModule",{value:!0})})})(qn,qn.exports);var Pc=qn.exports;Object.defineProperty(ta,"__esModule",{value:!0});const Bi=Pc;Bi.code='require("ajv/dist/runtime/uri").default';ta.default=Bi;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=Ct;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=$e;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Jr,a=Sr,s=cr,i=wt,o=$e,l=_t,u=dt,c=Q,f=kc,m=ta,E=(z,A)=>new RegExp(z,A);E.code="new RegExp";const d=["removeAdditional","useDefaults","coerceTypes"],w=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),p={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},$=200;function k(z){var A,F,C,h,S,M,L,J,Z,Y,ce,se,Te,Ae,ke,Ce,he,ge,ze,mt,ft,De,Xe,tt,Ze;const pt=z.strict,rt=(A=z.code)===null||A===void 0?void 0:A.optimize,nt=rt===!0||rt===void 0?1:rt||0,Je=(C=(F=z.code)===null||F===void 0?void 0:F.regExp)!==null&&C!==void 0?C:E,ot=(h=z.uriResolver)!==null&&h!==void 0?h:m.default;return{strictSchema:(M=(S=z.strictSchema)!==null&&S!==void 0?S:pt)!==null&&M!==void 0?M:!0,strictNumbers:(J=(L=z.strictNumbers)!==null&&L!==void 0?L:pt)!==null&&J!==void 0?J:!0,strictTypes:(Y=(Z=z.strictTypes)!==null&&Z!==void 0?Z:pt)!==null&&Y!==void 0?Y:"log",strictTuples:(se=(ce=z.strictTuples)!==null&&ce!==void 0?ce:pt)!==null&&se!==void 0?se:"log",strictRequired:(Ae=(Te=z.strictRequired)!==null&&Te!==void 0?Te:pt)!==null&&Ae!==void 0?Ae:!1,code:z.code?{...z.code,optimize:nt,regExp:Je}:{optimize:nt,regExp:Je},loopRequired:(ke=z.loopRequired)!==null&&ke!==void 0?ke:$,loopEnum:(Ce=z.loopEnum)!==null&&Ce!==void 0?Ce:$,meta:(he=z.meta)!==null&&he!==void 0?he:!0,messages:(ge=z.messages)!==null&&ge!==void 0?ge:!0,inlineRefs:(ze=z.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(mt=z.schemaId)!==null&&mt!==void 0?mt:"$id",addUsedSchema:(ft=z.addUsedSchema)!==null&&ft!==void 0?ft:!0,validateSchema:(De=z.validateSchema)!==null&&De!==void 0?De:!0,validateFormats:(Xe=z.validateFormats)!==null&&Xe!==void 0?Xe:!0,unicodeRegExp:(tt=z.unicodeRegExp)!==null&&tt!==void 0?tt:!0,int32range:(Ze=z.int32range)!==null&&Ze!==void 0?Ze:!0,uriResolver:ot}}class N{constructor(A={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,A=this.opts={...A,...k(A)};const{es5:F,lines:C}=this.opts.code;this.scope=new o.ValueScope({scope:{},prefixes:w,es5:F,lines:C}),this.logger=H(A.logger);const h=A.validateFormats;A.validateFormats=!1,this.RULES=(0,s.getRules)(),j.call(this,p,A,"NOT SUPPORTED"),j.call(this,v,A,"DEPRECATED","warn"),this._metaOpts=me.call(this),A.formats&&ee.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),A.keywords&&ie.call(this,A.keywords),typeof A.meta=="object"&&this.addMetaSchema(A.meta),X.call(this),A.validateFormats=h}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:A,meta:F,schemaId:C}=this.opts;let h=f;C==="id"&&(h={...f},h.id=h.$id,delete h.$id),F&&A&&this.addMetaSchema(h,h[C],!1)}defaultMeta(){const{meta:A,schemaId:F}=this.opts;return this.opts.defaultMeta=typeof A=="object"?A[F]||A:void 0}validate(A,F){let C;if(typeof A=="string"){if(C=this.getSchema(A),!C)throw new Error(`no schema with key or ref "${A}"`)}else C=this.compile(A);const h=C(F);return"$async"in C||(this.errors=C.errors),h}compile(A,F){const C=this._addSchema(A,F);return C.validate||this._compileSchemaEnv(C)}compileAsync(A,F){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:C}=this.opts;return h.call(this,A,F);async function h(Y,ce){await S.call(this,Y.$schema);const se=this._addSchema(Y,ce);return se.validate||M.call(this,se)}async function S(Y){Y&&!this.getSchema(Y)&&await h.call(this,{$ref:Y},!0)}async function M(Y){try{return this._compileSchemaEnv(Y)}catch(ce){if(!(ce instanceof a.default))throw ce;return L.call(this,ce),await J.call(this,ce.missingSchema),M.call(this,Y)}}function L({missingSchema:Y,missingRef:ce}){if(this.refs[Y])throw new Error(`AnySchema ${Y} is loaded but ${ce} cannot be resolved`)}async function J(Y){const ce=await Z.call(this,Y);this.refs[Y]||await S.call(this,ce.$schema),this.refs[Y]||this.addSchema(ce,Y,F)}async function Z(Y){const ce=this._loading[Y];if(ce)return ce;try{return await(this._loading[Y]=C(Y))}finally{delete this._loading[Y]}}}addSchema(A,F,C,h=this.opts.validateSchema){if(Array.isArray(A)){for(const M of A)this.addSchema(M,void 0,C,h);return this}let S;if(typeof A=="object"){const{schemaId:M}=this.opts;if(S=A[M],S!==void 0&&typeof S!="string")throw new Error(`schema ${M} must be string`)}return F=(0,l.normalizeId)(F||S),this._checkUnique(F),this.schemas[F]=this._addSchema(A,C,F,h,!0),this}addMetaSchema(A,F,C=this.opts.validateSchema){return this.addSchema(A,F,!0,C),this}validateSchema(A,F){if(typeof A=="boolean")return!0;let C;if(C=A.$schema,C!==void 0&&typeof C!="string")throw new Error("$schema must be a string");if(C=C||this.opts.defaultMeta||this.defaultMeta(),!C)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const h=this.validate(C,A);if(!h&&F){const S="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(S);else throw new Error(S)}return h}getSchema(A){let F;for(;typeof(F=U.call(this,A))=="string";)A=F;if(F===void 0){const{schemaId:C}=this.opts,h=new i.SchemaEnv({schema:{},schemaId:C});if(F=i.resolveSchema.call(this,h,A),!F)return;this.refs[A]=F}return F.validate||this._compileSchemaEnv(F)}removeSchema(A){if(A instanceof RegExp)return this._removeAllSchemas(this.schemas,A),this._removeAllSchemas(this.refs,A),this;switch(typeof A){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const F=U.call(this,A);return typeof F=="object"&&this._cache.delete(F.schema),delete this.schemas[A],delete this.refs[A],this}case"object":{const F=A;this._cache.delete(F);let C=A[this.opts.schemaId];return C&&(C=(0,l.normalizeId)(C),delete this.schemas[C],delete this.refs[C]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(A){for(const F of A)this.addKeyword(F);return this}addKeyword(A,F){let C;if(typeof A=="string")C=A,typeof F=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),F.keyword=C);else if(typeof A=="object"&&F===void 0){if(F=A,C=F.keyword,Array.isArray(C)&&!C.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(fe.call(this,C,F),!F)return(0,c.eachItem)(C,S=>Oe.call(this,S)),this;Le.call(this,F);const h={...F,type:(0,u.getJSONTypes)(F.type),schemaType:(0,u.getJSONTypes)(F.schemaType)};return(0,c.eachItem)(C,h.type.length===0?S=>Oe.call(this,S,h):S=>h.type.forEach(M=>Oe.call(this,S,h,M))),this}getKeyword(A){const F=this.RULES.all[A];return typeof F=="object"?F.definition:!!F}removeKeyword(A){const{RULES:F}=this;delete F.keywords[A],delete F.all[A];for(const C of F.rules){const h=C.rules.findIndex(S=>S.keyword===A);h>=0&&C.rules.splice(h,1)}return this}addFormat(A,F){return typeof F=="string"&&(F=new RegExp(F)),this.formats[A]=F,this}errorsText(A=this.errors,{separator:F=", ",dataVar:C="data"}={}){return!A||A.length===0?"No errors":A.map(h=>`${C}${h.instancePath} ${h.message}`).reduce((h,S)=>h+F+S)}$dataMetaSchema(A,F){const C=this.RULES.all;A=JSON.parse(JSON.stringify(A));for(const h of F){const S=h.split("/").slice(1);let M=A;for(const L of S)M=M[L];for(const L in C){const J=C[L];if(typeof J!="object")continue;const{$data:Z}=J.definition,Y=M[L];Z&&Y&&(M[L]=Se(Y))}}return A}_removeAllSchemas(A,F){for(const C in A){const h=A[C];(!F||F.test(C))&&(typeof h=="string"?delete A[C]:h&&!h.meta&&(this._cache.delete(h.schema),delete A[C]))}}_addSchema(A,F,C,h=this.opts.validateSchema,S=this.opts.addUsedSchema){let M;const{schemaId:L}=this.opts;if(typeof A=="object")M=A[L];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof A!="boolean")throw new Error("schema must be object or boolean")}let J=this._cache.get(A);if(J!==void 0)return J;C=(0,l.normalizeId)(M||C);const Z=l.getSchemaRefs.call(this,A,C);return J=new i.SchemaEnv({schema:A,schemaId:L,meta:F,baseId:C,localRefs:Z}),this._cache.set(J.schema,J),S&&!C.startsWith("#")&&(C&&this._checkUnique(C),this.refs[C]=J),h&&this.validateSchema(A,!0),J}_checkUnique(A){if(this.schemas[A]||this.refs[A])throw new Error(`schema with key or id "${A}" already exists`)}_compileSchemaEnv(A){if(A.meta?this._compileMetaSchema(A):i.compileSchema.call(this,A),!A.validate)throw new Error("ajv implementation error");return A.validate}_compileMetaSchema(A){const F=this.opts;this.opts=this._metaOpts;try{i.compileSchema.call(this,A)}finally{this.opts=F}}}N.ValidationError=n.default,N.MissingRefError=a.default,t.default=N;function j(z,A,F,C="error"){for(const h in z){const S=h;S in A&&this.logger[C](`${F}: option ${h}. ${z[S]}`)}}function U(z){return z=(0,l.normalizeId)(z),this.schemas[z]||this.refs[z]}function X(){const z=this.opts.schemas;if(z)if(Array.isArray(z))this.addSchema(z);else for(const A in z)this.addSchema(z[A],A)}function ee(){for(const z in this.opts.formats){const A=this.opts.formats[z];A&&this.addFormat(z,A)}}function ie(z){if(Array.isArray(z)){this.addVocabulary(z);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const A in z){const F=z[A];F.keyword||(F.keyword=A),this.addKeyword(F)}}function me(){const z={...this.opts};for(const A of d)delete z[A];return z}const be={log(){},warn(){},error(){}};function H(z){if(z===!1)return be;if(z===void 0)return console;if(z.log&&z.warn&&z.error)return z;throw new Error("logger must implement log, warn and error methods")}const re=/^[a-z_$][a-z0-9_$:-]*$/i;function fe(z,A){const{RULES:F}=this;if((0,c.eachItem)(z,C=>{if(F.keywords[C])throw new Error(`Keyword ${C} is already defined`);if(!re.test(C))throw new Error(`Keyword ${C} has invalid name`)}),!!A&&A.$data&&!("code"in A||"validate"in A))throw new Error('$data keyword must have "code" or "validate" function')}function Oe(z,A,F){var C;const h=A==null?void 0:A.post;if(F&&h)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:S}=this;let M=h?S.post:S.rules.find(({type:J})=>J===F);if(M||(M={type:F,rules:[]},S.rules.push(M)),S.keywords[z]=!0,!A)return;const L={keyword:z,definition:{...A,type:(0,u.getJSONTypes)(A.type),schemaType:(0,u.getJSONTypes)(A.schemaType)}};A.before?le.call(this,M,L,A.before):M.rules.push(L),S.all[z]=L,(C=A.implements)===null||C===void 0||C.forEach(J=>this.addKeyword(J))}function le(z,A,F){const C=z.rules.findIndex(h=>h.keyword===F);C>=0?z.rules.splice(C,0,A):(z.rules.push(A),this.logger.warn(`rule ${F} is not defined`))}function Le(z){let{metaSchema:A}=z;A!==void 0&&(z.$data&&this.opts.$data&&(A=Se(A)),z.validateSchema=this.compile(A,!0))}const Ie={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Se(z){return{anyOf:[z,Ie]}}})(di);var ra={},na={},aa={};Object.defineProperty(aa,"__esModule",{value:!0});const Nc={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};aa.default=Nc;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.callRef=ur.getValidate=void 0;const Ic=Sr,Ya=Ee,$t=$e,vr=Lt,xa=wt,tn=Q,Oc={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:r,it:n}=t,{baseId:a,schemaEnv:s,validateName:i,opts:o,self:l}=n,{root:u}=s;if((r==="#"||r==="#/")&&a===u.baseId)return f();const c=xa.resolveRef.call(l,u,a,r);if(c===void 0)throw new Ic.default(n.opts.uriResolver,a,r);if(c instanceof xa.SchemaEnv)return m(c);return E(c);function f(){if(s===u)return cn(t,i,s,s.$async);const d=e.scopeValue("root",{ref:u});return cn(t,(0,$t._)`${d}.validate`,u,u.$async)}function m(d){const w=Hi(t,d);cn(t,w,d,d.$async)}function E(d){const w=e.scopeValue("schema",o.code.source===!0?{ref:d,code:(0,$t.stringify)(d)}:{ref:d}),p=e.name("valid"),v=t.subschema({schema:d,dataTypes:[],schemaPath:$t.nil,topSchemaRef:w,errSchemaPath:r},p);t.mergeEvaluated(v),t.ok(p)}}};function Hi(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,$t._)`${r.scopeValue("wrapper",{ref:e})}.validate`}ur.getValidate=Hi;function cn(t,e,r,n){const{gen:a,it:s}=t,{allErrors:i,schemaEnv:o,opts:l}=s,u=l.passContext?vr.default.this:$t.nil;n?c():f();function c(){if(!o.$async)throw new Error("async schema referenced by sync schema");const d=a.let("valid");a.try(()=>{a.code((0,$t._)`await ${(0,Ya.callValidateCode)(t,e,u)}`),E(e),i||a.assign(d,!0)},w=>{a.if((0,$t._)`!(${w} instanceof ${s.ValidationError})`,()=>a.throw(w)),m(w),i||a.assign(d,!1)}),t.ok(d)}function f(){t.result((0,Ya.callValidateCode)(t,e,u),()=>E(e),()=>m(e))}function m(d){const w=(0,$t._)`${d}.errors`;a.assign(vr.default.vErrors,(0,$t._)`${vr.default.vErrors} === null ? ${w} : ${vr.default.vErrors}.concat(${w})`),a.assign(vr.default.errors,(0,$t._)`${vr.default.vErrors}.length`)}function E(d){var w;if(!s.opts.unevaluated)return;const p=(w=r==null?void 0:r.validate)===null||w===void 0?void 0:w.evaluated;if(s.props!==!0)if(p&&!p.dynamicProps)p.props!==void 0&&(s.props=tn.mergeEvaluated.props(a,p.props,s.props));else{const v=a.var("props",(0,$t._)`${d}.evaluated.props`);s.props=tn.mergeEvaluated.props(a,v,s.props,$t.Name)}if(s.items!==!0)if(p&&!p.dynamicItems)p.items!==void 0&&(s.items=tn.mergeEvaluated.items(a,p.items,s.items));else{const v=a.var("items",(0,$t._)`${d}.evaluated.items`);s.items=tn.mergeEvaluated.items(a,v,s.items,$t.Name)}}}ur.callRef=cn;ur.default=Oc;Object.defineProperty(na,"__esModule",{value:!0});const Tc=aa,Dc=ur,Cc=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Tc.default,Dc.default];na.default=Cc;var sa={},ia={};Object.defineProperty(ia,"__esModule",{value:!0});const _n=$e,Yt=_n.operators,gn={maximum:{okStr:"<=",ok:Yt.LTE,fail:Yt.GT},minimum:{okStr:">=",ok:Yt.GTE,fail:Yt.LT},exclusiveMaximum:{okStr:"<",ok:Yt.LT,fail:Yt.GTE},exclusiveMinimum:{okStr:">",ok:Yt.GT,fail:Yt.LTE}},Ac={message:({keyword:t,schemaCode:e})=>(0,_n.str)`must be ${gn[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,_n._)`{comparison: ${gn[t].okStr}, limit: ${e}}`},jc={keyword:Object.keys(gn),type:"number",schemaType:"number",$data:!0,error:Ac,code(t){const{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,_n._)`${r} ${gn[e].fail} ${n} || isNaN(${r})`)}};ia.default=jc;var oa={};Object.defineProperty(oa,"__esModule",{value:!0});const Vr=$e,Rc={message:({schemaCode:t})=>(0,Vr.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Vr._)`{multipleOf: ${t}}`},Vc={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Rc,code(t){const{gen:e,data:r,schemaCode:n,it:a}=t,s=a.opts.multipleOfPrecision,i=e.let("res"),o=s?(0,Vr._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${s}`:(0,Vr._)`${i} !== parseInt(${i})`;t.fail$data((0,Vr._)`(${n} === 0 || (${i} = ${r}/${n}, ${o}))`)}};oa.default=Vc;var la={},ca={};Object.defineProperty(ca,"__esModule",{value:!0});function Gi(t){const e=t.length;let r=0,n=0,a;for(;n<e;)r++,a=t.charCodeAt(n++),a>=55296&&a<=56319&&n<e&&(a=t.charCodeAt(n),(a&64512)===56320&&n++);return r}ca.default=Gi;Gi.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(la,"__esModule",{value:!0});const or=$e,Mc=Q,Fc=ca,Uc={message({keyword:t,schemaCode:e}){const r=t==="maxLength"?"more":"fewer";return(0,or.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,or._)`{limit: ${t}}`},qc={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Uc,code(t){const{keyword:e,data:r,schemaCode:n,it:a}=t,s=e==="maxLength"?or.operators.GT:or.operators.LT,i=a.opts.unicode===!1?(0,or._)`${r}.length`:(0,or._)`${(0,Mc.useFunc)(t.gen,Fc.default)}(${r})`;t.fail$data((0,or._)`${i} ${s} ${n}`)}};la.default=qc;var ua={};Object.defineProperty(ua,"__esModule",{value:!0});const Lc=Ee,yn=$e,zc={message:({schemaCode:t})=>(0,yn.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,yn._)`{pattern: ${t}}`},Jc={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:zc,code(t){const{data:e,$data:r,schema:n,schemaCode:a,it:s}=t,i=s.opts.unicodeRegExp?"u":"",o=r?(0,yn._)`(new RegExp(${a}, ${i}))`:(0,Lc.usePattern)(t,n);t.fail$data((0,yn._)`!${o}.test(${e})`)}};ua.default=Jc;var fa={};Object.defineProperty(fa,"__esModule",{value:!0});const Mr=$e,Kc={message({keyword:t,schemaCode:e}){const r=t==="maxProperties"?"more":"fewer";return(0,Mr.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Mr._)`{limit: ${t}}`},Bc={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Kc,code(t){const{keyword:e,data:r,schemaCode:n}=t,a=e==="maxProperties"?Mr.operators.GT:Mr.operators.LT;t.fail$data((0,Mr._)`Object.keys(${r}).length ${a} ${n}`)}};fa.default=Bc;var da={};Object.defineProperty(da,"__esModule",{value:!0});const Cr=Ee,Fr=$e,Hc=Q,Gc={message:({params:{missingProperty:t}})=>(0,Fr.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Fr._)`{missingProperty: ${t}}`},Wc={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Gc,code(t){const{gen:e,schema:r,schemaCode:n,data:a,$data:s,it:i}=t,{opts:o}=i;if(!s&&r.length===0)return;const l=r.length>=o.loopRequired;if(i.allErrors?u():c(),o.strictRequired){const E=t.parentSchema.properties,{definedProperties:d}=t.it;for(const w of r)if((E==null?void 0:E[w])===void 0&&!d.has(w)){const p=i.schemaEnv.baseId+i.errSchemaPath,v=`required property "${w}" is not defined at "${p}" (strictRequired)`;(0,Hc.checkStrictMode)(i,v,i.opts.strictRequired)}}function u(){if(l||s)t.block$data(Fr.nil,f);else for(const E of r)(0,Cr.checkReportMissingProp)(t,E)}function c(){const E=e.let("missing");if(l||s){const d=e.let("valid",!0);t.block$data(d,()=>m(E,d)),t.ok(d)}else e.if((0,Cr.checkMissingProp)(t,r,E)),(0,Cr.reportMissingProp)(t,E),e.else()}function f(){e.forOf("prop",n,E=>{t.setParams({missingProperty:E}),e.if((0,Cr.noPropertyInData)(e,a,E,o.ownProperties),()=>t.error())})}function m(E,d){t.setParams({missingProperty:E}),e.forOf(E,n,()=>{e.assign(d,(0,Cr.propertyInData)(e,a,E,o.ownProperties)),e.if((0,Fr.not)(d),()=>{t.error(),e.break()})},Fr.nil)}}};da.default=Wc;var ha={};Object.defineProperty(ha,"__esModule",{value:!0});const Ur=$e,Xc={message({keyword:t,schemaCode:e}){const r=t==="maxItems"?"more":"fewer";return(0,Ur.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Ur._)`{limit: ${t}}`},Zc={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Xc,code(t){const{keyword:e,data:r,schemaCode:n}=t,a=e==="maxItems"?Ur.operators.GT:Ur.operators.LT;t.fail$data((0,Ur._)`${r}.length ${a} ${n}`)}};ha.default=Zc;var ma={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});const Wi=Ii;Wi.code='require("ajv/dist/runtime/equal").default';Kr.default=Wi;Object.defineProperty(ma,"__esModule",{value:!0});const Cn=dt,vt=$e,Qc=Q,Yc=Kr,xc={message:({params:{i:t,j:e}})=>(0,vt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,vt._)`{i: ${t}, j: ${e}}`},eu={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:xc,code(t){const{gen:e,data:r,$data:n,schema:a,parentSchema:s,schemaCode:i,it:o}=t;if(!n&&!a)return;const l=e.let("valid"),u=s.items?(0,Cn.getSchemaTypes)(s.items):[];t.block$data(l,c,(0,vt._)`${i} === false`),t.ok(l);function c(){const d=e.let("i",(0,vt._)`${r}.length`),w=e.let("j");t.setParams({i:d,j:w}),e.assign(l,!0),e.if((0,vt._)`${d} > 1`,()=>(f()?m:E)(d,w))}function f(){return u.length>0&&!u.some(d=>d==="object"||d==="array")}function m(d,w){const p=e.name("item"),v=(0,Cn.checkDataTypes)(u,p,o.opts.strictNumbers,Cn.DataType.Wrong),$=e.const("indices",(0,vt._)`{}`);e.for((0,vt._)`;${d}--;`,()=>{e.let(p,(0,vt._)`${r}[${d}]`),e.if(v,(0,vt._)`continue`),u.length>1&&e.if((0,vt._)`typeof ${p} == "string"`,(0,vt._)`${p} += "_"`),e.if((0,vt._)`typeof ${$}[${p}] == "number"`,()=>{e.assign(w,(0,vt._)`${$}[${p}]`),t.error(),e.assign(l,!1).break()}).code((0,vt._)`${$}[${p}] = ${d}`)})}function E(d,w){const p=(0,Qc.useFunc)(e,Yc.default),v=e.name("outer");e.label(v).for((0,vt._)`;${d}--;`,()=>e.for((0,vt._)`${w} = ${d}; ${w}--;`,()=>e.if((0,vt._)`${p}(${r}[${d}], ${r}[${w}])`,()=>{t.error(),e.assign(l,!1).break(v)})))}}};ma.default=eu;var pa={};Object.defineProperty(pa,"__esModule",{value:!0});const Ln=$e,tu=Q,ru=Kr,nu={message:"must be equal to constant",params:({schemaCode:t})=>(0,Ln._)`{allowedValue: ${t}}`},au={keyword:"const",$data:!0,error:nu,code(t){const{gen:e,data:r,$data:n,schemaCode:a,schema:s}=t;n||s&&typeof s=="object"?t.fail$data((0,Ln._)`!${(0,tu.useFunc)(e,ru.default)}(${r}, ${a})`):t.fail((0,Ln._)`${s} !== ${r}`)}};pa.default=au;var va={};Object.defineProperty(va,"__esModule",{value:!0});const Ar=$e,su=Q,iu=Kr,ou={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Ar._)`{allowedValues: ${t}}`},lu={keyword:"enum",schemaType:"array",$data:!0,error:ou,code(t){const{gen:e,data:r,$data:n,schema:a,schemaCode:s,it:i}=t;if(!n&&a.length===0)throw new Error("enum must have non-empty array");const o=a.length>=i.opts.loopEnum;let l;const u=()=>l??(l=(0,su.useFunc)(e,iu.default));let c;if(o||n)c=e.let("valid"),t.block$data(c,f);else{if(!Array.isArray(a))throw new Error("ajv implementation error");const E=e.const("vSchema",s);c=(0,Ar.or)(...a.map((d,w)=>m(E,w)))}t.pass(c);function f(){e.assign(c,!1),e.forOf("v",s,E=>e.if((0,Ar._)`${u()}(${r}, ${E})`,()=>e.assign(c,!0).break()))}function m(E,d){const w=a[d];return typeof w=="object"&&w!==null?(0,Ar._)`${u()}(${r}, ${E}[${d}])`:(0,Ar._)`${r} === ${w}`}}};va.default=lu;Object.defineProperty(sa,"__esModule",{value:!0});const cu=ia,uu=oa,fu=la,du=ua,hu=fa,mu=da,pu=ha,vu=ma,_u=pa,gu=va,yu=[cu.default,uu.default,fu.default,du.default,hu.default,mu.default,pu.default,vu.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},_u.default,gu.default];sa.default=yu;var _a={},kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.validateAdditionalItems=void 0;const lr=$e,zn=Q,bu={message:({params:{len:t}})=>(0,lr.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,lr._)`{limit: ${t}}`},Eu={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:bu,code(t){const{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,zn.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Xi(t,n)}};function Xi(t,e){const{gen:r,schema:n,data:a,keyword:s,it:i}=t;i.items=!0;const o=r.const("len",(0,lr._)`${a}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,lr._)`${o} <= ${e.length}`);else if(typeof n=="object"&&!(0,zn.alwaysValidSchema)(i,n)){const u=r.var("valid",(0,lr._)`${o} <= ${e.length}`);r.if((0,lr.not)(u),()=>l(u)),t.ok(u)}function l(u){r.forRange("i",e.length,o,c=>{t.subschema({keyword:s,dataProp:c,dataPropType:zn.Type.Num},u),i.allErrors||r.if((0,lr.not)(u),()=>r.break())})}}kr.validateAdditionalItems=Xi;kr.default=Eu;var ga={},Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.validateTuple=void 0;const es=$e,un=Q,$u=Ee,wu={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:r}=t;if(Array.isArray(e))return Zi(t,"additionalItems",e);r.items=!0,!(0,un.alwaysValidSchema)(r,e)&&t.ok((0,$u.validateArray)(t))}};function Zi(t,e,r=t.schema){const{gen:n,parentSchema:a,data:s,keyword:i,it:o}=t;c(a),o.opts.unevaluated&&r.length&&o.items!==!0&&(o.items=un.mergeEvaluated.items(n,r.length,o.items));const l=n.name("valid"),u=n.const("len",(0,es._)`${s}.length`);r.forEach((f,m)=>{(0,un.alwaysValidSchema)(o,f)||(n.if((0,es._)`${u} > ${m}`,()=>t.subschema({keyword:i,schemaProp:m,dataProp:m},l)),t.ok(l))});function c(f){const{opts:m,errSchemaPath:E}=o,d=r.length,w=d===f.minItems&&(d===f.maxItems||f[e]===!1);if(m.strictTuples&&!w){const p=`"${i}" is ${d}-tuple, but minItems or maxItems/${e} are not specified or different at path "${E}"`;(0,un.checkStrictMode)(o,p,m.strictTuples)}}}Pr.validateTuple=Zi;Pr.default=wu;Object.defineProperty(ga,"__esModule",{value:!0});const Su=Pr,ku={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Su.validateTuple)(t,"items")};ga.default=ku;var ya={};Object.defineProperty(ya,"__esModule",{value:!0});const ts=$e,Pu=Q,Nu=Ee,Iu=kr,Ou={message:({params:{len:t}})=>(0,ts.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ts._)`{limit: ${t}}`},Tu={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Ou,code(t){const{schema:e,parentSchema:r,it:n}=t,{prefixItems:a}=r;n.items=!0,!(0,Pu.alwaysValidSchema)(n,e)&&(a?(0,Iu.validateAdditionalItems)(t,a):t.ok((0,Nu.validateArray)(t)))}};ya.default=Tu;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});const Nt=$e,rn=Q,Du={message:({params:{min:t,max:e}})=>e===void 0?(0,Nt.str)`must contain at least ${t} valid item(s)`:(0,Nt.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Nt._)`{minContains: ${t}}`:(0,Nt._)`{minContains: ${t}, maxContains: ${e}}`},Cu={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Du,code(t){const{gen:e,schema:r,parentSchema:n,data:a,it:s}=t;let i,o;const{minContains:l,maxContains:u}=n;s.opts.next?(i=l===void 0?1:l,o=u):i=1;const c=e.const("len",(0,Nt._)`${a}.length`);if(t.setParams({min:i,max:o}),o===void 0&&i===0){(0,rn.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(o!==void 0&&i>o){(0,rn.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,rn.alwaysValidSchema)(s,r)){let w=(0,Nt._)`${c} >= ${i}`;o!==void 0&&(w=(0,Nt._)`${w} && ${c} <= ${o}`),t.pass(w);return}s.items=!0;const f=e.name("valid");o===void 0&&i===1?E(f,()=>e.if(f,()=>e.break())):i===0?(e.let(f,!0),o!==void 0&&e.if((0,Nt._)`${a}.length > 0`,m)):(e.let(f,!1),m()),t.result(f,()=>t.reset());function m(){const w=e.name("_valid"),p=e.let("count",0);E(w,()=>e.if(w,()=>d(p)))}function E(w,p){e.forRange("i",0,c,v=>{t.subschema({keyword:"contains",dataProp:v,dataPropType:rn.Type.Num,compositeRule:!0},w),p()})}function d(w){e.code((0,Nt._)`${w}++`),o===void 0?e.if((0,Nt._)`${w} >= ${i}`,()=>e.assign(f,!0).break()):(e.if((0,Nt._)`${w} > ${o}`,()=>e.assign(f,!1).break()),i===1?e.assign(f,!0):e.if((0,Nt._)`${w} >= ${i}`,()=>e.assign(f,!0)))}}};ba.default=Cu;var Qi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=$e,r=Q,n=Ee;t.error={message:({params:{property:l,depsCount:u,deps:c}})=>{const f=u===1?"property":"properties";return(0,e.str)`must have ${f} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:c,missingProperty:f}})=>(0,e._)`{property: ${l},
    missingProperty: ${f},
    depsCount: ${u},
    deps: ${c}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(l){const[u,c]=s(l);i(l,u),o(l,c)}};function s({schema:l}){const u={},c={};for(const f in l){if(f==="__proto__")continue;const m=Array.isArray(l[f])?u:c;m[f]=l[f]}return[u,c]}function i(l,u=l.schema){const{gen:c,data:f,it:m}=l;if(Object.keys(u).length===0)return;const E=c.let("missing");for(const d in u){const w=u[d];if(w.length===0)continue;const p=(0,n.propertyInData)(c,f,d,m.opts.ownProperties);l.setParams({property:d,depsCount:w.length,deps:w.join(", ")}),m.allErrors?c.if(p,()=>{for(const v of w)(0,n.checkReportMissingProp)(l,v)}):(c.if((0,e._)`${p} && (${(0,n.checkMissingProp)(l,w,E)})`),(0,n.reportMissingProp)(l,E),c.else())}}t.validatePropertyDeps=i;function o(l,u=l.schema){const{gen:c,data:f,keyword:m,it:E}=l,d=c.name("valid");for(const w in u)(0,r.alwaysValidSchema)(E,u[w])||(c.if((0,n.propertyInData)(c,f,w,E.opts.ownProperties),()=>{const p=l.subschema({keyword:m,schemaProp:w},d);l.mergeValidEvaluated(p,d)},()=>c.var(d,!0)),l.ok(d))}t.validateSchemaDeps=o,t.default=a})(Qi);var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});const Yi=$e,Au=Q,ju={message:"property name must be valid",params:({params:t})=>(0,Yi._)`{propertyName: ${t.propertyName}}`},Ru={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:ju,code(t){const{gen:e,schema:r,data:n,it:a}=t;if((0,Au.alwaysValidSchema)(a,r))return;const s=e.name("valid");e.forIn("key",n,i=>{t.setParams({propertyName:i}),t.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},s),e.if((0,Yi.not)(s),()=>{t.error(!0),a.allErrors||e.break()})}),t.ok(s)}};Ea.default=Ru;var Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});const nn=Ee,Tt=$e,Vu=Lt,an=Q,Mu={message:"must NOT have additional properties",params:({params:t})=>(0,Tt._)`{additionalProperty: ${t.additionalProperty}}`},Fu={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Mu,code(t){const{gen:e,schema:r,parentSchema:n,data:a,errsCount:s,it:i}=t;if(!s)throw new Error("ajv implementation error");const{allErrors:o,opts:l}=i;if(i.props=!0,l.removeAdditional!=="all"&&(0,an.alwaysValidSchema)(i,r))return;const u=(0,nn.allSchemaProperties)(n.properties),c=(0,nn.allSchemaProperties)(n.patternProperties);f(),t.ok((0,Tt._)`${s} === ${Vu.default.errors}`);function f(){e.forIn("key",a,p=>{!u.length&&!c.length?d(p):e.if(m(p),()=>d(p))})}function m(p){let v;if(u.length>8){const $=(0,an.schemaRefOrVal)(i,n.properties,"properties");v=(0,nn.isOwnProperty)(e,$,p)}else u.length?v=(0,Tt.or)(...u.map($=>(0,Tt._)`${p} === ${$}`)):v=Tt.nil;return c.length&&(v=(0,Tt.or)(v,...c.map($=>(0,Tt._)`${(0,nn.usePattern)(t,$)}.test(${p})`))),(0,Tt.not)(v)}function E(p){e.code((0,Tt._)`delete ${a}[${p}]`)}function d(p){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){E(p);return}if(r===!1){t.setParams({additionalProperty:p}),t.error(),o||e.break();return}if(typeof r=="object"&&!(0,an.alwaysValidSchema)(i,r)){const v=e.name("valid");l.removeAdditional==="failing"?(w(p,v,!1),e.if((0,Tt.not)(v),()=>{t.reset(),E(p)})):(w(p,v),o||e.if((0,Tt.not)(v),()=>e.break()))}}function w(p,v,$){const k={keyword:"additionalProperties",dataProp:p,dataPropType:an.Type.Str};$===!1&&Object.assign(k,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(k,v)}}};Nn.default=Fu;var $a={};Object.defineProperty($a,"__esModule",{value:!0});const Uu=Ct,rs=Ee,An=Q,ns=Nn,qu={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:n,data:a,it:s}=t;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&ns.default.code(new Uu.KeywordCxt(s,ns.default,"additionalProperties"));const i=(0,rs.allSchemaProperties)(r);for(const f of i)s.definedProperties.add(f);s.opts.unevaluated&&i.length&&s.props!==!0&&(s.props=An.mergeEvaluated.props(e,(0,An.toHash)(i),s.props));const o=i.filter(f=>!(0,An.alwaysValidSchema)(s,r[f]));if(o.length===0)return;const l=e.name("valid");for(const f of o)u(f)?c(f):(e.if((0,rs.propertyInData)(e,a,f,s.opts.ownProperties)),c(f),s.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(l);function u(f){return s.opts.useDefaults&&!s.compositeRule&&r[f].default!==void 0}function c(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};$a.default=qu;var wa={};Object.defineProperty(wa,"__esModule",{value:!0});const as=Ee,sn=$e,ss=Q,is=Q,Lu={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,data:n,parentSchema:a,it:s}=t,{opts:i}=s,o=(0,as.allSchemaProperties)(r),l=o.filter(w=>(0,ss.alwaysValidSchema)(s,r[w]));if(o.length===0||l.length===o.length&&(!s.opts.unevaluated||s.props===!0))return;const u=i.strictSchema&&!i.allowMatchingProperties&&a.properties,c=e.name("valid");s.props!==!0&&!(s.props instanceof sn.Name)&&(s.props=(0,is.evaluatedPropsToName)(e,s.props));const{props:f}=s;m();function m(){for(const w of o)u&&E(w),s.allErrors?d(w):(e.var(c,!0),d(w),e.if(c))}function E(w){for(const p in u)new RegExp(w).test(p)&&(0,ss.checkStrictMode)(s,`property ${p} matches pattern ${w} (use allowMatchingProperties)`)}function d(w){e.forIn("key",n,p=>{e.if((0,sn._)`${(0,as.usePattern)(t,w)}.test(${p})`,()=>{const v=l.includes(w);v||t.subschema({keyword:"patternProperties",schemaProp:w,dataProp:p,dataPropType:is.Type.Str},c),s.opts.unevaluated&&f!==!0?e.assign((0,sn._)`${f}[${p}]`,!0):!v&&!s.allErrors&&e.if((0,sn.not)(c),()=>e.break())})})}}};wa.default=Lu;var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});const zu=Q,Ju={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:r,it:n}=t;if((0,zu.alwaysValidSchema)(n,r)){t.fail();return}const a=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),t.failResult(a,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Sa.default=Ju;var ka={};Object.defineProperty(ka,"__esModule",{value:!0});const Ku=Ee,Bu={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ku.validateUnion,error:{message:"must match a schema in anyOf"}};ka.default=Bu;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});const fn=$e,Hu=Q,Gu={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,fn._)`{passingSchemas: ${t.passing}}`},Wu={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Gu,code(t){const{gen:e,schema:r,parentSchema:n,it:a}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(a.opts.discriminator&&n.discriminator)return;const s=r,i=e.let("valid",!1),o=e.let("passing",null),l=e.name("_valid");t.setParams({passing:o}),e.block(u),t.result(i,()=>t.reset(),()=>t.error(!0));function u(){s.forEach((c,f)=>{let m;(0,Hu.alwaysValidSchema)(a,c)?e.var(l,!0):m=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&e.if((0,fn._)`${l} && ${i}`).assign(i,!1).assign(o,(0,fn._)`[${o}, ${f}]`).else(),e.if(l,()=>{e.assign(i,!0),e.assign(o,f),m&&t.mergeEvaluated(m,fn.Name)})})}}};Pa.default=Wu;var Na={};Object.defineProperty(Na,"__esModule",{value:!0});const Xu=Q,Zu={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const a=e.name("valid");r.forEach((s,i)=>{if((0,Xu.alwaysValidSchema)(n,s))return;const o=t.subschema({keyword:"allOf",schemaProp:i},a);t.ok(a),t.mergeEvaluated(o)})}};Na.default=Zu;var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});const bn=$e,xi=Q,Qu={message:({params:t})=>(0,bn.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,bn._)`{failingKeyword: ${t.ifClause}}`},Yu={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Qu,code(t){const{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,xi.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const a=os(n,"then"),s=os(n,"else");if(!a&&!s)return;const i=e.let("valid",!0),o=e.name("_valid");if(l(),t.reset(),a&&s){const c=e.let("ifClause");t.setParams({ifClause:c}),e.if(o,u("then",c),u("else",c))}else a?e.if(o,u("then")):e.if((0,bn.not)(o),u("else"));t.pass(i,()=>t.error(!0));function l(){const c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},o);t.mergeEvaluated(c)}function u(c,f){return()=>{const m=t.subschema({keyword:c},o);e.assign(i,o),t.mergeValidEvaluated(m,i),f?e.assign(f,(0,bn._)`${c}`):t.setParams({ifClause:c})}}}};function os(t,e){const r=t.schema[e];return r!==void 0&&!(0,xi.alwaysValidSchema)(t,r)}Ia.default=Yu;var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});const xu=Q,ef={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,xu.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Oa.default=ef;Object.defineProperty(_a,"__esModule",{value:!0});const tf=kr,rf=ga,nf=Pr,af=ya,sf=ba,of=Qi,lf=Ea,cf=Nn,uf=$a,ff=wa,df=Sa,hf=ka,mf=Pa,pf=Na,vf=Ia,_f=Oa;function gf(t=!1){const e=[df.default,hf.default,mf.default,pf.default,vf.default,_f.default,lf.default,cf.default,of.default,uf.default,ff.default];return t?e.push(rf.default,af.default):e.push(tf.default,nf.default),e.push(sf.default),e}_a.default=gf;var Ta={},Da={};Object.defineProperty(Da,"__esModule",{value:!0});const it=$e,yf={message:({schemaCode:t})=>(0,it.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,it._)`{format: ${t}}`},bf={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:yf,code(t,e){const{gen:r,data:n,$data:a,schema:s,schemaCode:i,it:o}=t,{opts:l,errSchemaPath:u,schemaEnv:c,self:f}=o;if(!l.validateFormats)return;a?m():E();function m(){const d=r.scopeValue("formats",{ref:f.formats,code:l.code.formats}),w=r.const("fDef",(0,it._)`${d}[${i}]`),p=r.let("fType"),v=r.let("format");r.if((0,it._)`typeof ${w} == "object" && !(${w} instanceof RegExp)`,()=>r.assign(p,(0,it._)`${w}.type || "string"`).assign(v,(0,it._)`${w}.validate`),()=>r.assign(p,(0,it._)`"string"`).assign(v,w)),t.fail$data((0,it.or)($(),k()));function $(){return l.strictSchema===!1?it.nil:(0,it._)`${i} && !${v}`}function k(){const N=c.$async?(0,it._)`(${w}.async ? await ${v}(${n}) : ${v}(${n}))`:(0,it._)`${v}(${n})`,j=(0,it._)`(typeof ${v} == "function" ? ${N} : ${v}.test(${n}))`;return(0,it._)`${v} && ${v} !== true && ${p} === ${e} && !${j}`}}function E(){const d=f.formats[s];if(!d){$();return}if(d===!0)return;const[w,p,v]=k(d);w===e&&t.pass(N());function $(){if(l.strictSchema===!1){f.logger.warn(j());return}throw new Error(j());function j(){return`unknown format "${s}" ignored in schema at path "${u}"`}}function k(j){const U=j instanceof RegExp?(0,it.regexpCode)(j):l.code.formats?(0,it._)`${l.code.formats}${(0,it.getProperty)(s)}`:void 0,X=r.scopeValue("formats",{key:s,ref:j,code:U});return typeof j=="object"&&!(j instanceof RegExp)?[j.type||"string",j.validate,(0,it._)`${X}.validate`]:["string",j,X]}function N(){if(typeof d=="object"&&!(d instanceof RegExp)&&d.async){if(!c.$async)throw new Error("async format in sync schema");return(0,it._)`await ${v}(${n})`}return typeof p=="function"?(0,it._)`${v}(${n})`:(0,it._)`${v}.test(${n})`}}}};Da.default=bf;Object.defineProperty(Ta,"__esModule",{value:!0});const Ef=Da,$f=[Ef.default];Ta.default=$f;var $r={};Object.defineProperty($r,"__esModule",{value:!0});$r.contentVocabulary=$r.metadataVocabulary=void 0;$r.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];$r.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(ra,"__esModule",{value:!0});const wf=na,Sf=sa,kf=_a,Pf=Ta,ls=$r,Nf=[wf.default,Sf.default,(0,kf.default)(),Pf.default,ls.metadataVocabulary,ls.contentVocabulary];ra.default=Nf;var Ca={},In={};Object.defineProperty(In,"__esModule",{value:!0});In.DiscrError=void 0;var cs;(function(t){t.Tag="tag",t.Mapping="mapping"})(cs||(In.DiscrError=cs={}));Object.defineProperty(Ca,"__esModule",{value:!0});const _r=$e,Jn=In,us=wt,If=Sr,Of=Q,Tf={message:({params:{discrError:t,tagName:e}})=>t===Jn.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,_r._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Df={keyword:"discriminator",type:"object",schemaType:"object",error:Tf,code(t){const{gen:e,data:r,schema:n,parentSchema:a,it:s}=t,{oneOf:i}=a;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const o=n.propertyName;if(typeof o!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");const l=e.let("valid",!1),u=e.const("tag",(0,_r._)`${r}${(0,_r.getProperty)(o)}`);e.if((0,_r._)`typeof ${u} == "string"`,()=>c(),()=>t.error(!1,{discrError:Jn.DiscrError.Tag,tag:u,tagName:o})),t.ok(l);function c(){const E=m();e.if(!1);for(const d in E)e.elseIf((0,_r._)`${u} === ${d}`),e.assign(l,f(E[d]));e.else(),t.error(!1,{discrError:Jn.DiscrError.Mapping,tag:u,tagName:o}),e.endIf()}function f(E){const d=e.name("valid"),w=t.subschema({keyword:"oneOf",schemaProp:E},d);return t.mergeEvaluated(w,_r.Name),d}function m(){var E;const d={},w=v(a);let p=!0;for(let N=0;N<i.length;N++){let j=i[N];if(j!=null&&j.$ref&&!(0,Of.schemaHasRulesButRef)(j,s.self.RULES)){const X=j.$ref;if(j=us.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,X),j instanceof us.SchemaEnv&&(j=j.schema),j===void 0)throw new If.default(s.opts.uriResolver,s.baseId,X)}const U=(E=j==null?void 0:j.properties)===null||E===void 0?void 0:E[o];if(typeof U!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${o}"`);p=p&&(w||v(j)),$(U,N)}if(!p)throw new Error(`discriminator: "${o}" must be required`);return d;function v({required:N}){return Array.isArray(N)&&N.includes(o)}function $(N,j){if(N.const)k(N.const,j);else if(N.enum)for(const U of N.enum)k(U,j);else throw new Error(`discriminator: "properties/${o}" must have "const" or "enum"`)}function k(N,j){if(typeof N!="string"||N in d)throw new Error(`discriminator: "${o}" values must be unique strings`);d[N]=j}}}};Ca.default=Df;const Cf="http://json-schema.org/draft-07/schema#",Af="http://json-schema.org/draft-07/schema#",jf="Core schema meta-schema",Rf={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Vf=["object","boolean"],Mf={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Ff={$schema:Cf,$id:Af,title:jf,definitions:Rf,type:Vf,properties:Mf,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const r=di,n=ra,a=Ca,s=Ff,i=["/properties"],o="http://json-schema.org/draft-07/schema";class l extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(d=>this.addVocabulary(d)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const d=this.opts.$data?this.$dataMetaSchema(s,i):s;this.addMetaSchema(d,o,!1),this.refs["http://json-schema.org/schema"]=o}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}}e.Ajv=l,t.exports=e=l,t.exports.Ajv=l,Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var u=Ct;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var c=$e;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Jr;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return f.default}});var m=Sr;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return m.default}})})(Rn,Rn.exports);var Uf=Rn.exports;const qf=Po(Uf);class br{constructor(e=!1){this.ajv=new qf({allErrors:e}),this.canValidate=!1}loadSchema(e){try{return this.validator=this.ajv.compile(e),this.canValidate=!0}catch(r){return console.error("SchemaValidator: error compiling schema",r),!1}}isValid(e){if(this.validator)return this.canValidate?this.validator(e):null}getErrors(){return!this.validator||!this.canValidate?null:this.validator.errors||null}}class Lf{constructor(e,r,n=[],a=void 0){et(this,"root");et(this,"ids",[]);if(this.jsonSchema=ui(e,n),this.validator=new br,!this.validator.loadSchema(this.jsonSchema))throw new Error("Invalid JSON Schema");const i=ho(this.jsonSchema,a);this.dispatch=r,this.notifyChange=()=>{const o=this.getFormData();this.dispatch("change",{value:o})},this.root=this.createObjectElement({key:null,property:this.jsonSchema,required:!0,removable:!1,value:i})}createFormElement(e){const{property:r}=e;if("enum"in r)return this.createEnumElement(e);switch(r.type){case"object":{const n=r;return this.createObjectElement({...e,property:n})}case"array":{const n=r;return li(n)?this.createTupleElement({...e,property:n}):this.createArrayElement({...e,property:n})}case"number":case"integer":{const n=r;return this.createNumberElement({...e,property:n})}case"boolean":{const n=r;return this.createBooleanElement({...e,property:n})}default:{const n=r;return this.createStringElement({...e,property:n})}}}createStringElement({key:e,property:r,required:n,removable:a,value:s}){const i=this.getBaseElementFields({key:e,property:r,required:n,removable:a});return new _o({...i,value:s||null})}createBooleanElement({key:e,property:r,required:n,removable:a,value:s}){const i=this.getBaseElementFields({key:e,property:r,required:n,removable:a});return new go({...i,value:hn(s)})}createNumberElement({key:e,property:r,required:n,removable:a,value:s}){const i=this.getBaseElementFields({key:e,property:r,required:n,removable:a});return new za({...i,type:"number",value:hn(s),min:co(r),max:uo(r)})}createEnumElement({key:e,property:r,required:n,removable:a,value:s}){const i=this.getBaseElementFields({key:e,property:r,required:n,removable:a});return new yo({...i,type:"enum",value:s||null,options:r.enum})}createObjectElement({key:e,property:r,required:n,removable:a,value:s}){const i=this.getBaseElementFields({key:e,property:r,required:n,removable:a}),o=r.required||[],l=[],u=Object.entries(ci(r,s));for(const[f,m]of u){const E=o.includes(f),d=this.createFormElement({key:f,property:m,required:E,removable:fo(r,f),value:s[f]});l.push(d)}return new bo({...i,children:l,additionalProperties:r.additionalProperties||!1})}createArrayElement({key:e,property:r,required:n,removable:a,value:s}){const i=this.getBaseElementFields({key:e,property:r,required:n,removable:a}),o=r.items,l=s.map(c=>this.createFormElement({key:null,property:o,required:!1,removable:!0,value:c}));return new Eo({...i,children:l,items:o,minItems:r.minItems,maxItems:r.maxItems})}createTupleElement({key:e,property:r,required:n,removable:a,value:s}){const i=this.getBaseElementFields({key:e,property:r,required:n,removable:a}),o=r.minItems;return new $o({...i,type:"tuple",items:r.items,size:o,children:n||Array.isArray(s)&&s.length>0?this.createTupleChildren({items:r.items,size:o,value:s}):[]})}createTupleChildren({items:e,size:r,value:n}){const a={key:null,required:!1,removable:!1};return Array.isArray(e)?e.map((s,i)=>this.createFormElement({...a,property:s,value:n[i]})):Array(r).map((s,i)=>this.createFormElement({...a,property:e,value:n[i]}))}getBaseElementFields({key:e,property:r,required:n,removable:a}){return{key:e,required:n,removable:a,manager:this,id:this.getUniqueId(),type:r.type||null,title:r.title||e||"",description:r.description||"",property:xt(r),notifyChange:this.notifyChange}}getUniqueId(){let e;do if(e=Math.random().toString(36).substring(7),!this.ids.includes(e)){this.ids.push(e);break}while(!0);return e}getFormData(){return this.getDataFromObjectElement(this.root)}getDataFromObjectElement(e){const r={};for(const n of e.children){let a=this.getDataFromElement(n);r[n.key]=a}return r}validate(){const e=$n(this.getFormData());if(!this.validator.isValid(e)){const n=this.validator.getErrors();throw new eo(n)}}getDataFromElement(e){switch(e.type){case"object":return this.getDataFromObjectElement(e);case"array":case"tuple":return this.getDataFromArrayElement(e);default:if(e instanceof Lr)return e instanceof za&&e.badInput?"invalid":e.value;throw new Error(`Unsupported type ${e.type}`)}}getDataFromArrayElement(e){return e.children.map(r=>this.getDataFromElement(r))}}class eo extends Error{constructor(e){super("Invalid JSON Schema data"),this.errors=e}}function fs(t){let e;return{c(){e=O("span"),this.h()},l(r){e=T(r,"SPAN",{tabindex:!0,role:!0,"data-bs-trigger":!0,class:!0,"data-bs-toggle":!0,"data-bs-target":!0,"data-bs-html":!0,"data-bs-content":!0}),D(e).forEach(_),this.h()},h(){g(e,"tabindex","0"),g(e,"role","button"),g(e,"data-bs-trigger","focus"),g(e,"class","bi bi-info-circle text-primary"),g(e,"data-bs-toggle","collapse"),g(e,"data-bs-target",""),g(e,"data-bs-html",t[1]),g(e,"data-bs-content",t[0])},m(r,n){q(r,e,n),t[3](e)},p(r,n){n&2&&g(e,"data-bs-html",r[1]),n&1&&g(e,"data-bs-content",r[0])},d(r){r&&_(e),t[3](null)}}}function zf(t){let e,r=t[0]&&fs(t);return{c(){e=O("span"),r&&r.c(),this.h()},l(n){e=T(n,"SPAN",{class:!0});var a=D(e);r&&r.l(a),a.forEach(_),this.h()},h(){g(e,"class","ms-2 property-description")},m(n,a){q(n,e,a),r&&r.m(e,null)},p(n,[a]){n[0]?r?r.p(n,a):(r=fs(n),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:kt,o:kt,d(n){n&&_(e),r&&r.d()}}}function Jf(t,e,r){let{description:n=void 0}=e,{html:a=!1}=e,s,i,o;wr(()=>{s&&s.addEventListener("click",function(){i=bootstrap.Popover.getOrCreateInstance(s,{trigger:"manual"}),i.toggle(),o||(o=function(u){const c=u.composedPath();c.length>0&&c[0]instanceof HTMLElement&&c[0]!==s&&(c[0].closest(".popover")||(i==null||i.hide(),i=void 0,window.removeEventListener("click",o),o=void 0))},window.addEventListener("click",o))})});function l(u){rr[u?"unshift":"push"](()=>{s=u,r(2,s)})}return t.$$set=u=>{"description"in u&&r(0,n=u.description),"html"in u&&r(1,a=u.html)},[n,a,s,l]}class Kf extends gt{constructor(e){super(),yt(this,e,Jf,zf,ht,{description:0,html:1})}}function Bf(t){let e;function r(s,i){if(s[0].title)return Wf;if(s[2])return Gf}let n=r(t),a=n&&n(t);return{c(){e=O("span"),a&&a.c(),this.h()},l(s){e=T(s,"SPAN",{class:!0});var i=D(e);a&&a.l(i),i.forEach(_),this.h()},h(){g(e,"class",t[3])},m(s,i){q(s,e,i),a&&a.m(e,null)},p(s,i){n===(n=r(s))&&a?a.p(s,i):(a&&a.d(1),a=n&&n(s),a&&(a.c(),a.m(e,null))),i&8&&g(e,"class",s[3])},d(s){s&&_(e),a&&a.d()}}}function Hf(t){let e,r;function n(i,o){if(i[0].title)return Zf;if(i[2])return Xf}let a=n(t),s=a&&a(t);return{c(){e=O("label"),s&&s.c(),this.h()},l(i){e=T(i,"LABEL",{class:!0,for:!0});var o=D(e);s&&s.l(o),o.forEach(_),this.h()},h(){g(e,"class",t[3]),g(e,"for",r=t[1]==="label"?`property-${t[0].id}`:void 0)},m(i,o){q(i,e,o),s&&s.m(e,null)},p(i,o){a===(a=n(i))&&s?s.p(i,o):(s&&s.d(1),s=a&&a(i),s&&(s.c(),s.m(e,null))),o&8&&g(e,"class",i[3]),o&3&&r!==(r=i[1]==="label"?`property-${i[0].id}`:void 0)&&g(e,"for",r)},d(i){i&&_(e),s&&s.d()}}}function Gf(t){let e,r;return{c(){e=O("span"),r=G(t[2]),this.h()},l(n){e=T(n,"SPAN",{class:!0});var a=D(e);r=W(a,t[2]),a.forEach(_),this.h()},h(){g(e,"class","visually-hidden")},m(n,a){q(n,e,a),y(e,r)},p(n,a){a&4&&He(r,n[2])},d(n){n&&_(e)}}}function Wf(t){let e=t[0].title+"",r;return{c(){r=G(e)},l(n){r=W(n,e)},m(n,a){q(n,r,a)},p(n,a){a&1&&e!==(e=n[0].title+"")&&He(r,e)},d(n){n&&_(r)}}}function Xf(t){let e,r;return{c(){e=O("span"),r=G(t[2]),this.h()},l(n){e=T(n,"SPAN",{class:!0});var a=D(e);r=W(a,t[2]),a.forEach(_),this.h()},h(){g(e,"class","visually-hidden")},m(n,a){q(n,e,a),y(e,r)},p(n,a){a&4&&He(r,n[2])},d(n){n&&_(e)}}}function Zf(t){let e=t[0].title+"",r;return{c(){r=G(e)},l(n){r=W(n,e)},m(n,a){q(n,r,a)},p(n,a){a&1&&e!==(e=n[0].title+"")&&He(r,e)},d(n){n&&_(r)}}}function Qf(t){let e,r,n;function a(o,l){return o[1]==="label"?Hf:Bf}let s=a(t),i=s(t);return r=new Kf({props:{description:t[0].description}}),{c(){i.c(),e=K(),Me(r.$$.fragment)},l(o){i.l(o),e=B(o),Fe(r.$$.fragment,o)},m(o,l){i.m(o,l),q(o,e,l),Ue(r,o,l),n=!0},p(o,[l]){s===(s=a(o))&&i?i.p(o,l):(i.d(1),i=s(o),i&&(i.c(),i.m(e.parentNode,e)));const u={};l&1&&(u.description=o[0].description),r.$set(u)},i(o){n||(ue(r.$$.fragment,o),n=!0)},o(o){de(r.$$.fragment,o),n=!1},d(o){i.d(o),o&&_(e),qe(r,o)}}}function Yf(t,e,r){let n,{formElement:a}=e,{tag:s="label"}=e,{defaultTitle:i=""}=e;return t.$$set=o=>{"formElement"in o&&r(0,a=o.formElement),"tag"in o&&r(1,s=o.tag),"defaultTitle"in o&&r(2,i=o.defaultTitle)},t.$$.update=()=>{t.$$.dirty&1&&r(3,n=a.required?"fw-bold":!("value"in a)||a.value!==null&&a.value!==void 0&&a.value!==""?"":"text-secondary fw-light")},[a,s,i,n]}class Br extends gt{constructor(e){super(),yt(this,e,Yf,Qf,ht,{formElement:0,tag:1,defaultTitle:2})}}function ds(t){let e,r,n,a;return{c(){e=O("button"),r=G("Reset"),this.h()},l(s){e=T(s,"BUTTON",{class:!0});var i=D(e);r=W(i,"Reset"),i.forEach(_),this.h()},h(){g(e,"class","btn btn-warning me-3")},m(s,i){q(s,e,i),y(e,r),n||(a=oe(e,"click",t[3]),n=!0)},p:kt,d(s){s&&_(e),n=!1,a()}}}function xf(t){let e,r,n,a,s,i,o,l,u,c,f,m,E,d,w,p,v,$;l=new Br({props:{formElement:t[0],tag:"span"}});let k=t[1]!==null&&t[0].property.default!==void 0&&ds(t);const N=t[5].default,j=ao(N,t,t[4],null);return{c(){e=O("div"),r=O("div"),n=O("div"),a=O("div"),s=O("div"),i=O("button"),o=O("div"),Me(l.$$.fragment),u=K(),c=O("div"),k&&k.c(),f=K(),m=O("div"),E=O("div"),j&&j.c(),this.h()},l(U){e=T(U,"DIV",{class:!0});var X=D(e);r=T(X,"DIV",{class:!0});var ee=D(r);n=T(ee,"DIV",{class:!0,id:!0});var ie=D(n);a=T(ie,"DIV",{class:!0});var me=D(a);s=T(me,"DIV",{class:!0});var be=D(s);i=T(be,"BUTTON",{class:!0,type:!0});var H=D(i);o=T(H,"DIV",{class:!0});var re=D(o);Fe(l.$$.fragment,re),re.forEach(_),u=B(H),c=T(H,"DIV",{});var fe=D(c);k&&k.l(fe),fe.forEach(_),H.forEach(_),be.forEach(_),f=B(me),m=T(me,"DIV",{id:!0,class:!0});var Oe=D(m);E=T(Oe,"DIV",{class:!0});var le=D(E);j&&j.l(le),le.forEach(_),Oe.forEach(_),me.forEach(_),ie.forEach(_),ee.forEach(_),X.forEach(_),this.h()},h(){g(o,"class","flex-fill"),g(i,"class","accordion-button"),g(i,"type","button"),ye(i,"collapsed",t[0].collapsed),g(s,"class","accordion-header"),g(E,"class","accordion-body p-1"),g(m,"id",d="collapse-"+t[0].id),g(m,"class","accordion-collapse jschema-collapsing"),ye(m,"collapse",t[0].collapsed),ye(m,"show",!t[0].collapsed),g(a,"class","accordion-item"),g(n,"class","accordion"),g(n,"id",w="accordion-"+t[0].id),g(r,"class","my-2"),g(e,"class","d-flex flex-column p-2")},m(U,X){q(U,e,X),y(e,r),y(r,n),y(n,a),y(a,s),y(s,i),y(i,o),Ue(l,o,null),y(i,u),y(i,c),k&&k.m(c,null),y(a,f),y(a,m),y(m,E),j&&j.m(E,null),p=!0,v||($=oe(i,"click",t[6]),v=!0)},p(U,[X]){const ee={};X&1&&(ee.formElement=U[0]),l.$set(ee),U[1]!==null&&U[0].property.default!==void 0?k?k.p(U,X):(k=ds(U),k.c(),k.m(c,null)):k&&(k.d(1),k=null),(!p||X&1)&&ye(i,"collapsed",U[0].collapsed),j&&j.p&&(!p||X&16)&&so(j,N,U,U[4],p?oo(N,U[4],X,null):io(U[4]),null),(!p||X&1&&d!==(d="collapse-"+U[0].id))&&g(m,"id",d),(!p||X&1)&&ye(m,"collapse",U[0].collapsed),(!p||X&1)&&ye(m,"show",!U[0].collapsed),(!p||X&1&&w!==(w="accordion-"+U[0].id))&&g(n,"id",w)},i(U){p||(ue(l.$$.fragment,U),ue(j,U),p=!0)},o(U){de(l.$$.fragment,U),de(j,U),p=!1},d(U){U&&_(e),qe(l),k&&k.d(),j&&j.d(U),v=!1,$()}}}function ed(t,e,r){let{$$slots:n={},$$scope:a}=e,{formElement:s}=e,{reset:i=null}=e;function o(c){c.target instanceof HTMLElement&&c.target.classList.contains("bi-info-circle")||r(0,s.collapsed=!s.collapsed,s)}function l(c){c.preventDefault(),c.stopPropagation(),i&&i()}const u=c=>o(c);return t.$$set=c=>{"formElement"in c&&r(0,s=c.formElement),"reset"in c&&r(1,i=c.reset),"$$scope"in c&&r(4,a=c.$$scope)},[s,i,o,l,a,n,u]}class Aa extends gt{constructor(e){super(),yt(this,e,ed,xf,ht,{formElement:0,reset:1})}}function hs(t,e,r){const n=t.slice();return n[13]=e[r],n[15]=r,n}function ms(t){let e,r,n,a;function s(){return t[10](t[15])}return{c(){e=O("button"),r=G("Remove"),this.h()},l(i){e=T(i,"BUTTON",{class:!0,type:!0});var o=D(e);r=W(o,"Remove"),o.forEach(_),this.h()},h(){g(e,"class","btn btn-warning"),g(e,"type","button")},m(i,o){q(i,e,o),y(e,r),n||(a=oe(e,"click",s),n=!0)},p(i,o){t=i},d(i){i&&_(e),n=!1,a()}}}function ps(t){let e,r,n,a,s,i,o,l,u;function c(){return t[11](t[15])}function f(){return t[12](t[15])}return{c(){e=O("button"),r=O("i"),a=K(),s=O("button"),i=O("i"),this.h()},l(m){e=T(m,"BUTTON",{class:!0,"aria-label":!0});var E=D(e);r=T(E,"I",{class:!0}),D(r).forEach(_),E.forEach(_),a=B(m),s=T(m,"BUTTON",{class:!0,"aria-label":!0});var d=D(s);i=T(d,"I",{class:!0}),D(i).forEach(_),d.forEach(_),this.h()},h(){g(r,"class","bi-arrow-up"),g(e,"class","btn btn-light"),g(e,"aria-label","Move item up"),e.disabled=n=t[15]===0,g(i,"class","bi-arrow-down"),g(s,"class","btn btn-light"),g(s,"aria-label","Move item down"),s.disabled=o=t[15]===t[0].length-1},m(m,E){q(m,e,E),y(e,r),q(m,a,E),q(m,s,E),y(s,i),l||(u=[oe(e,"click",qa(c)),oe(s,"click",qa(f))],l=!0)},p(m,E){t=m,E&1&&n!==(n=t[15]===0)&&(e.disabled=n),E&1&&o!==(o=t[15]===t[0].length-1)&&(s.disabled=o)},d(m){m&&_(e),m&&_(a),m&&_(s),l=!1,It(u)}}}function vs(t,e){let r,n,a,s,i,o,l,u,c,f=e[3]&&ms(e);i=new ja({props:{formElement:e[13]}});let m=e[0].length>1&&ps(e);return{key:t,first:null,c(){r=O("div"),n=O("div"),f&&f.c(),a=K(),s=O("div"),Me(i.$$.fragment),o=K(),l=O("div"),m&&m.c(),u=K(),this.h()},l(E){r=T(E,"DIV",{class:!0});var d=D(r);n=T(d,"DIV",{class:!0});var w=D(n);f&&f.l(w),w.forEach(_),a=B(d),s=T(d,"DIV",{class:!0});var p=D(s);Fe(i.$$.fragment,p),p.forEach(_),o=B(d),l=T(d,"DIV",{class:!0});var v=D(l);m&&m.l(v),v.forEach(_),u=B(d),d.forEach(_),this.h()},h(){g(n,"class","align-self-center m-2"),g(s,"class","flex-fill"),g(l,"class","align-self-right mt-2 me-2"),g(r,"class","d-flex"),this.first=r},m(E,d){q(E,r,d),y(r,n),f&&f.m(n,null),y(r,a),y(r,s),Ue(i,s,null),y(r,o),y(r,l),m&&m.m(l,null),y(r,u),c=!0},p(E,d){e=E,e[3]?f?f.p(e,d):(f=ms(e),f.c(),f.m(n,null)):f&&(f.d(1),f=null);const w={};d&1&&(w.formElement=e[13]),i.$set(w),e[0].length>1?m?m.p(e,d):(m=ps(e),m.c(),m.m(l,null)):m&&(m.d(1),m=null)},i(E){c||(ue(i.$$.fragment,E),c=!0)},o(E){de(i.$$.fragment,E),c=!1},d(E){E&&_(r),f&&f.d(),qe(i),m&&m.d()}}}function td(t){let e,r,n,a,s,i,o=[],l=new Map,u,c,f,m=t[0];const E=d=>d[13].id;for(let d=0;d<m.length;d+=1){let w=hs(t,m,d),p=E(w);l.set(p,o[d]=vs(p,w))}return{c(){e=O("div"),r=O("button"),n=G("Add argument to list"),s=K(),i=O("div");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=T(d,"DIV",{class:!0});var w=D(e);r=T(w,"BUTTON",{class:!0,type:!0});var p=D(r);n=W(p,"Add argument to list"),p.forEach(_),w.forEach(_),s=B(d),i=T(d,"DIV",{});var v=D(i);for(let $=0;$<o.length;$+=1)o[$].l(v);v.forEach(_),this.h()},h(){g(r,"class","btn btn-primary"),g(r,"type","button"),r.disabled=a=!t[4],g(e,"class","d-flex justify-content-center p-2")},m(d,w){q(d,e,w),y(e,r),y(r,n),q(d,s,w),q(d,i,w);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(i,null);u=!0,c||(f=oe(r,"click",t[9]),c=!0)},p(d,w){(!u||w&16&&a!==(a=!d[4]))&&(r.disabled=a),w&457&&(m=d[0],jt(),o=ei(o,w,E,1,d,m,l,i,ti,vs,null,hs),Rt())},i(d){if(!u){for(let w=0;w<m.length;w+=1)ue(o[w]);u=!0}},o(d){for(let w=0;w<o.length;w+=1)de(o[w]);u=!1},d(d){d&&_(e),d&&_(s),d&&_(i);for(let w=0;w<o.length;w+=1)o[w].d();c=!1,f()}}}function rd(t){let e,r;return e=new Aa({props:{formElement:t[1],reset:t[2],$$slots:{default:[td]},$$scope:{ctx:t}}}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},p(n,[a]){const s={};a&2&&(s.formElement=n[1]),a&4&&(s.reset=n[2]),a&65561&&(s.$$scope={dirty:a,ctx:n}),e.$set(s)},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function nd(t,e,r){let n,a,{formElement:s}=e,{children:i=[]}=e,{reset:o=null}=e;wr(()=>{r(0,i=s.children)});function l(){s.addChild(),r(0,i=s.children)}function u(p){s.removeChild(p),r(0,i=s.children)}function c(p){s.moveChildUp(p),r(0,i=s.children)}function f(p){s.moveChildDown(p),r(0,i=s.children)}const m=()=>l(),E=p=>u(p),d=p=>c(p),w=p=>f(p);return t.$$set=p=>{"formElement"in p&&r(1,s=p.formElement),"children"in p&&r(0,i=p.children),"reset"in p&&r(2,o=p.reset)},t.$$.update=()=>{t.$$.dirty&3&&r(4,n=typeof s.maxItems!="number"||i.length<s.maxItems),t.$$.dirty&3&&r(3,a=!(s.required&&typeof s.minItems=="number"&&i.length<=s.minItems))},[i,s,o,a,n,l,u,c,f,m,E,d,w]}class ad extends gt{constructor(e){super(),yt(this,e,nd,rd,ht,{formElement:1,children:0,reset:2})}}function sd(t){let e,r,n,a,s,i,o,l,u,c,f,m,E;return n=new Br({props:{formElement:t[0],defaultTitle:"String argument"}}),{c(){e=O("div"),r=O("div"),Me(n.$$.fragment),a=K(),s=O("div"),i=O("input"),l=K(),u=O("span"),c=G(t[2]),this.h()},l(d){e=T(d,"DIV",{class:!0});var w=D(e);r=T(w,"DIV",{class:!0});var p=D(r);Fe(n.$$.fragment,p),p.forEach(_),a=B(w),s=T(w,"DIV",{class:!0});var v=D(s);i=T(v,"INPUT",{type:!0,class:!0,id:!0}),l=B(v),u=T(v,"SPAN",{class:!0});var $=D(u);c=W($,t[2]),$.forEach(_),v.forEach(_),w.forEach(_),this.h()},h(){g(r,"class","property-metadata d-flex flex-row align-self-center w-50"),g(i,"type","text"),g(i,"class","form-control"),g(i,"id",o="property-"+t[0].id),ye(i,"is-invalid",t[2]),g(u,"class","invalid-feedback"),g(s,"class","property-input ms-auto w-50 has-validation"),g(e,"class","d-flex align-items-center p-2")},m(d,w){q(d,e,w),y(e,r),Ue(n,r,null),y(e,a),y(e,s),y(s,i),t[4](i),ct(i,t[0].value),y(s,l),y(s,u),y(u,c),f=!0,m||(E=[oe(i,"input",t[5]),oe(i,"input",t[3])],m=!0)},p(d,[w]){const p={};w&1&&(p.formElement=d[0]),n.$set(p),(!f||w&1&&o!==(o="property-"+d[0].id))&&g(i,"id",o),w&1&&i.value!==d[0].value&&ct(i,d[0].value),(!f||w&4)&&ye(i,"is-invalid",d[2]),(!f||w&4)&&He(c,d[2])},i(d){f||(ue(n.$$.fragment,d),f=!0)},o(d){de(n.$$.fragment,d),f=!1},d(d){d&&_(e),qe(n),t[4](null),m=!1,It(E)}}}function id(t,e,r){let{formElement:n}=e,a,s="";function i(){n.notifyChange(),r(2,s=""),n.required&&a.value===""&&r(2,s="Field is required")}function o(u){rr[u?"unshift":"push"](()=>{a=u,r(1,a)})}function l(){n.value=this.value,r(0,n)}return t.$$set=u=>{"formElement"in u&&r(0,n=u.formElement)},[n,a,s,i,o,l]}class od extends gt{constructor(e){super(),yt(this,e,id,sd,ht,{formElement:0})}}function ld(t){let e,r,n,a,s,i,o,l,u,c,f;return n=new Br({props:{formElement:t[0],defaultTitle:"Boolean argument",tag:"span"}}),{c(){e=O("div"),r=O("div"),Me(n.$$.fragment),a=K(),s=O("div"),i=O("div"),o=O("input"),this.h()},l(m){e=T(m,"DIV",{class:!0});var E=D(e);r=T(E,"DIV",{class:!0});var d=D(r);Fe(n.$$.fragment,d),d.forEach(_),a=B(E),s=T(E,"DIV",{class:!0});var w=D(s);i=T(w,"DIV",{class:!0});var p=D(i);o=T(p,"INPUT",{id:!0,class:!0,type:!0,role:!0}),p.forEach(_),w.forEach(_),E.forEach(_),this.h()},h(){g(r,"class","property-metadata d-flex flex-row align-self-center w-50"),g(o,"id",l="property-"+t[0].id),g(o,"class","form-check-input"),g(o,"type","checkbox"),g(o,"role","switch"),g(i,"class","form-check form-switch"),g(s,"class","property-input ms-auto w-25"),g(e,"class","d-flex align-items-center p-2")},m(m,E){q(m,e,E),y(e,r),Ue(n,r,null),y(e,a),y(e,s),y(s,i),y(i,o),o.checked=t[0].value,u=!0,c||(f=[oe(o,"change",t[2]),oe(o,"change",t[1])],c=!0)},p(m,[E]){const d={};E&1&&(d.formElement=m[0]),n.$set(d),(!u||E&1&&l!==(l="property-"+m[0].id))&&g(o,"id",l),E&1&&(o.checked=m[0].value)},i(m){u||(ue(n.$$.fragment,m),u=!0)},o(m){de(n.$$.fragment,m),u=!1},d(m){m&&_(e),qe(n),c=!1,It(f)}}}function cd(t,e,r){let{formElement:n}=e;function a(){n.notifyChange()}function s(){n.value=this.checked,r(0,n)}return t.$$set=i=>{"formElement"in i&&r(0,n=i.formElement)},[n,a,s]}class ud extends gt{constructor(e){super(),yt(this,e,cd,ld,ht,{formElement:0})}}function fd(t){let e,r,n,a,s,i,o,l,u,c,f,m,E,d,w;return n=new Br({props:{formElement:t[0],defaultTitle:"Number argument"}}),{c(){e=O("div"),r=O("div"),Me(n.$$.fragment),a=K(),s=O("div"),i=O("input"),c=K(),f=O("span"),m=G(t[2]),this.h()},l(p){e=T(p,"DIV",{class:!0});var v=D(e);r=T(v,"DIV",{class:!0});var $=D(r);Fe(n.$$.fragment,$),$.forEach(_),a=B(v),s=T(v,"DIV",{class:!0});var k=D(s);i=T(k,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),c=B(k),f=T(k,"SPAN",{class:!0});var N=D(f);m=W(N,t[2]),N.forEach(_),k.forEach(_),v.forEach(_),this.h()},h(){g(r,"class","property-metadata d-flex flex-row align-self-center w-50"),g(i,"type","number"),g(i,"min",o=t[0].min),g(i,"max",l=t[0].max),g(i,"class","form-control"),g(i,"id",u="property-"+t[0].id),ye(i,"is-invalid",t[2]),g(f,"class","invalid-feedback"),g(s,"class","property-input ms-auto w-50 has-validation"),g(e,"class","d-flex align-items-center p-2")},m(p,v){q(p,e,v),y(e,r),Ue(n,r,null),y(e,a),y(e,s),y(s,i),t[4](i),ct(i,t[0].value),y(s,c),y(s,f),y(f,m),E=!0,d||(w=[oe(i,"input",t[5]),oe(i,"input",t[3])],d=!0)},p(p,[v]){const $={};v&1&&($.formElement=p[0]),n.$set($),(!E||v&1&&o!==(o=p[0].min))&&g(i,"min",o),(!E||v&1&&l!==(l=p[0].max))&&g(i,"max",l),(!E||v&1&&u!==(u="property-"+p[0].id))&&g(i,"id",u),v&1&&ri(i.value)!==p[0].value&&ct(i,p[0].value),(!E||v&4)&&ye(i,"is-invalid",p[2]),(!E||v&4)&&He(m,p[2])},i(p){E||(ue(n.$$.fragment,p),E=!0)},o(p){de(n.$$.fragment,p),E=!1},d(p){p&&_(e),qe(n),t[4](null),d=!1,It(w)}}}function dd(t,e,r){let{formElement:n}=e,a,s="";function i(){o(),n.notifyChange()}function o(){if(r(2,s=""),r(0,n.badInput=a.validity.badInput,n),n.badInput){r(2,s="Should be a number");return}if(a.value===""){n.required?r(2,s="Field is required"):r(2,s="");return}const c=parseInt(a.value),f=n.min,m=n.max;if(f!==null&&c<f){r(2,s="Should be greater or equal than "+f);return}if(m!==null&&c>m){r(2,s="Should be lower or equal than "+m);return}r(2,s="")}function l(c){rr[c?"unshift":"push"](()=>{a=c,r(1,a)})}function u(){n.value=ri(this.value),r(0,n)}return t.$$set=c=>{"formElement"in c&&r(0,n=c.formElement)},[n,a,s,i,l,u]}class hd extends gt{constructor(e){super(),yt(this,e,dd,fd,ht,{formElement:0})}}function _s(t,e,r){const n=t.slice();return n[6]=e[r],n}function gs(t){let e,r=t[6]+"",n,a;return{c(){e=O("option"),n=G(r),this.h()},l(s){e=T(s,"OPTION",{});var i=D(e);n=W(i,r),i.forEach(_),this.h()},h(){e.__value=a=t[6],e.value=e.__value},m(s,i){q(s,e,i),y(e,n)},p(s,i){i&1&&r!==(r=s[6]+"")&&He(n,r),i&1&&a!==(a=s[6])&&(e.__value=a,e.value=e.__value)},d(s){s&&_(e)}}}function md(t){let e,r,n,a,s,i,o,l,u,c,f,m,E,d,w;n=new Br({props:{formElement:t[0],defaultTitle:"Enum argument"}});let p=t[0].options,v=[];for(let $=0;$<p.length;$+=1)v[$]=gs(_s(t,p,$));return{c(){e=O("div"),r=O("div"),Me(n.$$.fragment),a=K(),s=O("div"),i=O("select"),o=O("option"),l=G("Select...");for(let $=0;$<v.length;$+=1)v[$].c();c=K(),f=O("span"),m=G(t[2]),this.h()},l($){e=T($,"DIV",{class:!0});var k=D(e);r=T(k,"DIV",{class:!0});var N=D(r);Fe(n.$$.fragment,N),N.forEach(_),a=B(k),s=T(k,"DIV",{class:!0});var j=D(s);i=T(j,"SELECT",{class:!0,id:!0});var U=D(i);o=T(U,"OPTION",{});var X=D(o);l=W(X,"Select..."),X.forEach(_);for(let ie=0;ie<v.length;ie+=1)v[ie].l(U);U.forEach(_),c=B(j),f=T(j,"SPAN",{class:!0});var ee=D(f);m=W(ee,t[2]),ee.forEach(_),j.forEach(_),k.forEach(_),this.h()},h(){g(r,"class","property-metadata d-flex flex-row align-self-center w-50"),o.__value=null,o.value=o.__value,g(i,"class","form-control"),g(i,"id",u="property-"+t[0].id),t[0].value===void 0&&ni(()=>t[5].call(i)),ye(i,"is-invalid",t[2]),g(f,"class","invalid-feedback"),g(s,"class","property-input ms-auto w-50 has-validation"),g(e,"class","d-flex align-items-center p-2")},m($,k){q($,e,k),y(e,r),Ue(n,r,null),y(e,a),y(e,s),y(s,i),y(i,o),y(o,l);for(let N=0;N<v.length;N+=1)v[N]&&v[N].m(i,null);t[4](i),dn(i,t[0].value,!0),y(s,c),y(s,f),y(f,m),E=!0,d||(w=[oe(i,"change",t[5]),oe(i,"change",t[3]),oe(i,"input",t[3])],d=!0)},p($,[k]){const N={};if(k&1&&(N.formElement=$[0]),n.$set(N),k&1){p=$[0].options;let j;for(j=0;j<p.length;j+=1){const U=_s($,p,j);v[j]?v[j].p(U,k):(v[j]=gs(U),v[j].c(),v[j].m(i,null))}for(;j<v.length;j+=1)v[j].d(1);v.length=p.length}(!E||k&1&&u!==(u="property-"+$[0].id))&&g(i,"id",u),k&1&&dn(i,$[0].value),(!E||k&4)&&ye(i,"is-invalid",$[2]),(!E||k&4)&&He(m,$[2])},i($){E||(ue(n.$$.fragment,$),E=!0)},o($){de(n.$$.fragment,$),E=!1},d($){$&&_(e),qe(n),En(v,$),t[4](null),d=!1,It(w)}}}function pd(t,e,r){let{formElement:n}=e,a,s="";function i(){n.notifyChange(),r(2,s=""),n.required&&a.value==="null"&&r(2,s="Field is required")}function o(u){rr[u?"unshift":"push"](()=>{a=u,r(1,a)})}function l(){n.value=ai(this),r(0,n)}return t.$$set=u=>{"formElement"in u&&r(0,n=u.formElement)},[n,a,s,i,o,l]}class vd extends gt{constructor(e){super(),yt(this,e,pd,md,ht,{formElement:0})}}function ys(t,e,r){const n=t.slice();return n[5]=e[r],n[7]=r,n}function bs(t){let e;function r(s,i){return s[0].length>0?gd:_d}let n=r(t),a=n(t);return{c(){a.c(),e=ut()},l(s){a.l(s),e=ut()},m(s,i){a.m(s,i),q(s,e,i)},p(s,i){n===(n=r(s))&&a?a.p(s,i):(a.d(1),a=n(s),a&&(a.c(),a.m(e.parentNode,e)))},d(s){a.d(s),s&&_(e)}}}function _d(t){let e,r,n,a;return{c(){e=O("button"),r=G("Add tuple"),this.h()},l(s){e=T(s,"BUTTON",{class:!0,type:!0});var i=D(e);r=W(i,"Add tuple"),i.forEach(_),this.h()},h(){g(e,"class","btn btn-primary"),g(e,"type","button")},m(s,i){q(s,e,i),y(e,r),n||(a=oe(e,"click",t[3]),n=!0)},p:kt,d(s){s&&_(e),n=!1,a()}}}function gd(t){let e,r,n,a;return{c(){e=O("button"),r=G("Remove tuple"),this.h()},l(s){e=T(s,"BUTTON",{class:!0,type:!0});var i=D(e);r=W(i,"Remove tuple"),i.forEach(_),this.h()},h(){g(e,"class","btn btn-primary"),g(e,"type","button")},m(s,i){q(s,e,i),y(e,r),n||(a=oe(e,"click",t[4]),n=!0)},p:kt,d(s){s&&_(e),n=!1,a()}}}function Es(t,e){let r,n,a,s,i;return a=new ja({props:{formElement:e[5]}}),{key:t,first:null,c(){r=O("div"),n=O("div"),Me(a.$$.fragment),s=K(),this.h()},l(o){r=T(o,"DIV",{class:!0});var l=D(r);n=T(l,"DIV",{class:!0});var u=D(n);Fe(a.$$.fragment,u),u.forEach(_),s=B(l),l.forEach(_),this.h()},h(){g(n,"class","flex-fill"),g(r,"class","d-flex"),this.first=r},m(o,l){q(o,r,l),y(r,n),Ue(a,n,null),y(r,s),i=!0},p(o,l){e=o;const u={};l&1&&(u.formElement=e[5]),a.$set(u)},i(o){i||(ue(a.$$.fragment,o),i=!0)},o(o){de(a.$$.fragment,o),i=!1},d(o){o&&_(r),qe(a)}}}function yd(t){let e,r,n,a=[],s=new Map,i,o=!t[1].required&&bs(t),l=t[0];const u=c=>c[5].id;for(let c=0;c<l.length;c+=1){let f=ys(t,l,c),m=u(f);s.set(m,a[c]=Es(m,f))}return{c(){e=O("div"),o&&o.c(),r=K(),n=O("div");for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=T(c,"DIV",{class:!0});var f=D(e);o&&o.l(f),f.forEach(_),r=B(c),n=T(c,"DIV",{});var m=D(n);for(let E=0;E<a.length;E+=1)a[E].l(m);m.forEach(_),this.h()},h(){g(e,"class","d-flex justify-content-center p-2")},m(c,f){q(c,e,f),o&&o.m(e,null),q(c,r,f),q(c,n,f);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(n,null);i=!0},p(c,f){c[1].required?o&&(o.d(1),o=null):o?o.p(c,f):(o=bs(c),o.c(),o.m(e,null)),f&1&&(l=c[0],jt(),a=ei(a,f,u,1,c,l,s,n,ti,Es,null,ys),Rt())},i(c){if(!i){for(let f=0;f<l.length;f+=1)ue(a[f]);i=!0}},o(c){for(let f=0;f<a.length;f+=1)de(a[f]);i=!1},d(c){c&&_(e),o&&o.d(),c&&_(r),c&&_(n);for(let f=0;f<a.length;f+=1)a[f].d()}}}function bd(t){let e,r;return e=new Aa({props:{formElement:t[1],reset:t[2],$$slots:{default:[yd]},$$scope:{ctx:t}}}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},p(n,[a]){const s={};a&2&&(s.formElement=n[1]),a&4&&(s.reset=n[2]),a&259&&(s.$$scope={dirty:a,ctx:n}),e.$set(s)},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function Ed(t,e,r){let{formElement:n}=e,{children:a=[]}=e,{reset:s=null}=e;wr(()=>{r(0,a=n.children)});function i(){n.addTuple(),r(0,a=n.children)}function o(){n.removeTuple(),r(0,a=n.children)}return t.$$set=l=>{"formElement"in l&&r(1,n=l.formElement),"children"in l&&r(0,a=l.children),"reset"in l&&r(2,s=l.reset)},[a,n,s,i,o]}class $d extends gt{constructor(e){super(),yt(this,e,Ed,bd,ht,{formElement:1,children:0,reset:2})}}function wd(t){let e,r,n=t[0].type+"",a;return{c(){e=O("p"),r=G("Unsupported property type "),a=G(n)},l(s){e=T(s,"P",{});var i=D(e);r=W(i,"Unsupported property type "),a=W(i,n),i.forEach(_)},m(s,i){q(s,e,i),y(e,r),y(e,a)},p(s,i){i&1&&n!==(n=s[0].type+"")&&He(a,n)},i:kt,o:kt,d(s){s&&_(e)}}}function Sd(t){let e,r;return e=new $d({props:{formElement:t[0],reset:t[1]}}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},p(n,a){const s={};a&1&&(s.formElement=n[0]),a&2&&(s.reset=n[1]),e.$set(s)},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function kd(t){let e,r;return e=new ad({props:{formElement:t[0],reset:t[1]}}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},p(n,a){const s={};a&1&&(s.formElement=n[0]),a&2&&(s.reset=n[1]),e.$set(s)},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function Pd(t){let e,r;return e=new Aa({props:{formElement:t[0],reset:t[1],$$slots:{default:[Dd]},$$scope:{ctx:t}}}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},p(n,a){const s={};a&1&&(s.formElement=n[0]),a&2&&(s.reset=n[1]),a&5&&(s.$$scope={dirty:a,ctx:n}),e.$set(s)},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function Nd(t){let e,r;return e=new vd({props:{formElement:t[0]}}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},p(n,a){const s={};a&1&&(s.formElement=n[0]),e.$set(s)},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function Id(t){let e,r;return e=new ud({props:{formElement:t[0]}}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},p(n,a){const s={};a&1&&(s.formElement=n[0]),e.$set(s)},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function Od(t){let e,r;return e=new hd({props:{formElement:t[0]}}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},p(n,a){const s={};a&1&&(s.formElement=n[0]),e.$set(s)},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function Td(t){let e,r;return e=new od({props:{formElement:t[0]}}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},p(n,a){const s={};a&1&&(s.formElement=n[0]),e.$set(s)},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function Dd(t){let e,r;return e=new to({props:{formElement:t[0]}}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},p(n,a){const s={};a&1&&(s.formElement=n[0]),e.$set(s)},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function Cd(t){let e,r,n,a;const s=[Td,Od,Id,Nd,Pd,kd,Sd,wd],i=[];function o(l,u){return l[0].type==="string"?0:l[0].type==="number"?1:l[0].type==="boolean"?2:l[0].type==="enum"?3:l[0].type==="object"?4:l[0].type==="array"?5:l[0].type==="tuple"?6:7}return e=o(t),r=i[e]=s[e](t),{c(){r.c(),n=ut()},l(l){r.l(l),n=ut()},m(l,u){i[e].m(l,u),q(l,n,u),a=!0},p(l,[u]){let c=e;e=o(l),e===c?i[e].p(l,u):(jt(),de(i[c],1,1,()=>{i[c]=null}),Rt(),r=i[e],r?r.p(l,u):(r=i[e]=s[e](l),r.c()),ue(r,1),r.m(n.parentNode,n))},i(l){a||(ue(r),a=!0)},o(l){de(r),a=!1},d(l){i[e].d(l),l&&_(n)}}}function Ad(t,e,r){let{formElement:n}=e,{reset:a=null}=e;return t.$$set=s=>{"formElement"in s&&r(0,n=s.formElement),"reset"in s&&r(1,a=s.reset)},[n,a]}class ja extends gt{constructor(e){super(),yt(this,e,Ad,Cd,ht,{formElement:0,reset:1})}}function $s(t,e,r){const n=t.slice();return n[11]=e[r],n[13]=r,n}function ws(t){let e,r,n,a,s,i,o,l,u,c,f,m=t[4]&&Ss(t);return{c(){e=O("div"),r=O("form"),n=O("div"),a=O("div"),s=O("input"),i=K(),o=O("button"),l=G("Add property"),u=K(),m&&m.c(),this.h()},l(E){e=T(E,"DIV",{class:!0});var d=D(e);r=T(d,"FORM",{class:!0});var w=D(r);n=T(w,"DIV",{class:!0});var p=D(n);a=T(p,"DIV",{class:!0});var v=D(a);s=T(v,"INPUT",{type:!0,placeholder:!0,class:!0}),i=B(v),o=T(v,"BUTTON",{class:!0,type:!0});var $=D(o);l=W($,"Add property"),$.forEach(_),u=B(v),m&&m.l(v),v.forEach(_),p.forEach(_),w.forEach(_),d.forEach(_),this.h()},h(){g(s,"type","text"),g(s,"placeholder","Key"),g(s,"class","form-control"),ye(s,"is-invalid",t[4]),g(o,"class","btn btn-primary"),g(o,"type","button"),g(a,"class","input-group"),ye(a,"has-validation",t[4]),g(n,"class","col-lg-6 offset-lg-3 mb-1"),g(r,"class","row row-cols-auto g-3 align-items-center p-2 flex-grow-1"),g(e,"class","d-flex justify-content-center")},m(E,d){q(E,e,d),y(e,r),y(r,n),y(n,a),y(a,s),ct(s,t[3]),y(a,i),y(a,o),y(o,l),y(a,u),m&&m.m(a,null),c||(f=[oe(s,"input",t[8]),oe(o,"click",t[5])],c=!0)},p(E,d){d&8&&s.value!==E[3]&&ct(s,E[3]),d&16&&ye(s,"is-invalid",E[4]),E[4]?m?m.p(E,d):(m=Ss(E),m.c(),m.m(a,null)):m&&(m.d(1),m=null),d&16&&ye(a,"has-validation",E[4])},d(E){E&&_(e),m&&m.d(),c=!1,It(f)}}}function Ss(t){let e,r;return{c(){e=O("div"),r=G(t[4]),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=D(e);r=W(a,t[4]),a.forEach(_),this.h()},h(){g(e,"class","invalid-feedback")},m(n,a){q(n,e,a),y(e,r)},p(n,a){a&16&&He(r,n[4])},d(n){n&&_(e)}}}function ks(t){let e,r,n,a;function s(){return t[9](t[11])}return{c(){e=O("button"),r=G("Remove Property Block"),this.h()},l(i){e=T(i,"BUTTON",{class:!0,type:!0});var o=D(e);r=W(o,"Remove Property Block"),o.forEach(_),this.h()},h(){g(e,"class","btn btn-danger w-100"),g(e,"type","button")},m(i,o){q(i,e,o),y(e,r),n||(a=oe(e,"click",s),n=!0)},p(i,o){t=i},d(i){i&&_(e),n=!1,a()}}}function Ps(t){let e,r,n,a,s,i,o,l=t[11].removable&&ks(t);function u(){return t[10](t[13])}return a=new ja({props:{formElement:t[11],reset:t[1]?u:null}}),{c(){e=O("div"),l&&l.c(),r=K(),n=O("div"),Me(a.$$.fragment),i=K(),this.h()},l(c){e=T(c,"DIV",{class:!0});var f=D(e);l&&l.l(f),r=B(f),n=T(f,"DIV",{class:!0,id:!0});var m=D(n);Fe(a.$$.fragment,m),m.forEach(_),i=B(f),f.forEach(_),this.h()},h(){g(n,"class","d-flex flex-column properties-block"),g(n,"id",s=t[11].id+"-wrapper"),g(e,"class","property-block svelte-en10qk")},m(c,f){q(c,e,f),l&&l.m(e,null),y(e,r),y(e,n),Ue(a,n,null),y(e,i),o=!0},p(c,f){t=c,t[11].removable?l?l.p(t,f):(l=ks(t),l.c(),l.m(e,r)):l&&(l.d(1),l=null);const m={};f&4&&(m.formElement=t[11]),f&2&&(m.reset=t[1]?u:null),a.$set(m),(!o||f&4&&s!==(s=t[11].id+"-wrapper"))&&g(n,"id",s)},i(c){o||(ue(a.$$.fragment,c),o=!0)},o(c){de(a.$$.fragment,c),o=!1},d(c){c&&_(e),l&&l.d(),qe(a)}}}function Ns(t){let e,r,n=t[2],a=[];for(let i=0;i<n.length;i+=1)a[i]=Ps($s(t,n,i));const s=i=>de(a[i],1,1,()=>{a[i]=null});return{c(){for(let i=0;i<a.length;i+=1)a[i].c();e=ut()},l(i){for(let o=0;o<a.length;o+=1)a[o].l(i);e=ut()},m(i,o){for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(i,o);q(i,e,o),r=!0},p(i,o){if(o&198){n=i[2];let l;for(l=0;l<n.length;l+=1){const u=$s(i,n,l);a[l]?(a[l].p(u,o),ue(a[l],1)):(a[l]=Ps(u),a[l].c(),ue(a[l],1),a[l].m(e.parentNode,e))}for(jt(),l=n.length;l<a.length;l+=1)s(l);Rt()}},i(i){if(!r){for(let o=0;o<n.length;o+=1)ue(a[o]);r=!0}},o(i){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)de(a[o]);r=!1},d(i){En(a,i),i&&_(e)}}}function jd(t){let e,r=t[2],n,a,s=t[0].additionalProperties&&ws(t),i=Ns(t);return{c(){s&&s.c(),e=K(),i.c(),n=ut()},l(o){s&&s.l(o),e=B(o),i.l(o),n=ut()},m(o,l){s&&s.m(o,l),q(o,e,l),i.m(o,l),q(o,n,l),a=!0},p(o,[l]){o[0].additionalProperties?s?s.p(o,l):(s=ws(o),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),l&4&&ht(r,r=o[2])?(jt(),de(i,1,1,kt),Rt(),i=Ns(o),i.c(),ue(i,1),i.m(n.parentNode,n)):i.p(o,l)},i(o){a||(ue(i),a=!0)},o(o){de(i),a=!1},d(o){s&&s.d(o),o&&_(e),o&&_(n),i.d(o)}}}function Rd(t,e,r){let{formElement:n}=e,{isRoot:a=!1}=e,s=[];wr(()=>{r(2,s=n.children)});let i="",o="";function l(){try{r(4,o=""),n.addChild(i.trim()),r(2,s=n.children),r(3,i="")}catch(d){r(4,o=d.message)}}function u(d){n.removeChild(d),r(2,s=n.children)}function c(d){n.resetChild(d),r(2,s=n.children)}function f(){i=this.value,r(3,i)}const m=d=>u(d.key),E=d=>c(d);return t.$$set=d=>{"formElement"in d&&r(0,n=d.formElement),"isRoot"in d&&r(1,a=d.isRoot)},[n,a,s,i,o,l,u,c,f,m,E]}class to extends gt{constructor(e){super(),yt(this,e,Rd,jd,ht,{formElement:0,isRoot:1})}}function Is(t){let e=t[1],r,n,a=Os(t);return{c(){a.c(),r=ut()},l(s){a.l(s),r=ut()},m(s,i){a.m(s,i),q(s,r,i),n=!0},p(s,i){i&2&&ht(e,e=s[1])?(jt(),de(a,1,1,kt),Rt(),a=Os(s),a.c(),ue(a,1),a.m(r.parentNode,r)):a.p(s,i)},i(s){n||(ue(a),n=!0)},o(s){de(a),n=!1},d(s){s&&_(r),a.d(s)}}}function Os(t){let e,r,n;return r=new to({props:{formElement:t[1].root,isRoot:!0}}),{c(){e=O("div"),Me(r.$$.fragment),this.h()},l(a){e=T(a,"DIV",{id:!0});var s=D(e);Fe(r.$$.fragment,s),s.forEach(_),this.h()},h(){g(e,"id",t[0])},m(a,s){q(a,e,s),Ue(r,e,null),n=!0},p(a,s){const i={};s&2&&(i.formElement=a[1].root),r.$set(i),(!n||s&1)&&g(e,"id",a[0])},i(a){n||(ue(r.$$.fragment,a),n=!0)},o(a){de(r.$$.fragment,a),n=!1},d(a){a&&_(e),qe(r)}}}function Vd(t){let e,r,n=t[1]&&Is(t);return{c(){n&&n.c(),e=ut()},l(a){n&&n.l(a),e=ut()},m(a,s){n&&n.m(a,s),q(a,e,s),r=!0},p(a,[s]){a[1]?n?(n.p(a,s),s&2&&ue(n,1)):(n=Is(a),n.c(),ue(n,1),n.m(e.parentNode,e)):n&&(jt(),de(n,1,1,()=>{n=null}),Rt())},i(a){r||(ue(n),r=!0)},o(a){de(n),r=!1},d(a){n&&n.d(a),a&&_(e)}}}function Md(t,e,r){const n=si();let{schema:a}=e,{schemaData:s}=e,{propertiesToIgnore:i=[]}=e,{componentId:o}=e,l;wr(()=>{f()});function u(){return l==null?void 0:l.getFormData()}function c(){for(const m of document.querySelectorAll(`#${o} input, #${o} select`))m.dispatchEvent(new Event("input"));l==null||l.validate()}function f(){if(a)try{r(1,l=new Lf(a,n,i,s))}catch(m){console.error(m),r(1,l=void 0)}else r(1,l=void 0)}return t.$$set=m=>{"schema"in m&&r(2,a=m.schema),"schemaData"in m&&r(3,s=m.schemaData),"propertiesToIgnore"in m&&r(4,i=m.propertiesToIgnore),"componentId"in m&&r(0,o=m.componentId)},t.$$.update=()=>{t.$$.dirty&28&&(a||s||i)&&f()},[o,l,a,s,i,u,c]}class Ra extends gt{constructor(e){super(),yt(this,e,Md,Vd,ht,{schema:2,schemaData:3,propertiesToIgnore:4,componentId:0,getArguments:5,validateArguments:6})}get getArguments(){return this.$$.ctx[5]}get validateArguments(){return this.$$.ctx[6]}}const Fd="CellvoyagerToOmeZarrInit",Ud="object",qd={zarr_urls:{title:"Zarr Urls",type:"array",items:{type:"string"},description:"List of paths or urls to the individual OME-Zarr image to be processed. Not used by the converter task. (standard argument for Fractal tasks, managed by Fractal server)."},zarr_dir:{title:"Zarr Dir",type:"string",description:"path of the directory where the new OME-Zarrs will be created. (standard argument for Fractal tasks, managed by Fractal server)."},image_dirs:{title:"Image Dirs",type:"array",items:{type:"string"},description:"list of paths to the folders that contains the Cellvoyager image files. Each entry is a path to a folder that contains the image files themselves for a multiwell plate and the MeasurementData & MeasurementDetail metadata files."},allowed_channels:{title:"Allowed Channels",type:"array",items:{$ref:"#/definitions/OmeroChannel"},description:"A list of `OmeroChannel` s, where each channel must include the `wavelength_id` attribute and where the `wavelength_id` values must be unique across the list."},image_glob_patterns:{title:"Image Glob Patterns",type:"array",items:{type:"string"},description:'If specified, only parse images with filenames that match with all these patterns. Patterns must be defined as in https://docs.python.org/3/library/fnmatch.html, Example: `image_glob_pattern=["*_B03_*"]` => only process well B03 `image_glob_pattern=["*_C09_*", "*F016*", "*Z[0-5][0-9]C*"]` => only process well C09, field of view 16 and Z planes 0-59.'},num_levels:{title:"Num Levels",default:5,type:"integer",description:"Number of resolution-pyramid levels. If set to `5`, there will be the full-resolution level and 4 levels of downsampled images."},coarsening_xy:{title:"Coarsening Xy",default:2,type:"integer",description:"Linear coarsening factor between subsequent levels. If set to `2`, level 1 is 2x downsampled, level 2 is 4x downsampled etc."},image_extension:{title:"Image Extension",default:"tif",type:"string",description:'Filename extension of images (e.g. `"tif"` or `"png"`)'},metadata_table_file:{title:"Metadata Table File",type:"string",description:"If `None`, parse Yokogawa metadata from mrf/mlf files in the input_path folder; else, the full path to a csv file containing the parsed metadata table."},overwrite:{title:"Overwrite",default:!1,type:"boolean",description:"If `True`, overwrite the task output."}},Ld=["zarr_urls","zarr_dir","image_dirs","allowed_channels"],zd=!1,Jd={Window:{title:"Window",description:"Custom class for Omero-channel window, based on OME-NGFF v0.4.",type:"object",properties:{min:{title:"Min",type:"integer",description:"Do not change. It will be set to `0` by default."},max:{title:"Max",type:"integer",description:"Do not change. It will be set according to bit-depth of the images by default (e.g. 65535 for 16 bit images)."},start:{title:"Start",type:"integer",description:"Lower-bound rescaling value for visualization."},end:{title:"End",type:"integer",description:"Upper-bound rescaling value for visualization."}},required:["start","end"]},OmeroChannel:{title:"OmeroChannel",description:"Custom class for Omero channels, based on OME-NGFF v0.4.",type:"object",properties:{wavelength_id:{title:"Wavelength Id",type:"string",description:"Unique ID for the channel wavelength, e.g. `A01_C01`."},index:{title:"Index",type:"integer",description:"Do not change. For internal use only."},label:{title:"Label",type:"string",description:"Name of the channel."},window:{$ref:"#/definitions/Window",title:"Window",description:"Optional `Window` object to set default display settings for napari."},color:{title:"Color",type:"string",description:"Optional hex colormap to display the channel in napari (it must be of length 6, e.g. `00FFFF`)."},active:{title:"Active",default:!0,type:"boolean",description:"Should this channel be shown in the viewer?"},coefficient:{title:"Coefficient",default:1,type:"integer",description:"Do not change. Omero-channel attribute."},inverted:{title:"Inverted",default:!1,type:"boolean",description:"Do not change. Omero-channel attribute."}},required:["wavelength_id"]}},Kd={title:Fd,type:Ud,properties:qd,required:Ld,additionalProperties:zd,definitions:Jd};function Ts(t){let e,r,n;return{c(){e=O("div"),r=O("pre"),n=G(t[7]),this.h()},l(a){e=T(a,"DIV",{class:!0});var s=D(e);r=T(s,"PRE",{});var i=D(r);n=W(i,t[7]),i.forEach(_),s.forEach(_),this.h()},h(){g(e,"class","alert alert-danger")},m(a,s){q(a,e,s),y(e,r),y(r,n)},p(a,s){s&128&&He(n,a[7])},d(a){a&&_(e)}}}function Ds(t){let e,r;return{c(){e=O("div"),r=G("Data is valid"),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=D(e);r=W(a,"Data is valid"),a.forEach(_),this.h()},h(){g(e,"class","alert alert-success")},m(n,a){q(n,e,a),y(e,r)},d(n){n&&_(e)}}}function Cs(t){let e,r,n={componentId:"json-schema-sandbox",schema:t[0],schemaData:t[1],propertiesToIgnore:t[9]};return e=new Ra({props:n}),t[17](e),e.$on("change",t[14]),{c(){Me(e.$$.fragment)},l(a){Fe(e.$$.fragment,a)},m(a,s){Ue(e,a,s),r=!0},p(a,s){const i={};s&1&&(i.schema=a[0]),s&2&&(i.schemaData=a[1]),s&512&&(i.propertiesToIgnore=a[9]),e.$set(i)},i(a){r||(ue(e.$$.fragment,a),r=!0)},o(a){de(e.$$.fragment,a),r=!1},d(a){t[17](null),qe(e,a)}}}function Bd(t){let e,r,n,a,s,i,o,l,u,c,f,m,E,d,w,p,v,$,k,N,j,U,X,ee,ie,me,be,H,re,fe,Oe,le,Le,Ie,Se,z,A,F,C,h,S,M,L,J,Z=t[7]&&Ts(t),Y=t[8]&&Ds(),ce=t[0]&&Cs(t);return{c(){e=O("h1"),r=G("Sandbox page for JSON Schema"),n=K(),a=O("p"),s=G("This is a test page for the JSON Schema component"),i=K(),o=O("div"),l=O("div"),u=O("div"),c=O("div"),f=O("button"),m=G("Load example"),E=K(),d=O("div"),w=O("div"),p=O("label"),v=G("JSON Schema"),$=K(),k=O("textarea"),N=K(),j=O("span"),U=G(t[4]),X=K(),ee=O("div"),ie=O("div"),me=O("label"),be=G("Initial JSON data"),H=K(),re=O("textarea"),fe=K(),Oe=O("span"),le=G(t[5]),Le=K(),Ie=O("div"),Se=O("div"),Z&&Z.c(),z=K(),Y&&Y.c(),A=K(),F=O("button"),C=G("Validate"),h=K(),S=O("div"),ce&&ce.c(),this.h()},l(se){e=T(se,"H1",{class:!0});var Te=D(e);r=W(Te,"Sandbox page for JSON Schema"),Te.forEach(_),n=B(se),a=T(se,"P",{});var Ae=D(a);s=W(Ae,"This is a test page for the JSON Schema component"),Ae.forEach(_),i=B(se),o=T(se,"DIV",{class:!0});var ke=D(o);l=T(ke,"DIV",{class:!0});var Ce=D(l);u=T(Ce,"DIV",{class:!0});var he=D(u);c=T(he,"DIV",{class:!0});var ge=D(c);f=T(ge,"BUTTON",{class:!0});var ze=D(f);m=W(ze,"Load example"),ze.forEach(_),ge.forEach(_),he.forEach(_),E=B(Ce),d=T(Ce,"DIV",{class:!0});var mt=D(d);w=T(mt,"DIV",{class:!0});var ft=D(w);p=T(ft,"LABEL",{for:!0});var De=D(p);v=W(De,"JSON Schema"),De.forEach(_),$=B(ft),k=T(ft,"TEXTAREA",{id:!0,class:!0,rows:!0}),D(k).forEach(_),N=B(ft),j=T(ft,"SPAN",{class:!0});var Xe=D(j);U=W(Xe,t[4]),Xe.forEach(_),ft.forEach(_),mt.forEach(_),X=B(Ce),ee=T(Ce,"DIV",{class:!0});var tt=D(ee);ie=T(tt,"DIV",{class:!0});var Ze=D(ie);me=T(Ze,"LABEL",{for:!0});var pt=D(me);be=W(pt,"Initial JSON data"),pt.forEach(_),H=B(Ze),re=T(Ze,"TEXTAREA",{id:!0,class:!0,rows:!0}),D(re).forEach(_),fe=B(Ze),Oe=T(Ze,"SPAN",{class:!0});var rt=D(Oe);le=W(rt,t[5]),rt.forEach(_),Ze.forEach(_),tt.forEach(_),Le=B(Ce),Ie=T(Ce,"DIV",{class:!0});var nt=D(Ie);Se=T(nt,"DIV",{class:!0});var Je=D(Se);Z&&Z.l(Je),z=B(Je),Y&&Y.l(Je),A=B(Je),F=T(Je,"BUTTON",{class:!0});var ot=D(F);C=W(ot,"Validate"),ot.forEach(_),Je.forEach(_),nt.forEach(_),Ce.forEach(_),h=B(ke),S=T(ke,"DIV",{class:!0});var Ge=D(S);ce&&ce.l(Ge),Ge.forEach(_),ke.forEach(_),this.h()},h(){g(e,"class","fw-light"),g(f,"class","btn btn-outline-primary float-end"),g(c,"class","col"),g(u,"class","row"),g(p,"for","json-schema"),g(k,"id","json-schema"),g(k,"class","form-control"),g(k,"rows","10"),ye(k,"is-invalid",t[4]),g(j,"class","invalid-feedback"),g(w,"class","col"),g(d,"class","row has-validation mt-2 mb-2"),g(me,"for","jdata"),g(re,"id","jdata"),g(re,"class","form-control"),g(re,"rows","10"),ye(re,"is-invalid",t[5]),g(Oe,"class","invalid-feedback"),g(ie,"class","col"),g(ee,"class","row has-validation mt-3 mb-2"),g(F,"class","btn btn-primary"),g(Se,"class","col"),g(Ie,"class","row mt-3 mb-2"),g(l,"class","col-lg-6 mt-3"),g(S,"class","col-lg-6"),g(o,"class","row")},m(se,Te){q(se,e,Te),y(e,r),q(se,n,Te),q(se,a,Te),y(a,s),q(se,i,Te),q(se,o,Te),y(o,l),y(l,u),y(u,c),y(c,f),y(f,m),y(l,E),y(l,d),y(d,w),y(w,p),y(p,v),y(w,$),y(w,k),ct(k,t[2]),y(w,N),y(w,j),y(j,U),y(l,X),y(l,ee),y(ee,ie),y(ie,me),y(me,be),y(ie,H),y(ie,re),ct(re,t[3]),y(ie,fe),y(ie,Oe),y(Oe,le),y(l,Le),y(l,Ie),y(Ie,Se),Z&&Z.m(Se,null),y(Se,z),Y&&Y.m(Se,null),y(Se,A),y(Se,F),y(F,C),y(o,h),y(o,S),ce&&ce.m(S,null),M=!0,L||(J=[oe(f,"click",t[13]),oe(k,"input",t[15]),oe(k,"input",t[10]),oe(re,"input",t[16]),oe(re,"input",t[11]),oe(F,"click",t[12])],L=!0)},p(se,[Te]){Te&4&&ct(k,se[2]),(!M||Te&16)&&ye(k,"is-invalid",se[4]),(!M||Te&16)&&He(U,se[4]),Te&8&&ct(re,se[3]),(!M||Te&32)&&ye(re,"is-invalid",se[5]),(!M||Te&32)&&He(le,se[5]),se[7]?Z?Z.p(se,Te):(Z=Ts(se),Z.c(),Z.m(Se,z)):Z&&(Z.d(1),Z=null),se[8]?Y||(Y=Ds(),Y.c(),Y.m(Se,A)):Y&&(Y.d(1),Y=null),se[0]?ce?(ce.p(se,Te),Te&1&&ue(ce,1)):(ce=Cs(se),ce.c(),ue(ce,1),ce.m(S,null)):ce&&(jt(),de(ce,1,1,()=>{ce=null}),Rt())},i(se){M||(ue(ce),M=!0)},o(se){de(ce),M=!1},d(se){se&&_(e),se&&_(n),se&&_(a),se&&_(i),se&&_(o),Z&&Z.d(),Y&&Y.d(),ce&&ce.d(),L=!1,It(J)}}}function Hd(t,e,r){let n,a,s,i="",o="",l="",u="",c;function f(){if(r(7,E=""),r(4,l=""),i===""){r(0,a=void 0);return}try{r(0,a=JSON.parse(i)),v()}catch{r(0,a=void 0),r(4,l="Invalid JSON");return}new br().loadSchema(a)||(r(0,a=void 0),r(4,l="Invalid JSON Schema"))}function m(){r(7,E=""),r(5,u="");try{r(1,s=JSON.parse(o))}catch{r(1,s=void 0),r(5,u="Invalid JSON")}}let E="",d=!1;function w(){try{r(7,E=""),r(8,d=!1),c==null||c.validateArguments(),r(8,d=!0)}catch(X){r(7,E=Kn(X))}}function p(){r(2,i=JSON.stringify(Kd,null,2)),f()}async function v(){await jr(),c&&k(c.getArguments())}function $({detail:X}){k(X.value)}function k(X){const ee=xt(X),ie=JSON.stringify($n(ee),null,2);ie!==o&&r(3,o=ie)}function N(){i=this.value,r(2,i)}function j(){o=this.value,r(3,o)}function U(X){rr[X?"unshift":"push"](()=>{c=X,r(6,c)})}return r(9,n=pn(!1)),[a,s,i,o,l,u,c,E,d,n,f,m,w,p,$,N,j,U]}class Gd extends gt{constructor(e){super(),yt(this,e,Hd,Bd,ht,{})}}function As(t,e,r){const n=t.slice();return n[42]=e[r],n[44]=r,n}function js(t){let e,r,n;return{c(){e=O("div"),r=O("pre"),n=G(t[16]),this.h()},l(a){e=T(a,"DIV",{class:!0});var s=D(e);r=T(s,"PRE",{});var i=D(r);n=W(i,t[16]),i.forEach(_),s.forEach(_),this.h()},h(){g(e,"class","alert alert-danger")},m(a,s){q(a,e,s),y(e,r),y(r,n)},p(a,s){s[0]&65536&&He(n,a[16])},d(a){a&&_(e)}}}function Rs(t){let e,r;return{c(){e=O("div"),r=G("Data is valid"),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=D(e);r=W(a,"Data is valid"),a.forEach(_),this.h()},h(){g(e,"class","alert alert-success")},m(n,a){q(n,e,a),y(e,r)},d(n){n&&_(e)}}}function Vs(t){let e,r,n={componentId:"json-schema-version-update-sandbox",schema:t[4],schemaData:t[5],propertiesToIgnore:t[20]};return e=new Ra({props:n}),t[35](e),e.$on("change",t[25]),{c(){Me(e.$$.fragment)},l(a){Fe(e.$$.fragment,a)},m(a,s){Ue(e,a,s),r=!0},p(a,s){const i={};s[0]&16&&(i.schema=a[4]),s[0]&32&&(i.schemaData=a[5]),s[0]&1048576&&(i.propertiesToIgnore=a[20]),e.$set(i)},i(a){r||(ue(e.$$.fragment,a),r=!0)},o(a){de(e.$$.fragment,a),r=!1},d(a){t[35](null),qe(e,a)}}}function Ms(t){let e,r,n,a,s,i,o=t[14]&&t[15]&&Fs(t);return{c(){e=O("button"),r=G("Try version update"),n=K(),o&&o.c(),a=ut(),this.h()},l(l){e=T(l,"BUTTON",{class:!0});var u=D(e);r=W(u,"Try version update"),u.forEach(_),n=B(l),o&&o.l(l),a=ut(),this.h()},h(){g(e,"class","btn btn-primary mt-4 mb-2")},m(l,u){q(l,e,u),y(e,r),q(l,n,u),o&&o.m(l,u),q(l,a,u),s||(i=oe(e,"click",t[26]),s=!0)},p(l,u){l[14]&&l[15]?o?o.p(l,u):(o=Fs(l),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},d(l){l&&_(e),l&&_(n),o&&o.d(l),l&&_(a),s=!1,i()}}}function Fs(t){let e,r,n,a=t[3]&&Us(t),s=t[1]&&zs(t),i=t[18]&&Hs(t);return{c(){a&&a.c(),e=K(),s&&s.c(),r=K(),i&&i.c(),n=ut()},l(o){a&&a.l(o),e=B(o),s&&s.l(o),r=B(o),i&&i.l(o),n=ut()},m(o,l){a&&a.m(o,l),q(o,e,l),s&&s.m(o,l),q(o,r,l),i&&i.m(o,l),q(o,n,l)},p(o,l){o[3]?a?a.p(o,l):(a=Us(o),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),o[1]?s?s.p(o,l):(s=zs(o),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null),o[18]?i?i.p(o,l):(i=Hs(o),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(o){a&&a.d(o),o&&_(e),s&&s.d(o),o&&_(r),i&&i.d(o),o&&_(n)}}}function Us(t){let e,r,n,a,s,i=t[3],o=[];for(let l=0;l<i.length;l+=1)o[l]=Ls(As(t,i,l));return{c(){e=O("div"),r=O("p"),n=G("Following errors must be fixed before performing the update:"),a=K(),s=O("ul");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=T(l,"DIV",{class:!0});var u=D(e);r=T(u,"P",{});var c=D(r);n=W(c,"Following errors must be fixed before performing the update:"),c.forEach(_),a=B(u),s=T(u,"UL",{id:!0});var f=D(s);for(let m=0;m<o.length;m+=1)o[m].l(f);f.forEach(_),u.forEach(_),this.h()},h(){g(s,"id","validation-errors"),g(e,"class","alert alert-danger mt-3")},m(l,u){q(l,e,u),y(e,r),y(r,n),y(e,a),y(e,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(s,null)},p(l,u){if(u[0]&8){i=l[3];let c;for(c=0;c<i.length;c+=1){const f=As(l,i,c);o[c]?o[c].p(f,u):(o[c]=Ls(f),o[c].c(),o[c].m(s,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},d(l){l&&_(e),En(o,l)}}}function qs(t){let e=t[42].instancePath+"",r,n;return{c(){r=G(e),n=G(":")},l(a){r=W(a,e),n=W(a,":")},m(a,s){q(a,r,s),q(a,n,s)},p(a,s){s[0]&8&&e!==(e=a[42].instancePath+"")&&He(r,e)},d(a){a&&_(r),a&&_(n)}}}function Wd(t){let e=t[42].message+"",r;return{c(){r=G(e)},l(n){r=W(n,e)},m(n,a){q(n,r,a)},p(n,a){a[0]&8&&e!==(e=n[42].message+"")&&He(r,e)},d(n){n&&_(r)}}}function Xd(t){let e,r=t[42].params.additionalProperty+"",n,a;return{c(){e=G("must NOT have additional property '"),n=G(r),a=G("'")},l(s){e=W(s,"must NOT have additional property '"),n=W(s,r),a=W(s,"'")},m(s,i){q(s,e,i),q(s,n,i),q(s,a,i)},p(s,i){i[0]&8&&r!==(r=s[42].params.additionalProperty+"")&&He(n,r)},d(s){s&&_(e),s&&_(n),s&&_(a)}}}function Ls(t){let e,r,n,a,s,i,o,l,u,c=JSON.stringify(t[42],null,2)+"",f,m,E=t[42].instancePath&&qs(t);function d(v,$){return v[42].keyword==="additionalProperties"?Xd:Wd}let w=d(t),p=w(t);return{c(){e=O("li"),E&&E.c(),r=K(),p.c(),n=K(),a=O("small"),s=G("more"),i=K(),o=O("div"),l=O("div"),u=O("pre"),f=G(c),m=K(),this.h()},l(v){e=T(v,"LI",{});var $=D(e);E&&E.l($),r=B($),p.l($),n=B($),a=T($,"SMALL",{"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0,class:!0,role:!0});var k=D(a);s=W(k,"more"),k.forEach(_),i=B($),o=T($,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var N=D(o);l=T(N,"DIV",{class:!0});var j=D(l);u=T(j,"PRE",{class:!0});var U=D(u);f=W(U,c),U.forEach(_),j.forEach(_),N.forEach(_),m=B($),$.forEach(_),this.h()},h(){g(a,"data-bs-toggle","collapse"),g(a,"data-bs-target","#collapse-"+t[44]),g(a,"aria-expanded","true"),g(a,"aria-controls","collapse-"+t[44]),g(a,"class","text-primary"),g(a,"role","button"),g(u,"class","alert alert-warning mt-1"),g(l,"class","accordion-body"),g(o,"id","collapse-"+t[44]),g(o,"class","accordion-collapse collapse"),g(o,"data-bs-parent","#validation-errors")},m(v,$){q(v,e,$),E&&E.m(e,null),y(e,r),p.m(e,null),y(e,n),y(e,a),y(a,s),y(e,i),y(e,o),y(o,l),y(l,u),y(u,f),y(e,m)},p(v,$){v[42].instancePath?E?E.p(v,$):(E=qs(v),E.c(),E.m(e,r)):E&&(E.d(1),E=null),w===(w=d(v))&&p?p.p(v,$):(p.d(1),p=w(v),p&&(p.c(),p.m(e,n))),$[0]&8&&c!==(c=JSON.stringify(v[42],null,2)+"")&&He(f,c)},d(v){v&&_(e),E&&E.d(),p.d()}}}function zs(t){let e,r,n,a=!t[3]&&Js(),s=t[18]&&Ks(t),i=!t[19]&&Bs();return{c(){a&&a.c(),e=K(),s&&s.c(),r=K(),i&&i.c(),n=ut()},l(o){a&&a.l(o),e=B(o),s&&s.l(o),r=B(o),i&&i.l(o),n=ut()},m(o,l){a&&a.m(o,l),q(o,e,l),s&&s.m(o,l),q(o,r,l),i&&i.m(o,l),q(o,n,l)},p(o,l){o[3]?a&&(a.d(1),a=null):a||(a=Js(),a.c(),a.m(e.parentNode,e)),o[18]?s?s.p(o,l):(s=Ks(o),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null),o[19]?i&&(i.d(1),i=null):i||(i=Bs(),i.c(),i.m(n.parentNode,n))},d(o){a&&a.d(o),o&&_(e),s&&s.d(o),o&&_(r),i&&i.d(o),o&&_(n)}}}function Js(t){let e,r;return{c(){e=O("div"),r=G("The arguments are valid"),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=D(e);r=W(a,"The arguments are valid"),a.forEach(_),this.h()},h(){g(e,"class","alert alert-success mt-3")},m(n,a){q(n,e,a),y(e,r)},d(n){n&&_(e)}}}function Ks(t){let e,r,n,a,s,i;return{c(){e=O("label"),r=G("Fix the arguments:"),n=K(),a=O("textarea"),this.h()},l(o){e=T(o,"LABEL",{class:!0,for:!0});var l=D(e);r=W(l,"Fix the arguments:"),l.forEach(_),n=B(o),a=T(o,"TEXTAREA",{class:!0,id:!0,rows:!0}),D(a).forEach(_),this.h()},h(){g(e,"class","form-label"),g(e,"for","fix-arguments"),g(a,"class","form-control"),g(a,"id","fix-arguments"),g(a,"rows","20"),ye(a,"is-invalid",!t[19])},m(o,l){q(o,e,l),y(e,r),q(o,n,l),q(o,a,l),ct(a,t[2]),s||(i=oe(a,"input",t[37]),s=!0)},p(o,l){l[0]&4&&ct(a,o[2]),l[0]&524288&&ye(a,"is-invalid",!o[19])},d(o){o&&_(e),o&&_(n),o&&_(a),s=!1,i()}}}function Bs(t){let e,r;return{c(){e=O("div"),r=G("Invalid JSON"),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=D(e);r=W(a,"Invalid JSON"),a.forEach(_),this.h()},h(){g(e,"class","invalid-feedback")},m(n,a){q(n,e,a),y(e,r)},d(n){n&&_(e)}}}function Hs(t){let e,r,n,a;return{c(){e=O("button"),r=G("Check"),this.h()},l(s){e=T(s,"BUTTON",{type:!0,class:!0});var i=D(e);r=W(i,"Check"),i.forEach(_),this.h()},h(){g(e,"type","button"),g(e,"class","btn btn-warning mt-3")},m(s,i){q(s,e,i),y(e,r),n||(a=oe(e,"click",t[0]),n=!0)},p:kt,d(s){s&&_(e),n=!1,a()}}}function Zd(t){let e,r,n,a,s,i,o,l,u,c,f,m,E,d,w,p,v,$,k,N,j,U,X,ee,ie,me,be,H,re,fe,Oe,le,Le,Ie,Se,z,A,F,C,h,S,M,L,J,Z,Y,ce,se,Te,Ae,ke,Ce,he,ge,ze,mt,ft,De,Xe,tt,Ze,pt,rt,nt,Je,ot,Ge=t[16]&&js(t),at=t[17]&&Rs(),je=t[4]&&Vs(t),Ke=t[11]&&Ms(t);return{c(){e=O("h1"),r=G("Sandbox page for task version update"),n=K(),a=O("p"),s=G("This is a test page for the task version update"),i=K(),o=O("div"),l=O("div"),u=O("button"),c=G("Load example"),f=K(),m=O("h2"),E=G("Old schema"),d=K(),w=O("div"),p=O("div"),v=O("div"),$=O("div"),k=O("label"),N=G("JSON Schema"),j=K(),U=O("textarea"),X=K(),ee=O("span"),ie=G(t[8]),me=K(),be=O("div"),H=O("div"),re=O("label"),fe=G("Initial JSON data"),Oe=K(),le=O("textarea"),Le=K(),Ie=O("span"),Se=G(t[9]),z=K(),A=O("div"),F=O("div"),Ge&&Ge.c(),C=K(),at&&at.c(),h=K(),S=O("button"),M=G("Validate"),L=K(),J=O("div"),je&&je.c(),Z=K(),Y=O("hr"),ce=K(),se=O("h2"),Te=G("New schema"),Ae=K(),ke=O("div"),Ce=O("div"),he=O("div"),ge=O("div"),ze=O("label"),mt=G("JSON Schema"),ft=K(),De=O("textarea"),Xe=K(),tt=O("span"),Ze=G(t[13]),pt=K(),rt=O("div"),Ke&&Ke.c(),this.h()},l(x){e=T(x,"H1",{class:!0});var Pe=D(e);r=W(Pe,"Sandbox page for task version update"),Pe.forEach(_),n=B(x),a=T(x,"P",{});var St=D(a);s=W(St,"This is a test page for the task version update"),St.forEach(_),i=B(x),o=T(x,"DIV",{class:!0});var Hr=D(o);l=T(Hr,"DIV",{class:!0});var fr=D(l);u=T(fr,"BUTTON",{class:!0});var Gr=D(u);c=W(Gr,"Load example"),Gr.forEach(_),f=B(fr),m=T(fr,"H2",{});var Wr=D(m);E=W(Wr,"Old schema"),Wr.forEach(_),fr.forEach(_),Hr.forEach(_),d=B(x),w=T(x,"DIV",{class:!0});var dr=D(w);p=T(dr,"DIV",{class:!0});var Wt=D(p);v=T(Wt,"DIV",{class:!0});var zt=D(v);$=T(zt,"DIV",{class:!0});var Xt=D($);k=T(Xt,"LABEL",{for:!0});var Nr=D(k);N=W(Nr,"JSON Schema"),Nr.forEach(_),j=B(Xt),U=T(Xt,"TEXTAREA",{id:!0,class:!0,rows:!0}),D(U).forEach(_),X=B(Xt),ee=T(Xt,"SPAN",{class:!0});var Xr=D(ee);ie=W(Xr,t[8]),Xr.forEach(_),Xt.forEach(_),zt.forEach(_),me=B(Wt),be=T(Wt,"DIV",{class:!0});var hr=D(be);H=T(hr,"DIV",{class:!0});var Jt=D(H);re=T(Jt,"LABEL",{for:!0});var Zr=D(re);fe=W(Zr,"Initial JSON data"),Zr.forEach(_),Oe=B(Jt),le=T(Jt,"TEXTAREA",{id:!0,class:!0,rows:!0}),D(le).forEach(_),Le=B(Jt),Ie=T(Jt,"SPAN",{class:!0});var Ir=D(Ie);Se=W(Ir,t[9]),Ir.forEach(_),Jt.forEach(_),hr.forEach(_),z=B(Wt),A=T(Wt,"DIV",{class:!0});var Qr=D(A);F=T(Qr,"DIV",{class:!0});var Kt=D(F);Ge&&Ge.l(Kt),C=B(Kt),at&&at.l(Kt),h=B(Kt),S=T(Kt,"BUTTON",{class:!0});var P=D(S);M=W(P,"Validate"),P.forEach(_),Kt.forEach(_),Qr.forEach(_),Wt.forEach(_),L=B(dr),J=T(dr,"DIV",{class:!0});var b=D(J);je&&je.l(b),b.forEach(_),dr.forEach(_),Z=B(x),Y=T(x,"HR",{}),ce=B(x),se=T(x,"H2",{class:!0});var I=D(se);Te=W(I,"New schema"),I.forEach(_),Ae=B(x),ke=T(x,"DIV",{class:!0});var R=D(ke);Ce=T(R,"DIV",{class:!0});var V=D(Ce);he=T(V,"DIV",{class:!0});var ne=D(he);ge=T(ne,"DIV",{class:!0});var te=D(ge);ze=T(te,"LABEL",{for:!0});var we=D(ze);mt=W(we,"JSON Schema"),we.forEach(_),ft=B(te),De=T(te,"TEXTAREA",{id:!0,class:!0,rows:!0}),D(De).forEach(_),Xe=B(te),tt=T(te,"SPAN",{class:!0});var Re=D(tt);Ze=W(Re,t[13]),Re.forEach(_),te.forEach(_),ne.forEach(_),V.forEach(_),pt=B(R),rt=T(R,"DIV",{class:!0});var Qe=D(rt);Ke&&Ke.l(Qe),Qe.forEach(_),R.forEach(_),this.h()},h(){g(e,"class","fw-light"),g(u,"class","btn btn-outline-primary float-end"),g(l,"class","col-lg-6 mt-3"),g(o,"class","row"),g(k,"for","jschema-old"),g(U,"id","jschema-old"),g(U,"class","form-control"),g(U,"rows","10"),ye(U,"is-invalid",t[8]),g(ee,"class","invalid-feedback"),g($,"class","col"),g(v,"class","row has-validation mb-2"),g(re,"for","jdata-old"),g(le,"id","jdata-old"),g(le,"class","form-control"),g(le,"rows","10"),ye(le,"is-invalid",t[9]),g(Ie,"class","invalid-feedback"),g(H,"class","col"),g(be,"class","row has-validation mt-3 mb-2"),g(S,"class","btn btn-primary"),g(F,"class","col"),g(A,"class","row mt-3 mb-2"),g(p,"class","col-lg-6 mt-3"),g(J,"class","col-lg-6 mt-3"),g(w,"class","row"),g(se,"class","mt-2"),g(ze,"for","jschema-new"),g(De,"id","jschema-new"),g(De,"class","form-control"),g(De,"rows","10"),ye(De,"is-invalid",t[13]),g(tt,"class","invalid-feedback"),g(ge,"class","col"),g(he,"class","row has-validation mb-2"),g(Ce,"class","col-lg-6 mt-3"),g(rt,"class","col-lg-6"),g(ke,"class","row")},m(x,Pe){q(x,e,Pe),y(e,r),q(x,n,Pe),q(x,a,Pe),y(a,s),q(x,i,Pe),q(x,o,Pe),y(o,l),y(l,u),y(u,c),y(l,f),y(l,m),y(m,E),q(x,d,Pe),q(x,w,Pe),y(w,p),y(p,v),y(v,$),y($,k),y(k,N),y($,j),y($,U),ct(U,t[6]),y($,X),y($,ee),y(ee,ie),y(p,me),y(p,be),y(be,H),y(H,re),y(re,fe),y(H,Oe),y(H,le),ct(le,t[7]),y(H,Le),y(H,Ie),y(Ie,Se),y(p,z),y(p,A),y(A,F),Ge&&Ge.m(F,null),y(F,C),at&&at.m(F,null),y(F,h),y(F,S),y(S,M),y(w,L),y(w,J),je&&je.m(J,null),q(x,Z,Pe),q(x,Y,Pe),q(x,ce,Pe),q(x,se,Pe),y(se,Te),q(x,Ae,Pe),q(x,ke,Pe),y(ke,Ce),y(Ce,he),y(he,ge),y(ge,ze),y(ze,mt),y(ge,ft),y(ge,De),ct(De,t[12]),y(ge,Xe),y(ge,tt),y(tt,Ze),y(ke,pt),y(ke,rt),Ke&&Ke.m(rt,null),nt=!0,Je||(ot=[oe(u,"click",t[27]),oe(U,"input",t[33]),oe(U,"input",t[21]),oe(le,"input",t[34]),oe(le,"input",t[22]),oe(S,"click",t[24]),oe(De,"input",t[36]),oe(De,"input",t[23])],Je=!0)},p(x,Pe){Pe[0]&64&&ct(U,x[6]),(!nt||Pe[0]&256)&&ye(U,"is-invalid",x[8]),(!nt||Pe[0]&256)&&He(ie,x[8]),Pe[0]&128&&ct(le,x[7]),(!nt||Pe[0]&512)&&ye(le,"is-invalid",x[9]),(!nt||Pe[0]&512)&&He(Se,x[9]),x[16]?Ge?Ge.p(x,Pe):(Ge=js(x),Ge.c(),Ge.m(F,C)):Ge&&(Ge.d(1),Ge=null),x[17]?at||(at=Rs(),at.c(),at.m(F,h)):at&&(at.d(1),at=null),x[4]?je?(je.p(x,Pe),Pe[0]&16&&ue(je,1)):(je=Vs(x),je.c(),ue(je,1),je.m(J,null)):je&&(jt(),de(je,1,1,()=>{je=null}),Rt()),Pe[0]&4096&&ct(De,x[12]),(!nt||Pe[0]&8192)&&ye(De,"is-invalid",x[13]),(!nt||Pe[0]&8192)&&He(Ze,x[13]),x[11]?Ke?Ke.p(x,Pe):(Ke=Ms(x),Ke.c(),Ke.m(rt,null)):Ke&&(Ke.d(1),Ke=null)},i(x){nt||(ue(je),nt=!0)},o(x){de(je),nt=!1},d(x){x&&_(e),x&&_(n),x&&_(a),x&&_(i),x&&_(o),x&&_(d),x&&_(w),Ge&&Ge.d(),at&&at.d(),je&&je.d(),x&&_(Z),x&&_(Y),x&&_(ce),x&&_(se),x&&_(Ae),x&&_(ke),Ke&&Ke.d(),Je=!1,It(ot)}}}function Qd(t,e,r){let n,a,s,i="",o="",l="",u="",c,f,m="",E="",d,w;async function p(){if(r(8,l=""),i===""){r(4,a=void 0);return}try{r(4,a=JSON.parse(i)),U()}catch{r(4,a=void 0),r(8,l="Invalid JSON")}new br().loadSchema(a)||(r(4,a=void 0),r(8,l="Invalid JSON Schema"))}function v(){r(9,u=""),r(9,u="");try{r(5,s=JSON.parse(o))}catch{r(5,s=void 0),r(9,u="Invalid JSON")}}function $(){if(r(14,d=void 0),r(15,w=void 0),r(13,E=""),m===""){r(11,f=void 0);return}try{r(11,f=JSON.parse(m))}catch{r(11,f=void 0),r(13,E="Invalid JSON")}new br().loadSchema(f)||(r(11,f=void 0),r(13,E="Invalid JSON Schema"))}let k,N=!1;async function j(){try{r(16,k=""),r(17,N=!1),r(5,s=JSON.parse(o)),await jr(),c==null||c.validateArguments(),r(17,N=!0)}catch(L){r(16,k=Kn(L)),r(14,d=void 0),r(15,w=void 0)}}async function U(){if(await jr(),!c)return;const L=xt(c.getArguments()),J=JSON.stringify($n(L),null,2);J!==o&&r(7,o=J)}async function X(){r(18,be=!1),N||await j(),N&&(ee(),await jr(),Ie())}function ee(){r(14,d={id:1,args_parallel:xt(s),task_type:"parallel",is_legacy_task:!1}),r(15,w={args_schema_parallel:f})}function ie(){const L={title:"Test",type:"object",properties:{foo:{title:"foo",type:"string"}},required:["foo"]},J=xt(L);J.properties.bar={title:"bar",type:"string"},J.required.push("bar"),r(6,i=JSON.stringify(L,null,2)),r(7,o=JSON.stringify({foo:"something"},null,2)),r(12,m=JSON.stringify(J,null,2)),p(),v(),$()}let me="",be=!1,H="",re=!0,fe=null;function Oe(){r(2,H=""),r(3,fe=null)}function le(){r(2,H=me),Le()}function Le(){if(!H)return;r(19,re=!0);let L;try{L=JSON.parse(H)}catch{r(19,re=!1);return}z(L)}function Ie(){const L=d.args_parallel||{};r(1,me=JSON.stringify(L,null,2)),z(L)}function Se(){H!==""?JSON.parse(H):d.args_parallel}function z(L){const J=w.args_schema_parallel,Z=new br(!0);"properties"in J&&fi(J,pn(!1));const Y=xt(J);if(!Z.loadSchema(Y))throw new Error("Invalid JSON schema");Z.isValid(L)?r(3,fe=null):(r(2,H=JSON.stringify(L,null,2)),r(18,be=!0),r(3,fe=Z.getErrors()))}function A(){return((fe==null?void 0:fe.length)||0)>0}function F(){i=this.value,r(6,i)}function C(){o=this.value,r(7,o)}function h(L){rr[L?"unshift":"push"](()=>{c=L,r(10,c)})}function S(){m=this.value,r(12,m)}function M(){H=this.value,r(2,H)}return t.$$.update=()=>{t.$$.dirty[0]&14&&(fe===null||fe.length)},r(20,n=pn(!1)),[Le,me,H,fe,a,s,i,o,l,u,c,f,m,E,d,w,k,N,be,re,n,p,v,$,j,U,X,ie,Oe,le,Ie,Se,A,F,C,h,S,M]}class Yd extends gt{constructor(e){super(),yt(this,e,Qd,Zd,ht,{reset:28,cancel:29,check:0,checkArgumentsWithNewSchema:30,getNewArgs:31,hasValidationErrors:32},null,[-1,-1])}get reset(){return this.$$.ctx[28]}get cancel(){return this.$$.ctx[29]}get check(){return this.$$.ctx[0]}get checkArgumentsWithNewSchema(){return this.$$.ctx[30]}get getNewArgs(){return this.$$.ctx[31]}get hasValidationErrors(){return this.$$.ctx[32]}}const xd="ManifestV2",eh=`Packages containing tasks are required to include a special file
\`__FRACTAL_MANIFEST__.json\` in order to be discovered and used by Fractal.

This model class and the model classes it depends on provide the base
schema to read, write and validate manifests.

Attributes:
    manifest_version:
        A version string that provides indication for compatibility between
        manifests as the schema evolves. This is for instance used by
        Fractal to determine which subclass of the present base class needs
        be used to read and validate the input.
    task_list : list[TaskManifestType]
        The list of tasks, represented as specified by subclasses of the
        _TaskManifestBase (a.k.a. TaskManifestType)
    has_args_schemas:
        \`True\` if the manifest incldues JSON Schemas for the arguments of
        each task.
    args_schema_version:
        Label of how \`args_schema\`s were generated (e.g. \`pydantic_v1\`).`,th="object",rh={manifest_version:{title:"Manifest Version",type:"string"},task_list:{title:"Task List",type:"array",items:{$ref:"#/definitions/TaskManifestV2"}},has_args_schemas:{title:"Has Args Schemas",default:!1,type:"boolean"},args_schema_version:{title:"Args Schema Version",type:"string"}},nh=["manifest_version","task_list"],ah={TaskManifestV2:{title:"TaskManifestV2",description:`Represents a task within a V2 manifest.

Attributes:
    name:
        The task name
    executable:
        Path to the executable relative to the package root

        Note: by package root we mean "as it will be installed". If a
        package \`Pkg\` installs in the folder \`pkg\` the executable
        \`pkg/executable.py\`, this attribute must contain only
        \`executable.py\`.
    input_type:
        The input type accepted by the task
    output_type:
        The output type returned by the task
    meta:
        Additional information about the package, such as hash of the
        executable, specific runtime requirements (e.g., need_gpu=True),
        etc.
    args_schema:
        JSON Schema for task arguments
    docs_info:
        Additional information about the Task, coming from the docstring.
    docs_link:
        Link to Task docs.`,type:"object",properties:{name:{title:"Name",type:"string"},executable_non_parallel:{title:"Executable Non Parallel",type:"string"},executable_parallel:{title:"Executable Parallel",type:"string"},input_types:{title:"Input Types",type:"object",additionalProperties:{type:"boolean"}},output_types:{title:"Output Types",type:"object",additionalProperties:{type:"boolean"}},meta_non_parallel:{title:"Meta Non Parallel",type:"object"},meta_parallel:{title:"Meta Parallel",type:"object"},args_schema_non_parallel:{title:"Args Schema Non Parallel",type:"object"},args_schema_parallel:{title:"Args Schema Parallel",type:"object"},docs_info:{title:"Docs Info",type:"string"},docs_link:{title:"Docs Link",minLength:1,maxLength:2083,format:"uri",type:"string"}},required:["name"]}},sh={title:xd,description:eh,type:th,properties:rh,required:nh,definitions:ah};function Gs(t){let e,r,n,a;return{c(){e=O("button"),r=G("Clear"),this.h()},l(s){e=T(s,"BUTTON",{class:!0});var i=D(e);r=W(i,"Clear"),i.forEach(_),this.h()},h(){g(e,"class","btn btn-outline-secondary")},m(s,i){q(s,e,i),y(e,r),n||(a=oe(e,"click",t[8]),n=!0)},p:kt,d(s){s&&_(e),n=!1,a()}}}function ih(t){let e,r,n,a,s,i,o,l,u,c,f,m,E,d,w,p,v,$=t[3]&&t[3].length>0&&Gs(t);return{c(){e=O("div"),r=O("div"),n=O("div"),a=O("label"),s=G(t[1]),i=K(),o=O("input"),l=K(),$&&$.c(),u=K(),c=O("span"),f=G(t[5]),m=K(),E=O("p"),d=O("i"),w=G(" or drag file here"),this.h()},l(k){e=T(k,"DIV",{class:!0});var N=D(e);r=T(N,"DIV",{class:!0});var j=D(r);n=T(j,"DIV",{class:!0});var U=D(n);a=T(U,"LABEL",{for:!0,class:!0});var X=D(a);s=W(X,t[1]),X.forEach(_),i=B(U),o=T(U,"INPUT",{class:!0,accept:!0,type:!0,name:!0,id:!0}),l=B(U),$&&$.l(U),u=B(U),c=T(U,"SPAN",{class:!0});var ee=D(c);f=W(ee,t[5]),ee.forEach(_),U.forEach(_),j.forEach(_),m=B(N),E=T(N,"P",{class:!0});var ie=D(E);d=T(ie,"I",{class:!0}),D(d).forEach(_),w=W(ie," or drag file here"),ie.forEach(_),N.forEach(_),this.h()},h(){g(a,"for",t[0]),g(a,"class","input-group-text"),g(o,"class","form-control"),g(o,"accept",t[2]),g(o,"type","file"),g(o,"name",t[0]),g(o,"id",t[0]),ye(o,"is-invalid",t[5]),g(c,"class","invalid-feedback"),g(n,"class","input-group has-validation"),g(r,"class","m-1"),g(d,"class","bi bi-file-earmark-arrow-up"),g(E,"class","text-center mt-1 mb-1"),g(e,"class","dropZone bg-light svelte-1n1vpyg"),ye(e,"dragOver",t[6])},m(k,N){q(k,e,N),y(e,r),y(r,n),y(n,a),y(a,s),y(n,i),y(n,o),t[13](o),y(n,l),$&&$.m(n,null),y(n,u),y(n,c),y(c,f),y(e,m),y(e,E),y(E,d),y(E,w),p||(v=[oe(o,"change",t[14]),oe(o,"change",t[7]),oe(e,"drop",t[9]),oe(e,"dragover",t[10]),oe(e,"dragleave",t[11])],p=!0)},p(k,[N]){N&2&&He(s,k[1]),N&1&&g(a,"for",k[0]),N&4&&g(o,"accept",k[2]),N&1&&g(o,"name",k[0]),N&1&&g(o,"id",k[0]),N&32&&ye(o,"is-invalid",k[5]),k[3]&&k[3].length>0?$?$.p(k,N):($=Gs(k),$.c(),$.m(n,u)):$&&($.d(1),$=null),N&32&&He(f,k[5]),N&64&&ye(e,"dragOver",k[6])},i:kt,o:kt,d(k){k&&_(e),t[13](null),$&&$.d(),p=!1,It(v)}}}function oh(t,e,r){let{id:n}=e,{description:a}=e,{accept:s}=e,{validateFile:i}=e;const o=si();let l=null,u,c="";async function f(){if(r(5,c=""),!l||l.length===0){o("change",{value:null});return}const N=l[0];await d(N)}function m(){r(5,c=""),r(3,l=null),u&&r(4,u.value="",u),o("change",{value:null})}async function E(N){N.preventDefault(),r(6,w=!1),N.dataTransfer&&N.dataTransfer.files.length>0&&(r(3,l=N.dataTransfer.files),r(4,u.files=l,u),await d(l[0]))}async function d(N){r(5,c="");let j=await N.text();try{const U=i(j);o("change",{value:U})}catch(U){r(5,c=U.message),o("change",{value:null})}}let w=!1;function p(N){N.preventDefault(),r(6,w=!0)}function v(){r(6,w=!1)}function $(N){rr[N?"unshift":"push"](()=>{u=N,r(4,u)})}function k(){l=this.files,r(3,l)}return t.$$set=N=>{"id"in N&&r(0,n=N.id),"description"in N&&r(1,a=N.description),"accept"in N&&r(2,s=N.accept),"validateFile"in N&&r(12,i=N.validateFile)},[n,a,s,l,u,c,w,f,m,E,p,v,i,$,k]}class lh extends gt{constructor(e){super(),yt(this,e,oh,ih,ht,{id:0,description:1,accept:2,validateFile:12})}}function Ws(t,e,r){const n=t.slice();return n[36]=e[r],n}function Xs(t){let e,r,n,a,s,i,o,l,u,c=t[0],f=[];for(let m=0;m<c.length;m+=1)f[m]=Zs(Ws(t,c,m));return{c(){e=O("div"),r=O("label"),n=G("Task"),a=K(),s=O("select"),i=O("option"),o=G("Select...");for(let m=0;m<f.length;m+=1)f[m].c();this.h()},l(m){e=T(m,"DIV",{class:!0});var E=D(e);r=T(E,"LABEL",{for:!0,class:!0});var d=D(r);n=W(d,"Task"),d.forEach(_),a=B(E),s=T(E,"SELECT",{class:!0,name:!0,id:!0});var w=D(s);i=T(w,"OPTION",{});var p=D(i);o=W(p,"Select..."),p.forEach(_);for(let v=0;v<f.length;v+=1)f[v].l(w);w.forEach(_),E.forEach(_),this.h()},h(){g(r,"for","selectedTask"),g(r,"class","input-group-text"),i.__value="",i.value=i.__value,g(s,"class","form-control"),g(s,"name","selectedTask"),g(s,"id","selectedTask"),t[1]===void 0&&ni(()=>t[20].call(s)),g(e,"class","input-group")},m(m,E){q(m,e,E),y(e,r),y(r,n),y(e,a),y(e,s),y(s,i),y(i,o);for(let d=0;d<f.length;d+=1)f[d]&&f[d].m(s,null);dn(s,t[1],!0),l||(u=[oe(s,"change",t[20]),oe(s,"change",t[21])],l=!0)},p(m,E){if(E[0]&1){c=m[0];let d;for(d=0;d<c.length;d+=1){const w=Ws(m,c,d);f[d]?f[d].p(w,E):(f[d]=Zs(w),f[d].c(),f[d].m(s,null))}for(;d<f.length;d+=1)f[d].d(1);f.length=c.length}E[0]&3&&dn(s,m[1])},d(m){m&&_(e),En(f,m),l=!1,It(u)}}}function Zs(t){let e,r=t[36]+"",n,a;return{c(){e=O("option"),n=G(r),this.h()},l(s){e=T(s,"OPTION",{});var i=D(e);n=W(i,r),i.forEach(_),this.h()},h(){e.__value=a=t[36],e.value=e.__value},m(s,i){q(s,e,i),y(e,n)},p(s,i){i[0]&1&&r!==(r=s[36]+"")&&He(n,r),i[0]&1&&a!==(a=s[36])&&(e.__value=a,e.value=e.__value)},d(s){s&&_(e)}}}function Qs(t){let e,r,n,a,s,i,o,l,u,c,f,m,E,d,w,p,v,$,k,N,j,U,X,ee,ie,me,be,H,re,fe,Oe,le,Le,Ie,Se,z,A,F,C,h,S,M,L,J,Z,Y,ce,se,Te,Ae=t[10]&&Ys(t),ke=t[11]&&xs(),Ce={componentId:"json-schema-task-manifest-sandbox",schema:t[2],schemaData:t[5],propertiesToIgnore:t[13]};return Z=new Ra({props:Ce}),t[28](Z),Z.$on("change",t[19]),ce=lo(t[23][0]),{c(){e=O("div"),r=O("div"),n=O("div"),a=O("input"),i=K(),o=O("label"),l=G("non parallel"),u=K(),c=O("div"),f=O("input"),E=K(),d=O("label"),w=G("parallel"),p=K(),v=O("div"),$=O("div"),k=O("div"),N=O("div"),j=O("label"),U=G("JSON Schema"),X=K(),ee=O("textarea"),me=K(),be=O("div"),H=O("div"),re=O("label"),fe=G("Initial JSON data"),Oe=K(),le=O("textarea"),Le=K(),Ie=O("span"),Se=G(t[7]),z=K(),A=O("div"),F=O("div"),Ae&&Ae.c(),C=K(),ke&&ke.c(),h=K(),S=O("button"),M=G("Validate"),L=K(),J=O("div"),Me(Z.$$.fragment),this.h()},l(he){e=T(he,"DIV",{class:!0});var ge=D(e);r=T(ge,"DIV",{class:!0});var ze=D(r);n=T(ze,"DIV",{class:!0});var mt=D(n);a=T(mt,"INPUT",{class:!0,type:!0,name:!0,id:!0}),i=B(mt),o=T(mt,"LABEL",{class:!0,for:!0});var ft=D(o);l=W(ft,"non parallel"),ft.forEach(_),mt.forEach(_),u=B(ze),c=T(ze,"DIV",{class:!0});var De=D(c);f=T(De,"INPUT",{class:!0,type:!0,name:!0,id:!0}),E=B(De),d=T(De,"LABEL",{class:!0,for:!0});var Xe=D(d);w=W(Xe,"parallel"),Xe.forEach(_),De.forEach(_),ze.forEach(_),ge.forEach(_),p=B(he),v=T(he,"DIV",{class:!0});var tt=D(v);$=T(tt,"DIV",{class:!0});var Ze=D($);k=T(Ze,"DIV",{class:!0});var pt=D(k);N=T(pt,"DIV",{class:!0});var rt=D(N);j=T(rt,"LABEL",{for:!0});var nt=D(j);U=W(nt,"JSON Schema"),nt.forEach(_),X=B(rt),ee=T(rt,"TEXTAREA",{id:!0,class:!0,rows:!0}),D(ee).forEach(_),rt.forEach(_),pt.forEach(_),me=B(Ze),be=T(Ze,"DIV",{class:!0});var Je=D(be);H=T(Je,"DIV",{class:!0});var ot=D(H);re=T(ot,"LABEL",{for:!0});var Ge=D(re);fe=W(Ge,"Initial JSON data"),Ge.forEach(_),Oe=B(ot),le=T(ot,"TEXTAREA",{id:!0,class:!0,rows:!0}),D(le).forEach(_),Le=B(ot),Ie=T(ot,"SPAN",{class:!0});var at=D(Ie);Se=W(at,t[7]),at.forEach(_),ot.forEach(_),Je.forEach(_),z=B(Ze),A=T(Ze,"DIV",{class:!0});var je=D(A);F=T(je,"DIV",{class:!0});var Ke=D(F);Ae&&Ae.l(Ke),C=B(Ke),ke&&ke.l(Ke),h=B(Ke),S=T(Ke,"BUTTON",{class:!0});var x=D(S);M=W(x,"Validate"),x.forEach(_),Ke.forEach(_),je.forEach(_),Ze.forEach(_),L=B(tt),J=T(tt,"DIV",{class:!0});var Pe=D(J);Fe(Z.$$.fragment,Pe),Pe.forEach(_),tt.forEach(_),this.h()},h(){g(a,"class","form-check-input"),g(a,"type","radio"),g(a,"name","schemaTypeSelector"),g(a,"id","schemaNonParallelSelector"),a.__value="non_parallel",a.value=a.__value,a.disabled=s=!t[8],g(o,"class","form-check-label"),g(o,"for","schemaNonParallelSelector"),g(n,"class","form-check form-check-inline"),g(f,"class","form-check-input"),g(f,"type","radio"),g(f,"name","schemaTypeSelector"),g(f,"id","schemaParallelSelector"),f.__value="parallel",f.value=f.__value,f.disabled=m=!t[9],g(d,"class","form-check-label"),g(d,"for","schemaParallelSelector"),g(c,"class","form-check form-check-inline"),g(r,"class","col-md-6"),g(e,"class","row mt-3"),g(j,"for","jschema"),g(ee,"id","jschema"),g(ee,"class","form-control"),ee.value=ie=JSON.stringify(t[2],null,2),g(ee,"rows","10"),ee.disabled=!0,g(N,"class","col"),g(k,"class","row"),g(re,"for","jdata"),g(le,"id","jdata"),g(le,"class","form-control"),g(le,"rows","10"),ye(le,"is-invalid",t[7]),g(Ie,"class","invalid-feedback"),g(H,"class","col"),g(be,"class","row has-validation mt-3 mb-2"),g(S,"class","btn btn-primary"),g(F,"class","col"),g(A,"class","row mt-3 mb-2"),g($,"class","col-lg-6"),g(J,"class","col-lg-6"),g(v,"class","row mt-2 mb-3"),ce.p(a,f)},m(he,ge){q(he,e,ge),y(e,r),y(r,n),y(n,a),a.checked=a.__value===t[3],y(n,i),y(n,o),y(o,l),y(r,u),y(r,c),y(c,f),f.checked=f.__value===t[3],y(c,E),y(c,d),y(d,w),q(he,p,ge),q(he,v,ge),y(v,$),y($,k),y(k,N),y(N,j),y(j,U),y(N,X),y(N,ee),y($,me),y($,be),y(be,H),y(H,re),y(re,fe),y(H,Oe),y(H,le),ct(le,t[6]),y(H,Le),y(H,Ie),y(Ie,Se),y($,z),y($,A),y(A,F),Ae&&Ae.m(F,null),y(F,C),ke&&ke.m(F,null),y(F,h),y(F,S),y(S,M),y(v,L),y(v,J),Ue(Z,J,null),Y=!0,se||(Te=[oe(a,"change",t[22]),oe(a,"change",t[24]),oe(f,"change",t[25]),oe(f,"change",t[26]),oe(le,"input",t[27]),oe(le,"input",t[18]),oe(S,"click",t[14])],se=!0)},p(he,ge){(!Y||ge[0]&256&&s!==(s=!he[8]))&&(a.disabled=s),ge[0]&8&&(a.checked=a.__value===he[3]),(!Y||ge[0]&512&&m!==(m=!he[9]))&&(f.disabled=m),ge[0]&8&&(f.checked=f.__value===he[3]),(!Y||ge[0]&4&&ie!==(ie=JSON.stringify(he[2],null,2)))&&(ee.value=ie),ge[0]&64&&ct(le,he[6]),(!Y||ge[0]&128)&&ye(le,"is-invalid",he[7]),(!Y||ge[0]&128)&&He(Se,he[7]),he[10]?Ae?Ae.p(he,ge):(Ae=Ys(he),Ae.c(),Ae.m(F,C)):Ae&&(Ae.d(1),Ae=null),he[11]?ke||(ke=xs(),ke.c(),ke.m(F,h)):ke&&(ke.d(1),ke=null);const ze={};ge[0]&4&&(ze.schema=he[2]),ge[0]&32&&(ze.schemaData=he[5]),ge[0]&8192&&(ze.propertiesToIgnore=he[13]),Z.$set(ze)},i(he){Y||(ue(Z.$$.fragment,he),Y=!0)},o(he){de(Z.$$.fragment,he),Y=!1},d(he){he&&_(e),he&&_(p),he&&_(v),Ae&&Ae.d(),ke&&ke.d(),t[28](null),qe(Z),ce.r(),se=!1,It(Te)}}}function Ys(t){let e,r,n;return{c(){e=O("div"),r=O("pre"),n=G(t[10]),this.h()},l(a){e=T(a,"DIV",{class:!0});var s=D(e);r=T(s,"PRE",{});var i=D(r);n=W(i,t[10]),i.forEach(_),s.forEach(_),this.h()},h(){g(e,"class","alert alert-danger")},m(a,s){q(a,e,s),y(e,r),y(r,n)},p(a,s){s[0]&1024&&He(n,a[10])},d(a){a&&_(e)}}}function xs(t){let e,r;return{c(){e=O("div"),r=G("Data is valid"),this.h()},l(n){e=T(n,"DIV",{class:!0});var a=D(e);r=W(a,"Data is valid"),a.forEach(_),this.h()},h(){g(e,"class","alert alert-success")},m(n,a){q(n,e,a),y(e,r)},d(n){n&&_(e)}}}function ch(t){let e,r,n,a,s,i,o,l,u,c,f,m,E,d,w,p,v;u=new lh({props:{description:"Upload manifest file",accept:"application/json",id:"manifestFileUpload",validateFile:t[15]}}),u.$on("change",t[16]);let $=t[0].length>0&&Xs(t),k=t[2]&&t[4]&&Qs(t);return{c(){e=O("h1"),r=G("Sandbox page for task package manifest"),n=K(),a=O("p"),s=G("This is a test page for the JSON Schema form of a whole task package manifest"),i=K(),o=O("div"),l=O("div"),Me(u.$$.fragment),c=K(),f=O("div"),m=G("An entire task package manifest"),E=K(),d=O("div"),$&&$.c(),w=K(),k&&k.c(),p=ut(),this.h()},l(N){e=T(N,"H1",{class:!0});var j=D(e);r=W(j,"Sandbox page for task package manifest"),j.forEach(_),n=B(N),a=T(N,"P",{});var U=D(a);s=W(U,"This is a test page for the JSON Schema form of a whole task package manifest"),U.forEach(_),i=B(N),o=T(N,"DIV",{class:!0});var X=D(o);l=T(X,"DIV",{class:!0});var ee=D(l);Fe(u.$$.fragment,ee),c=B(ee),f=T(ee,"DIV",{class:!0});var ie=D(f);m=W(ie,"An entire task package manifest"),ie.forEach(_),ee.forEach(_),E=B(X),d=T(X,"DIV",{class:!0});var me=D(d);$&&$.l(me),me.forEach(_),X.forEach(_),w=B(N),k&&k.l(N),p=ut(),this.h()},h(){g(e,"class","fw-light"),g(f,"class","form-text"),g(l,"class","col-lg-7"),g(d,"class","col-lg-5"),g(o,"class","row")},m(N,j){q(N,e,j),y(e,r),q(N,n,j),q(N,a,j),y(a,s),q(N,i,j),q(N,o,j),y(o,l),Ue(u,l,null),y(l,c),y(l,f),y(f,m),y(o,E),y(o,d),$&&$.m(d,null),q(N,w,j),k&&k.m(N,j),q(N,p,j),v=!0},p(N,j){N[0].length>0?$?$.p(N,j):($=Xs(N),$.c(),$.m(d,null)):$&&($.d(1),$=null),N[2]&&N[4]?k?(k.p(N,j),j[0]&20&&ue(k,1)):(k=Qs(N),k.c(),ue(k,1),k.m(p.parentNode,p)):k&&(jt(),de(k,1,1,()=>{k=null}),Rt())},i(N){v||(ue(u.$$.fragment,N),ue(k),v=!0)},o(N){de(u.$$.fragment,N),de(k),v=!1},d(N){N&&_(e),N&&_(n),N&&_(a),N&&_(i),N&&_(o),qe(u),$&&$.d(),N&&_(w),k&&k.d(N),N&&_(p)}}}function uh(t,e,r){let n,a=null,s=[],i="",o,l="non_parallel",u,c,f="",m="",E=!1,d=!1,w="",p=!1;function v(){a=null,r(11,p=!1),r(10,w=""),r(0,s=[]),r(1,i=""),r(2,o=null),r(4,u=null),r(7,m="")}function $(){try{r(10,w=""),r(11,p=!1),k==null||k.validateArguments(),r(11,p=!0)}catch(C){r(10,w=Kn(C))}}let k;function N(C){let h;try{h=JSON.parse(C)}catch{throw new Error("File doesn't contain valid JSON")}if(U(h)){if(h.manifest_version!=="2")throw new Error("Unsupported manifest version");if(h.args_schema_version!=="pydantic_v1")throw new Error("Unsupported manifest args schema version");return h}else throw new Error("Invalid manifest format")}function j({detail:C}){C.value===null?v():X(C.value)}function U(C){const h=new br;return h.loadSchema(sh),h.isValid(C)}function X(C){a=C,r(0,s=a.task_list.map(h=>h.name))}async function ee(C=void 0){if(r(7,m=""),r(10,w=""),r(11,p=!1),!i){r(2,o=null),r(4,u=null);return}r(4,u=a.task_list.filter(h=>h.name===i)[0]),r(8,E=ie(u.args_schema_non_parallel)),r(9,d=ie(u.args_schema_parallel)),C?r(3,l=C):E?r(3,l="non_parallel"):r(3,l="parallel"),l==="non_parallel"?r(2,o=u.args_schema_non_parallel):r(2,o=u.args_schema_parallel),await be()}function ie(C){if(!C)return!1;const h=ui(C,n);return Object.keys(h.properties).length>0}function me(){r(10,w=""),r(7,m="");try{r(5,c=JSON.parse(f))}catch{r(5,c=void 0),r(7,m="Invalid JSON")}}async function be(){await jr(),k&&re(k.getArguments())}function H({detail:C}){re(C.value)}function re(C){const h=xt(C),S=JSON.stringify($n(h),null,2);S!==f&&r(6,f=S)}const fe=[[]];function Oe(){i=ai(this),r(1,i),r(0,s)}const le=()=>ee();function Le(){l=this.__value,r(3,l)}const Ie=()=>ee("non_parallel");function Se(){l=this.__value,r(3,l)}const z=()=>ee("parallel");function A(){f=this.value,r(6,f)}function F(C){rr[C?"unshift":"push"](()=>{k=C,r(12,k)})}return r(13,n=pn(!1)),[s,i,o,l,u,c,f,m,E,d,w,p,k,n,$,N,j,ee,me,H,Oe,le,Le,fe,Ie,Se,z,A,F]}class fh extends gt{constructor(e){super(),yt(this,e,uh,ch,ht,{},null,[-1,-1])}}function dh(t){let e,r;return e=new fh({}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function hh(t){let e,r;return e=new Yd({}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function mh(t){let e,r;return e=new Gd({}),{c(){Me(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,a){Ue(e,n,a),r=!0},i(n){r||(ue(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function ph(t){let e,r,n,a,s,i,o,l,u,c,f,m,E,d,w,p,v,$,k,N,j,U,X,ee;const ie=[mh,hh,dh],me=[];function be(H,re){return H[0]==="jschema"?0:H[0]==="version-update"?1:H[0]==="task-manifest"?2:-1}return~(N=be(t))&&(j=me[N]=ie[N](t)),{c(){e=O("nav"),r=O("div"),n=O("a"),a=G("Documentation"),s=K(),i=O("ul"),o=O("li"),l=O("a"),u=G("JSON Schema"),c=K(),f=O("li"),m=O("a"),E=G("Version update"),d=K(),w=O("li"),p=O("a"),v=G("Task manifest"),$=K(),k=O("div"),j&&j.c(),this.h()},l(H){e=T(H,"NAV",{class:!0});var re=D(e);r=T(re,"DIV",{class:!0});var fe=D(r);n=T(fe,"A",{class:!0,href:!0});var Oe=D(n);a=W(Oe,"Documentation"),Oe.forEach(_),s=B(fe),i=T(fe,"UL",{class:!0});var le=D(i);o=T(le,"LI",{class:!0});var Le=D(o);l=T(Le,"A",{class:!0,href:!0});var Ie=D(l);u=W(Ie,"JSON Schema"),Ie.forEach(_),Le.forEach(_),c=B(le),f=T(le,"LI",{class:!0});var Se=D(f);m=T(Se,"A",{class:!0,href:!0});var z=D(m);E=W(z,"Version update"),z.forEach(_),Se.forEach(_),d=B(le),w=T(le,"LI",{class:!0});var A=D(w);p=T(A,"A",{class:!0,href:!0});var F=D(p);v=W(F,"Task manifest"),F.forEach(_),A.forEach(_),le.forEach(_),fe.forEach(_),re.forEach(_),$=B(H),k=T(H,"DIV",{class:!0});var C=D(k);j&&j.l(C),C.forEach(_),this.h()},h(){g(n,"class","navbar-brand"),g(n,"href","https://fractal-analytics-platform.github.io/fractal-web/"),g(l,"class","nav-link"),g(l,"href","#jschema"),ye(l,"active",t[0]==="jschema"),g(o,"class","nav-item"),g(m,"class","nav-link"),g(m,"href","#version-update"),ye(m,"active",t[0]==="version-update"),g(f,"class","nav-item"),g(p,"class","nav-link"),g(p,"href","#task-manifest"),ye(p,"active",t[0]==="task-manifest"),g(w,"class","nav-item"),g(i,"class","navbar-nav me-auto"),g(r,"class","container"),g(e,"class","navbar navbar-expand-lg bg-light mb-3 border-bottom"),g(k,"class","container")},m(H,re){q(H,e,re),y(e,r),y(r,n),y(n,a),y(r,s),y(r,i),y(i,o),y(o,l),y(l,u),y(i,c),y(i,f),y(f,m),y(m,E),y(i,d),y(i,w),y(w,p),y(p,v),q(H,$,re),q(H,k,re),~N&&me[N].m(k,null),U=!0,X||(ee=[oe(l,"click",t[1]),oe(m,"click",t[2]),oe(p,"click",t[3])],X=!0)},p(H,[re]){(!U||re&1)&&ye(l,"active",H[0]==="jschema"),(!U||re&1)&&ye(m,"active",H[0]==="version-update"),(!U||re&1)&&ye(p,"active",H[0]==="task-manifest");let fe=N;N=be(H),N!==fe&&(j&&(jt(),de(me[fe],1,1,()=>{me[fe]=null}),Rt()),~N?(j=me[N],j||(j=me[N]=ie[N](H),j.c()),ue(j,1),j.m(k,null)):j=null)},i(H){U||(ue(j),U=!0)},o(H){de(j),U=!1},d(H){H&&_(e),H&&_($),H&&_(k),~N&&me[N].d(),X=!1,It(ee)}}}function vh(t,e,r){const n=["jschema","version-update","task-manifest"];let a="jschema";return wr(()=>{for(const l of n)if(`#${l}`===location.hash){r(0,a=l);break}}),[a,()=>r(0,a="jschema"),()=>r(0,a="version-update"),()=>r(0,a="task-manifest")]}class yh extends gt{constructor(e){super(),yt(this,e,vh,ph,ht,{})}}export{yh as component};
